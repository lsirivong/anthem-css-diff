{"version":3,"sources":["webpack:///./client/graphql/queries/users.js","webpack:///./client/components/object/video.html","webpack:///./client/components/object/aside.html","webpack:///./client/initializers/editor/doc/subdocs.js","webpack:///./client/lib/iframe_ready.js","webpack:///./client/lib/internal_object_formats/image.js","webpack:///./client/lib/partner_platforms.js","webpack:///./shared/get_story_type.js","webpack:///./client/lib/internal_object_formats/ins.js","webpack:///./client/lib/internal_object_formats/italic.js","webpack:///./client/lib/internal_object_formats/credits.js","webpack:///./client/lib/internal_object_formats/pullquote.js","webpack:///./shared/get_package_stories.js","webpack:///./client/lib/parse_chorus_pagination.js","webpack:///./client/initializers/connection_status.js","webpack:///./client/initializers/defaults/convert_object_format.js","webpack:///./client/components/object/inline-object.html","webpack:///./client/lib/internal_object_formats/dropcap.js","webpack:///./client/lib/internal_object_formats/ad_placement.js","webpack:///./client/initializers/02_socket.js","webpack:///./client/actions/entry.js","webpack:///./client/components/object/ratingcard.html","webpack:///./client/lib/internal_object_formats/html.js","webpack:///./client/actions/users.js","webpack:///./client/lib/ractive-decorator-sticky.js","webpack:///./client/actions/assets.js","webpack:///./client/config/messages.js","webpack:///./shared/thumbor_url.js","webpack:///./shared/subdoc_ids.js","webpack:///./client/lib/request_progress.js","webpack:///./shared/is_package.js","webpack:///./shared/get_event_datetime.js","webpack:///./client/components/object/html.html","webpack:///./client/lib/internal_object_formats/toh_project_details.js","webpack:///./shared/delta/get_offset.js","webpack:///./client/initializers/messages.js","webpack:///./shared/is_stream.js","webpack:///./client/actions/hermano.js","webpack:///./client/lib/internal_object_formats/small.js","webpack:///./shared/is_package_member.js","webpack:///./client/components/object/info-bar.html","webpack:///./shared/content-hash.js","webpack:///./client/lib/ractive-decorator-playgif.js","webpack:///./client/components/object/readmore.html","webpack:///./shared/ottypes/anthem0.js","webpack:///./client/lib/internal_object_formats/leadgraf.js","webpack:///./client/lib/internal_object_formats/bullet.js","webpack:///./client/lib/internal_object_formats/toh_tools.js","webpack:///./client/actions/files.js","webpack:///./client/lib/parse_pagination.js","webpack:///./client/actions/publish.js","webpack:///./client/components/object/imageslider.html","webpack:///./client/initializers/00_polyfills.js","webpack:///./client/lib/errors/graphql_error.js","webpack:///./client/lib/internal_object_formats/grouping.js","webpack:///./client/lib/internal_object_formats/pym.js","webpack:///./client/lib/play_gif.js","webpack:///./client/components/object/poll.html","webpack:///./shared/is_link_post.js","webpack:///./client/components/object/newsletter.html","webpack:///./client/vendor/ractive-events-keys.js","webpack:///./client/config/doc_labels.js","webpack:///./client/components/object/toh-tools.html","webpack:///./client/lib/internal_object_formats/ratingcard.js","webpack:///./client/lib/internal_object_formats/secondheader.js","webpack:///./client/lib/internal_object_formats/endmark.js","webpack:///./client/lib/internal_object_formats/br.js","webpack:///./client/components/object/gallery.html","webpack:///./client/lib/authorization.js","webpack:///./client/object.js","webpack:///./client/actions/docs.js","webpack:///./client/lib/worker_queue.js","webpack:///./client/components/object/image.html","webpack:///./client/lib/internal_object_formats/autolink.js","webpack:///./client/initializers/01_state.js","webpack:///./client/lib/thumbor_url.js","webpack:///./client/lib/internal_object_formats/link.js","webpack:///./client/components/object/table.html","webpack:///./client/lib/is_published.js","webpack:///./shared/delta/get_objects.js","webpack:///./client/graphql/queries/communities.js","webpack:///./client/app.js","webpack:///./client/lib/internal_object_formats/doc.js","webpack:///./shared/delta/is_empty.js","webpack:///./shared/is_customstory.js","webpack:///./client/lib/errors/http_status_error.js","webpack:///./client/lib/graphql_request.js","webpack:///./client/components/object/productcard.html","webpack:///./client/components/object/toh-project-details.html","webpack:///./client/lib/internal_object_formats/position.js","webpack:///./client/components/404.html","webpack:///./client/initializers/editor/presence.js","webpack:///./client/lib/internal_object_formats/fifthheader.js","webpack:///./client/lib/get_doc_label.js","webpack:///./client/lib/internal_object_formats/superscript.js","webpack:///./shared/calculate_crop.js","webpack:///./shared/is_mapstack.js","webpack:///./client/lib/internal_object_formats/oembed.js","webpack:///./client/lib/internal_object_formats/blockquote.js","webpack:///./client/lib/internal_object_formats/fourthheader.js","webpack:///./client/components/object/actionbox.html","webpack:///./client/lib/internal_object_formats/video.js","webpack:///./shared/is_page.js","webpack:///./client/lib/internal_object_formats/hr.js","webpack:///./client/lib/wait.js","webpack:///./client/routes/notfound.js","webpack:///./client/actions/autosave.js","webpack:///./client/initializers/error_catcher.js","webpack:///./client/actions/editor.js","webpack:///./client/components/object/credits.html","webpack:///./client/middleware/analytics.js","webpack:///./client/lib/internal_object_formats/subscript.js","webpack:///./client/initializers/sentry.js","webpack:///./client/initializers/prevent_backspace.js","webpack:///./client/initializers/router.js","webpack:///./client/lib/internal_object_formats/firstheader.js","webpack:///./client/lib/render_component.js","webpack:///./client/lib/table_has_data.js","webpack:///./client/lib/internal_object_formats/actionbox.js","webpack:///./client/lib/quill/to_internal_html.js","webpack:///./client/lib/internal_object_formats/bold.js","webpack:///./client/lib/internal_object_formats/strike.js","webpack:///./client/components/object/oembed.html","webpack:///./client/lib/internal_object_formats/readmore.js","webpack:///./client/lib/clean_html.js","webpack:///./client/lib/request.js","webpack:///./client/lib/internal_object_formats/id.js","webpack:///./client/middleware/querystring.js","webpack:///./client/initializers/new_user.js","webpack:///./client/lib/ga.js","webpack:///./client/actions/messages.js","webpack:///./client/lib/internal_object_formats/object.js","webpack:///./client/lib/is_valid_url.js","webpack:///./shared/delta/get_word_count.js","webpack:///./client/actions/images.js","webpack:///./client/lib/internal_object_formats/newsletter.js","webpack:///./shared/to_rich_text.js","webpack:///./shared/sentence_case.js","webpack:///./client/initializers/defaults/contents_defaults.js","webpack:///./client/actions/sentry.js","webpack:///./client/components/object/pullquote.html","webpack:///./client/lib/internal_object_formats/index.js","webpack:///./client/lib/internal_object_formats/list.js","webpack:///./client/lib/is_shortlink.js","webpack:///./client/lib/resize_object.js","webpack:///./client/lib/ractive-decorator-activefield.js","webpack:///./client/initializers/announcements.js","webpack:///./client/initializers/ractive.js","webpack:///./client/actions/modals.js","webpack:///./client/actions/communities.js","webpack:///./shared/is_gif.js","webpack:///./client/lib/strip_protocol.js","webpack:///./client/initializers/defaults/base_contents.js","webpack:///./client/lib/internal_object_formats/del.js","webpack:///./client/components/object/scorecard.html","webpack:///./client/lib/internal_object_formats/mark.js","webpack:///./client/lib/ractive-decorator-autosize.js","webpack:///./client/lib/internal_object_formats/thirdheader.js","webpack:///./client/components/object/pym.html","webpack:///./client/lib/anthem0.js"],"names":["Ractive","require","component","module","exports","data","video","computed","src","this","get","url","app","config","volumeEmbedUrl","uuid","playerType","template","v","t","p","e","a","allowfullscreen","r","extend","doc","content","head","contents","body","f","docId","state","select","schema_name","on","loadSubdocs","difference","autosave","docActions","getSubdocIds","currentSubdocIds","map","id","docSubdocIds","addedSubdocIds","length","searchDocs","ids","join","then","docs","setAndInitDoc","iframeIsReady","iframe","contentDocument","URL","readyState","Promise","reject","Error","resolve","interval","timeout","setInterval","clearInterval","clearTimeout","setTimeout","err","getAllDocObjects","reduce","objects","object","warnings","getWarnings","push","message","getMessageForWarnings","status","platform","includes","warningForStatus","partnerPlatforms","STRIPPED_SCHEMA_NAMES","STATUS_MESSAGES","STRIP","BLOCK","plural","oembed","type","Object","keys","provider","html","schemaName","provider_name","hostname","toLowerCase","googleAMP","validateProvider","google_amp","blocklist","validateHTML","validateSubdoc","allowlist","googleAMPStatus","appleNews","apple_news","appleNewsStatus","providers","some","selector","div","document","createElement","innerHTML","querySelectorAll","isMapstack","isStream","isLinkPost","isPackage","isPage","isCustomstory","tag","assign","prepare","flatten","toc","section","stories","response","page","current_page","perPage","per_page","total","item_count","totalPages","Math","ceil","set","socket","onDisconnect","onReconnect","onReconnectFailure","contentApiSocket","forceDisconnect","window","addEventListener","unloading","messages","messageActions","reconnectingMessageId","reason","disconnect","showMessage","dismissible","RELOAD_STALE_TAB","shouldUpdateMessage","RECONNECTING","socketType","disconnected","connect","removeMessage","RECONNECT_ERROR","delta","changes","has","convertObjects","draft","o","pros","cons","mapPoints","map_points","i","mapPoint","entries","pick","omit","Delta","OBJECT_TYPES","properties","fixDelta","op","ops","insert","delete","attributes","retain","chop","debounce","resizeObject","cursors","docLabel","newsletters","modal","overlay","isSubframe","isCollapsed","isSelected","subdoc","objectType","objectData","canEdit","hasOwnProperty","isEditorContext","wrapperClass","hideWarning","oninit","setInitialState","setInitialHeightData","classList","add","frameElement","listenTo","expand","onrender","frameId","dataset","parent","isChecklist","hasFixedHeight","hasAttribute","subdocs","find","isSmallScreen","documentElement","isInitialEditorLoad","remove","origin","event","payload","top","location","innerWidth","n","x","s","size","name","actionbox","image","newsletter","pullquote","ratingcard","readmore","credits","toh_project_details","toh_tools","pym","components","table","scorecard","poll","productcard","imageslider","gallery","aside","splitAffinity","node","value","setAttribute","toString","removeAttribute","dropcap","match","tagName","attribute","ssl","host","defaults","transports","reconnectionAttempts","sockets","reconnectAttempts","createSocket","path","request","href","slugOrId","isShortlink","pathname","substring","query","community_id","opts","handleError","_embedded","entry","parsePagination","q","published","params","entry_id","method","trackProgress","catch","ratingCardMaxStars","stars","rating","max","floor","lastSeen","moment","utc","lastPosted","announcements","last_announcement_posted_at","isBefore","updateAnthemUser","lastAnnouncementSeenAt","toISOString","async","communityId","currentUser","graphqlRequest","UserChorusVideo","variables","scopeId","canAccessChorusVideo","CurrentUser","accessRoles","getPath","policyRoles","memberships","filter","membership","roles","role","fullOrUserName","user","UserTwitterHandle","twitterUsername","UserName","users","UserNames","uniq","UserNamesTitles","lastRead","now","lastAnnouncementReadAt","first","first_name","last","last_name","username","sticky","pinSelector","endSelector","anchorToTop","pinContainer","querySelector","endPoint","toggleSticky","nodeRect","getBoundingClientRect","nextRect","nextElementSibling","pinRect","endRect","stickyConditional","height","toggle","abs","bottom","teardown","removeEventListener","ALLOWLIST_CONFIG","assetIsAllowlisted","asset","title","ALT_TEXT_OVER_LIMIT","replace","credit","cleanHTML","imageAttributes","updateAsset","source","caption","MERLIN_API_DOWN","createAsset","entitlements","sources","network_id","deleted","key","withHeaders","result","pagination","parseInt","headers","NETWORK_ASSETS_ACCESS_DENIED","GETTY_API_DOWN","snapshot","onProgress","flash","UNSUPPORTED_ASSET_TYPE","formData","FormData","append","fileActions","setParams","forOwn","val","isGif","file","remote_file_url","endsWith","requestProgress","handleUploadError","anyInvalidAssets","Array","from","files","UPLOAD_INVALID_FILE","urlPattern","mimeTypes","showError","UNEXPECTED","FILE_TOO_LARGE","GIF_TOO_LARGE","IMAGE_TOO_LARGE","APPLE_NEWS_MEMBERS_ONLY_WARNING","COMMUNITY_CHANGED","CSV_TOO_LARGE","DATA_LINKS_ERROR","DRAFT_HERMANO_RECORD","EMBARGOED","HIDDEN","FEEDBACK_SENT","GIF_IN_IMAGE_CARD","IMAGE_IN_GALLERY","INVALID_LINK_MESSAGE","INVALID_SPREADSHEET_URL","INVALID_STREAM_MEMBERSHIP","MISSING_LEGACY_ENTRY","NEW_USER_MESSAGE","OEMBED_GENERIC_ERROR","OEMBED_INSECURE_ERROR","OEMBED_SUPPORT_ERROR","OEMBED_PDF_SUPPORT_ERROR","OEMBED_YOUTUBE_SUPPORT_ERROR","PLAGSCAN_ERROR","PLAGSCAN_LOW_WORD_COUNT","PLAGSCAN_OUT_OF_DATE","PLAGSCAN_RETRIEVED","PLAGSCAN_SUBMITTED","PLAGSCAN_UNSCANNED","PUBLISH_PACKAGE_ACTIVE_MESSAGE","PUBLISH_PACKAGE_WARNING_MESSAGE","PYM_EMBED_GENERIC_ERROR","PYM_EMBED_INSECURE_ERROR","PYM_EMBED_SUPPORT_ERROR","REALTIME_ERROR","RELOAD_REQUIRED","REQUIRED_FIELD","RESCUE_SAVED_REASSURE","SEND_TO_PRINT_SUCCESS","SHEET_PERMISSIONS","STRUCTURED_TAGS_ERROR","TOO_MANY_EDITORS","UNSAVED_WARNING","UPLOAD_TOO_MANY_FILES","createHash","bind","createHmac","options","urlParts","meta","trim","trimOptions","crop","width","originalWidth","original_width","originalHeight","original_height","center","isArray","centerX","centerY","newAspectRatio","originalAspectRatio","croppedHeight","round","topCropPoint","bottomCropPoint","croppedWidth","leftCropPoint","rightCropPoint","calculateCenteredCrop","cropLeft","cropTop","cropRight","cropBottom","fit","fit_in","full_fit_in","flip","flop","hasWidth","hasHeight","calculateSize","halign","valign","smart","filters","generateUrl","signature","update","digest","main_gallery","xhr","XMLHttpRequest","Accept","handleXhrError","error","onerror","ontimeout","onload","HttpStatusError","JSON","parse","upload","loaded","open","withCredentials","h","setRequestHeader","send","history","eventTypes","latest","slice","reverse","indexOf","event_type","backdated_date","date","isValid","offset","forceRefresh","emit","entry_layout","hermanoId","urlFromType","cache","network","prefixForType","display_type","record","prefix","keywords","item","hermano_id","sentenceCase","toInlineHtml","isEmpty","imageActions","largeGIFWarning","titleName","warning","HAS_HTML_WARNING_OBJECT","getMessage","getImageCaption","getTableCaption","getVideoCaption","getGalleryTitle","metadata","getGalleryMetadata","getTableMetadata","getGIFWarning","images","hide_credit","rows","getImage","validatePartnerPlatformsImageSize","design","viewBox","version","xmlns","stroke","fill","transform","points","stringify","md5","playGIF","playgif","json0","registerSubtype","leadgraf","parentTag","exclusive","inherit","target","modalActions","pushModal","editObject","editorActions","insertAtCaret","getFileDelta","insertAtMouseEvent","assetActions","saveAsset","selectAsset","link","deskName","publishOrSchedule","publishScheduledFor","toPlaintext","isPublished","getPackageStories","getWordCount","getEventDatetime","sentryActions","package_toc","all","promises","story","packageDoc","publishOrScheduleDoc","reportError","scheduleDoc","publishDoc","eventName","ga","publish_history","firstPublishedDate","lastPublishedDate","isRepublish","formatDate","format","hitType","eventCategory","eventAction","dimension1","dimension4","contributors","chorus_id","dimension5","dimension8","dimension10","site_groups","g","dimension11","dimension12","dimension26","Date","getHours","dimension35","dimension36","hed","dimension37","internal_title","dimension38","seo_title","dimension39","social_title","dimension40","dimension53","trackPublishOrScheduleEvent","eventType","publish_scheduled_for","updateDoc","oi","od","pubHistoryUpdate","user_id","userId","origin_community_id","destination_community_id","scheduled_date","index","li","thumborUrl","imageLeft","imageRight","GraphQLError","errors","call","captureStackTrace","stack","constructor","prototype","create","elements","settings","off","autoResize","circleBackgroundColor","circleTextColor","gifText","removeAnchor","drawGIFOverlay","context","y","fillStyle","beginPath","arc","PI","closePath","font","textAlign","textBaseline","fillText","gif","test","canvas","getContext","img","Image","startAnimation","b","style","parentNode","replaceChild","stopAnimation","offsetWidth","offsetHeight","drawImage","styles","getComputedStyle","faux","float","margin","padding","position","display","left","appendChild","parentStyles","maxWidth","maxHeight","opt","factory","makeKeyDefinition","code","fire","keydownHandler","which","keyCode","preventDefault","original","events","enter","tab","escape","space","leftarrow","rightarrow","downarrow","uparrow","define","endmark","reverseMerge","contains","playGif","thumbnailUrl","observe","hasRoleOnCommunity","networkRoles","m","membershipAuthorized","community","hasPolicyRole","objectOperation","isNetworkAdmin","isCommunityPostAuthor","Baobab","initRactive","renderComponent","res","dragging","generateClick","stopPropagation","MouseEvent","bubbles","cancelable","dispatchEvent","env","deepClone","InlineObject","init","loadCSSManually","shimStyles","publishActions","unschedule","newCommunityHandle","communityActions","getCommunity","twitterScreenName","currentCommunityHandle","republishPublished","entryActions","updateEntry","createDoc","entry_type","types","subdocsForDoc","concat","mainOembed","main_oembed","force","searchText","queryWithUrlParsedOut","parseUrlsFromQuery","parsedQuery","userIds","c","userActions","getUsers","compact","u","formattedQuery","formatParsedQuery","archived","publishHistoryType","prevTrashedAt","nextTrashedAt","promise","updateEntryFlags","trashed_at","returnErrors","returnWarnings","returnValid","newQuery","cloneDeep","terms","split","memo","term","isValidUrlWithSlash","undefined","keywordQueries","phrases","tokens","formatted","keyword","subdocIds","queue","isProcessing","callback","args","shift","dom","nodeType","Node","ELEMENT_NODE","span","ownerDocument","wrap","disabled","getAttribute","quills","initialState","dynamicNode","docsById","packageDocs","isPackageMember","docMissingEntry","readOnly","autosaveError","trashedAt","socketError","getDocLabel","subdocLabel","appWorking","autosaveDirty","requestInProgress","pure","immutable","getThumborUrl","thumbor","tableHasData","rx","Emitter","EventEmitter2","initPolyfills","initState","initSocket","initConnectionStatus","initErrorCatcher","initPreventBackspace","initRouter","initSentry","initAnnouncements","initMessages","initNewUser","App","setMaxListeners","anthemUser","getCurrentUser","router","start","render","Component","previousRoot","rootComponent","toInternalHtml","calculateCrop","subject","w","description","retailers","retailer","price","sale_price","pricing","salePrice","percent","skillLevels","skill","skillLevel","d","room","greetUsers","cursor","addUser","newUser","socketId","oldUser","initAnthemServerPresence","initContentApiServerPresence","getStoryType","DOC_LABELS","ratio","min","howLong","NotFound","getDocIds","inFlight","reconnectingIds","sequence","getDocCursor","fetchNewPackets","remoteUpdate","unset","markError","localUpdate","resolveOnClean","docInState","initializingIds","setDoc","initDoc","throttle","setPath","OT","initPresence","setBaseContents","initSubdocs","hash","WorkerQueue","storage","localStorage","fatalError","userCursor","dirty","inLine","sentIds","quillContentPaths","MESSAGE_RESCUE_VERSION","rescueKey","messageKey","validateId","doc_id","markDirty","reportToSentry","applyDelta","apply","base","compose","sendIfReady","storeRescueVersion","sendUpdate","autosaveThrottle","leading","trailing","composed","docCursor","sequenceCursor","contentsCursor","packetUuid","v4","content_hash","schema_version","retry","delay","maxDelay","removeItem","markClean","clone","json","packets","packet","retryAfterRebase","saveRescueVersion","quill","getContents","setItem","end_sequence","flashNow","getItem","resp","docUuid","setNextFlash","checkForRescue","getNextFlash","isDirty","dirtyState","publishHistory","legacyPubEventIndex","findIndex","legacyPubEvent","ld","removeLegacyPubEvent","_shouldQueueRemoteUpdates","_remoteUpdateQueue","applyRemoteUpdate","sequences","areSequential","every","process","pullMissingPackets","original_name","missed_packets","right","once","previousHandler","arguments","range","selection","getSelection","rangeParent","rangeOffset","createRange","setStart","caretRangeFromPoint","clientX","clientY","Range","removeAllRanges","addRange","root","focus","lineId","lineOffset","getOffset","updateContents","setSelection","sel","ctx","next","sendPageview","sentry","userContext","dsn","Sentry","release","environment","integrations","ExtraErrorData","depth","allowUrls","ALLOW_URLS","configureScope","scope","setUser","doPrevent","srcElement","isContentEditable","toUpperCase","action","componentInstance","scrollTo","columns","row","toHtml","formats","srcdoc","handleIframe","contentWindow","twttr","FB","Event","subscribe","allowFullscreen","load","removeWhitespace","pattern","nodeValue","hasChildNodes","tmp","removeChild","reqOpts","parsed","loadOpts","merge","qs","wait","STORAGE","checkStatus","ok","returnWithHeaders","cacheKey","getCacheKey","fetch","parseBody","accepts","text","console","warn","defaultReqOpts","credentials","defaultOpts","requestOpts","querystring","hasLoggedIn","createdOn","isAfter","NEW_USER_MARK","sendEvent","label","findMessageIndex","splice","hasError","isError","DEFAULTS","storageKey","validatePersistence","USE_FIXED_HEIGHT","num","win","numParents","className","containsComma","containsSpaceEncoding","isLocalFile","LOOKS_LIKE_URL","words","localImage","editImage","validateImageUrl","ID_FROM_CDN_URL_PATTERN","idFromUrl","assetId","chorusImage","chorus_asset_id","imageFromData","oldImage","buildImageHistoryDelta","resolveOnLocalUpdate","updateImageHistory","insertObject","imageType","progress","uploadAsset","uploadImageUrl","uploadAssets","bytes","maxSize","parseFloat","HAS_IMAGE_HISTORY","setCropData","setSourceData","getModal","tail","letterbox","mask_text","imageHistory","string","str","toRichText","storyContents","dek","slug","teaser","entry_password","autotweets","disable_ads","do_not_distribute","hide_from_amp","is_restricted_in_privacy_consent_region","noindex","nofollow","paywalled","affiliate_link_rewriting_disabled","super_groups","campaign_groups","whitelisted_network_ids","additional_byline","internal_description","social_description","seo_description","canonical_url_override","structured_tags","embargoed","hidden","image_history","print_slug","customstoryContents","sort_column","sort_descending","searchable","sortable","google_spreadsheet_url","upload_filename","close_date","google_critic_snippet","platform_scores","scorecardContents","captureMessage","captureException","tags","error_name","extra","bold","italic","mark","strike","superscript","subscript","firstheader","secondheader","thirdheader","fourthheader","fifthheader","bullet","list","blockquote","ins","del","br","autolink","grouping","ad_placement","hr","small","blockTag","formatOrder","domain","RegExp","frame","scrollHeight","activefield","placeholder","setClasses","hasFocus","hasContent","textContent","onFocus","onBlur","onInput","activeElement","observer","MutationObserver","characterData","subtree","defer","acknowledgeAnnouncements","debug","isolated","modifyArrays","self","wrapped","obj","useCapture","listenToOnce","decorators","onconstruct","watcher","watch","syncCursor","refreshIframeComponent","paths","iframeKey","newValue","current","closeModal","isEqual","acc","Boolean","getEntitlements","getChorusVideoAccess","autoTagging","autotagTagTypes","communityQueries","autolinkTagTypes","tagType","search","preview_url","contentsDefaults","convertObjectFormat","hermanoActions","displayScore","score","scoreHeading","imageForRecord","getRecord","autosize","iframeReady","autosizeIframe","resize","el","overflow","childList","autosizeTextarea","destroy","op1","op2","side"],"mappings":"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","file":"commons.15f4257a22bdb0ed0d71.0.js","sourcesContent":["export const CurrentUser = `\n  query CurrentUser($size: String!) {\n    currentUser {\n      id\n      createdOn\n      fullOrUserName\n      email\n      timeZone\n      networkRoles\n      memberships: communityMemberships {\n        status\n        roles\n        community {\n          id\n          name\n          faviconUrl\n          network {\n            id\n            name\n            svgLogo: siteConfigString(key: \"svg_small_mark_full_color\")\n          }\n        }\n      }\n      networkMemberships {\n        networkId\n        imageUrl(size: $size)\n        network {\n          primaryCommunity {\n            id\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const UserChorusVideo = `\n  query UserChorusVideo($scopeId: Int!) {\n    currentUser {\n      canAccessChorusVideo(scopeType: COMMUNITY, scopeId: $scopeId)\n    }\n  }\n`;\n\nexport const UserTwitterHandle = `\n  query UserTwitterHandle($id: Int!) {\n    user(id: $id) {\n      twitterUsername\n    }\n  }\n`;\n\nexport const UserName = `\n  query UserName($id: Int!) {\n    user(id: $id) {\n      id\n      fullOrUserName\n    }\n  }\n`;\n\nexport const UserNames = `\n  query UserNames($ids: [Int!]!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n    }\n  }\n`;\n\nexport const UserNamesTitles = `\n  query UserNamesTitles($ids: [Int!]!, $communityId: Int!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n      authorProfile(communityId: $communityId) {\n        title\n      }\n    }\n  }\n`;\n\nexport const SearchContributors = `\n  query SearchContributors($text: String!, $communityId: Int!) {\n    searchUsers(query: {\n      text: $text,\n      prefix: true,\n      communityIds: [$communityId],\n      roles: [FREELANCE, AUTHOR, TRUSTED_AUTHOR, EDITOR, MANAGER],\n      fallbackNetworkRoles: [NETWORK_ADMIN, NETWORK_EDITOR],\n      statuses: [ACTIVE, PROVISIONAL, PERMISSIONS_SUSPENDED],\n      perPage: 25\n    }) {\n      results {\n        id\n        fullOrUserName\n        username\n      }\n    }\n  }\n`;\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  data: {\n    video: null\n  },\n  computed: {\n    src: function() {\n      var video = this.get('video');\n      var url = `${app.config.volumeEmbedUrl}/${video.uuid}`;\n      if (video.playerType) {\n        url += `?player_type=${video.playerType}`;\n      }\n      return url;\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"iframe\",a:{allowfullscreen:0,src:[{t:2,r:\"src\",p:[1,30,29]}]}}]};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\nimport toInternalHtml from '../../lib/quill/to_internal_html';\n\ncomponent.exports = {\n  data: {\n    doc: null\n  },\n  computed: {\n    content: function() {\n      var doc = this.get('doc');\n      return toInternalHtml(doc.head.contents.body);\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"aside-inner\"},f:[{t:3,r:\"content\",p:[1,26,25]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var { difference } = require('lodash');\nvar autosave = require('../../../actions/autosave');\nvar docActions = require('../../../actions/docs');\nvar getSubdocIds = require('../../../../shared/subdoc_ids');\n\nexport default function initSubdocs(docId) {\n  var doc = app.state.select(['autosave', 'docsById', docId]);\n  if (doc.get().schema_name === 'story') {\n    doc.on('update', () => {\n      if (doc.get()) {\n        loadSubdocs(doc.get());\n      }\n    });\n    loadSubdocs(doc.get());\n  }\n}\n\nfunction loadSubdocs(doc) {\n  // initialize new subdocs to receive their remote updates\n  var currentSubdocIds = app.state.get(['subdocs']).map(({ id }) => id);\n  var docSubdocIds = getSubdocIds(doc.head.contents);\n  var addedSubdocIds = difference(docSubdocIds, currentSubdocIds);\n\n  if (addedSubdocIds.length === 0) {\n    return;\n  }\n\n  docActions.searchDocs({\n    ids: addedSubdocIds.join(',')\n  }).then(({ docs }) => {\n    docs.map(doc => autosave.setAndInitDoc(doc));\n  });\n}\n","export default function iframeReady(iframe) {\n  if (!iframe) {\n    return Promise.reject(new Error('iframeReady(): argument must not be ' + iframe));\n  }\n\n  return new Promise((resolve, reject) => {\n    var interval = null;\n    var timeout = null;\n\n    try {\n      if (iframeIsReady(iframe)) {\n        return resolve();\n      }\n\n      // Poll iframe every 50ms to see if ready\n      interval = setInterval(() => {\n        if (iframeIsReady(iframe)) {\n          clearInterval(interval);\n          clearTimeout(timeout);\n          resolve();\n        }\n      }, 50);\n\n      // Timeout after 10 seconds\n      timeout = setTimeout(() => {\n        clearInterval(interval);\n        reject(new Error('iframeReady(): timed out waiting for iframe to become ready'));\n      }, 10000);\n    } catch (err) {\n      clearInterval(interval);\n      clearTimeout(timeout);\n      reject(err);\n    }\n  });\n}\n\n// An iframe is deemed ready if:\n// A) The document is not blank\n// B) The DOM is `interactive` or all markup and content has been rendered\nfunction iframeIsReady(iframe) {\n  var doc = iframe.contentDocument;\n  return (\n    doc &&\n    doc.URL !== 'about:blank' &&\n    (doc.readyState === 'interactive' || doc.readyState === 'complete')\n  );\n}\n","module.exports = require('./object')('image');\n","var config = app.config.partnerPlatforms;\nvar docActions = require('../actions/docs');\n\nconst STRIPPED_SCHEMA_NAMES = ['poll'];\n\nconst STATUS_MESSAGES = {\n  STRIP: 'will be stripped out on',\n  BLOCK: 'will block this story from'\n};\n\n// When building the object iframe, we can get the message directly because we know\n// we don't need a pluralized message\nexport function getMessage(object) {\n  var warnings = getWarnings(object);\n  return getMessageForWarnings(warnings);\n}\n\n// Format the appropriate message for set of warnings, allowing for pluralization\nexport function getMessageForWarnings(warnings, plural = false) {\n  if (!warnings) {\n    return '';\n  }\n  return `${plural ? 'These' : 'This'} ${warnings}.`;\n}\n\nexport function getAllDocWarnings(doc) {\n  return docActions.getAllDocObjects(doc, ['oembed', 'doc']).reduce((objects, object) => {\n    var warnings = getWarnings(object);\n    if (warnings) {\n      objects.push({ object, message: warnings });\n    }\n    return objects;\n  }, []);\n}\n\nexport function hasStatus(message, status, platform) {\n  return message.includes(warningForStatus(status, platform));\n}\n\n// When a warning message may apply to multiple objects, we get the warnings\n// separately from formatting the full message\nfunction getWarnings(object) {\n  var type = Object.keys(object)[0];\n  var provider = '';\n  var html = '';\n  var schemaName = '';\n  if (type === 'oembed') {\n    // use the url hostname as a fallback if the provider name isn't present\n    provider = getProvider(object.oembed);\n    html = object.oembed.html || '';\n  } else if (type === 'doc') {\n    schemaName = object.doc.type;\n  }\n\n  var googleAMP = googleAMPStatus(provider, html, schemaName);\n  var appleNews = appleNewsStatus(provider, html, schemaName);\n\n  if (!googleAMP && !appleNews) {\n    return '';\n  } else if (googleAMP === appleNews) {\n    return warningForStatus(googleAMP, 'Google AMP and Apple News');\n  }\n\n  var warnings = [];\n  if (googleAMP) {\n    warnings.push(warningForStatus(googleAMP, 'Google AMP'));\n  }\n  if (appleNews) {\n    warnings.push(warningForStatus(appleNews, 'Apple News'));\n  }\n  return warnings.join(' and ');\n}\n\nfunction getProvider(oembed) {\n  return (oembed.provider_name || new URL(oembed.url).hostname || '').toLowerCase();\n}\n\nfunction warningForStatus(status, platform) {\n  return STATUS_MESSAGES[status] + ' ' + platform;\n}\n\nfunction validateProvider(providers, provider) {\n  // because we use the hostname as a fallback, the config provider\n  // may be a substring of the hostname\n  return providers.some((p) => provider.includes(p));\n}\n\nfunction validateHTML(selector, html) {\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  return div.querySelectorAll(selector).length > 0;\n}\n\nfunction validateSubdoc(schemaName) {\n  return STRIPPED_SCHEMA_NAMES.includes(schemaName);\n}\n\nfunction googleAMPStatus(provider, html, schemaName) {\n  if (!app.state.get(['community', 'publishForGoogleAmp'])) {\n    return;\n  } else if (\n    validateProvider(config.google_amp.blocklist, provider) ||\n    validateHTML('iframe[src^=\"http://\"]', html)\n  ) {\n    return 'BLOCK';\n  } else if (\n    provider === 'vox media' &&\n    !validateHTML('div[data-iframe^=\"https://\"]', html)\n  ) {\n    // Block story if vox media embed code is missing iframe for AMP\n    // Embed rules: https://github.com/voxmedia/voxmedia-middleman-shared/wiki/Embeddable-graphics-and-partner-platforms\n    return 'BLOCK';\n  } else if (\n    validateSubdoc(schemaName) ||\n    (\n      provider && // an empty provider shouldn't pass this test\n      !validateProvider(config.google_amp.allowlist, provider) &&\n      !validateHTML('iframe[src^=\"https://\"]', html) &&\n      !validateHTML('iframe[src^=\"//\"]', html)\n    )\n  ) {\n    return 'STRIP';\n  }\n}\n\nfunction appleNewsStatus(provider, html, schemaName) {\n  if (!app.state.get(['community', 'publishForAppleNews'])) {\n    return;\n  } else if (\n    validateProvider(config.apple_news.blocklist, provider) ||\n    validateHTML('iframe[src*=\"docs.google.com\"]', html) // multiple providers may use google docs iframes\n  ) {\n    return 'STRIP';\n  } else if (\n    provider === 'vox media' &&\n    !validateHTML('div[data-iframe-fallback^=\"https://\"]', html)\n  ) {\n    // Block story if vox media embed code is missing image fallback for Apple News\n    // Embed rules: https://github.com/voxmedia/voxmedia-middleman-shared/wiki/Embeddable-graphics-and-partner-platforms\n    return 'STRIP';\n  } else if (\n    validateSubdoc(schemaName) ||\n    (\n      provider && // an empty provider shouldn't pass this test\n      !validateProvider(config.apple_news.allowlist, provider)\n    )\n  ) {\n    return 'STRIP';\n  }\n}\n","var isMapstack = require('./is_mapstack');\nvar isStream = require('./is_stream');\nvar isLinkPost = require('./is_link_post');\nvar isPackage = require('./is_package');\nvar isPage = require('./is_page');\nvar isCustomstory = require('./is_customstory');\n\nmodule.exports = function getStoryType(contents) {\n  if (isMapstack(contents)) {\n    return 'mapstack';\n  } else if (isStream(contents)) {\n    return 'stream';\n  } else if (isLinkPost(contents)) {\n    return 'link';\n  } else if (isPackage(contents)) {\n    return 'package';\n  } else if (isPage(contents)) {\n    return 'page';\n  } else if (isCustomstory(contents)) {\n    return 'custom story';\n  }\n  return 'story';\n};\n","module.exports = { tag: 'INS' };\n","var italic = { tag: 'EM' };\nmodule.exports = Object.assign({}, italic, { prepare: 'italic' });\n","module.exports = require('./object')('credits');\n","module.exports = require('./object')('pullquote');\n","var flatten = require('lodash').flatten;\n\nmodule.exports = function getPackageStories(toc) {\n  return flatten(toc.map(section => section.stories));\n};\n","module.exports = function(response) {\n  var page = response.current_page;\n  var perPage = response.per_page;\n  var total = response.item_count;\n  var totalPages = (total === 0) ? 1 : Math.ceil(total / perPage);\n\n  return { page, perPage, total, totalPages };\n};\n","var messages = require('../config/messages');\nvar messageActions = require('../actions/messages');\n\nlet unloading = false;\nlet reconnectingMessageId = null;\n\n// Official socket.io message for a manual client disconnect\n// See: https://github.com/socketio/socket.io-client/blob/master/docs/API.md#event-disconnect\nconst CLIENT_DISCONNECT = 'io client disconnect';\n\n// Force disconnect reasons\nconst STALE_TAB = 'stale-tab';\n\nexport default function connectionStatus() {\n  app.state.set('connected', true);\n\n  // Socket disconnect/reonnect\n  app.socket.on('disconnect', onDisconnect);\n  app.socket.on('reconnect', () => onReconnect('socket'));\n  app.socket.on('reconnect_failed', onReconnectFailure);\n\n  // Content API socket disconnect/reconnect\n  app.contentApiSocket.on('disconnect', onDisconnect);\n  app.contentApiSocket.on('reconnect', () => onReconnect('contentApiSocket'));\n  app.contentApiSocket.on('reconnect_failed', onReconnectFailure);\n\n  // Manually disconnect socket connections to servers when prompted\n  app.on('sockets.disconnect', forceDisconnect);\n\n  // prevent firefox from showing `Reconnecting...` message when navigating away\n  window.addEventListener('beforeunload', () => {\n    unloading = true;\n  });\n}\n\nfunction forceDisconnect(reason) {\n  app.socket.disconnect();\n  app.contentApiSocket.disconnect();\n  app.state.set(['connected'], false);\n  app.state.set(['socketError'], true);\n\n  if (reason === STALE_TAB) {\n    messageActions.showMessage({\n      type: 'negative',\n      dismissible: false,\n      message: messages.RELOAD_STALE_TAB\n    });\n  }\n}\n\nfunction onDisconnect(reason) {\n  // If we've manually disconnect socket connections to the servers don't bother\n  // with the reconnect notice since we want the user to refresh\n  if (reason === CLIENT_DISCONNECT) {\n    return;\n  }\n\n  var shouldUpdateMessage = (\n    app.state.get(['connected']) &&\n    !unloading &&\n    !reconnectingMessageId\n  );\n\n  app.state.set(['connected'], false);\n  if (shouldUpdateMessage) {\n    reconnectingMessageId = messageActions.showMessage({\n      type: 'cautionary',\n      message: messages.RECONNECTING\n    });\n  }\n}\n\nfunction onReconnect(socketType) {\n  // try to reconnect the socket if necessary\n  if (app[socketType].disconnected) {\n    app[socketType].connect();\n  }\n\n  var shouldUpdateMessage = (\n    !app.state.get(['connected']) &&\n    !unloading &&\n    reconnectingMessageId\n  );\n\n  app.state.set(['connected'], true);\n  if (shouldUpdateMessage) {\n    messageActions.removeMessage(reconnectingMessageId);\n    reconnectingMessageId = null;\n  }\n}\n\n// If we fail to reconnect after the set retry amount, notify the user\nfunction onReconnectFailure() {\n  // `socketError: true` will trigger a readOnly state on editor pages\n  app.state.set(['socketError'], true);\n  messageActions.removeMessage(reconnectingMessageId);\n  messageActions.showMessage({\n    type: 'negative',\n    dismissible: false,\n    message: messages.RECONNECT_ERROR\n  });\n}\n","const { has, pick, omit } = require('lodash');\nconst Delta = require('rich-text').Delta;\n\nconst OBJECT_TYPES = Object.keys(require('../../../config/schema/rich-text.json').object.properties);\n\nexport default function(contents) {\n  let changes = [];\n  let delta;\n\n  // story\n  if (has(contents, 'draft.body')) {\n    delta = convertObjects(contents.draft.body);\n    if (delta.length() > 0) {\n      changes.push({ p: ['draft', 'body'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // aside, scorecard\n  if (contents.body) {\n    delta = convertObjects(contents.body);\n    if (delta.length() > 0) {\n      changes.push({ p: ['body'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // scorecard\n  if (contents.pros) {\n    delta = convertObjects(contents.pros);\n    if (delta.length() > 0) {\n      changes.push({ p: ['pros'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // scorecard\n  if (contents.cons) {\n    delta = convertObjects(contents.cons);\n    if (delta.length() > 0) {\n      changes.push({ p: ['cons'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // story (map stack)\n  if (has(contents, 'draft.map_points')) {\n    const mapPoints = contents.draft.map_points;\n    for (let [i, mapPoint] of mapPoints.entries()) {\n      delta = convertObjects(mapPoint.body);\n      if (delta.length() > 0) {\n        changes.push({ p: ['draft', 'map_points', i, 'body'], t: 'rich-text', o: delta });\n      }\n    }\n  }\n\n  return changes;\n}\n\nfunction convertObjects(delta) {\n  const fixDelta = new Delta();\n  for (let op of delta.ops) {\n    if (op.insert === 1) {\n      fixDelta.delete(1).insert(pick(op.attributes, OBJECT_TYPES), omit(op.attributes, OBJECT_TYPES));\n    } else {\n      fixDelta.retain(op.insert.length || 1);\n    }\n  }\n  return fixDelta.chop();\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { debounce } = require('lodash');\nvar resizeObject = require('../../lib/resize_object');\n\n// Based on the mobile breakpoint defined in our styles in assets/css/_settings.scss\nconst SMALL_SCREEN_BREAKPOINT = 640;\n\ncomponent.exports = {\n  cursors: {\n    docLabel: ['docLabel'],\n    newsletters: ['community', 'newsletters'],\n    modal: ['modal'],\n    overlay: ['overlay']\n  },\n  data: {\n    type: '',\n    isSubframe: false,\n    isCollapsed: false,\n    isSelected: false,\n    subdoc: null\n  },\n  computed: {\n    objectType: function() {\n      var type = this.get('type');\n      var subdoc = this.get('subdoc');\n      return type === 'doc' ? subdoc && subdoc.schema_name : type;\n    },\n    objectData: function() {\n      var type = this.get('type');\n      return this.get(type === 'doc' ? 'subdoc' : type);\n    },\n    canEdit: function() {\n      var objectType = this.get('objectType');\n      var objectData = this.get('objectData');\n      var newsletters = this.get('newsletters');\n\n      return (\n        (objectType === 'newsletter' && newsletters.length > 1) ||\n        (objectData && (!objectData.hasOwnProperty('canEdit') || objectData.canEdit))\n      );\n    },\n    isEditorContext: function() {\n      return (\n        !this.get('isSubframe') &&\n        !this.get('objectData.isLeadArt') &&\n        !this.get('isChecklist')\n      );\n    },\n    wrapperClass: function() {\n      var wrapperClass = [this.get('objectType')];\n      if (this.get('objectData.isLeadArt')) {\n        wrapperClass.push('is-lead-art');\n      }\n      if (!this.get('canEdit')) {\n        wrapperClass.push('is-static');\n      }\n      return wrapperClass.join(' ');\n    },\n    hideWarning: function() {\n      // Warnings shouldn't be displayed on the checklist or within mapstacks\n      return (\n        this.get('objectData.isLeadArt') ||\n        this.get('isChecklist') ||\n        this.get('docLabel') === 'mapstack'\n      );\n    }\n  },\n  oninit: function() {\n    this.setInitialState();\n    this.setInitialHeightData();\n\n    if (this.get('type') === 'hr') {\n      document.body.classList.add('hr');\n    }\n    if (this.get('isSubframe')) {\n      window.frameElement.classList.add('is-subframe');\n    }\n\n    // For mobile object expansion\n    this.listenTo(window, 'message', () => {\n      this.expand;\n      if (this.get('objectType') === 'pym') {\n        // force a timed resize for pym.js object on mobile\n        setTimeout(() => {\n          resizeObject(window);\n        }, 500);\n      }\n    });\n\n    // Resize listener\n    this.listenTo(window, 'resize', debounce(() => resizeObject(window), 1000));\n\n  },\n  onrender: function() {\n    resizeObject(window);\n  },\n  setInitialState: function() {\n    this.set({\n      frameId: window.frameElement.dataset.frameId,\n      isSubframe: window.parent && window.parent.frameElement,\n      isChecklist: window.parent.document.body.querySelectorAll('.m-checklist').length > 0,\n      hasFixedHeight: window.frameElement.hasAttribute('data-preserve-height')\n    });\n\n    // If the object is a subdoc, pull the subdoc data out of state\n    var type = this.get('type');\n    var docId = this.get('doc.id');\n    if (type === 'doc' && docId) {\n      var subdocs = app.state.get(['subdocs']) || [];\n      this.set('subdoc', subdocs.find(({ id }) => id === docId));\n    }\n  },\n  setInitialHeightData: function() {\n    var isSmallScreen = this.isSmallScreen();\n    var isEditorContext = this.get('isEditorContext');\n    var hasFixedHeight = this.get('hasFixedHeight');\n\n    // Add fixed height class for fixed height objects and objects on mobile\n    // within the editor, the latter is collapsed with a fixed height by default\n    if (hasFixedHeight || (isSmallScreen && isEditorContext)) {\n      document.documentElement.classList.add('has-fixed-height');\n      // HACK: when we initially load the editor, the modal/overlay paths in state\n      // are `undefined`, but after a modal or overlay has been edited, they are `null`.\n      // We use this to distinguish between the initial page load (where we want to set\n      // `isCollapsed: true`) and after a modal or overlay has been opened/closed and\n      // we're returning to the already-loaded editor (where `isCollapsed: false`).\n      // This preserves an object that's been \"toggled open.\"\n      var isInitialEditorLoad = this.get('overlay') !== null && this.get('modal') !== null;\n      if (isSmallScreen && isEditorContext) {\n        if (isInitialEditorLoad) {\n          this.set('isCollapsed', true);\n        } else if (!this.get('isCollapsed')) {\n          // Ensure iframe height expands to fit content\n          window.frameElement.classList.add('is-expanded');\n          if (!hasFixedHeight) {\n            document.documentElement.classList.remove('has-fixed-height');\n          }\n        }\n      }\n    }\n  },\n  expand: function({ data, origin }) {\n    // Only perform logic for events targeted for this specific object iframe\n    // and from the same origin\n    if (\n      data.event !== 'object.selected' ||\n      data.payload !== this.get('frameId') ||\n      origin !== window.top.location.origin\n    ) {\n      return;\n    }\n\n    var isCollapsed = this.get('isCollapsed');\n    var hasFixedHeight = this.get('hasFixedHeight');\n    var isEditorContext = this.get('isEditorContext');\n    var isSmallScreen = this.isSmallScreen();\n\n    if (isEditorContext && isSmallScreen && isCollapsed) {\n      // Use a class to uncollapse the object upon selection. Also, remove the\n      // fixed height class if the expanded object should be dynamically sized\n      window.frameElement.classList.add('is-expanded');\n      if (!hasFixedHeight) {\n        document.documentElement.classList.remove('has-fixed-height');\n      }\n      resizeObject(window);\n      this.set('isCollapsed', false);\n    }\n  },\n  isSmallScreen: function() {\n    return (\n      window.parent &&\n      window.parent === window.top &&\n      window.parent.innerWidth <= SMALL_SCREEN_BREAKPOINT\n    );\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:4,n:50,r:\"hr\",f:[{t:7,p:[24,3,976],e:\"hr\"}],p:[23,1,963]},{t:4,n:51,f:[{t:7,p:[26,3,992],e:\"div\",a:{\"class\":[\"container \",{t:2,r:\"wrapperClass\",p:[26,25,1014]}]},f:[{t:4,n:50,x:{r:[\"isCollapsed\"],s:\"!_0\"},f:[{t:4,n:50,x:{r:[\"type\"],s:\"_0===\\\"doc\\\"\"},f:[{t:4,n:50,x:{r:[\"objectData\"],s:\"!_0\"},f:[{t:7,p:[30,11,1125],e:\"div\",a:{\"class\":\"loading\"},f:[{t:7,p:[31,13,1159],e:\"res-icon\",a:{size:\"medium\",name:\"more\"}}]}],p:[29,9,1095]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"aside\\\"\"},f:[{t:7,p:[35,11,1280],e:\"aside\",a:{doc:[{t:2,r:\"objectData\",p:[35,23,1292]}]}}],p:[34,9,1239]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"gallery\\\"\"},f:[{t:7,p:[38,11,1384],e:\"gallery\",a:{doc:[{t:2,r:\"objectData\",p:[38,25,1398]}]}}],p:[37,9,1341]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"imageslider\\\"\"},f:[{t:7,p:[41,11,1496],e:\"imageslider\",a:{doc:[{t:2,r:\"objectData\",p:[41,29,1514]}]}}],p:[40,9,1449]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"scorecard\\\"\"},f:[{t:7,p:[44,11,1614],e:\"scorecard\",a:{doc:[{t:2,r:\"objectData\",p:[44,27,1630]}]}}],p:[43,9,1569]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"poll\\\"\"},f:[{t:7,p:[47,11,1723],e:\"poll\",a:{doc:[{t:2,r:\"objectData\",p:[47,22,1734]}]}}],p:[46,9,1683]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"table\\\"\"},f:[{t:7,p:[50,11,1823],e:\"table\",a:{doc:[{t:2,r:\"objectData\",p:[50,23,1835]}]}}],p:[49,9,1782]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"productcard\\\"\"},f:[{t:7,p:[53,11,1931],e:\"productcard\",a:{doc:[{t:2,r:\"objectData\",p:[53,29,1949]}]}}],p:[52,9,1884]}],p:[28,7,1064]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"actionbox\\\"\"},f:[{t:7,p:[58,9,2060],e:\"actionbox\",a:{actionbox:[{t:2,r:\"objectData\",p:[58,31,2082]}]}}],p:[57,7,2017]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"html\\\"\"},f:[{t:7,p:[61,9,2169],e:\"html\",a:{html:[{t:2,r:\"objectData\",p:[61,21,2181]}]}}],p:[60,7,2131]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"image\\\"\"},f:[{t:7,p:[64,9,2264],e:\"image\",a:{image:[{t:2,r:\"image\",p:[64,23,2278]}]}}],p:[63,7,2225]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"newsletter\\\"\"},f:[{t:7,p:[67,9,2362],e:\"newsletter\",a:{newsletter:[{t:2,r:\"objectData\",p:[67,33,2386]}]}}],p:[66,7,2318]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"oembed\\\"\"},f:[{t:7,p:[70,9,2476],e:\"oembed\",a:{oembed:[{t:2,r:\"objectData\",p:[70,25,2492]}]}}],p:[69,7,2436]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"pullquote\\\"\"},f:[{t:7,p:[73,9,2581],e:\"pullquote\",a:{pullquote:[{t:2,r:\"objectData\",p:[73,31,2603]}]}}],p:[72,7,2538]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"ratingcard\\\"\"},f:[{t:7,p:[76,9,2696],e:\"ratingcard\",a:{ratingcard:[{t:2,r:\"objectData\",p:[76,33,2720]}]}}],p:[75,7,2652]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"readmore\\\"\"},f:[{t:7,p:[79,9,2812],e:\"readmore\",a:{readmore:[{t:2,r:\"objectData\",p:[79,29,2832]}]}}],p:[78,7,2770]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"video\\\"\"},f:[{t:7,p:[82,9,2919],e:\"video\",a:{video:[{t:2,r:\"objectData\",p:[82,23,2933]}]}}],p:[81,7,2880]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"credits\\\"\"},f:[{t:7,p:[85,9,3019],e:\"credits\",a:{credits:[{t:2,r:\"objectData\",p:[85,27,3037]}]}}],p:[84,7,2978]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"toh_project_details\\\"\"},f:[{t:7,p:[88,9,3137],e:\"toh-project-details\",a:{toh_project_details:[{t:2,r:\"objectData\",p:[88,51,3179]}]}}],p:[87,7,3084]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"toh_tools\\\"\"},f:[{t:7,p:[91,9,3281],e:\"toh-tools\",a:{toh_tools:[{t:2,r:\"objectData\",p:[91,31,3303]}]}}],p:[90,7,3238]},\" \",{t:4,n:50,x:{r:[\"objectType\"],s:\"_0===\\\"pym\\\"\"},f:[{t:7,p:[94,9,3389],e:\"pym\",a:{pym:[{t:2,r:\"objectData\",p:[94,19,3399]}]}}],p:[93,7,3352]}],p:[27,5,1037]},\" \",{t:4,n:50,r:\"objectData\",f:[{t:7,p:[99,7,3478],e:\"info-bar\",a:{objectType:[{t:2,r:\"objectType\",p:[100,21,3508]}],objectData:[{t:2,r:\"objectData\",p:[101,21,3544]}],hideWarning:[{t:2,r:\"hideWarning\",p:[102,22,3581]}],isCollapsed:[{t:2,r:\"isCollapsed\",p:[103,22,3619]}]}}],p:[98,5,3453]}]},\" \",{t:4,n:50,r:\"canEdit\",f:[{t:7,p:[109,5,3699],e:\"div\",a:{\"class\":\"edit-button\"},f:[\"Edit\"]}],p:[108,3,3679]}],r:\"hr\"}]};\ncomponent.exports.components = {pym: require('./pym.html'), \"toh-tools\": require('./toh-tools.html'), \"toh-project-details\": require('./toh-project-details.html'), credits: require('./credits.html'), video: require('./video.html'), table: require('./table.html'), scorecard: require('./scorecard.html'), readmore: require('./readmore.html'), ratingcard: require('./ratingcard.html'), pullquote: require('./pullquote.html'), poll: require('./poll.html'), productcard: require('./productcard.html'), oembed: require('./oembed.html'), newsletter: require('./newsletter.html'), imageslider: require('./imageslider.html'), image: require('./image.html'), html: require('./html.html'), gallery: require('./gallery.html'), aside: require('./aside.html'), actionbox: require('./actionbox.html'), \"info-bar\": require('./info-bar.html')};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = {\n  type: 'line',\n  splitAffinity: 'left',\n  add: function(node, value) {\n    node.setAttribute('data-dropcap', value.toString());\n    return node;\n  },\n  remove: function(node) {\n    node.removeAttribute('data-dropcap');\n    return node;\n  },\n  value: function(node) {\n    return node.dataset.dropcap === 'true';\n  },\n  match: function(node) {\n    return node.tagName === 'P' && node.hasAttribute('data-dropcap');\n  }\n};\n","module.exports = { type: 'line', attribute: 'data-ad-placement-anchor' };\n","var createSocket = require('socket.io-client');\n\nexport default function initSocket() {\n  var url = `${(app.config.ssl ? 'wss' : 'ws')}://${window.location.host}/`;\n  var defaults = {\n    transports: ['websocket'],\n    reconnectionAttempts: app.config.sockets.reconnectAttempts\n  };\n\n  app.socket = createSocket(url, defaults);\n  app.contentApiSocket = createSocket(url, Object.assign({}, defaults, {\n    path: '/api/content/socket.io/'\n  }));\n}\n","var request = require('../lib/request');\nvar parsePagination = require('../lib/parse_chorus_pagination');\nvar isShortlink = require('../lib/is_shortlink');\n\nexport function searchEntries(query) {\n  return request('/api/chorus/entries', { query }).then(response => {\n    var entries = response._embedded.entry;\n    var pagination = parsePagination(response);\n    return [entries, pagination];\n  });\n}\n\nexport function searchEntriesByTitle(q, type, perPage, published = false) {\n  return request('/api/chorus/entries/title_autocomplete', {\n    query: {\n      q,\n      type,\n      per_page: perPage,\n      community_id: app.state.get(['community', 'id']),\n      published\n    }\n  });\n}\n\nexport function getEntryById(id) {\n  if (!id) {\n    return Promise.resolve(null);\n  }\n  return request(`/api/chorus/entries/${id}`);\n}\n\nexport function getEntryByUrl(url) {\n  // shortcut to get the slug of the url\n  const a = document.createElement('a');\n  a.href = url;\n  const slugOrId = isShortlink(url)\n    ? a.pathname.substring(3) // gets the entry ID\n    : a.pathname.substring(1); // gets the entry slug\n\n  // If slugOrId is an empty string, do not request to SBN\n  if (!slugOrId) {\n    throw new Error('invalid Chorus url');\n  }\n\n  return request(`/api/chorus/entries/${slugOrId}`, {\n    query: { community_id: app.state.get(['community', 'id']) },\n    opts: { handleError: false }\n  });\n}\n\nexport function updateEntry(doc, params) {\n  return request(`/api/chorus/entries/${doc.entry_id}`, {\n    method: 'PUT',\n    query: { community_id: doc.community_id },\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\nexport function updateEntryFlags(doc, params, trackProgress = true) {\n  trackProgress && app.state.set(['requestInProgress'], true);\n  if (doc.entry_id == null) {\n    return Promise.reject(new Error('Cannot update flags on a doc without an entry_id'));\n  }\n\n  return request(`/api/chorus/entries/${doc.entry_id}/flags`, {\n    method: 'PUT',\n    query: { community_id: doc.community_id },\n    body: params\n  }).then(() => {\n    trackProgress && app.state.set(['requestInProgress'], false);\n  }).catch(() => {\n    trackProgress && app.state.set(['requestInProgress'], false);\n    return Promise.reject();\n  });\n}\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  cursors: {\n    ratingCardMaxStars: ['community', 'ratingCardMaxStars']\n  },\n  data: {\n    ratingcard: null\n  },\n  computed: {\n    stars: function() {\n      var rating = this.get('ratingcard.rating');\n      var stars = '';\n      var max = this.get('ratingCardMaxStars');\n      // handle whole stars\n      // eslint-disable-next-line no-restricted-syntax\n      for (let i = 0; i < Math.floor(rating); i++) {\n        stars = stars + '<div class=\"star active\"></div>';\n      }\n      // handle half stars\n      if (rating % 1 !== 0) {\n        stars = stars + '<div class=\"star halfsies\"></div>';\n      }\n      // handle empty stars\n      // eslint-disable-next-line no-restricted-syntax\n      for (let i = 0; i < (max - Math.ceil(rating)); i++) {\n        stars = stars + '<div class=\"star inactive\"></div>';\n      }\n\n      return stars;\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"span\",f:[\"Rating: \",{t:2,r:\"ratingcard.rating\",p:[1,15,14]}]},\" \",{t:7,p:[2,1,43],e:\"div\",a:{\"class\":\"stars\"},f:[{t:3,r:\"stars\",p:[2,20,62]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = require('./object')('html');\n","var { CurrentUser, UserChorusVideo, UserTwitterHandle, UserName, UserNames, UserNamesTitles } = require('../graphql/queries/users');\nvar request = require('../lib/request');\nvar graphqlRequest = require('../lib/graphql_request');\nvar moment = require('moment-timezone');\nvar { get: getPath, uniq } = require('lodash');\n\nexport async function getCurrentUser() {\n  var { currentUser } = await graphqlRequest('/api/tower/graphql', {\n    query: CurrentUser,\n    variables: { size: 'small' }\n  });\n  const accessRoles = getPath(app.config.policyRoles, 'app.access');\n  // Filter memberships\n  currentUser.memberships = currentUser.memberships.filter((membership) => {\n    return membership.roles.some((role) => accessRoles[role]);\n  });\n\n  // Add some custom fallback logic for when fullOrUserName is falsey\n  currentUser.fullOrUserName = currentUser.fullOrUserName || 'Unknown User';\n\n  return currentUser;\n}\n\nexport async function getChorusVideoAccess(communityId) {\n  const { currentUser } = await graphqlRequest('/api/tower/graphql', {\n    query: UserChorusVideo,\n    variables: { scopeId: communityId }\n  });\n  return currentUser ? currentUser.canAccessChorusVideo : false;\n}\n\nexport async function getTwitterUsername(id) {\n  const { user } = await graphqlRequest('/api/tower/graphql', {\n    query: UserTwitterHandle,\n    variables: { id }\n  });\n  return user.twitterUsername;\n}\n\nexport async function getUser(id) {\n  var { user } = await graphqlRequest('/api/tower/graphql', {\n    query: UserName,\n    variables: { id }\n  });\n  return user;\n}\n\nexport async function getUsers(ids) {\n  if (ids.length === 0) {\n    return [];\n  }\n  var { users } = await graphqlRequest('/api/tower/graphql', {\n    query: UserNames,\n    variables: { ids: uniq(ids) }\n  });\n  return users;\n}\n\nexport async function getUsersWithTitles(ids, communityId) {\n  if (ids.length === 0) {\n    return [];\n  }\n  var { users } = await graphqlRequest('/api/tower/graphql', {\n    query: UserNamesTitles,\n    variables: { ids: uniq(ids), communityId }\n  });\n  return users;\n}\n\nexport function updateAnthemUser(params) {\n  return request('/api/users/currentUser', { method: 'PUT', body: params });\n}\n\nexport function getTimezone() {\n  return app.state.get('user', 'timeZone') || app.state.get('community', 'timeZone');\n}\n\nexport function acknowledgeAnnouncements() {\n  var lastSeen = moment(app.state.get('user', 'lastAnnouncementSeenAt')).utc();\n  var lastPosted = moment(app.config.announcements.last_announcement_posted_at).utc();\n  if (lastSeen.isBefore(lastPosted)) {\n    var now = moment.utc().toISOString();\n    // don't change anything in local state, to allow the bouncing indicator\n    // logic to work until next refresh\n    return updateAnthemUser({ lastAnnouncementSeenAt: now });\n  } else {\n    return Promise.resolve();\n  }\n}\n\nexport function readAnnouncements() {\n  var lastRead = moment(app.state.get('user', 'lastAnnouncementReadAt')).utc();\n  var lastPosted = moment(app.config.announcements.last_announcement_posted_at).utc();\n\n  if (lastRead.isBefore(lastPosted)) {\n    var now = moment.utc().toISOString();\n    // set lastAnnouncementSeenAt too, since `acknowledgeAnnouncements`\n    // didn't change that locally in order to let the indicator bounce\n    app.state.set(['user', 'lastAnnouncementSeenAt'], now);\n    app.state.set(['user', 'lastAnnouncementReadAt'], now);\n    return updateAnthemUser({ lastAnnouncementReadAt: now });\n  } else {\n    return Promise.resolve();\n  }\n}\n\nexport function userLabel(user) {\n  var first = user.first_name;\n  var last = user.last_name;\n  if (!first && !last) {\n    return user.username;\n  } else if (!last) {\n    return first;\n  } else if (!first) {\n    return last;\n  }\n  return first + ' ' + last;\n}\n","exports.sticky = function(node, pinSelector = 'body', endSelector = '', anchorToTop = true) {\n  // the container that will scroll\n  var pinContainer = document.querySelector(pinSelector);\n  var endPoint =  endSelector ? document.querySelector(endSelector) : null;\n\n  if (pinContainer == null) {\n    throw new Error('Failed to initialize sticky decorator, could not find scroll container');\n  }\n\n  var toggleSticky = function() {\n    var nodeRect = node.getBoundingClientRect(); // selector\n    var nextRect = node.nextElementSibling ? node.nextElementSibling.getBoundingClientRect() : nodeRect; // editor\n    var pinRect = pinContainer.getBoundingClientRect();\n\n    if (anchorToTop) {\n      if (endPoint) {\n        var endRect = endPoint.getBoundingClientRect();\n        var stickyConditional = nextRect.top < pinRect.top + nodeRect.height && endRect.top > pinRect.top;\n        node.classList.toggle('is-sticky', stickyConditional);\n        pinContainer.classList.toggle('is-sticky', stickyConditional);\n      } else {\n        node.classList.toggle('is-sticky', nextRect.top < pinRect.top + nodeRect.height);\n      }\n    } else if (Math.abs(nextRect.top - pinRect.bottom) >= nodeRect.height) {\n      node.classList.toggle('is-sticky', nextRect.top > pinRect.bottom);\n      pinContainer.classList.toggle('has-sticky-footer', nextRect.top > pinRect.bottom);\n    }\n  };\n\n  pinContainer.addEventListener('scroll', toggleSticky);\n  window.addEventListener('resize', toggleSticky);\n  toggleSticky();\n\n  return {\n    teardown: () => {\n      pinContainer.removeEventListener('scroll', toggleSticky);\n      window.removeEventListener('resize', toggleSticky);\n    }\n  };\n};\n","var { pick, forOwn } = require('lodash');\nvar cleanHTML = require('../lib/clean_html');\nvar request = require('../lib/request');\nvar requestProgress = require('../lib/request_progress');\nvar parsePagination = require('../lib/parse_pagination');\nvar messages = require('../config/messages');\nvar messageActions = require('./messages');\nvar fileActions = require('./files');\n\nexport const IMAGE_ALT_TEXT_LIMIT = 500;\n\nconst ALLOWLIST_CONFIG = {\n  image: {\n    urlPattern: /\\.(jpe?g|gif|png)(\\?.+)?$/i,\n    mimeTypes: [\n      'image/jpeg',\n      'image/pjpeg',\n      'image/gif',\n      'image/png',\n      'image/x-png',\n    ]\n  },\n  file: {\n    urlPattern: /\\.(pdf|docx|mp3?)(\\?.+)?$/i,\n    mimeTypes: [\n      'application/pdf',\n      'application/msword',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'audio/mpeg',\n      'audio/mp3'\n    ]\n  }\n};\n\nfunction createAsset(type, asset) {\n  var data = pick(asset, [\n    'title',\n    'credit',\n    'search_text',\n    'network_id',\n    'community_id',\n    'user_id',\n    'source',\n    'source_id',\n    'source_caption',\n    'preview_url',\n    'remote_file_url'\n  ]);\n  if (data.credit) {\n    data.credit = cleanHTML(data.credit);\n  }\n  // We save caption data to the database for Merlin images\n  if (data.source === 'merlin') {\n    data.caption = asset.caption;\n  }\n\n  return request(`/api/assets/${type}s`, { method: 'POST', body: data, opts: { handleError: false } }).catch(err => {\n    if (type === 'image' && asset.source === 'merlin' && err.response.status === 503) {\n      return handleError(false, messages.MERLIN_API_DOWN);\n    }\n    return handleError(false);\n  });\n}\n\nfunction updateAsset(type, asset) {\n  var data = pick(asset, ['title', 'credit', 'search_text', 'source_caption']);\n  if (data.credit) {\n    data.credit = cleanHTML(data.credit);\n  }\n  if (type === 'image') {\n    var imageAttributes = pick(asset, ['usage_rights']);\n    data = Object.assign({}, data, imageAttributes);\n  }\n\n  return request(`/api/assets/${type}s/${asset.id}`, {\n    method: 'PUT',\n    body: data,\n    opts: { handleError: false }\n  }).catch(() => {\n    return handleError(false);\n  });\n}\n\nexport function saveAsset(type, asset) {\n  if (type === 'image' && (asset.title || '').length > IMAGE_ALT_TEXT_LIMIT) {\n    return handleError(false, messages.ALT_TEXT_OVER_LIMIT.replace('{alt_text_limit}', IMAGE_ALT_TEXT_LIMIT));\n  }\n  return asset.id ? updateAsset(type, asset) : createAsset(type, asset);\n}\n\nexport function storeSelectSnapshot(snapshot) {\n  app.state.set(['modal', 'selectAsset', 'snapshot'], snapshot);\n}\n\n// note: this mutates the `query` object\nexport function searchAssets(type, query) {\n  query.per_page = 12;\n  var entitlements = app.state.get(['entitlements']);\n  if (entitlements.includes('use_network_asset_search') && query.sources && query.sources.includes('upload')) {\n    query.network_id = app.state.get(['community', 'network', 'id']);\n  } else {\n    query.community_id = app.state.get(['community', 'id']);\n  }\n  query.deleted = false;\n  for (let key of ['ids', 'sources']) {\n    if (key in query) {\n      query[key] = query[key].join(',');\n    }\n  }\n\n  return request(`/api/assets/${type}s`, {\n    query,\n    opts: { withHeaders: true, handleError: false }\n  }).then(result => {\n    var pagination = parsePagination({\n      page: parseInt(result.headers.get('Page')),\n      perPage: parseInt(result.headers.get('Per-Page')),\n      total: parseInt(result.headers.get('Total'))\n    });\n    return [result.data, pagination];\n  }).catch(err => {\n    if (err.response.status === 403 && query.sources && entitlements.includes('use_network_asset_search')) {\n      return handleError(false, messages.NETWORK_ASSETS_ACCESS_DENIED);\n    }\n\n    if (type === 'image' && query.source === 'getty' && err.response.status === 503) {\n      return handleError(false, messages.GETTY_API_DOWN);\n    }\n    return handleError();\n  });\n}\n\nexport function validateImageUrl(url) {\n  return url.match(ALLOWLIST_CONFIG.image.urlPattern);\n}\n\n// Validate that:\n// A) The incoming `type` is a supported asset type\n// B) The file and/or url for the asset type is allowlisted for upload\nfunction assetIsAllowlisted(type, params) {\n  var config = ALLOWLIST_CONFIG[type];\n  return (\n    config &&\n    (\n      (params.file && (config.mimeTypes.includes(params.file.type) || params.file.name.match(config.urlPattern))) ||\n      (params.remote_file_url && params.remote_file_url.match(config.urlPattern))\n    )\n  );\n}\n\n// A bit of a hack to support uploading assets from drag/drop interfaces where multiple\n// asset types are supported. If the incoming params to be sent to the chorus-asset-service\n// match an allowlist for a supported type, we assume the asset is of that type.\nexport function getAssetType(params) {\n  return Object.keys(ALLOWLIST_CONFIG).find(type => assetIsAllowlisted(type, params));\n}\n\n// A) Flash the error message for the asset type if flagged to do so\n// B) Otherwise, simply reject with the message to be rendered inline\nfunction handleError(flash = false, message = '') {\n  if (flash) {\n    if (message) {\n      messageActions.showMessage({ type: 'cautionary', message });\n    } else {\n      messageActions.showError();\n    }\n  }\n  return Promise.reject(new Error(message || messages.UNEXPECTED));\n}\n\nfunction handleUploadError(err, type, flash, isGif = false) {\n  // I've added this, but it seems that when use_network_asset_search is true, non-Asset Manager users can still\n  // upload images to the community (but not search them :-/)\n  if (err.response.status === 403 && app.state.get(['entitlements']).includes('use_network_asset_search')) {\n    return handleError(flash, messages.NETWORK_ASSETS_ACCESS_DENIED);\n  }\n\n  if (err.response.status === 413) {\n    let message = messages.FILE_TOO_LARGE;\n\n    if (isGif) {\n      message = messages.GIF_TOO_LARGE.replace('{size}', 12).replace('{platforms}', 'all platforms');\n    } else if (type === 'image') {\n      message = messages.IMAGE_TOO_LARGE;\n    }\n\n    return handleError(flash, message);\n  }\n  return handleError(flash);\n}\n\n// Single asset upload via either file picker or url\nexport function uploadAsset(type, params, onProgress, flash = true) {\n  if (!assetIsAllowlisted(type, params)) {\n    return handleError(flash, messages.UNSUPPORTED_ASSET_TYPE);\n  }\n\n  var formData = new FormData();\n  formData.append('user_id', app.state.get(['user', 'id']));\n  formData.append('network_id', app.state.get(['community', 'network', 'id']));\n  formData.append('community_id', app.state.get(['community', 'id']));\n\n  if (type === 'file') {\n    fileActions.setParams(params);\n  }\n  forOwn(params, (val, key) => formData.append(key, val));\n\n  const isGif = params.file && params.file.type === 'image/gif'\n    || params.remote_file_url && params.remote_file_url.endsWith('.gif');\n\n  return requestProgress(`/api/assets/${type}s`, 'POST', formData, onProgress)\n    .catch(err => handleUploadError(err, type, flash, isGif));\n}\n\n// Bulk asset upload\nexport function uploadAssets(type, params, onProgress, flash = true) {\n  var formData = new FormData();\n\n  // Run our validation for every file. Reject uploading all files if one fails validation.\n  var anyInvalidAssets = false;\n  for (let file of Array.from(params.files)) {\n    if (!assetIsAllowlisted(type, { file })) {\n      anyInvalidAssets = true;\n    } else {\n      formData.append('files', file);\n    }\n  }\n\n  if (anyInvalidAssets) {\n    return handleError(flash, messages.UPLOAD_INVALID_FILE);\n  }\n\n  formData.append('source', params.source);\n  formData.append('user_id', app.state.get(['user', 'id']));\n  formData.append('network_id', app.state.get(['community', 'network', 'id']));\n  formData.append('community_id', app.state.get(['community', 'id']));\n\n  return requestProgress(`/api/assets/${type}s/batch`, 'POST', formData, onProgress)\n    .catch(err => handleUploadError(err, type, flash));\n}\n","exports.ALT_TEXT_OVER_LIMIT = 'Alt text is currently limited to {alt_text_limit} characters. Please try again.';\nexports.APPLE_NEWS_MEMBERS_ONLY_WARNING = 'This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.';\nexports.COMMUNITY_CHANGED = 'This {docLabel} has been moved!';\nexports.CSV_TOO_LARGE = 'This CSV is too large. Please upload a file under 1 MB.';\nexports.DATA_LINKS_ERROR = 'Suggestions timed out. Try again or add links manually.';\nexports.DRAFT_HERMANO_RECORD = 'This {record} is a draft; it will be published automatically when this {docLabel} is published.';\nexports.EMBARGOED = 'This story is embargoed.';\nexports.HIDDEN = 'This story is hidden.';\nexports.FEEDBACK_SENT = 'Message sent!';\nexports.FILE_TOO_LARGE = 'Files must be under 100 MB.';\nexports.GETTY_API_DOWN = 'Getty image search is unavailable. Please try again later.';\nexports.GIF_IN_IMAGE_CARD = 'GIFs cannot be published with {type} cards. Choose another?';\nexports.GIF_TOO_LARGE = 'This GIF is over {size} MB and will block this story from publishing to {platforms}.';\nexports.IMAGE_IN_GALLERY = 'This image is already included in the gallery. Choose another?';\nexports.IMAGE_TOO_LARGE = 'Images must be under 10,000 x 10,000 pixels.';\nexports.INVALID_LINK_MESSAGE = 'Please enter a valid URL.';\nexports.INVALID_SPREADSHEET_URL = 'Please add a valid public Google Sheet URL and try again.';\nexports.INVALID_STREAM_MEMBERSHIP = 'This type of story cannot be added.';\nexports.MERLIN_API_DOWN = 'Merlin image search is unavailable. Please try again later.';\nexports.MISSING_LEGACY_ENTRY = 'Editing is disabled because a more recent version of this story may exist. &nbsp;<a href=\"https://www.chorus.help/hc/en-us/requests/new\">Contact us for help.</a>';\nexports.NETWORK_ASSETS_ACCESS_DENIED = 'You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.';\nexports.NEW_USER_MESSAGE = 'Welcome to Chorus! &nbsp;<a href=\"{url}\">Check out our getting started guide.</a>';\nexports.OEMBED_GENERIC_ERROR = 'Something went wrong. Make sure this embed is shareable and try again.';\nexports.OEMBED_INSECURE_ERROR = 'This embed URL is insecure. Only HTTPS embeds are supported.';\nexports.OEMBED_SUPPORT_ERROR = 'Embeds from this source are not supported at this time.';\nexports.OEMBED_PDF_SUPPORT_ERROR = 'PDFs must be under 10 MB.';\nexports.OEMBED_YOUTUBE_SUPPORT_ERROR = 'Embeds are disabled for this video by the YouTube account owner.';\nexports.PLAGSCAN_ERROR = 'An error occurred. Please try scanning the story again.';\nexports.PLAGSCAN_LOW_WORD_COUNT = 'You can scan this story once it\\'s over 50 words.';\nexports.PLAGSCAN_OUT_OF_DATE = 'The latest version of this story has not been scanned.';\nexports.PLAGSCAN_RETRIEVED= 'A report has been generated for this story.';\nexports.PLAGSCAN_SUBMITTED = 'A report is being generated.';\nexports.PLAGSCAN_UNSCANNED = 'Submit the story for approval to generate a report.';\nexports.PUBLISH_PACKAGE_ACTIVE_MESSAGE = 'Your stories are being {action}...';\nexports.PUBLISH_PACKAGE_WARNING_MESSAGE = '{gerund} this landing page will {verb} all drafts in this package.';\nexports.PYM_EMBED_GENERIC_ERROR = 'Something went wrong. Make sure this Pym.js embed is shareable and try again.';\nexports.PYM_EMBED_INSECURE_ERROR = 'This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.';\nexports.PYM_EMBED_SUPPORT_ERROR = 'Pym.js embeds from this source are not supported at this time.';\nexports.REALTIME_ERROR = 'Autosave failed. Please reload your browser.';\nexports.RECONNECT_ERROR = 'Something went wrong reconnecting. Please reload your browser.';\nexports.RECONNECTING = 'Reconnecting...';\nexports.RELOAD_REQUIRED = 'Please reload to get the latest updates.';\nexports.RELOAD_STALE_TAB = 'You\\'ve been away for a while, please reload.';\nexports.REQUIRED_FIELD = 'This field is required.';\nexports.RESCUE_SAVED_REASSURE = 'Your work has been saved in &nbsp;<a href=\"{url}\">this version.</a>';\nexports.SEND_TO_PRINT_SUCCESS = 'Sent to print!';\nexports.SHEET_PERMISSIONS = 'Please make the Google Sheet public to continue.';\nexports.STRUCTURED_TAGS_ERROR = 'Suggestions timed out. Try again or add tags manually.';\nexports.TOO_MANY_EDITORS = 'More than 10 editors at a time is not recommended.';\nexports.UNEXPECTED = 'An error occurred. Try again or reload your browser.';\nexports.UNSAVED_WARNING = 'Your changes are still being saved; leaving now could cause data loss!';\nexports.UNSUPPORTED_ASSET_TYPE = 'This format is not supported. <a href=\"https://www.chorus.help/hc/en-us/articles/360009582854-Files\">Learn more about supported file formats.</a>';\nexports.UPLOAD_INVALID_FILE = 'At least one of the uploaded files is not supported. Please review supported <a href=\"https://www.chorus.help/hc/en-us/articles/360010240753\">image</a> and <a href=\"https://www.chorus.help/hc/en-us/articles/360009582854-Files\">file</a> formats and try again.';\nexports.UPLOAD_TOO_MANY_FILES = 'One file at a time, please.';\n","var createHash = require('sha.js').bind(null, 'sha1');\nvar createHmac = require('hmac').bind(null, createHash, 64);\n\nmodule.exports = function(source, options) {\n  var url = generateUrl(source, options);\n  var signature = createHmac(options.config.key)\n    .update(url)\n    .digest('base64')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n  return options.config.host + '/' + signature + '/' + url;\n};\n\nfunction generateUrl(source, options) {\n  var urlParts = [];\n\n  if (options.meta) {\n    urlParts.push('meta');\n  }\n\n  if (options.trim) {\n    var trimOptions = ['trim'];\n    if (options.trim !== true) {\n      trimOptions.push(options.trim);\n    }\n    urlParts.push(trimOptions.join(':'));\n  }\n\n  options.crop = options.crop || calculateCenteredCrop(options);\n\n  if (options.crop) {\n    var cropLeft = options.crop[0];\n    var cropTop = options.crop[1];\n    var cropRight = options.crop[2];\n    var cropBottom = options.crop[3];\n\n    if (cropLeft > 0 || cropTop > 0 || cropBottom > 0 || cropRight > 0) {\n      urlParts.push(cropLeft + 'x' + cropTop + ':' + cropRight + 'x' + cropBottom);\n    }\n  }\n\n  for (let fit of [\n    'fit_in',\n    'adaptive_fit_in',\n    'full_fit_in',\n    'adaptive_full_fit_in'\n  ]) {\n    if (options[fit]) {\n      urlParts.push(fit.toString().replace(/_/g, '-'));\n    }\n  }\n\n  if ((options.fit_in || options.full_fit_in) && !(options.width || options.height)) {\n    throw new Error('When using fit_in or full_fit_in, you must specify width and/or height');\n  }\n\n  var size = calculateSize(options);\n\n  if (size) {\n    urlParts.push(size);\n  }\n\n  if (options.halign && options.halign !== 'center') {\n    urlParts.push(options.halign);\n  }\n\n  if (options.valign && options.valign !== 'middle') {\n    urlParts.push(options.valign);\n  }\n\n  if (options.smart) {\n    urlParts.push('smart');\n  }\n\n  if (options.filters && options.filters.length) {\n    urlParts.push('filters:' + options.filters.join(':'));\n  }\n\n  urlParts.push(source.replace(/https?:\\/\\//, ''));\n\n  return urlParts.join('/');\n}\n\nfunction calculateCenteredCrop(options) {\n  var width = options.width;\n  var height = options.height;\n  var originalWidth = options.original_width;\n  var originalHeight = options.original_height;\n  var center = options.center;\n\n  if (!originalWidth ||\n      !originalHeight ||\n      !center ||\n      !(width || height)) {\n    return;\n  }\n\n  if (!Array.isArray(center) || center.length !== 2) {\n    throw new Error('center must be an array of x,y');\n  }\n\n  width = Math.abs(width || originalWidth);\n  height = Math.abs(height || originalHeight);\n\n  var centerX = center[0];\n  var centerY = center[1];\n  var newAspectRatio = width / height;\n  var originalAspectRatio = originalWidth / originalHeight;\n\n  // We're going wider, vertical crop\n  if (newAspectRatio > originalAspectRatio) {\n    // How tall should we be? because newAspectRatio is > originalAspectRatio we can be sure\n    // that croppedHeight is always less than originalHeight (original). This is assumed below.\n    var croppedHeight = Math.round(originalWidth / newAspectRatio);\n\n    // Calculate coordinates around center\n    var topCropPoint = Math.round(centerY - (croppedHeight * 0.5));\n    var bottomCropPoint = Math.round(centerY + (croppedHeight * 0.5));\n\n    // If we've gone above the top of the image, take all from the bottom\n    if (topCropPoint < 0) {\n      topCropPoint = 0;\n      bottomCropPoint = croppedHeight;\n    // If we've gone below the top of the image, take all from the top\n    } else if (bottomCropPoint > originalHeight) {\n      topCropPoint = originalHeight - croppedHeight;\n      bottomCropPoint = originalHeight;\n      // Because croppedHeight < originalHeight, topCropPoint and\n      // bottomCropPoint will never both be out of bounds\n    }\n\n    // Put it together\n    return [0, topCropPoint, originalWidth, bottomCropPoint];\n  // We're going taller, horizontal crop\n  } else if (newAspectRatio < originalAspectRatio) {\n    // How wide should we be? because newAspectRatio is < originalAspectRatio we can be sure\n    // that croppedWidth is always less than originalWidth (original). This is assumed below.\n    var croppedWidth = Math.round(originalHeight * newAspectRatio);\n\n    // Calculate coordinates around center\n    var leftCropPoint = Math.round(centerX - (croppedWidth * 0.5));\n    var rightCropPoint = Math.round(centerX + (croppedWidth * 0.5));\n\n    // If we've gone beyond the left of the image, take all from the right\n    if (leftCropPoint < 0) {\n      leftCropPoint = 0;\n      rightCropPoint = croppedWidth;\n    // If we've gone beyond the right of the image, take all from the left\n    } else if (rightCropPoint > originalWidth) {\n      leftCropPoint = originalWidth - croppedWidth;\n      rightCropPoint = originalWidth;\n      // Because croppedWidth < originalWidth, leftCropPoint and\n      // rightCropPoint will never both be out of bounds\n    }\n\n    // Put it together\n    return [leftCropPoint, 0, rightCropPoint, originalHeight];\n  }\n}\n\nfunction calculateSize(options) {\n  var width = options.width;\n  var height = options.height;\n\n  if (width && options.flip) { width *= -1; }\n  if (height && options.flop) { height *= -1; }\n\n  if (width || height) {\n    if (!width) { width = 0; }\n    if (!height) { height = 0; }\n  }\n\n  var hasWidth = (width != null);\n  var hasHeight = (height != null);\n\n  if (options.flip && !hasWidth && !hasHeight) {\n    width = '-0';\n    if (!hasHeight && !options.flop) { height = '0'; }\n  }\n\n  if (options.flop && !hasWidth && !hasHeight) {\n    height = '-0';\n    if (!hasWidth && !options.flip) { width = '0'; }\n  }\n\n  if (width || height) {\n    return width + 'x' + height;\n  }\n}\n","var { uniq } = require('lodash');\n\nmodule.exports = function(contents) {\n  const ids = [];\n\n  const body = contents.draft.body;\n  if (body) {\n    for (let op of body.ops) {\n      if (typeof op.insert === 'object' && 'doc' in op.insert) {\n        ids.push(op.insert.doc.id);\n      }\n    }\n  }\n\n  const gallery = contents.draft.main_gallery;\n  if (gallery) {\n    ids.push(gallery.id);\n  }\n\n  return uniq(ids);\n};\n","var HttpStatusError = require('./errors/http_status_error');\nvar messageActions = require('../actions/messages');\n\n// We are using a raw XMLHttpRequest because fetch doesn't expose the xhr\n// object on request. We need this object to animate our loading bar. To avoid\n// using another library, we're doing this manually. If we see ourselves\n// wanting progress bars in many places, we can reassess the best approach.\n//\n// See: https://github.com/github/fetch/pull/290#issuecomment-193988256\nexport default function(url, method, formData, onProgress) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest();\n    var headers = {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json'\n    };\n\n    var handleXhrError = (message) => {\n      var error = new Error(message);\n      messageActions.showError();\n      return reject(error);\n    };\n\n    xhr.onerror = () => handleXhrError('An network error occurred.');\n    xhr.ontimeout = () => handleXhrError('The XMLHttpRequest timed out.');\n\n    xhr.onload = () => {\n      if (xhr.status < 200 || xhr.status >= 300) {\n        var error = new HttpStatusError(`Response status not within range: ${xhr.status}`, xhr);\n        return reject(error);\n      }\n      return resolve(JSON.parse(xhr.response));\n    };\n\n    if (onProgress) {\n      xhr.upload.addEventListener('progress', e => {\n        onProgress({ loaded: e.loaded, total: e.total });\n      });\n    }\n\n    xhr.open(method, url, true);\n    xhr.withCredentials = true;\n    for (let h of Object.keys(headers)) {\n      xhr.setRequestHeader(h, headers[h]);\n    }\n    xhr.send(formData);\n  });\n}\n","module.exports = function isPackage(contents) {\n  return contents.draft.hasOwnProperty('package_toc');\n};\n","module.exports = function getEventDatetime(history, eventTypes, { latest } = { latest: true }) {\n  // Some older stories may not have a `publish_history` list\n  history = (history || []).slice();\n  // If we want the latest instance of the event, reverse the array before searching it\n  if (latest) {\n    history.reverse();\n  }\n  const event = history.find(event => eventTypes.indexOf(event.event_type) > -1);\n\n  // If the event is 'backdated' use the backdated_date\n  if (event) {\n    return event.event_type === 'backdated'\n      ? event.backdated_date\n      : event.date;\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"pre\",f:[\"\\n  \",{t:7,p:[2,3,8],e:\"code\",f:[{t:2,r:\"html.value\",p:[2,9,14]}]},\"\\n\"]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = require('./object')('toh_project_details');\n","var Delta = require('rich-text').Delta;\n\nmodule.exports = function getOffset(delta, isValid) {\n  var offset = 0;\n  for (var op of delta.ops) {\n    if (isValid(op)) {\n      return offset;\n    }\n    offset += new Delta([op]).length();\n  }\n\n  // If none found, return a negative offset\n  return -1;\n};\n","var messageActions = require('../actions/messages');\n\nexport default function initMessages(message) {\n  if (message && message.message) {\n    setTimeout(() => messageActions.showMessage(message), 1000);\n  }\n  app.socket.on('flash-message', params => {\n    messageActions.showMessage(params);\n\n    // Disconnect from servers when we want to force a refresh\n    if (params.forceRefresh) {\n      app.emit('sockets.disconnect', 'force-refresh');\n    }\n  });\n}\n","module.exports = function isStream(contents) {\n  return contents.draft.entry_layout === 'unison_stream';\n};\n","var request = require('../lib/request');\nvar { get: getPath } = require('lodash');\n\nexport function searchHermano(type, value) {\n  var prefix = prefixForType(type);\n  return request(`${urlFromType(type)}/search.json`, {\n    opts: { cache: true },\n    query: { keywords: value }\n  }).then(response => {\n    // format results with full hermano_id string\n    return response.data.map((item) => {\n      return Object.assign({}, item, { hermano_id: `${prefix}${item.id}` });\n    });\n  });\n}\n\nexport function getRecord(type, hermanoId) {\n  var id = hermanoId.match(/[^/]+$/)[0];\n  return request(`${urlFromType(type)}/search.json?record_id=${id}`, { opts: { cache: true } }).then(response => {\n    return response.data[0];\n  });\n}\n\nexport function hermanoIdForMapPoint(mapPoint) {\n  var network = app.state.get(['community', 'network', 'slug']);\n  var type = network === 'curbed' ? 'building' : 'venue';\n  mapPoint.network = network;\n\n  return request(`${urlFromType(type)}/create_or_update`, {\n    method: 'POST',\n    opts: { handleError: false },\n    body: mapPoint\n  }).then((response) => prefixForType(response.data.display_type.toLowerCase()) + response.data.id);\n}\n\nexport function imageForRecord(record) {\n  // product: record.image.url\n  // game: record.default_release.cover_art.large_url\n  // venue: record.image_urls[0]\n  return getPath(record, ['image', 'url']) || getPath(record, ['default_release', 'cover_art', 'large_url']) || getPath(record, ['image_urls', 0]) || null;\n}\n\nfunction prefixForType(type) {\n  if (type === 'product') {\n    return 'Verge::Product/';\n  } else if (type === 'game') {\n    return 'Polygon::Game/';\n  } else if (type === 'venue') {\n    return 'Geo::Venue/';\n  } else if (type === 'building') {\n    return 'Geo::Building/';\n  }\n}\n\nfunction urlFromType(type) {\n  if (type === 'product') {\n    return '/api/hermano/verge/products';\n  } else if (type === 'game') {\n    return '/api/hermano/polygon/games';\n  } else if (type === 'venue') {\n    return '/api/hermano/geo/venues';\n  } else if (type === 'building') {\n    return '/api/hermano/geo/buildings';\n  }\n}\n","module.exports = { tag: 'SMALL' };\n","module.exports = function isPackageMember(contents) {\n  return contents.hasOwnProperty('package_uuid');\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nvar partnerPlatforms = require('../../lib/partner_platforms');\nvar messages = require('../../config/messages');\nvar sentenceCase = require('../../../shared/sentence_case');\nvar toInlineHtml = require('convert-rich-text').toInlineHtml;\nvar isEmpty = require('../../../shared/delta/is_empty');\nvar imageActions = require('../../actions/images');\nvar isGif = require('../../../shared/is_gif');\n\ncomponent.exports = {\n  data: {\n    hideWarning: false,\n    isCollapsed: false,\n    objectType: '',\n    objectData: {},\n    largeGIFWarning: ''\n  },\n  computed: {\n    titleName: function() {\n      var objectType = this.get('objectType');\n      switch (objectType) {\n      case 'actionbox':\n        return 'Action box';\n      case 'aside':\n        return 'Sidebar';\n      case 'html':\n        return 'HTML block';\n      case 'imageslider':\n        return 'Image slider';\n      case 'oembed':\n        return 'Embed';\n      case 'pullquote':\n        return 'Pull quote';\n      case 'ratingcard':\n        return 'Rating card';\n      case 'readmore':\n        return 'Related';\n      case 'toh_project_details':\n        return 'Project details';\n      case 'toh_tools':\n        return 'Tools and materials';\n      case 'pym':\n        return 'Pym.js embed';\n      case 'productcard':\n        return 'Product card';\n      default:\n        return sentenceCase(objectType);\n      }\n    },\n    warning: function() {\n      var objectType = this.get('objectType');\n      if (objectType === 'html') {\n        return messages.HAS_HTML_WARNING_OBJECT;\n      } else if (objectType === 'oembed') {\n        return partnerPlatforms.getMessage({ oembed: this.get('objectData') });\n      } else if (objectType === 'poll') {\n        return partnerPlatforms.getMessage({\n          doc: { type: 'poll', id: this.get('objectData.id') }\n        });\n      }\n      return null;\n    },\n    caption: function() {\n      var objectType = this.get('objectType');\n      if (objectType === 'image') {\n        return this.getImageCaption();\n      } else if (objectType === 'table') {\n        return this.getTableCaption();\n      } else if (objectType === 'video') {\n        return this.getVideoCaption();\n      } else if (objectType === 'gallery') {\n        return this.getGalleryTitle();\n      }\n      return null;\n    },\n    metadata: function() {\n      var objectType = this.get('objectType');\n      if (objectType === 'gallery') {\n        return this.getGalleryMetadata();\n      } else if (objectType === 'table') {\n        return this.getTableMetadata();\n      }\n      return null;\n    }\n  },\n  oninit: function() {\n    if (this.get('objectType') === 'image' && isGif(this.get('objectData'))) {\n      this.getGIFWarning();\n    }\n  },\n  getGalleryMetadata: function() {\n    var images = this.get('objectData.head.contents.images');\n    return `${images.length} ${images.length === 1 ? 'image' : 'images'}`;\n  },\n  getImageCaption: function() {\n    var image = this.get('objectData');\n\n    var result = '';\n    if (image.caption) {\n      result += image.caption;\n    }\n    if (image.credit && !image.hide_credit) {\n      if (image.caption) {\n        result += ' | ';\n      }\n      result += image.credit;\n    }\n\n    return result;\n  },\n  getTableCaption: function() {\n    var contents = this.get('objectData.head.contents');\n\n    var result = '';\n    if (!isEmpty(contents.caption)) {\n      result += toInlineHtml(contents.caption);\n    }\n    if (!isEmpty(contents.credit)) {\n      if (!isEmpty(contents.caption)) {\n        result += ' | ';\n      }\n      result += toInlineHtml(contents.credit);\n    }\n\n    return result;\n  },\n  getTableMetadata: function() {\n    var rows = this.get('objectData.head.contents.rows');\n    return rows.length > 5\n      ? `5 of ${rows.length} rows`\n      : null;\n  },\n  getVideoCaption: function() {\n    return this.get('objectData.caption');\n  },\n  getGalleryTitle: function() {\n    return this.get('objectData.title');\n  },\n  getGIFWarning: function() {\n    var objectData = this.get('objectData');\n    imageActions.getImage(objectData.id).then((image) => {\n      var warning;\n      if (!imageActions.validatePartnerPlatformsImageSize(image.size, 20)) {\n        warning = messages.GIF_TOO_LARGE.replace('{size}', 20).replace('{platforms}', 'Google AMP and Apple News');\n      } else if (!imageActions.validatePartnerPlatformsImageSize(image.size, 12)) {\n        warning = messages.GIF_TOO_LARGE.replace('{size}', 12).replace('{platforms}', 'Google AMP');\n      }\n      this.set('largeGIFWarning', warning);\n    });\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"info-bar\"},f:[{t:4,n:50,x:{r:[\"isCollapsed\"],s:\"!_0\"},f:[{t:4,n:50,x:{r:[\"warning\",\"largeGIFWarning\",\"hideWarning\"],s:\"(_0||_1)&&!_2\"},f:[{t:7,p:[4,7,109],e:\"div\",a:{\"class\":\"info-bar__warn\"},f:[{t:2,x:{r:[\"warning\",\"largeGIFWarning\"],s:\"_0||_1\"},p:[4,35,137]}]}],p:[3,5,50]},\" \",{t:4,n:50,r:\"caption\",f:[{t:7,p:[7,7,212],e:\"div\",a:{\"class\":\"info-bar__caption\"},f:[{t:3,r:\"caption\",p:[7,38,243]}]}],p:[6,5,190]}],p:[2,3,25]},\" \",{t:7,p:[11,3,288],e:\"div\",a:{\"class\":\"info-bar__title\"},f:[{t:7,p:[12,5,322],e:\"div\",a:{\"class\":\"info-bar__type\"},f:[{t:2,r:\"titleName\",p:[13,7,357]},\" \",{t:4,n:50,x:{r:[\"objectType\",\"objectData.mask_text\"],s:\"(_0===\\\"image\\\"||_0===\\\"video\\\")&&_1\"},f:[{t:7,p:[15,9,468],e:\"res-badge\",a:{size:\"smallest\",design:\"apple\"},f:[\"Sensitive\"]}],p:[14,7,377]}]},\" \",{t:4,n:50,r:\"isCollapsed\",f:[{t:7,p:[19,7,587],e:\"svg\",a:{width:\"18px\",height:\"18px\",viewBox:\"0 0 18 18\",version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\"},f:[{t:7,p:[20,9,740],e:\"title\",f:[\"Expand object\"]},\" \",{t:7,p:[21,9,777],e:\"defs\"},\" \",{t:7,p:[22,9,799],e:\"g\",a:{id:\"down\",stroke:\"none\",\"stroke-width\":\"1\",fill:\"none\",\"fill-rule\":\"evenodd\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"},f:[{t:7,p:[23,13,935],e:\"g\",a:{id:\"Page-1\",transform:\"translate(6.000000, 8.000000)\",stroke:\"#000000\"},f:[{t:7,p:[24,17,1026],e:\"polyline\",a:{id:\"Stroke-1\",points:\"6 0 3 3 0 0\"}}]}]}]}],p:[18,5,561]},\" \",{t:4,n:50,x:{r:[\"isCollapsed\",\"metadata\"],s:\"!_0&&_1\"},f:[{t:7,p:[30,7,1181],e:\"div\",a:{\"class\":\"info-bar__metadata\"},f:[{t:2,r:\"metadata\",p:[30,39,1213]}]}],p:[29,5,1142]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var stringify = require('json-stable-stringify');\nvar md5 = require('js-md5');\n\nmodule.exports = function(contents) {\n  return md5(stringify(contents));\n};\n","var playGIF = require('./play_gif');\n\nexports.playgif = function(node) {\n  playGIF([node]);\n  return { teardown: function() {} };\n};\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"readmore-inner\"},f:[{t:4,r:\"readmore\",f:[{t:7,p:[3,5,49],e:\"div\",a:{\"class\":\"readmore-item\"},f:[{t:7,p:[4,7,83],e:\"div\",a:{\"class\":\"readmore-title\"},f:[{t:3,r:\"./title\",p:[4,35,111]}]}]}],p:[2,3,31]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var json0 = require('ot-json0').type;\njson0.registerSubtype(require('rich-text').type);\n\nmodule.exports = json0;\n\n// USAGE:\n// var anth = require('./shared/ottypes/anthem0');\n//\n// var doc = anth.create({\n//   'body': {ops:[{insert:'hey'}]},\n//   'title': 'your ball'\n// }); // not strictly necessary, as this just clones your value, but good practice.\n\n// // o is always an array of ops\n// // you must always specify a rich-text type in the `t` attribute for body changes.\n// anth.apply(x, [\n//   {\n//     'p': ['body'],\n//     't': 'rich-text',\n//     'o': [{insert:'you fool'}]\n//   }\n// ]);\n\n// //x should yield {\"body\":{\"ops\":[{\"insert\":\"you foolhey\"}]},\"title\":\"your ball\"}\n\n// // if we don't require invertibility (since the rich-text otttype is not invertible), don't bother with providing od (object delete)\n// anth.apply(x, [\n//   {\n//     'p': ['title'],\n//     'oi': 'new title!'\n//   }\n// ]);\n\n// // more different object inserts\n// anth.apply(x, [\n//   {\n//     'p': ['dek'],\n//     'oi': 'this is a great dek'\n//   },\n//   { 'p': ['title'],\n//     'oi': 'UPDATED: Amazing New Title!'\n//   },\n//   { 'p': ['site_group_ids'],\n//     'oi': [1,2,3]\n//   }\n// ]);\n\n// // prepend to a list\n// anth.apply(x, [\n//   {\n//     'p': ['site_group_ids', 0],\n//     'li': 42\n//   }\n// ]);\n","module.exports = {\n  type: 'line',\n  splitAffinity: 'left',\n  add: function(node, value) {\n    node.setAttribute('data-leadgraf', value.toString());\n    return node;\n  },\n  remove: function(node) {\n    node.removeAttribute('data-leadgraf');\n    return node;\n  },\n  value: function(node) {\n    return node.dataset.leadgraf === 'true';\n  },\n  match: function(node) {\n    return node.tagName === 'P' && node.hasAttribute('data-leadgraf');\n  }\n};\n","var bullet = { type: 'line', parentTag: 'UL', tag: 'LI' };\nmodule.exports = Object.assign({}, bullet, { exclusive: true, inherit: true });\n","module.exports = require('./object')('toh_tools');\n","var { Delta } = require('rich-text');\nvar { get: getPath } = require('lodash');\nvar assetActions = require('./assets');\nvar modalActions = require('./modals');\nvar editorActions = require('./editor');\n\nexport function selectFile(target) {\n  modalActions.pushModal({ selectAsset: { type: 'file', target } });\n}\n\nexport function editFile(file, target) {\n  modalActions.pushModal({ editObject: { type: 'file', data: file, target } });\n}\n\nexport function saveFile(file) {\n  return assetActions.saveAsset('file', file);\n}\n\nfunction getFileDelta(docId, file) {\n  var title = file.title || 'Untitled';\n  return new Delta().insert(title, { link: file.url });\n}\n\nexport function insertFile({ docId }, file) {\n  editorActions.insertAtCaret(docId, getFileDelta(docId, file));\n}\n\nexport function insertFileAtMouseEvent(docId, event, file) {\n  editorActions.insertAtMouseEvent(docId, event, getFileDelta(docId, file));\n}\n\n// Get the starting title from the last chunk of the URL\nfunction parseTitleFromUrl(url) {\n  var match = url.match(/.*\\/(.*?)$/);\n  return match ? match[1] : 'Untitled';\n}\n\nexport function setParams(params) {\n  params.title = getPath(params, ['file', 'name']) || parseTitleFromUrl(params.remote_file_url);\n}\n","module.exports = function(pagination) {\n  var { total, perPage } = pagination;\n  pagination.totalPages = (total === 0) ? 1 : Math.ceil(total / perPage);\n  return pagination;\n};\n","const request = require('../lib/request');\nconst docActions = require('./docs');\nconst messageActions = require('./messages');\nconst toPlaintext = require('convert-rich-text').toPlaintext;\nconst moment = require('moment-timezone');\nconst isPublished = require('../lib/is_published');\nconst isPackage = require('../../shared/is_package');\nconst getPackageStories = require('../../shared/get_package_stories');\nconst getWordCount = require('../../shared/delta/get_word_count');\nconst getEventDatetime = require('../../shared/get_event_datetime');\nconst { SEND_TO_PRINT_SUCCESS } = require('../config/messages');\nconst sentryActions = require('./sentry');\n\nexport async function publishOrSchedule(doc, params, onProgress) {\n  app.state.set(['requestInProgress'], true);\n  const contents = doc.head.contents;\n  let total = 1;\n  let loaded = 0;\n\n  if (isPackage(contents)) {\n    const toc = contents.draft.package_toc;\n    const stories = getPackageStories(toc);\n    total += stories.length;\n    onProgress({ loaded, total });\n\n    try {\n      await Promise.all(stories.reduce((promises, story) => {\n        const packageDoc = app.state.get(['packageDocs', story.uuid]);\n        if (!isPublished(packageDoc.status)) {\n          promises.push(publishOrScheduleDoc(packageDoc, params));\n        }\n        loaded += 1;\n        onProgress({ loaded, total });\n        return promises;\n      }, []));\n    } catch (err) {\n      sentryActions.reportError(err);\n    }\n  }\n\n  await publishOrScheduleDoc(doc, params);\n  if (onProgress) {\n    onProgress({ loaded: total, total });\n  }\n  app.state.set(['requestInProgress'], false);\n}\n\nasync function publishOrScheduleDoc(doc, params) {\n  if ('publishScheduledFor' in params) {\n    await scheduleDoc(doc, params.publishScheduledFor);\n  } else {\n    await publishDoc(doc, params);\n  }\n  if (params.publishScheduledFor !== null) {\n    trackPublishOrScheduleEvent(params.publishScheduledFor ? 'Scheduled' : 'Published', doc, params);\n  }\n}\n\nasync function publishDoc(doc, params) {\n  try {\n    await request(`/api/content/docs/${doc.id}/publish`, { method: 'POST', body: params });\n  } catch (err) {\n    if (isPackage(doc.head.contents)) {\n      sentryActions.reportError(err, false);\n    }\n    messageActions.showError();\n    app.state.set(['requestInProgress'], false);\n  }\n}\n\nexport async function scheduleDoc(doc, publishScheduledFor, opts = {}) {\n  const history = doc.head.contents.publish_history;\n\n  // If scheduling is being canceled, do our best to restore the doc's previous status\n  let status;\n  if (publishScheduledFor) {\n    status = 'SCHEDULED';\n  } else if (getEventDatetime(history, ['approved'])) {\n    status = 'APPROVED';\n  } else if (getEventDatetime(history, ['submitted'])) {\n    status = 'SUBMITTED';\n  } else {\n    status = 'DRAFT';\n  }\n\n  let eventType;\n  if (!publishScheduledFor) {\n    eventType = 'schedule_canceled';\n  } else if (publishScheduledFor && doc.head.contents.publish_scheduled_for) {\n    eventType = 'rescheduled';\n  } else {\n    eventType = 'scheduled';\n  }\n\n  // Update the doc status, scheduled date, and publish history\n  await docActions.updateDoc(doc.id, {\n    status,\n    delta: [\n      {\n        p: ['publish_scheduled_for'],\n        oi: publishScheduledFor,\n        od: doc.head.contents.publish_scheduled_for\n      },\n      ...pubHistoryUpdate(doc, eventType, { publishScheduledFor, ...opts })\n    ]\n  });\n}\n\nexport function unschedule(doc, onProgress) {\n  return publishOrSchedule(doc, { publishScheduledFor: null }, onProgress);\n}\n\nexport function pubHistoryUpdate(doc, type, opts = {}) {\n  const event = {\n    date: new Date().toISOString(),\n    user_id: opts.userId || app.state.get(['user', 'id']),\n    event_type: type\n  };\n  if (type === 'community_changed') {\n    event.origin_community_id = app.state.get(['community', 'id']);\n    event.destination_community_id = opts.communityId;\n  } else if (type === 'scheduled' || type === 'rescheduled') {\n    event.scheduled_date = opts.publishScheduledFor;\n  }\n  const index = doc.head.contents.publish_history.length;\n  return [{\n    p: ['publish_history', index],\n    li: event\n  }];\n}\n\nfunction trackPublishOrScheduleEvent(eventName, doc, params) {\n\n  if (window.ga) {\n    const draft = doc.head.contents.draft;\n    const history = doc.head.contents.publish_history;\n\n    const firstPublishedDate = getEventDatetime(history, ['published', 'published_via_schedule', 'backdated'], { latest: false });\n    const lastPublishedDate = getEventDatetime(history, ['published', 'published_via_schedule', 'backdated']);\n    const isRepublish = firstPublishedDate && firstPublishedDate !== lastPublishedDate;\n    const formatDate = date => {\n      return date ? moment(date).format('YYYY-MM-DD HH:mm') : '';\n    };\n    window.ga('send', {\n      hitType: 'event',\n      eventCategory: 'publish',\n      eventAction: 'publish:entry',\n      dimension1: doc.entry_id,\n      dimension4: draft.contributors[0].chorus_id,\n      dimension5: formatDate(params.publishScheduledFor || firstPublishedDate),\n      dimension8: formatDate(params.publishScheduledFor || lastPublishedDate),\n      dimension10: draft.site_groups.map(g => g.name).join(':'),\n      dimension11: app.state.get('community', 'slug'),\n      dimension12: app.state.get(['community', 'network', 'slug']),\n      dimension26: new Date(params.publishScheduledFor || lastPublishedDate).getHours(),\n      dimension35: app.state.get('user', 'fullOrUserName'),\n      dimension36: toPlaintext(draft.hed),\n      dimension37: toPlaintext(draft.internal_title),\n      dimension38: toPlaintext(draft.seo_title),\n      dimension39: toPlaintext(draft.social_title),\n      dimension40: isRepublish ? 'Yes' : 'No',\n      dimension53: getWordCount(draft.body)\n    });\n  }\n}\n\nexport async function sendToPrint(doc, deskName) {\n  app.state.set(['requestInProgress'], true);\n  try {\n    await request(`/api/content/docs/${doc.id}/dti_publish`, { method: 'POST', body: { deskName } });\n    messageActions.showMessage({\n      type: 'positive',\n      message: SEND_TO_PRINT_SUCCESS\n    });\n  } catch (err) {\n    messageActions.showError();\n  } finally {\n    app.state.set(['requestInProgress'], false);\n  }\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar thumborUrl = require('../../lib/thumbor_url');\n\ncomponent.exports = {\n  data: {\n    doc: null\n  },\n  computed: {\n    imageLeft: function() {\n      return thumborUrl(this.get('doc.head.contents.image_left.src'), { fit_in: true, width: 800, height: 500 });\n    },\n    imageRight: function() {\n      return thumborUrl(this.get('doc.head.contents.image_right.src'), { fit_in: true, width: 800, height: 500 });\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"imageslider-container\"},f:[{t:7,p:[2,3,38],e:\"div\",a:{\"class\":\"imageslider-inner\"},f:[{t:7,p:[3,5,74],e:\"div\",a:{\"class\":\"imageslider__image imageslider__image--left\"},f:[{t:4,n:50,r:\"doc.head.contents.image_left\",f:[{t:7,p:[5,9,183],e:\"img\",a:{src:[{t:2,r:\"imageLeft\",p:[5,19,193]}]}}],p:[4,7,138]}]},\" \",{t:7,p:[8,5,240],e:\"div\",a:{\"class\":\"imageslider__image imageslider__image--right\"},f:[{t:4,n:50,r:\"doc.head.contents.image_right\",f:[{t:7,p:[10,9,351],e:\"img\",a:{src:[{t:2,r:\"imageRight\",p:[10,19,361]}]}}],p:[9,7,305]}]},\" \",{t:7,p:[13,5,409],e:\"div\",a:{\"class\":\"imageslider__handle\"}}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = function() {\n  window.Promise = window.Promise || require('ractive').Promise;\n  require('isomorphic-fetch');\n  require('matches-selector-polyfill/dist/matches-selector-polyfill');\n};\n","function GraphQLError(errors) {\n  Error.call(this);\n\n  var message = 'GraphQL errors returned. ' + errors.length + ' errors occurred';\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, GraphQLError);\n  } else {\n    this.stack = (new Error(message)).stack;\n  }\n\n  this.message = message;\n  this.data = errors;\n  this.name = this.constructor.name;\n}\n\nGraphQLError.prototype = Object.create(Error.prototype);\nGraphQLError.prototype.constructor = GraphQLError;\n\nexport default GraphQLError;\n","module.exports = {\n  type: 'line',\n  attribute: 'data-grouping'\n};\n","module.exports = require('./object')('pym');\n","/*\n * Play GIF\n *\n * by Jesse Young\n * un-jQueryfied by Blake Thomson\n *\n * Play GIF animations on mouseover (or any other event).\n *\n * Examples:\n *    playGIF(document.querySelectorAll('img[src$=\".gif\"]'));\n *    playGIF(images, { on: 'click' }); // default is mouseover\n */\n\nmodule.exports = function(elements, options = {}) {\n  var settings = Object.assign({\n    on: 'mouseenter',  // event to play animation\n    off: 'mouseleave',  // event to stop animation\n    autoResize: true,  // canvas dimensions adapt to container\n    overlay: false,\n    circleBackgroundColor: '#33C7E0',\n    circleTextColor: '#fff',\n    gifText: 'GIF',\n    removeAnchor: true // sometimes writers link the GIF to itself, causing it to open in a new window.\n  }, options);\n\n  // Draw \"GIF\" circle on top of image\n  var drawGIFOverlay = function(context, x, y) {\n    x = Math.floor(x);\n    y = Math.floor(y);\n\n    // circle\n    var radius = 35;\n    context.fillStyle = settings.circleBackgroundColor;\n    context.beginPath();\n    context.arc(x, y, radius, 0, Math.PI * 2, true);\n    context.closePath();\n    context.fill();\n\n    // text\n    context.fillStyle = settings.circleTextColor;\n    context.font = 'sans-serif';\n    context.textAlign = 'center';\n    context.textBaseline = 'middle';\n    context.fillText(settings.gifText, x, y);\n  };\n\n  for (let gif of elements) {\n    // Skip if it's not a GIF\n    if (gif.tagName !== 'IMG' || !/\\.gif$/i.test(gif.src)) { return true; }\n\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var img = new Image();\n\n    var startAnimation = function(a, b) {\n      // Hackery to make GIFs play from the beginning everytime.\n      // Momentarily replace the src with a blank 1x1 GIF, then set it back\n      // to the original src.\n      var src = b.src;\n      b.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n      b.style.width = a.width;\n      b.style.height = a.height;\n\n      setTimeout(function() { b.src = src; }, 0);\n\n      a.parentNode.replaceChild(b, a);\n    };\n\n    var stopAnimation = function(a, b) {\n      b.parentNode.replaceChild(a, b);\n    };\n\n    img.onload = function() {\n      // Replace GIF w/ static canvas image\n      var width = gif.offsetWidth;\n      var height = gif.offsetHeight;\n      canvas.width = width;\n      canvas.height = height;\n      context.drawImage(img, 0, 0, width, height);\n\n      var styles = getComputedStyle(gif);\n\n      // Wrap $canvas in a parent container so it can inherit the dynamic width dimension\n      if (settings.autoResize === true) {\n        canvas.setAttribute('data-src', gif.src);\n        canvas.setAttribute('class', 'gif');\n        var faux = document.createElement('span');\n        faux.classList.add('p-playgif');\n        faux.style.float = styles.float;\n        faux.style.margin = styles.margin;\n        faux.style.padding = styles.padding;\n        faux.style.width = styles.width;\n        faux.style.height = styles.height;\n        faux.style.position = 'relative';\n        faux.style.display = 'block';\n\n        canvas.style.position = 'absolute';\n        canvas.style.top = '0';\n        canvas.style.left = '0';\n\n        // Wrap canvas in container\n        faux.appendChild(canvas);\n        canvas = faux;\n      } else {\n        // Inherit styles of GIF\n        canvas.style.float = styles.float;\n        canvas.style.margin = styles.margin;\n        canvas.style.padding = styles.padding;\n        canvas.style.display = styles.display;\n      }\n\n      // Replace GIF w/ static canvas\n      gif.parentNode.replaceChild(canvas, gif);\n\n      // Sometimes the containing element fixed dimensions and cut off\n      // portions of the GIF. In this case, use the parent's dimensions\n      // to center the circle overlay.\n      var parent = canvas.parentNode;\n      var parentStyles = getComputedStyle(parent);\n      if (parent.tagName !== 'p' &&\n          (parentStyles.maxWidth !== 'none' || parentStyles.maxHeight !== 'none')) {\n        width = parent.offsetWidth;\n        height = parent.offsetHeight;\n      }\n\n      if (settings.removeAnchor) {\n        if (parent.tagName === 'A' && /\\.gif$/i.test(parent.href)) {\n          parent.parentNode.replaceChild(canvas, parent);\n        }\n      }\n\n      // Show GIF overlay if dimensions are greater than 150x150\n      if (width > 150 && height > 150 && settings.overlay) {\n        drawGIFOverlay(context, width / 2, height / 2);\n      }\n\n      // Attach event listeners to canvas and gif\n      canvas.addEventListener(settings.on, function() { startAnimation(canvas, gif); });\n      gif.addEventListener(settings.off, function() { stopAnimation(canvas, gif); });\n    };\n\n    img.src = gif.src;\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nimport toInternalHtml from '../../lib/quill/to_internal_html';\n\ncomponent.exports = {\n  data: {\n    doc: null\n  },\n  computed: {\n    title: function() {\n      return toInternalHtml(this.get('doc.head.contents.title'));\n    },\n    options: function() {\n      var options = this.get('doc.head.contents.options');\n      return options.map(opt => toInternalHtml(opt.value));\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"poll-inner\"},f:[{t:7,p:[2,3,27],e:\"h2\",f:[{t:3,r:\"title\",p:[2,7,31]}]},\" \",{t:7,p:[3,3,50],e:\"div\",a:{\"class\":\"poll-options\"},f:[{t:4,r:\"options\",f:[{t:7,p:[5,7,100],e:\"label\",f:[{t:7,p:[6,9,116],e:\"input\",a:{type:\"radio\"}},\" \",{t:7,p:[7,9,145],e:\"b\"},\" \",{t:3,r:\".\",p:[8,9,161]}]}],p:[4,5,81]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = function isLinkPost(contents) {\n  return contents.draft.hasOwnProperty('redirect_url');\n};\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  data: {\n    newsletter: null\n  },\n  computed: {\n    name: function() {\n      var name = this.get('newsletter.name');\n      return name.replace(/'/g, '’');\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"span\",f:[\"Subscribe to \",{t:7,p:[1,20,19],e:\"em\",f:[{t:2,r:\"name\",p:[1,24,23]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","/*\n\n  ractive-events-keys\n  ===================\n\n  Version 0.1.2.\n\n  << description goes here... >>\n\n  ==========================\n\n  Troubleshooting: If you're using a module system in your app (AMD or\n  something more nodey) then you may need to change the paths below,\n  where it says `require( 'ractive' )` or `define([ 'ractive' ]...)`.\n\n  ==========================\n\n  Usage: Include this file on your page below Ractive, e.g:\n\n      <script src='lib/ractive.js'></script>\n      <script src='lib/ractive-events-keys.js'></script>\n\n  Or, if you're using a module loader, require this module:\n\n      // requiring the plugin will 'activate' it - no need to use\n      // the return value\n      require( 'ractive-events-keys' );\n\n  << more specific instructions for this plugin go here... >>\n\n*/\n\n(function ( global, factory ) {\n\n  'use strict';\n\n  // Common JS (i.e. browserify) environment\n  if ( typeof module !== 'undefined' && module.exports && typeof require === 'function' ) {\n    factory( require( 'ractive' ) );\n  // AMD?\n  } else if ( typeof define === 'function' && define.amd ) {\n    define(['ractive'], factory);\n  // browser global\n  } else if ( global.Ractive ) {\n    factory( global.Ractive );\n  } else {\n    throw new Error( 'Could not find Ractive! It must be loaded before the ractive-events-keys plugin' );\n  }\n\n}( typeof window !== 'undefined' ? window : this, function ( Ractive ) {\n\n  'use strict';\n\n  // TODO can we just declare the keydowhHandler once? using `this`?\n\n  var makeKeyDefinition = function ( code ) {\n    return function ( node, fire ) {\n      var keydownHandler;\n\n      node.addEventListener( 'keydown', keydownHandler = function ( event ) {\n        var which = event.which || event.keyCode;\n\n        if ( which === code ) {\n          event.preventDefault();\n\n          fire({\n            node: node,\n            original: event\n          });\n        }\n      }, false );\n\n      return {\n        teardown: function () {\n          node.removeEventListener( 'keydown', keydownHandler, false );\n        }\n      };\n    };\n  };\n  var events = makeKeyDefinition;\n\n  events = Ractive.events;\n\n  events.enter = makeKeyDefinition( 13 );\n  events.tab = makeKeyDefinition( 9 );\n  events.escape = makeKeyDefinition( 27 );\n  events.space = makeKeyDefinition( 32 );\n\n  events.leftarrow = makeKeyDefinition( 37 );\n  events.rightarrow = makeKeyDefinition( 39 );\n  events.downarrow = makeKeyDefinition( 40 );\n  events.uparrow = makeKeyDefinition( 38 );\n\n}));\n","exports.story = 'story';\nexports.gallery = 'gallery';\nexports.aside = 'sidebar';\nexports.table = 'table';\nexports.poll = 'poll';\nexports.scorecard = 'scorecard';\nexports.imageslider = 'image slider';\nexports.productcard = 'product card';\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"ol\",a:{\"class\":\"toh-tools-inner\"},f:[{t:4,r:\"toh_tools\",f:[{t:7,p:[3,5,50],e:\"li\",a:{\"class\":\"toh-tools-inner__tool\"},f:[{t:7,p:[4,7,91],e:\"div\",a:{\"class\":\"toh-tools-inner__image-container\"},f:[{t:7,p:[5,9,146],e:\"div\",a:{\"class\":\"toh-tools-inner__image-wrapper\"},f:[{t:7,p:[6,13,203],e:\"img\",a:{src:[{t:2,r:\"./image.src\",p:[6,23,213]}]}}]}]},\" \",{t:7,p:[9,7,270],e:\"div\",a:{\"class\":\"toh-tools-inner__caption\"},f:[{t:2,r:\"./caption\",p:[9,45,308]}]}]}],p:[2,3,31]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = require('./object')('ratingcard');\n","var secondheader = { type: 'line', tag: 'H2' };\nmodule.exports = Object.assign({}, secondheader, { exclusive: true });\n","module.exports = {\n  type: 'line',\n  splitAffinity: 'right',\n  add: function(node, value) {\n    node.setAttribute('data-endmark', value.toString());\n    return node;\n  },\n  remove: function(node) {\n    node.removeAttribute('data-endmark');\n    return node;\n  },\n  value: function(node) {\n    return node.dataset.endmark === 'true';\n  },\n  match: function(node) {\n    return node.tagName === 'P' && node.hasAttribute('data-endmark');\n  }\n};\n","module.exports = {\n  type: 'line',\n  reverseMerge: true,\n  add: function(node) {\n    node.classList.add('soft-break');\n    return node;\n  },\n  remove: function(node) {\n    node.classList.remove('soft-break');\n    return node;\n  },\n  value: function(node) {\n    return node.classList.contains('soft-break');\n  },\n  match: function(node) {\n    return node.classList.contains('soft-break');\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { debounce } = require('lodash');\nvar playGif = require('../../lib/play_gif');\nvar thumborUrl = require('../../lib/thumbor_url');\n\ncomponent.exports = {\n  data: {\n    doc: null\n  },\n  computed: {\n    thumbnailUrl: function() {\n      var images = this.get('doc.head.contents.images');\n      if (images.length > 0) {\n        return thumborUrl(images[0].src, { fit_in: true, width: 800, height: 500 });\n      }\n    }\n  },\n  onrender: function() {\n    this.observe('isCollapsed', debounce(isCollapsed => {\n      if (!isCollapsed) {\n        var image = this.find('img');\n        if (image) {\n          playGif([image]);\n        }\n      }\n    }));\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"gallery-inner\"},f:[{t:4,n:50,r:\"thumbnailUrl\",f:[{t:7,p:[3,5,55],e:\"img\",a:{src:[{t:2,r:\"thumbnailUrl\",p:[3,15,65]}]}}],p:[2,3,30]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","const { get: getPath } = require('lodash');\n\nfunction hasPolicyRole(objectOperation) {\n  const user = app.state.get('user');\n  const communityId = app.state.get(['community', 'id']);\n  const roles = getPath(app.config.policyRoles, objectOperation);\n\n  return hasRoleOnCommunity(user, communityId, roles);\n}\n\nfunction hasRoleOnCommunity(user, communityId, roles) {\n  return (\n    user.networkRoles.some(r => roles[r]) ||\n    user.memberships.some(m => (\n      membershipAuthorized(m, roles) &&\n      communityId === m.community.id\n    ))\n  );\n}\n\nfunction membershipAuthorized(membership, roles) {\n  return membership.status === 'ACTIVE' && membership.roles.some(r => roles[r]);\n}\n\nfunction isNetworkAdmin() {\n  const user = app.state.get('user');\n  return user.networkRoles.includes('NETWORK_ADMIN');\n}\n\nfunction isCommunityPostAuthor() {\n  const user = app.state.get('user');\n  const communityId = app.state.get(['community', 'id']);\n\n  return hasRoleOnCommunity(user, communityId, { 'COMMUNITY_POST_AUTHOR': true });\n}\n\nmodule.exports = {\n  hasPolicyRole,\n  isNetworkAdmin,\n  isCommunityPostAuthor\n};\n","require('./initializers/00_polyfills')();\n\nvar Baobab = require('baobab');\nvar initRactive = require('./initializers/ractive');\nvar renderComponent = require('./lib/render_component');\nvar res = require('resonance');\n\nvar dragging = false;\n\nconst OBJECT_TYPES = [\n  'actionbox',\n  'credits',\n  'doc',\n  'hr',\n  'html',\n  'image',\n  'newsletter',\n  'oembed',\n  'pullquote',\n  'toh_project_details',\n  'toh_tools',\n  'pym',\n  'ratingcard',\n  'readmore',\n  'video'\n];\n\nfunction onload() {\n  var data = JSON.parse(window.frameElement.dataset.object);\n  data.type = Object.keys(data).find(key => OBJECT_TYPES.includes(key));\n\n  // Remove placeholder loading indicator and render data\n  document.body.innerHTML = '';\n  var InlineObject = require('./components/object/inline-object.html');\n  renderComponent(new InlineObject({ data }), document.body);\n\n  res.init({ loadCSSManually: true, shimStyles: true });\n}\n\nfunction generateClick(e) {\n  e.preventDefault();\n  e.stopPropagation();\n  var event = new MouseEvent('click', {\n    bubbles: true,\n    cancelable: true\n  });\n  if (!dragging) {\n    window.frameElement.dispatchEvent(event);\n  }\n  return false;\n}\n\n// Create a minimal copy of the main app instance for the current object. Clone\n// the state tree into a unique instance. This ensures cursor listeners within\n// <inline-object> don't try to listen to events fired by the main window, since\n// doing so causes errors in Firefox and Edge once the iframe is removed from the\n// DOM. The caveat here is that as window.top.app.state updates, our instance of\n// app.state won't keep track. For now, that is not a concern since we only care\n// about initial snapshots of state.\n//\n// More details about why we need this work around live here:\n// https://github.com/voxmedia/anthem/issues/5747\nfunction App() {\n  this.config = window.top.app.config;\n  this.env = window.top.app.env;\n  this.state = new Baobab(window.top.app.state.deepClone());\n  initRactive(this);\n}\n\n// Very first thing, setup window.app\nwindow.app = new App();\n\nwindow.addEventListener('load', onload);\nwindow.addEventListener('click', generateClick);\nwindow.addEventListener('touchend', generateClick);\nwindow.addEventListener('touchmove', () => dragging = true);\nwindow.addEventListener('touchstart', () => dragging = false);\n","import { get as getPath, compact, cloneDeep } from 'lodash';\nimport moment from 'moment-timezone';\nimport request from '../lib/request';\nimport parsePagination from '../lib/parse_pagination';\nimport isPublished from '../lib/is_published';\nimport stripProtocol from '../lib/strip_protocol';\nimport getObjects from '../../shared/delta/get_objects';\nimport getSubdocIds from '../../shared/subdoc_ids';\nimport * as entryActions from './entry';\nimport * as messageActions from './messages';\nimport * as publishActions from './publish';\nimport * as communityActions from './communities';\nimport * as userActions from './users';\nimport { isValidUrlWithSlash } from '../lib/is_valid_url';\n\nexport function createDoc(schemaName, params={}) {\n  app.state.set(['requestInProgress'], true);\n  return request('/new' + schemaName, {\n    method: 'POST',\n    query: {\n      community_id: app.state.get('community', 'id')\n    },\n    body: params\n  }).then((doc) => {\n    app.state.set(['requestInProgress'], false);\n    return doc;\n  });\n}\n\nexport function createDocAndRedirect(schemaName, params={}) {\n  return createDoc(schemaName, params).then(doc => {\n    var page = 'compose';\n    if (params.entry_type === 'LandingPage') {\n      page = 'package';\n    } else if (params.entry_type === 'CustomStory') {\n      page = 'customstory';\n    }\n    document.location.href = `/${page}/${doc.uuid}`;\n  });\n}\n\n// The many steps necessary to move a doc from one community to another\nexport async function changeDocCommunityAndRedirect(communityId) {\n  app.state.set(['requestInProgress'], true);\n  const doc = app.state.get(['doc']);\n\n  if (doc.status === 'SCHEDULED') {\n    await publishActions.unschedule(doc);\n  }\n\n  const delta = publishActions.pubHistoryUpdate(doc, 'community_changed', { communityId });\n\n  // Update the community twitter handle\n  const newCommunity = await communityActions.getCommunity(communityId, 'Basic');\n  const newCommunityHandle = newCommunity.twitterScreenName || null;\n  const currentCommunityHandle = getPath(doc.head.contents, ['draft', 'autotweets', 0, 'handle']) || null;\n  if (newCommunityHandle !== currentCommunityHandle && !isPublished(doc.status)) {\n    delta.push({\n      p: ['draft', 'autotweets', 0, 'handle'],\n      od: currentCommunityHandle,\n      oi: newCommunityHandle\n    });\n  }\n\n  await updateDoc(doc.id, { community_id: communityId, delta });\n\n  if (isPublished(doc.status)) {\n    await publishActions.publishOrSchedule(doc, { republishPublished: true });\n  } else {\n    await entryActions.updateEntry(doc, { community_id: communityId });\n  }\n\n  document.location.href = `/preflight/${doc.uuid}?communityChanged=true`;\n}\n\nexport function getDoc(id) {\n  return request('/api/content/docs/' + id, {\n    query: { includes: 'owner,updateUser,community,external_ids' },\n    opts: { cache: true, force: true }\n  });\n}\n\nexport function validateDoc(id) {\n  return request(`/api/content/docs/${id}/validate`, { query: {\n    returnErrors: true,\n    returnWarnings: true,\n    returnValid: true\n  } });\n}\n\nexport function getEntryParams(id) {\n  return request(`/api/content/docs/${id}/entry_params`);\n}\n\nfunction parseUrlsFromQuery(query) {\n  const newQuery = cloneDeep(query);\n  let searchText = newQuery.q || '';\n  const terms = searchText.split(' ').reduce((memo, term) => {\n    if (isValidUrlWithSlash(term)) {\n      memo.url = stripProtocol(term);\n    } else if (term) {\n      memo.q.push(term);\n    }\n\n    return memo;\n  }, { url: undefined, q: [] });\n\n  if (terms.q.length > 0) {\n    newQuery.q = terms.q.join(' ');\n  } else {\n    delete newQuery.q;\n  }\n\n  if (terms.url) {\n    newQuery.url = terms.url;\n  }\n\n  return newQuery;\n}\n\nexport async function searchDocs(query, opts = null) {\n  const searchText = query.q || '';\n  const queryWithUrlParsedOut = parseUrlsFromQuery(query);\n\n  let { docs, pagination, parsedQuery } = await request('/api/content/docs', { query: queryWithUrlParsedOut, opts });\n\n  if (query.schema_name === 'story') {\n    let userIds = [];\n    for (let doc of docs) {\n      let contributors = getPath(doc, ['head', 'contents', 'draft', 'contributors'], []);\n      userIds = userIds.concat(contributors.map(c => c.chorus_id));\n    }\n\n    let users = await userActions.getUsers(userIds);\n    for (let doc of docs) {\n      let contributors = getPath(doc, ['head', 'contents', 'draft', 'contributors'], []);\n      doc.contributors = compact(contributors.map(c => users.find(u => u && u.id === c.chorus_id)));\n    }\n  }\n\n  return {\n    docs,\n    formattedQuery: formatParsedQuery(parsedQuery, searchText),\n    pagination: parsePagination(pagination),\n  };\n}\n\nfunction formatParsedQuery(parsedQuery, searchText) {\n  if (!parsedQuery || !searchText) {\n    return [];\n  }\n\n  let { keywordQueries, phrases, tokens } = parsedQuery;\n\n  let keywords = keywordQueries.reduce((formatted, { keyword, type, value }) => {\n    let isPagesQuery = (\n      keyword === 'type' &&\n      value === 'page' &&\n      window.location.pathname.includes('pages')\n    );\n    // Remove `type:page` implicitly added in searchParams if on pages dashboard\n    if (isPagesQuery) {\n      return formatted;\n    }\n\n    if (type === 'phrase') {\n      value = `\"${value}\"`;\n    } else if (type === 'date') {\n      value = value.original;\n    }\n\n    formatted.push(`${keyword}:${value}`);\n    return formatted;\n  }, []);\n\n  return keywords.map(value => ({ type: 'keyword', value }))\n    .concat((phrases || []).map(value => ({ type: 'phrase', value: `\"${value}\"` })))\n    .concat([{ type: 'tokens', value: tokens }])\n    .filter(({ value }) => value !== '');\n}\n\nexport function updateDoc(id, params) {\n  return request('/api/content/docs/' + id, {\n    method: 'PUT',\n    body: params\n  }, { handleError: false });\n}\n\nexport function subdocsForDoc(doc) {\n  var subdocIds = getSubdocIds(doc.head.contents);\n  return app.state.get(['subdocs']).filter(doc => subdocIds.includes(doc.id));\n}\n\nexport function getAllDocObjects(doc, types) {\n  var contents = doc.head.contents;\n  var subdocs = subdocsForDoc(doc);\n\n  // objects from doc body\n  var objects = getObjects(contents.draft.body, types);\n\n  // objects from all aside and scorecard subdocs\n  for (let subdoc of subdocs) {\n    if ((subdoc.schema_name === 'aside' || subdoc.schema_name === 'scorecard') && subdoc.head.contents.hasOwnProperty('body')) {\n      objects = objects.concat(getObjects(subdoc.head.contents.body, types));\n    }\n  }\n\n  // if oembed is in the given types, add the object from main_oembed\n  const mainOembed = contents.draft.main_oembed;\n  if (types.includes('oembed') && mainOembed) {\n    objects.push({ oembed: mainOembed });\n  }\n\n  return objects;\n}\n\nexport function setArchived(doc) {\n  var archived = !doc.archived;\n  return updateDoc(doc.id, { archived }).then(() => {\n    return archived;\n  });\n}\n\n// Within this action, both the unscheduling logic + the logic to update trashed_at\n// in Anthem use server-side autosave via a `delta` param. This is because `setTrashed`\n// can be called from the dashboard, where client-side autosave isn't instantiated.\nexport function setTrashed(doc) {\n  var prevTrashedAt = getPath(doc, ['head', 'contents', 'trashed_at']);\n  var nextTrashedAt = prevTrashedAt ? null : moment().toISOString();\n\n  // If the user is moving a scheduled story to the trash, ensure we unschedule\n  // the story first\n  var promise = Promise.resolve();\n  if (nextTrashedAt && doc.status === 'SCHEDULED') {\n    promise = publishActions.unschedule(doc);\n  }\n\n  return promise\n    .then(() => updateDoc(doc.id, {\n      delta: [{\n        p: ['trashed_at'],\n        od: prevTrashedAt,\n        oi: nextTrashedAt\n      }]\n    }))\n    .then(() => entryActions.updateEntryFlags(doc, { trashed_at: nextTrashedAt }))\n    .then(() => {\n      return nextTrashedAt;\n    })\n    .catch(() => messageActions.showError());\n}\n\nexport async function setStatus(doc, status, publishHistoryType) {\n  try {\n    app.state.set(['requestInProgress'], true);\n    await updateDoc(doc.id, { status, delta: publishActions.pubHistoryUpdate(doc, publishHistoryType || status.toLowerCase()) });\n    app.state.set(['requestInProgress'], false);\n  } catch (err) {\n    messageActions.showError();\n  }\n}\n","export default class WorkerQueue {\n  constructor() {\n    this.queue = [];\n    this.isProcessing = false;\n  }\n\n  push(callback, ...args) {\n    this.queue.push({ callback, args });\n  }\n\n  async process() {\n    if (this.isProcessing) {\n      // exit if already processing. we'll continue processing the queue after this one finishes\n      return;\n    }\n    this.isProcessing = true;\n\n    if (this.queue.length <= 0) {\n      // exit nothing left to process\n      this.isProcessing = false;\n      return;\n    }\n\n    // process the first thing put in the queue (FIFO)\n    while (this.queue.length > 0) {\n      const { callback, args } = this.queue.shift();\n      await callback(...args);\n    }\n    this.isProcessing = false;\n  }\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { debounce } = require('lodash');\nvar playGif = require('../../lib/play_gif');\nvar thumborUrl = require('../../lib/thumbor_url');\n\ncomponent.exports = {\n  data: {\n    image: null\n  },\n  computed: {\n    thumbnailUrl: function() {\n      return thumborUrl(this.get('image.src'), { fit_in: true, width: 800, height: 500 });\n    }\n  },\n  onrender: function() {\n    this.observe('isCollapsed', debounce(isCollapsed => {\n      if (!isCollapsed) {\n        var image = this.find('img');\n        playGif([image]);\n      }\n    }));\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"image-inner\"},f:[{t:7,p:[2,3,28],e:\"img\",a:{src:[{t:2,r:\"thumbnailUrl\",p:[2,13,38]}]}}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = {\n  add: function(node, value, dom) {\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n      var span = node.ownerDocument.createElement('span');\n      dom(node).wrap(span);\n      node = span;\n    }\n    node.setAttribute('data-autolink-id', value.id);\n    node.setAttribute('data-autolink-href', value.href);\n    if (value.disabled) {\n      node.setAttribute('data-autolink-disabled', '');\n    } else {\n      node.removeAttribute('data-autolink-disabled');\n    }\n    return node;\n  },\n  remove: function(node) {\n    node.removeAttribute('data-autolink-id');\n    node.removeAttribute('data-autolink-href');\n    node.removeAttribute('data-autolink-disabled');\n    return node;\n  },\n  value: function(node) {\n    return {\n      id: node.getAttribute('data-autolink-id'),\n      href: node.getAttribute('data-autolink-href'),\n      disabled: node.hasAttribute('data-autolink-disabled')\n    };\n  },\n  match: function(node) {\n    return node.hasAttribute('data-autolink-id');\n  }\n};\n","var Baobab = require('baobab');\nvar { dynamicNode } = Baobab;\nvar { filter } = require('lodash');\nvar getDocLabel = require('../lib/get_doc_label');\nvar isPackage = require('../../shared/is_package');\nvar isPackageMember = require('../../shared/is_package_member');\n\nexport default function initState(user) {\n  window.quills = {};\n\n  var initialState = {\n    user,\n    users: [],\n    messages: [],\n    entitlements: [],\n    subdocs: dynamicNode({\n      cursors: {\n        docsById: ['autosave', 'docsById']\n      },\n      get: ({ docsById }) => filter(docsById, doc => doc.schema_name !== 'story')\n    }),\n    packageDocs: dynamicNode({\n      cursors: {\n        doc: ['doc'],\n        docsById: ['autosave', 'docsById']\n      },\n      get: ({ doc, docsById }) => {\n        if (isPackage(doc.head.contents)) {\n          return Object.keys(docsById).reduce((docs, docId) => {\n            var doc = docsById[docId];\n            if (isPackageMember(doc.head.contents)) {\n              docs[doc.uuid] = doc;\n            }\n            return docs;\n          }, {});\n        }\n        return {};\n      }\n    }),\n    docMissingEntry: dynamicNode({\n      cursors: {\n        doc: ['doc']\n      },\n      get: ({ doc }) => doc && !doc.entry_id\n    }),\n    readOnly: dynamicNode({\n      cursors: {\n        autosaveError: ['autosave', 'error'],\n        docMissingEntry: ['docMissingEntry'],\n        trashedAt: ['doc', 'head', 'contents', 'trashed_at'],\n        socketError: ['socketError'],\n        messages: ['messages']\n      },\n      get: ({ autosaveError, docMissingEntry, trashedAt, socketError, messages }) => (\n        docMissingEntry   ||\n        autosaveError     ||\n        trashedAt != null ||\n        socketError ||\n        messages.some(m => m.forceRefresh)\n      )\n    }),\n    docLabel: dynamicNode({\n      cursors: {\n        doc: ['doc']\n      },\n      get: ({ doc }) => getDocLabel(doc)\n    }),\n    subdocLabel: dynamicNode({\n      cursors: {\n        subdoc: ['subdoc']\n      },\n      get: ({ subdoc }) => subdoc ? getDocLabel(subdoc) : ''\n    }),\n    appWorking: dynamicNode({\n      cursors: {\n        autosaveDirty: ['autosave', 'dirty'],\n        requestInProgress: ['requestInProgress']\n      },\n      get: ({ autosaveDirty, requestInProgress }) => {\n        return (autosaveDirty && Object.keys(autosaveDirty).length > 0) || requestInProgress;\n      }\n    })\n  };\n\n  app.state = new Baobab(initialState, { pure: false, immutable: false });\n}\n","var getThumborUrl = require('../../shared/thumbor_url');\n\nexport default function thumborUrl(url, opts) {\n  return getThumborUrl(url, Object.assign({}, opts, { config: app.config.thumbor }));\n}\n","module.exports = {\n  tag: 'A',\n  add: function(node, value) {\n    node.setAttribute('href', value);\n    return node;\n  },\n  remove: function(node) {\n    node.removeAttribute('href');\n    return node;\n  },\n  value: function(node) {\n    return node.getAttribute('href');\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nvar toPlaintext = require('convert-rich-text').toPlaintext;\nvar tableHasData = require('../../lib/table_has_data');\n\ncomponent.exports = {\n  data: {\n    doc: null\n  },\n  computed: {\n    title: function() {\n      return toPlaintext(this.get('doc.head.contents.title'));\n    },\n    rows: function() {\n      var contents = this.get('doc.head.contents');\n      if (!tableHasData(contents)) {\n        return [];\n      }\n\n      return contents.rows.slice(0, 5);\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"h2\",f:[{t:2,r:\"title\",p:[1,5,4]}]},\" \",{t:7,p:[2,1,19],e:\"div\",a:{\"class\":\"table__container\"},f:[{t:4,r:\"rows\",i:\"i\",f:[{t:7,p:[4,5,68],e:\"div\",a:{\"class\":\"table__row\"},f:[{t:4,rx:{r:\"rows\",m:[{t:30,n:\"i\"}]},i:\"j\",f:[{t:7,p:[6,9,122],e:\"div\",a:{\"class\":\"table__cell\"},f:[{t:7,p:[7,11,158],e:\"strong\",f:[{t:2,rx:{r:\"doc.head.contents.columns\",m:[{t:30,n:\"j\"}]},p:[7,19,166]},\":\"]},\" \",{t:3,rx:{r:\"rows\",m:[{t:30,n:\"i\"},{t:30,n:\"j\"}]},p:[7,62,209]}]}],p:[5,7,99]}]}],p:[3,3,52]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","export default function isPublished(status) {\n  return ['PUBLISHED', 'UPDATED'].includes(status);\n}\n","module.exports = function getObjects(delta, types) {\n  return delta.ops.reduce((objects, op) => {\n    var type = types.find(type => op.insert.hasOwnProperty(type));\n    if (type) {\n      objects.push({ [type]: op.insert[type] });\n    }\n    return objects;\n  }, []);\n};\n","export const EditorCommunity = `\n  query EditorCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      slug\n      domain\n      schemaDomain\n      commentArchiveAgeInDays\n      faviconUrl\n      placeFirstAvailableDefault\n      timeZone\n      placeholderImageUrl\n      twitterScreenName\n      twitterSendDefault\n      defaultImageSearchParams\n      featuresEnabled:                siteConfigBoolean(key: \"features_enabled\")\n      adsEnabled:                     siteConfigBoolean(key: \"ads_enabled\")\n      paywallEnabled:                 siteConfigBoolean(key: \"paywall_enabled\")\n      tweetWithImageByDefault:        siteConfigBoolean(key: \"tweet_with_image_by_default\")\n      entryDisclaimerEnabled:         siteConfigBoolean(key: \"entry_disclaimer_enabled\")\n      commentsEnabled:                siteConfigBoolean(key: \"comments_enabled\")\n      coralCommentsEnabled:           siteConfigBoolean(key: \"coral_enabled\")\n      commentsClosedDefault:          siteConfigBoolean(key: \"comments_closed_on_editorial_posts_by_default\")\n      publishForGoogleAmp:            siteConfigBoolean(key: \"publish_for_google_amp\")\n      bylineShowTitle:                siteConfigBoolean(key: \"byline_show_title\")\n      printSlugEnabled:               siteConfigBoolean(key: \"print_slug_enabled\")\n      printDeskHidden:                siteConfigBoolean(key: \"print_desk_hidden\")\n      ratingCardMaxStars:             siteConfigInt(key: \"rating_card_max_stars\")\n      useProjectDetails:              siteConfigBoolean(key: \"project_details_enabled\")\n      useToolsAndMaterials:           siteConfigBoolean(key: \"tools_and_materials_enabled\")\n      projectDetailsSkillLevels:      siteConfigJson(key: \"project_details_skill_levels\")\n      hasGettyApi:                    hasSiteConfig(key: \"getty_api_config\", type: \"json\")\n      hasUsatodayApi:                 hasSiteConfig(key: \"usatoday_api_config\", type: \"json\")\n      hasPlagscan:                    hasSiteConfig(key: \"plagscan_api_config\", type: \"json\")\n      hasMerlinApi:                   hasSiteConfig(key: \"merlin_api_config\", type: \"json\")\n      entrySlugIsEvergreenDefault:    siteConfigBoolean(key: \"entry_slug_is_evergreen_default\")\n      showEntryEvergreenUrlToggle:    siteConfigBoolean(key: \"show_entry_evergreen_url_toggle\")\n      defaultGroupSlug:               siteConfigString(key: \"default_story_group_slug\")\n      headlessModeEnabled:            siteConfigBoolean(key: \"headless_mode_enabled\")\n      externalPreviewEnabled:         hasSiteConfig(key: \"external_preview_url\", type: \"string\")\n      externalPreviewUrl:             siteConfigString(key: \"external_preview_url\")\n      externalPreviewMode:            siteConfigString(key: \"external_preview_mode\")\n      externalPreviewSharedSecret:    siteConfigString(key: \"external_preview_shared_secret\")\n      externalPreviewRequestMethod:   siteConfigString(key: \"external_preview_request_method\")\n      externalPreviewApiHeaders:      siteConfigJson(key: \"external_preview_api_headers\")\n      externalPreviewEnableAmp:       siteConfigBoolean(key: \"external_preview_enable_amp\")\n      publishForAppleNews:            siteConfigBoolean(key: \"publish_for_apple_news\")\n      useAffiliateLinks:              siteConfigBoolean(key: \"use_affiliate_links\")\n      allowDisablingOfAffiliateLinks: siteConfigBoolean(key: \"allow_disabling_of_affiliate_links_in_stories\")\n      network {\n        id\n        name\n        schemaDomain\n        slug\n        autoplayDefault:      siteConfigBoolean(key: \"autoplay_videos_on_entry_pages\")\n        usesSuperGroups:      siteConfigBoolean(key: \"uses_super_groups\")\n        usesCampaignGroups:   networkConfigBoolean(key: \"uses_campaign_groups?\")\n        usesAutotags:         siteConfigBoolean(key: \"uses_autotagger\")\n        excludesFromRssFeeds: networkConfigBoolean(key: \"excludes_from_rss_feeds?\")\n\n        organization {\n          id\n          slug\n        }\n      }\n      locale {\n        lat\n        lng\n      }\n      newsletters {\n        name\n        slug\n      }\n      googleAmpLogo {\n        url\n      }\n      autoTagging {\n        leagueRequired\n        leagueId\n        teamId\n        autolinkTagTypes\n        autotagTagTypes: manualTagTypes\n      }\n    }\n  }\n`;\n\nexport const DashboardCommunity = `\n  query DashboardCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      faviconUrl\n      timeZone\n      printSlugEnabled: siteConfigBoolean(key: \"print_slug_enabled\")\n      network {\n        id\n        name\n        schemaDomain\n      }\n    }\n  }\n`;\n\nexport const BasicCommunity = `\n  query BasicCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      twitterScreenName\n    }\n  }\n`;\n","var Emitter = require('eventemitter2').EventEmitter2;\nvar renderComponent = require('./lib/render_component');\nvar userActions = require('./actions/users');\nvar initPolyfills = require('./initializers/00_polyfills');\nvar initState = require('./initializers/01_state');\nvar initSocket = require('./initializers/02_socket');\nvar initConnectionStatus = require('./initializers/connection_status');\nvar initErrorCatcher = require('./initializers/error_catcher');\nvar initPreventBackspace = require('./initializers/prevent_backspace');\nvar initRactive = require('./initializers/ractive');\nvar initRouter = require('./initializers/router');\nvar initSentry = require('./initializers/sentry');\nvar initAnnouncements = require('./initializers/announcements');\nvar initMessages = require('./initializers/messages');\nvar initNewUser = require('./initializers/new_user');\n\nvar App = window.App = function({ env, config }) {\n  Emitter.call(this);\n  this.setMaxListeners(0);\n\n  this.env = env;\n  this.config = config;\n};\n\nObject.assign(App.prototype, Emitter.prototype);\n\nApp.prototype.init = async function({ anthemUser, message }) {\n  var user = await userActions.getCurrentUser();\n\n  // Run the initializers\n  initPolyfills();\n  initState(Object.assign(anthemUser, user));\n  initSocket();\n  initConnectionStatus();\n  initErrorCatcher();\n  initPreventBackspace();\n  initRactive();\n  initRouter();\n  initSentry();\n  initAnnouncements();\n  initMessages(message);\n  initNewUser();\n\n  this.router.start();\n};\n\nApp.prototype.render = function(Component, data, target) {\n  target = target || document.body;\n\n  // Set new data instead of re-rendering if we're working with the same component type\n  var previousRoot = this.rootComponent;\n  if (previousRoot instanceof Component) {\n    return previousRoot.set(data);\n  }\n\n  // Build new component\n  this.rootComponent = new Component({ data: data });\n\n  // Render (and teardown previousRoot if it exists)\n  var promise = previousRoot ? previousRoot.teardown() : Promise.resolve();\n  return promise.then(() => renderComponent(this.rootComponent, target));\n};\n","module.exports = require('./object')('doc');\n","var toPlaintext = require('convert-rich-text').toPlaintext;\n\nmodule.exports = function(delta) {\n  return toPlaintext(delta).trim().length === 0;\n};\n","module.exports = function isCustomstory(contents) {\n  return contents.draft && contents.draft.hasOwnProperty('customstory_pages');\n};\n","function HttpStatusError(message, response) {\n  Error.call(this);\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, HttpStatusError);\n  } else {\n    this.stack = (new Error(message)).stack;\n  }\n\n  this.message = message;\n  this.response = response;\n  this.name = this.constructor.name;\n}\n\nHttpStatusError.prototype = Object.create(Error.prototype);\nHttpStatusError.prototype.constructor = HttpStatusError;\n\nexport default HttpStatusError;\n","var request = require('./request');\nvar GraphQLError = require('./errors/graphql_error');\n\nexport default async function graphqlRequest(path, body, opts = {}) {\n  var { data, errors } = await request(path, {\n    method: 'POST',\n    body,\n    opts: { cache: true, ...opts }\n  });\n\n  // Error out if the service returns no data and also includes errors\n  if (!data && errors) {\n    throw new GraphQLError(errors);\n  }\n\n  return data;\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { toInternalHtml, toPlaintext } = require('convert-rich-text');\nvar thumborUrl = require('../../lib/thumbor_url');\nvar calculateCrop = require('../../../shared/calculate_crop');\n\ncomponent.exports = {\n  data: {\n    doc: null,\n    isCollapsed: false\n  },\n  computed: {\n    thumbnailUrl: function() {\n      var image = this.get('doc.head.contents.image');\n      if (!image) {\n        return null;\n      }\n\n      var crop = calculateCrop(image.crop, image.subject, 1.33);\n      return thumborUrl(image.src, {\n        width: 184,\n        height: 200,\n        crop: [crop.x, crop.y, crop.x + crop.w, crop.y + crop.h]\n      });\n    },\n    title: function() {\n      return toPlaintext(this.get('doc.head.contents.title'));\n    },\n    description: function() {\n      return toInternalHtml(this.get('doc.head.contents.description'));\n    },\n    retailers: function() {\n      var retailers = this.get('doc.head.contents.retailers');\n      var buttons = retailers.map(retailer => {\n        return {\n          name: toPlaintext(retailer.name),\n          url: retailer.url,\n          price: retailer.sale_price? Math.round(retailer.sale_price) : Math.round(retailer.price)\n        };\n      });\n      return buttons;\n    },\n    pricing: function() {\n      var retailers = this.get('doc.head.contents.retailers');\n      if (!retailers.length) return;\n      var price = Math.round(retailers[0].price);\n      var salePrice = Math.round(retailers[0].sale_price);\n      if (salePrice) {\n        return {\n          price: price,\n          salePrice: salePrice,\n          percent: 100 - Math.floor(salePrice/price * 100)\n        };\n      } else {\n        return {\n          price: price\n        };\n      }\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":[\"productcard-inner \",{t:4,n:50,r:\"thumbnailUrl\",f:[\"productcard-inner--has-image\"],p:[1,31,30]}]},f:[{t:4,n:50,r:\"thumbnailUrl\",f:[{t:7,p:[3,5,115],e:\"div\",a:{\"class\":\"productcard-image-wrapper\"},f:[{t:7,p:[4,7,161],e:\"img\",a:{src:[{t:2,r:\"thumbnailUrl\",p:[4,17,171]}]}}]}],p:[2,3,90]},\" \",{t:7,p:[8,3,216],e:\"div\",a:{\"class\":\"productcard-info\"},f:[{t:7,p:[9,5,251],e:\"h2\",f:[{t:7,p:[9,9,255],e:\"strong\",f:[{t:2,r:\"title\",p:[9,17,263]}]}]},\" \",{t:7,p:[10,5,291],e:\"div\",a:{\"class\":\"productcard-pricing\"},f:[{t:4,n:50,x:{r:[\"pricing.salePrice\",\"pricing.price\"],s:\"_0&&_1\"},f:[{t:7,p:[12,9,382],e:\"span\",a:{\"class\":0},f:[{t:2,r:\"pricing.percent\",p:[12,21,394]},\"% off\"]},\" \",{t:7,p:[12,55,428],e:\"span\",f:[{t:7,p:[12,61,434],e:\"s\",f:[\"$\",{t:2,r:\"pricing.price\",p:[12,65,438]}]}]},\" \",{t:7,p:[12,94,467],e:\"span\",f:[\"$\",{t:2,r:\"pricing.salePrice\",p:[12,101,474]}]}],p:[11,7,331]},{t:4,n:51,f:[{t:4,n:50,r:\"pricing.price\",f:[{t:7,p:[15,9,556],e:\"span\",f:[\"$\",{t:2,r:\"pricing.price\",p:[15,16,563]}]}],p:[14,9,526]}],x:{r:[\"pricing.salePrice\",\"pricing.price\"],s:\"_0&&_1\"}}]},\" \",{t:3,r:\"description\",p:[19,5,633]},\" \",{t:7,p:[20,5,655],e:\"div\",a:{\"class\":\"productcard-retailers\"},f:[{t:4,r:\"retailers\",f:[{t:7,p:[22,9,720],e:\"res-button\",a:{design:\"primary\",\"class\":\"productcard-button\"},m:[{t:4,n:50,x:{r:[\"url\",\"name\"],s:\"!_0||!_1\"},f:[\" disabled=\\\"disabled\\\"\"],p:[22,64,775]}],f:[{t:4,n:50,x:{r:[\"url\",\"name\"],s:\"!_0||!_1\"},f:[{t:7,p:[23,32,856],e:\"res-icon\",a:{name:\"warning\"}}],p:[23,11,835]},\" \",{t:7,p:[24,11,910],e:\"button\",f:[{t:2,r:\"name\",p:[24,19,918]},\" \",{t:4,n:50,r:\"price\",f:[\"$\",{t:2,r:\"price\",p:[24,42,941]}],p:[24,28,927]}]}]}],p:[21,7,697]}]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  cursors: {\n    skillLevels: ['community', 'projectDetailsSkillLevels']\n  },\n  computed: {\n    stars: function() {\n      var skill = this.get('toh_project_details.skill');\n      var stars = '';\n      var max = this.get('skillLevels').length;\n      // handle whole stars\n      // eslint-disable-next-line no-restricted-syntax\n      for (let i = 0; i < skill; i++) {\n        stars = stars + '<div class=\"star active\"></div>';\n      }\n      // handle empty stars\n      // eslint-disable-next-line no-restricted-syntax\n      for (let i = 0; i < (max - skill); i++) {\n        stars = stars + '<div class=\"star inactive\"></div>';\n      }\n      return stars;\n    },\n    skillLevel: function() {\n      var levels = this.get('skillLevels');\n      var skill = this.get('toh_project_details.skill');\n      return levels[skill - 1];\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"span\",f:[{t:3,r:\"skillLevel\",p:[1,7,6]}]},\" \",{t:7,p:[2,1,30],e:\"div\",a:{\"class\":\"stars\"},f:[{t:3,r:\"stars\",p:[2,20,49]}]},\" \",{t:4,n:50,r:\"toh_project_details.skill_description\",f:[{t:7,p:[4,3,115],e:\"span\",f:[{t:2,r:\"toh_project_details.skill_description\",p:[4,9,121]}]}],p:[3,1,67]},{t:4,n:50,r:\"toh_project_details.estimated_cost\",f:[{t:7,p:[7,3,223],e:\"span\",f:[{t:7,p:[7,9,229],e:\"strong\",f:[\"Cost:\"]},\" \",{t:2,r:\"toh_project_details.estimated_cost\",p:[7,32,252]}]}],p:[6,1,178]},{t:4,n:50,r:\"toh_project_details.estimated_time\",f:[{t:7,p:[10,3,351],e:\"span\",f:[{t:7,p:[10,9,357],e:\"strong\",f:[\"Estimated time:\"]},\" \",{t:2,r:\"toh_project_details.estimated_time\",p:[10,42,390]}]}],p:[9,1,306]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = {\n  type: 'line',\n  attribute: 'data-position'\n};\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"m-404\"},f:[{t:7,p:[3,3,23],e:\"svg\",a:{version:\"1.1\",id:\"Layer_1\",xmlns:\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",x:\"0px\",y:\"0px\",viewBox:\"0 0 162.5 303.5\",\"enable-background\":\"new 0 0 162.5 303.5\",\"xml:space\":\"preserve\"},f:[{t:7,p:[5,5,244],e:\"g\",f:[{t:7,p:[6,7,254],e:\"path\",a:{fill:\"#54C2BA\",d:\"M162.5,188.5L40.3,127.3c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,23V0L31,65.9\\n        C4.1,79.5,0,96.7,0,105.8s4,26.3,31,39.9l131.5,65.9V188.5z\"}},\" \",{t:7,p:[8,7,449],e:\"path\",a:{fill:\"#E0DB24\",d:\"M162.5,234.4L40.3,173.2c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,69V46L31,111.9\\n        C4.1,125.3,0,142.5,0,151.7c0,9,4,26.3,31,39.9l131.5,65.9V234.4z\"}},\" \",{t:7,p:[10,7,652],e:\"path\",a:{fill:\"#C74A27\",d:\"M40.3,219c-12.4-6.2-19.7-14.1-19.7-21.5s7.2-15.1,19.7-21.5l122.2-61.2V91.9L31,157.8\\n        C4,171.4,0,188.6,0,197.7c0,9,4,26.3,31,39.9l131.5,65.9v-23L40.3,219z\"}}]}]},\" \",{t:7,p:[15,3,861],e:\"h2\",f:[\"Page not found\"]},\" \",{t:7,p:[17,3,888],e:\"h3\",f:[\"Sorry, that page doesn’t exist. Want to head back to \",{t:7,p:[17,66,951],e:\"a\",a:{href:\"/\"},f:[\"Chorus\"]},\"?\"]},\" \",{t:7,p:[19,3,983],e:\"p\",f:[{t:7,p:[19,6,986],e:\"strong\",f:[\"Need help?\"]}]},\" \",{t:7,p:[20,3,1020],e:\"ul\",f:[{t:7,p:[21,5,1029],e:\"li\",f:[{t:7,p:[21,9,1033],e:\"a\",a:{href:\"https://status.voxmedia.com/\"},f:[\"Platform status\"]}]},\" \",{t:7,p:[22,5,1101],e:\"li\",f:[{t:7,p:[22,9,1105],e:\"a\",a:{href:\"https://chorussupport.zendesk.com/hc/en-us\"},f:[\"Help center\"]}]},\" \",{t:7,p:[23,5,1183],e:\"li\",f:[{t:7,p:[23,9,1187],e:\"a\",a:{href:\"https://www.chorus.help/hc/en-us/requests/new\"},f:[\"Contact us\"]}]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","export default function initPresence(room, greetUsers) {\n  initAnthemServerPresence(room, greetUsers);\n  initContentApiServerPresence(room);\n}\n\nfunction initAnthemServerPresence(room, greetUsers) {\n  const socket = app.socket;\n  const cursor = app.state.select('users');\n  const addUser = newUser => {\n    if (!cursor.get().find(user => user.id === newUser.id)) {\n      cursor.push(newUser);\n    }\n  };\n\n  socket.on(`presence.${room}.greet`, addUser);\n  socket.on(`presence.${room}.joined`, newUser => {\n    addUser(newUser);\n    socket.emit(`presence.${room}.greet`, newUser.socketId);\n  });\n  socket.on(`presence.${room}.left`, oldUser => {\n    cursor.set(cursor.get().filter(user => user.socketId !== oldUser.socketId));\n  });\n  socket.on('reconnect', () => {\n    cursor.set([]);\n    socket.emit('presence.join', room, greetUsers, app.state.get(['user']), addUser);\n  });\n\n  socket.emit('presence.join', room, greetUsers, app.state.get(['user']), addUser);\n}\n\nfunction initContentApiServerPresence(room) {\n  const contentApiSocket = app.contentApiSocket;\n  contentApiSocket.on('reconnect', () => contentApiSocket.emit('presence.join', room));\n  contentApiSocket.emit('presence.join', room);\n}\n","var fifthheader = { type: 'line', tag: 'H5' };\nmodule.exports = Object.assign({}, fifthheader, { exclusive: true });\n","var getStoryType = require('../../shared/get_story_type');\nvar DOC_LABELS = require('../config/doc_labels');\n\nexport default function getDocLabel(doc) {\n  if (doc.schema_name === 'story') {\n    return getStoryType(doc.head.contents);\n  } else {\n    return DOC_LABELS[doc.schema_name];\n  }\n}\n","module.exports = { tag: 'SUP' };\n","// Given an image's desired, the image's subject, and a desired ratio,\n// return the x, y, width, and height of a crop\n// that meets that ratio and centers that subject\n\nmodule.exports = function(crop, subject, ratio) {\n  // by default,\n  // crop: x: 0, y: 0, w: (img width), h: (img height)\n  // subject: x: (half of width), y: (half of height)\n\n  if (!crop || !subject || !ratio) {\n    return;\n  }\n\n  var h = Math.min(crop.h, crop.w / ratio);\n  h = Math.round(h);\n\n  var w = Math.min(crop.w, crop.h * ratio);\n  w = Math.round(w);\n\n  var y = subject.y - h / 2;\n  y = Math.max(y, crop.y);\n  y = Math.min(y, crop.y + crop.h - h);\n  y = Math.round(y);\n\n  var x = subject.x - w / 2;\n  x = Math.max(x, crop.x);\n  x = Math.min(x, crop.x + crop.w - w);\n  x = Math.round(x);\n\n  return { x: x, y: y, w: w, h: h };\n};\n","module.exports = function isMapstack(contents) {\n  return contents.draft.hasOwnProperty('map_points');\n};\n","module.exports = require('./object')('oembed');\n","var blockquote = { type: 'line', parentTag: 'BLOCKQUOTE' };\nmodule.exports = Object.assign({}, blockquote, { exclusive: true, inherit: true });\n","var fourthheader = { type: 'line', tag: 'H4' };\nmodule.exports = Object.assign({}, fourthheader, { exclusive: true });\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"actionbox-inner\"},f:[{t:7,p:[2,3,32],e:\"div\",a:{\"class\":\"content\"},f:[{t:7,p:[3,5,58],e:\"div\",a:{\"class\":\"actionbox-title\"},f:[{t:3,r:\"actionbox.title\",p:[3,34,87]}]},\" \",{t:7,p:[4,5,119],e:\"div\",a:{\"class\":\"actionbox-description\"},f:[{t:3,r:\"actionbox.description\",p:[4,40,154]}]}]},\" \",{t:7,p:[6,3,199],e:\"res-button\",a:{design:\"primary\",\"class\":\"actionbox-button\"},f:[{t:7,p:[7,5,258],e:\"button\",f:[{t:3,r:\"actionbox.label\",p:[8,7,273]}]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = require('./object')('video');\n","module.exports = function isPage(contents) {\n  return contents.draft.entry_layout === 'unison_page';\n};\n","module.exports = require('./object')('hr');\n","module.exports = function wait(howLong) {\n  return new Promise(function(resolve) {\n    setTimeout(resolve, howLong);\n  });\n};\n","var NotFound = require('../components/404.html');\n\nmodule.exports = function() {\n  app.render(NotFound);\n};\n","const { throttle, set: setPath } = require('lodash');\nconst { dynamicNode } = require('baobab');\nconst uuid = require('uuid');\nconst request = require('../lib/request');\nconst OT = require('../lib/anthem0');\nconst messages = require('../config/messages');\nconst initPresence = require('../initializers/editor/presence');\nconst setBaseContents = require('../initializers/defaults/base_contents');\nconst initSubdocs = require('../initializers/editor/doc/subdocs');\nconst messageActions = require('./messages');\nconst sentryActions = require('./sentry');\nconst hash = require('../../shared/content-hash');\nconst WorkerQueue = require('../lib/worker_queue');\n\n// State variables and cursors\nvar storage = window.localStorage;\nvar fatalError = false;\n\nvar config = app.config;\nvar userCursor = app.state.select('user');\nvar dirty = app.state.select(['autosave', 'dirty']);\nvar docsById = app.state.select(['autosave', 'docsById']);\nvar inLine = app.state.select(['autosave', 'inLine']);\nvar inFlight = app.state.select(['autosave', 'inFlight']);\nvar sentIds = app.state.select(['autosave', 'sentIds']);\nvar quillContentPaths = app.state.select(['autosave', 'quills']);\nvar reconnectingIds = app.state.select(['autosave', 'reconnectingIds']);\nvar initializingIds = app.state.select(['autosave', 'initializingIds']);\n\nconst MESSAGE_RESCUE_VERSION = ['story'];\n\n// ##### Helper Methods #####\n\nfunction rescueKey(docId) {\n  return `rescue:${docId}`;\n}\n\nfunction messageKey(docId) {\n  return `message:${docId}`;\n}\n\nfunction getDocIds() {\n  return Object.keys(docsById.get()).map((docId) => parseInt(docId));\n}\n\n// Each autosave packet must contain a docId that is used to find the docs\n// reference in state. If no reference is found, shut down autosave before\n// anything else can go amiss.\nfunction validateId(docId) {\n  if (!docInState(docId)) {\n    var err = new Error('An invalid docId was supplied to autosave.');\n    err.name = 'AutosaveReferenceError';\n    err.doc_id = docId;\n    markError(err);\n  }\n}\n\n// ##### Markers #####\n// Set the current state of the autosave pipeline\n\nfunction markDirty(docId) {\n  dirty.set(docId, true);\n  app.emit(`autosave.dirty.${docId}`, inLine.get(docId), inFlight.get(docId));\n}\n\nfunction markClean(docId) {\n  dirty.unset(docId);\n  app.emit(`autosave.clean.${docId}`);\n}\n\nfunction markError(err, reportToSentry = true) {\n  fatalError = true;\n  err.from = 'autosave';\n  dirty.set({});\n  app.emit('autosave.error', err);\n  if (reportToSentry) {\n    sentryActions.reportError(err);\n  }\n}\n\n// ##### Client Update #####\n// Applies the update to the client-side state. Either before sending (for local)\n// or on receiving a packet from the server\n\nfunction applyDelta(docId, delta) {\n  var deltaCursor = getDocCursor(docId).select(['head', 'delta']);\n  deltaCursor.apply(base => OT.compose(base, delta));\n\n  var contentsCursor = getDocCursor(docId).select(['head', 'contents']);\n  contentsCursor.apply(contents => OT.apply(contents, delta));\n}\n\n// ##### Request Logic #####\n// Sends autosave requests, handles initial error parsing (including retry flow)\n\n// Throttled function that, when executed, sends updates for all inline docs\nvar sendIfReady = throttle(function sendIfReady() {\n  for (let docId of getDocIds()) {\n    if (!inFlight.get(docId) && inLine.get(docId) && !fatalError) {\n      inFlight.set([docId], inLine.get(docId));\n      inLine.unset(docId);\n      storeRescueVersion(docId);\n      sendUpdate(docId);\n    }\n  }\n}, config.autosaveThrottle, { leading: false, trailing: true });\n\n// Called by `sendIfReady` to actuall send inLine data as a single packet\nfunction sendUpdate(docId) {\n  // If an error has occurred prior, don't send\n  if (fatalError) {\n    return;\n  }\n\n  // If we have anything else waiting, need to send that too\n  // in order for contentHash to be accurate\n  if (inLine.get(docId)) {\n    try {\n      var composed = OT.compose(inFlight.get([docId, 'delta']), inLine.get([docId, 'delta']));\n      inFlight.set([docId, 'delta'], composed);\n      inLine.unset(docId);\n      storeRescueVersion(docId);\n    } catch (error) {\n      error.name = 'OTError';\n      markError(error);\n      return;\n    }\n  }\n\n  var docCursor = getDocCursor(docId);\n  var sequenceCursor = getDocCursor(docId).select(['head', 'end_sequence']);\n  var contentsCursor = getDocCursor(docId).select(['head', 'contents']);\n  var delta = inFlight.get([docId, 'delta']);\n  var packetUuid = uuid.v4();\n  var sequence = sequenceCursor.get() + 1;\n\n  sentIds.set(packetUuid, true);\n\n  return request('/api/content/docs/' + docCursor.get('id') + '/contents', {\n    method: 'PATCH',\n    body: {\n      user_id: inFlight.get([docId, 'userId']),\n      delta,\n      sequence,\n      uuid: packetUuid,\n      content_hash: hash(contentsCursor.get()),\n      schema_version: docCursor.get('schema_version'),\n    },\n    opts: {\n      handleError: false,\n      retry: {\n        delay: 0,\n        maxDelay: 20000\n      }\n    }\n  }).then(() => {\n    app.emit(`autosave.success.${docId}`, inFlight.get(docId));\n    storage.removeItem(rescueKey(docId));\n    inFlight.unset(docId);\n    sequenceCursor.set(sequence);\n    if (inLine.get(docId)) {\n      markDirty(docId);\n    } else {\n      markClean(docId);\n    }\n    sendIfReady();\n  }).catch(err => {\n    var status = err.response && err.response.status;\n    if (status === 409) {\n      // the rebase case, call remoteUpdate on all the packets to catch up then try again\n      return retryAfterRebase(docId, err);\n    } else {\n      // reject to let the next catch block handle the error\n      return Promise.reject(err);\n    }\n  }).catch(err => {\n    // some other status code or non-network error happened, shut down the\n    // editor and save the latest rescue version\n    markError(err, false);\n    setTimeout(() => saveRescueVersion(docId, false), 5000);\n  });\n}\n\n// If we get a 409 conflict error, do:\n// A) Rebase and retry if we've missed data\n// B) Shut it down if it's any other kind of conflict error (i.e. too far ahead)\nfunction retryAfterRebase(docId, err) {\n  // must clone the response so that reportError can also read the body,\n  // should this fail\n  var response = err.response.clone();\n  return response.json().then(function(data) {\n    if (/too low/.test(data.message) && data.packets) {\n      for (let packet of data.packets) {\n        remoteUpdate(docId, packet);\n      }\n      return sendUpdate(docId);\n    } else {\n      return Promise.reject(err);\n    }\n  });\n}\n\n// ##### Rescue Logic #####\n\n// Saves a rescue version locally. Used as a precaution when sending and for\n// reference on a true error\nfunction storeRescueVersion(docId) {\n  app.emit('autosave.check-update', docId);\n\n  var delta = [];\n  var contents = getDocCursor(docId).get(['head', 'contents']);\n\n  try {\n    if (inFlight.get(docId)) {\n      delta = OT.compose(delta, inFlight.get([docId, 'delta']));\n    }\n    if (inLine.get(docId)) {\n      delta = OT.compose(delta, inLine.get([docId, 'delta']));\n    }\n    if (window.quills[docId]) {\n      var quill = window.quills[docId];\n      var path = quillContentPaths.get([docId, 'path']);\n      if (quill && path) {\n        setPath(contents, path, quill.getContents());\n      }\n    }\n  } catch (error) {\n    error.name = 'OTError';\n    markError(error);\n    return;\n  }\n\n  var docCursor = getDocCursor(docId);\n  storage.setItem(rescueKey(docId), JSON.stringify({\n    doc_id: docCursor.get('id'),\n    user_id: userCursor.get('id'),\n    schema_version: docCursor.get('schema_version'),\n    schema_name: docCursor.get('schema_name'),\n    end_sequence: null,\n    contents: contents,\n    delta: delta\n  }));\n}\n\n// On a true error, try to save a rescue version server-side\nfunction saveRescueVersion(docId, flashNow) {\n  // Don't save a rescue version if one doesn't exist (i.e. due to a local error)\n  var version = storage.getItem(rescueKey(docId));\n  if (!version) {\n    return;\n  }\n\n  return request('/api/content/versions', {\n    method: 'POST',\n    body: JSON.parse(version),\n    opts: { handleError: false }\n  }).then(resp => {\n    var isPackageDashboard = window.location.pathname.indexOf('package') > -1;\n    if (!isPackageDashboard && MESSAGE_RESCUE_VERSION.indexOf(resp.schema_name) > -1) {\n      var docUuid = getDocCursor(docId).get('uuid');\n      var message = {\n        message: messages.RESCUE_SAVED_REASSURE.replace(\n          '{url}',\n          `/compose/${docUuid}/version/${resp.id}`\n        ),\n        type: 'cautionary'\n      };\n\n      // If we are saving this rescue version on a page reload, flash a message\n      // and report to Sentry. Otherwise don't, as it's already been handled.\n      if (flashNow) {\n        messageActions.showMessage(message);\n      } else {\n        setNextFlash(docId, message);\n      }\n    }\n    storage.removeItem(rescueKey(docId));\n  }).catch(err => {\n    markError(err, false);\n  });\n}\n\n// When called, checks to see if a rescue version is saved in storage for the\n// given doc and saves it to the server if it exists\nfunction checkForRescue(docId) {\n  setTimeout(() => getNextFlash(docId), 1000);\n  if (storage.hasOwnProperty(rescueKey(docId))) {\n    // Allow error handler to be registered before emitting\n    setTimeout(() => saveRescueVersion(docId, false), 500);\n  }\n}\n\nfunction setNextFlash(docId, message) {\n  storage.setItem(messageKey(docId), JSON.stringify(message));\n}\n\nfunction getNextFlash(docId) {\n  var key = messageKey(docId);\n  if (storage.hasOwnProperty(key)) {\n    var message = JSON.parse(storage.getItem(key));\n    messageActions.showMessage(message);\n    storage.removeItem(key);\n  }\n}\n\n// Remove now obsolete `legacy_updated_at` publish history event if the first\n// local update is being made for a synced legacy story\nfunction removeLegacyPubEvent(publishHistory, delta) {\n  if (publishHistory && publishHistory.length > 0) {\n    var legacyPubEventIndex = publishHistory.findIndex(e => e.event_type === 'legacy_updated_at');\n    if (legacyPubEventIndex > -1) {\n      var legacyPubEvent = publishHistory[legacyPubEventIndex];\n      delta.push({\n        p: ['publish_history', legacyPubEventIndex],\n        ld: legacyPubEvent\n      });\n      return delta;\n    }\n  }\n  return delta;\n}\n\n// ##### Exposed Action Functions #####\n\n/**\n * Called to get the doc cursor by docId\n * @param {Number} docId A valid docId\n */\nexport function getDocCursor(docId) {\n  validateId(docId);\n  return docsById.select(docId);\n}\n\n/**\n * Called to get a doc in state\n * pipeline\n * @param {Number} docId\n */\nexport function docInState(docId) {\n  return docId && docsById.get(docId);\n}\n\n/**\n * Called to get the dirty state for a specific doc by its id OR the whole\n * pipeline\n * @param {Number} optional docId\n */\nexport function isDirty(docId = null) {\n  var dirtyState = dirty.get();\n  return docId ? dirtyState[docId] : Object.keys(dirtyState).length > 0;\n}\n\n/**\n * Called to set a doc in state for autosave tracking and editing\n * @param {Object} doc A valid doc set in state\n * @param {String} path The path at which to set the doc\n */\nexport function setDoc(doc, path) {\n  docsById.set(doc.id, doc);\n\n  if (path) {\n    app.state.set(path, dynamicNode({\n      cursors: {\n        doc: ['autosave', 'docsById', doc.id]\n      },\n      get: ({ doc }) => doc\n    }));\n  }\n\n  return Promise.resolve();\n}\n\n/**\n * Called to initalize a doc for autosave\n * @param {Object} docId A valid doc id\n * @param {Boolean} greetUsers Whether to update the cursor for user presence\n */\nexport function initDoc(docId, greetUsers = false) {\n  // autosave should be set up, just check for rescue version for this doc\n  checkForRescue(docId);\n\n  initPresence(docId.toString(), greetUsers);\n\n  initSubdocs(docId);\n\n  return setBaseContents(docId);\n}\n\n/**\n * Called to set a doc in state and initalize it for autosave\n * @param {Number} id A valid doc id or uuid to initialize\n * @param {Boolean} optional greetUsers Whether to update the cursor for user presence\n * @param {String} optional path The path at which to set the doc\n */\nexport function setAndInitDoc(doc, greetUsers = false, path = null) {\n  // If the doc is already in state, do nothing\n  if (docInState(doc.id) || initializingIds.get(doc.id)) {\n    return Promise.resolve();\n  }\n\n  initializingIds.set(doc.id, true);\n\n  return setDoc(doc, path)\n    .then(() => initDoc(doc.id, greetUsers))\n    .then(() => initializingIds.unset(doc.id));\n}\n\n/**\n * Called to unset a doc in state after editing\n * @param {Object} path The path at which to unset the doc\n */\nexport function unsetDocAlias(path) {\n  return app.state.unset(path);\n}\n\n/**\n * Called to remove a doc from state for autosave tracking\n * @param {Number} docId A valid docId to remove from state\n */\nexport function teardownDoc(docId) {\n  if (!docInState(docId)) {\n    return Promise.resolve();\n  }\n\n  return resolveOnClean(docId).then(() => {\n    docsById.unset(docId);\n\n    // if the doc was initialized with greetUsers set to false,\n    // this presence.leave just tears down the socket.io room for\n    // receiving remote updates\n    app.socket.emit(`presence.${docId}.leave`);\n    app.contentApiSocket.emit(`presence.${docId}.leave`);\n  });\n}\n\n/**\n * Called to send a client-side update to the server\n * @param {Number} docId A valid docId for which the update applies\n * @param {Delta} delta A valid rich-text delta to be sent as part of the update\n * @param {Number} [userId] A userId value for the packet to override the current user\n */\nexport function localUpdate(docId, delta, userId) {\n  validateId(docId);\n  userId = userId || userCursor.get('id');\n\n  var docCursor = getDocCursor(docId);\n  docCursor.set('updated_at', new Date().toISOString());\n  if (!inLine.get(docId)) {\n    inLine.set(docId, { delta: [], userId: userId });\n  } else {\n    inLine.set([docId, 'userId'], userId);\n  }\n\n  var publishHistory = docCursor.get(['head', 'contents', 'publish_history']);\n  delta = removeLegacyPubEvent(publishHistory, delta);\n\n  try {\n    inLine.set([docId, 'delta'], OT.compose(inLine.get([docId, 'delta']), delta));\n    storeRescueVersion(docId);\n    applyDelta(docId, delta);\n    markDirty(docId);\n    app.emit('autosave.local-update', docId, delta);\n    sendIfReady();\n  } catch (error) {\n    error.name = 'OTError';\n    markError(error);\n  }\n}\n\nexport function resolveOnLocalUpdate(docId, delta, userId) {\n  localUpdate(docId, delta, userId);\n  return resolveOnClean(docId);\n}\n\n// if true, remote updates will be queued up until ready to apply them\nlet _shouldQueueRemoteUpdates = false;\nconst _remoteUpdateQueue = new WorkerQueue();\n\n/**\n * Called to parse a remote update from the server. Hooked up to an event listener\n * in client/initializers/editor/autosave\n * @param {Number} docId A valid docId for which the update applies\n * @param {Object} packet The server side packet\n * @param {Delta} packet.delta The update itself\n */\nexport function remoteUpdate(docId, packet) {\n  if (_shouldQueueRemoteUpdates) {\n    _remoteUpdateQueue.push(applyRemoteUpdate, docId, packet);\n  } else {\n    applyRemoteUpdate(docId, packet);\n  }\n}\n\nasync function pullMissingPackets(docId, sequence) {\n  // start queuing any remote updates that happen from now on so we can apply\n  // any missing ones first\n  _shouldQueueRemoteUpdates = true;\n  const ops = await fetchNewPackets(docId, sequence);\n\n  // validate that the ops we got are applicable\n  if (!ops.length) {\n    throw new Error('Unable to get missing sequences');\n  }\n\n  // abort if the sequences aren't sequential so we don't get stuck trying to do\n  // this over and over again recursively\n  const sequences = ops.map(op => op.sequence);\n  const isSequential = (sequence, index) => (index === 0 || sequence - sequences[index - 1] === 1);\n  const areSequential = sequences.every(isSequential);\n  if (sequences[0] > sequence + 1 || !areSequential) {\n    throw new Error(`Still missing sequences after fetching. Current: ${sequence}, Got: ${sequences}`);\n  }\n\n  // apply each op sequentially\n  for (let op of ops) {\n    await applyRemoteUpdate(docId, op);\n  }\n\n  // stop queuing and process any we got while we were pulling\n  _shouldQueueRemoteUpdates = false;\n  _remoteUpdateQueue.process();\n}\n\nasync function applyRemoteUpdate(docId, packet) {\n  // If the docId is invalid, simply don't apply the update\n  if (fatalError || !docInState(docId)) {\n    return;\n  }\n\n  // Ignore packets that we sent\n  if (sentIds.get(packet.uuid)) {\n    sentIds.unset(packet.uuid);\n    return;\n  }\n\n  const sequenceCursor = getDocCursor(docId).select(['head', 'end_sequence']);\n  const sequence = sequenceCursor.get();\n\n  // Ignore packets we've already applied\n  if (packet.sequence <= sequence) {\n    return;\n  }\n\n  // If we missed a sequence, get all the sequences since the one we have\n  if (packet.sequence > sequence + 1) {\n    try {\n      await pullMissingPackets(docId, sequence);\n    } catch (err) {\n      err.original_name = err.name;\n      err.name = `AutosaveSequenceError`;\n      err.doc_id = docId;\n      err.missed_packets = packet.sequence - (sequenceCursor.get() + 1);\n\n      markError(err);\n    }\n\n    return;\n  }\n\n  // Make sure we have the latest contents recorded for all active docs\n  app.emit('autosave.check-update', docId);\n\n  try {\n    var left;\n    var right;\n\n    if (inFlight.get(docId)) {\n      left = OT.transform(packet.delta, inFlight.get([docId, 'delta']), 'left');\n      right = OT.transform(inFlight.get([docId, 'delta']), packet.delta, 'right');\n      packet.delta = left;\n      inFlight.set([docId, 'delta'], right);\n    }\n\n    if (inLine.get(docId)) {\n      left = OT.transform(packet.delta, inLine.get([docId, 'delta']), 'left');\n      right = OT.transform(inLine.get([docId, 'delta']), packet.delta, 'right');\n      packet.delta = left;\n      inLine.set([docId, 'delta'], right);\n    }\n\n    sequenceCursor.set(packet.sequence);\n    applyDelta(docId, packet.delta);\n  } catch (err) {\n    err.name = 'OTError';\n    markError(err);\n  }\n\n  app.emit('autosave.remote-update', docId, packet);\n}\n\n/**\n * Updates top-level doc values as they are emitted from the server. Currently used\n * for status and trashed_at updates. Hooked up to an event listener in the autosave initializer\n * @param {Number} docId A valid docId for which the update applies\n * @param {Array} path A path for the value\n * @param {Any} value The value to be set\n */\nexport function updateDocFlag(docId, path, value) {\n  // If the docId is invalid, simply don't apply the update\n  if (!docInState(docId)) {\n    return;\n  }\n\n  var doc = getDocCursor(docId);\n  doc.set(path, value);\n}\n\n/**\n * Creates a Promise that resolves when the current pipeline is marked clean\n */\nexport function resolveOnClean(docId) {\n  return new Promise((resolve, reject) => {\n    if (!isDirty(docId)) {\n      return resolve();\n    }\n    app.once(`autosave.clean.${docId}`, resolve);\n    app.once('autosave.error', reject);\n  });\n}\n\n// retrieves all packets greater than {sequence}\nfunction fetchNewPackets(docId, sequence) {\n  return request(`/api/content/docs/${docId}/ops?sequence__gt=${sequence}`, {\n    opts: {\n      retry: {\n        delay: 0,\n        maxDelay: 20000\n      }\n    }\n  });\n}\n\nexport function onReconnect() {\n  for (let docId of getDocIds()) {\n    if (inFlight.get(docId) || reconnectingIds.get(docId)) {\n      // if there is an autosave in progress for this doc,\n      // we will get any ops we missed as part of a 409 response (if applicable)\n      continue;\n    }\n\n    reconnectingIds.set(docId, true);\n    var sequence = getDocCursor(docId).get(['head', 'end_sequence']);\n\n    fetchNewPackets(docId, sequence).then(function(ops) {\n      for (let op of ops) {\n        remoteUpdate(docId, op);\n      }\n      reconnectingIds.unset(docId);\n    }).catch(err => {\n      markError(err, false);\n    });\n  }\n}\n","var messageActions = require('../actions/messages');\n\nexport default function initErrorCatcher() {\n  var previousHandler = window.onerror;\n  window.onerror = () => {\n    if (previousHandler) {\n      previousHandler.apply(this, arguments);\n    }\n    messageActions.showError();\n  };\n}\n","var { Delta } = require('rich-text');\nvar getOffset = require('../../shared/delta/get_offset');\n\nexport function setQuillReference(docId, quill, path) {\n  window.quills[docId] = quill;\n  app.state.set(['autosave', 'quills', docId], { path });\n}\n\nexport function unsetQuillReference(docId) {\n  window.quills[docId] = null;\n  app.state.unset(['autosave', 'quills', docId]);\n}\n\nexport function trackDeltas(docId) {\n  app.state.set(['tracked_deltas', docId], []);\n}\n\nexport function untrackDeltas(docId) {\n  app.state.unset(['tracked_deltas', docId]);\n}\n\nexport function insertObject(docId, lineId, object) {\n  var quill = window.quills[docId];\n  var delta = quill.getContents();\n  var lineOffset = lineId && getOffset(delta, op => op.attributes && op.attributes.id === lineId);\n\n  if (lineOffset) {\n    var update = new Delta()\n      .retain(lineOffset - 1)\n      .delete(1)\n      .insert(object);\n\n    quill.focus();\n    quill.updateContents(update, 'user');\n    quill.setSelection(lineOffset - 1, 1);\n  } else {\n    insertAtCaret(docId, new Delta().insert(object));\n  }\n}\n\n// Move caret to the event location, then call insertAtCaret\nexport function insertAtMouseEvent(docId, event, delta) {\n  var selection = window.getSelection();\n  var range;\n\n  if (event.rangeParent && event.rangeOffset) { // Firefox\n    range = document.createRange();\n    range.setStart(event.rangeParent, event.rangeOffset);\n  } else if (document.caretRangeFromPoint) { // Others\n    range = document.caretRangeFromPoint(event.clientX, event.clientY);\n  }\n\n  if (range instanceof window.Range) {\n    var quill = window.quills[docId];\n    selection.removeAllRanges();\n    selection.addRange(range);\n    quill.root.focus();\n    quill.update();\n  }\n\n  return insertAtCaret(docId, delta);\n}\n\nexport function insertAtCaret(docId, delta) {\n  var quill = window.quills[docId];\n  if (quill) {\n    quill.focus();\n\n    var update = new Delta();\n    var sel = quill.getSelection();\n    if (sel) {\n      update.retain(sel.index);\n      update.delete(sel.length);\n    } else {\n      var contents = quill.getContents();\n      update.retain(contents.length());\n    }\n\n    update = update.concat(delta);\n    return quill.updateContents(update, 'user');\n  }\n}\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"credits-inner\"},f:[{t:4,r:\"credits\",f:[{t:7,p:[3,5,47],e:\"div\",a:{\"class\":\"credits-item\"},f:[{t:7,p:[4,7,80],e:\"span\",a:{\"class\":\"credits-role\"},f:[{t:3,r:\"./role\",p:[4,34,107]}]},\": \",{t:3,r:\"./name\",p:[4,58,131]}]}],p:[2,3,30]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var ga = require('../lib/ga');\n\nmodule.exports = function(ctx, next) {\n  ga.sendPageview(ctx.pathname);\n  next();\n};\n","module.exports = { tag: 'SUB' };\n","const { pick } = require('lodash');\nconst Sentry = window.Sentry = require('@sentry/browser');\nconst { ExtraErrorData } = require('@sentry/integrations/dist/extraerrordata');\nconst ALLOW_URLS = [\n  /stories\\.usechorus\\.com/,\n  /chorus\\.voxmedia\\.com/,\n  /vox-cdn\\.com/,\n  /anthem\\.sb[\\d]+\\.k8s\\.voxops\\.net/,\n];\n\nexport default function initSentry() {\n  app.state.set('sentry', { inLine: [], inFlight: null });\n  var config = app.config.sentry;\n  var userContext = pick(app.state.get(['user']), [\n    'id',\n    'email',\n    'fullOrUserName',\n    'fullName',\n    'lastAnnouncementReadAt',\n    'lastAnnouncementSeenAt',\n  ]);\n\n  if (config && config.dsn) {\n    Sentry.init({\n      dsn: config.dsn,\n      release: config.release,\n      environment: app.env || process.env.NODE_ENV,\n      integrations: [new ExtraErrorData({ depth: 3 })],\n      allowUrls: ALLOW_URLS\n    });\n    Sentry.configureScope(scope => {\n      scope.setUser(userContext);\n    });\n  }\n}\n","// Prevent the backspace key from navigating back.\nmodule.exports = function() {\n  document.addEventListener('keydown', function(event) {\n    var doPrevent = false;\n\n    if (event.keyCode === 8) {\n      var d = event.srcElement || event.target;\n      if (\n        d.isContentEditable ||\n        d.tagName.toUpperCase() === 'TEXTAREA' ||\n        d.tagName.toUpperCase() === 'INPUT' && (\n          d.type.toUpperCase() === 'TEXT' ||\n          d.type.toUpperCase() === 'PASSWORD' ||\n          d.type.toUpperCase() === 'FILE' ||\n          d.type.toUpperCase() === 'EMAIL' ||\n          d.type.toUpperCase() === 'SEARCH' ||\n          d.type.toUpperCase() === 'DATE' ||\n          d.type.toUpperCase() === 'NUMBER'\n        )\n      ) {\n        doPrevent = d.readOnly || d.disabled;\n      } else {\n        doPrevent = true;\n      }\n    }\n\n    if (doPrevent) {\n      event.preventDefault();\n    }\n  });\n};\n","var page = require('page');\n\nmodule.exports = function() {\n  // Global middleware\n  page('*',\n    require('../middleware/analytics'),\n    require('../middleware/querystring')\n  );\n\n  // Pages that load a doc need some common initialization\n  // TODO: refactor routes so there is a common prefix, like:\n  // /story/:uuid/editor\n  page('/(compose|preview|u-layout|preflight|sass-editor|package|customstory|configure)/(.*)', function(ctx, next) {\n    require(['../middleware/load_doc'], function(m) { m(ctx, next); });\n  });\n\n  // Editor-like things need editor-like behaviors first.\n  page('/compose/(.*)', function(ctx, next) {\n    require(['../middleware/render_compose'], function(m) { m(ctx, next); });\n  });\n  page('/compose/:id/diff/:baseId/:targetId', function(ctx) {\n    require(['../routes/diff'], action => action(ctx));\n  });\n  page('/compose/:id/version/:version', function(ctx) {\n    require(['../routes/version'], action => action(ctx));\n  });\n  page('/compose/:id', function(ctx) {\n    require(['../routes/compose'], action => action(ctx));\n  });\n  page('/configure/:id', function(ctx) {\n    require(['../routes/configure'], action => action(ctx));\n  });\n  page('/package/:id', function(ctx) {\n    require(['../routes/package'], action => action(ctx));\n  });\n  page('/preview/:id', function(ctx) {\n    require(['../routes/preview'], action => action(ctx));\n  });\n  page('/u-layout/:id', function(ctx) {\n    require(['../routes/u-layout'], action => action(ctx));\n  });\n  page('/preflight/:id', function(ctx) {\n    require(['../routes/preflight'], action => action(ctx));\n  });\n  page('/sass-editor/:id', function(ctx) {\n    require(['../routes/sass_editor'], action => action(ctx));\n  });\n  page('/customstory/:id', function (ctx) {\n    require(['../routes/customstory'], action => action(ctx));\n  });\n  page('*', function(ctx) {\n    require(['../routes/notfound'], action => action(ctx));\n  });\n\n  app.router = page;\n};\n","var firstheader = { type: 'line', tag: 'H1' };\nmodule.exports = Object.assign({}, firstheader, { exclusive: true });\n","var sentryActions = require('../actions/sentry');\n\nexport default function renderComponent(componentInstance, target) {\n  window.scrollTo(0, 0);\n  return componentInstance.render(target).catch(sentryActions.reportError);\n}\n","export default function tableHasData({ columns, rows }) {\n  return columns.length > 0 && rows && rows.some(row => row.length > 0);\n}\n","module.exports = require('./object')('actionbox');\n","import { toHtml } from 'convert-rich-text';\nimport { formats, options } from '../internal_object_formats/index';\n\nmodule.exports = function(delta) {\n  return toHtml(delta, formats, options);\n};\n","var bold = { tag: 'STRONG' };\nmodule.exports = Object.assign({}, bold, { prepare: 'bold' });\n","module.exports = { tag: 'S' };\n","var Ractive = require('ractive');\nvar component = module;\n\nvar resizeObject = require('../../lib/resize_object');\n\ncomponent.exports = {\n  data: {\n    oembed: null\n  },\n  computed: {\n    srcdoc: function() {\n      var html = this.get('oembed.html');\n      if (!html) {\n        return '<b>Error</b>';\n      }\n\n      return `\n        <style>\n          body { margin: 0; overflow: hidden; }\n          iframe { display: block; margin: 0 auto; }\n        </style>\n        ${html.replace(/\"twitter-tweet\"/, '\"twitter-tweet\" data-align=\"center\"').replace(/(<iframe[^>]*src=\"[^\"]+twitch\\.tv[^\"#]+)/, `$1&amp;parent=${window.top.location.hostname}`)}\n      `;\n    }\n  },\n  handleIframe: function() {\n    var iframe = this.find('iframe');\n\n    resizeObject(iframe.contentWindow);\n    iframe.contentWindow.addEventListener('resize', () => resizeObject(iframe.contentWindow));\n\n    // twitter and facebook embeds somehow don't trigger the window resize event\n    if (iframe.contentWindow.twttr) {\n      iframe.contentWindow.twttr.events.bind('rendered', () => resizeObject(iframe.contentWindow));\n    }\n    if (iframe.contentWindow.FB) {\n      iframe.contentWindow.FB.Event.subscribe('xfbml.render', () => resizeObject(iframe.contentWindow));\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"iframe\",a:{id:\"oembed-iframe\",allowFullscreen:0,src:\"javascript: parent.document.querySelector('#oembed-iframe').getAttribute('srcdoc')\",srcdoc:[{t:2,r:\"srcdoc\",p:[6,11,171]}]},o:\"autosize\",v:{load:{m:\"handleIframe\",a:{r:[],s:\"[]\"}}}}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = require('./object')('readmore');\n","// strip leading and trailing junk (whitespace, <br>, and empty tags)\nmodule.exports = function(html) {\n  var root = document.createElement('div');\n\n  root.innerHTML = html;\n\n  // first pass: leading junk from firstChild\n  removeWhitespace(root, /^\\s+/, 'firstChild');\n\n  // second pass: trailing junk from lastChild\n  removeWhitespace(root, /\\s+$/, 'lastChild');\n\n  return root.innerHTML;\n};\n\n// post-order traversal of either firstChild or lastChild,\n// remove empty elements, strip pattern from textNodes\nfunction removeWhitespace(root, pattern, which) {\n  var node = root[which];\n  while (node && node[which]) {\n    node = node[which];\n  }\n  while (node) {\n    if (node.nodeType === 3) {\n      node.nodeValue = node.nodeValue.replace(pattern, '');\n      if (node.nodeValue.length === 0) {\n        node = remove(node)[which];\n      } else {\n        node = node.parentNode;\n      }\n    } else if (!node.hasChildNodes()) {\n      node = remove(node)[which];\n    } else {\n      node = node.parentNode;\n    }\n  }\n}\n\n// remove the node from its parent, return the parent\nfunction remove(node) {\n  var tmp = node.parentNode;\n  tmp.removeChild(node);\n  return tmp;\n}\n","const { merge, omit } = require('lodash');\nconst qs = require('qs');\nconst wait = require('./wait');\nconst HttpStatusError = require('./errors/http_status_error');\nconst messageActions = require('../actions/messages');\nconst { reportError } = require('../actions/sentry');\nconst hash = require('../../shared/content-hash');\n\nconst STORAGE = {};\n\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    var error = new HttpStatusError(`Response status not within range: ${response.status}`, response);\n    return Promise.reject(error);\n  }\n}\n\nfunction parseBody(response, accepts, withHeaders) {\n  if (response.status === 204) {\n    return Promise.resolve();\n  }\n  if (accepts === 'text/html') {\n    return response.text().then(data => returnWithHeaders(response, data, withHeaders));\n  }\n  return response.json().then(data => returnWithHeaders(response, data, withHeaders));\n}\n\nfunction returnWithHeaders(response, data, withHeaders) {\n  if (withHeaders) {\n    return {\n      data,\n      headers: response.headers\n    };\n  }\n  return data;\n}\n\n// Handles error based on supplied options\nfunction handleError(error, url, reqOpts, opts) {\n  var status = error.response && error.response.status;\n  if (\n    opts.retry &&\n    opts.retry.delay < opts.retry.maxDelay &&\n    (!status || status === 502 || status === 503)\n  ) {\n    var { retry } = opts;\n    var delay = Math.min(retry.delay + 1000, retry.maxDelay);\n    retry.delay = delay;\n    return wait(delay).then(() => request(url, reqOpts, opts));\n  } else {\n    if (opts.handleError) {\n      if (window.app && window.app.state) {\n        // Show a flash message, but don't send to sentry. Uses `window.top` so\n        // that app is accessible by requests from within object iframes\n        messageActions.showError();\n      } else {\n        console.warn('An unexpected error occurred while making a request, but the app is not able to display it');\n        reportError(error, false);\n      }\n    }\n    return Promise.reject(error);\n  }\n}\n\nfunction request(url, reqOpts, opts) {\n  let cacheKey = getCacheKey(url, reqOpts);\n  if (opts.cache && !opts.force && cacheKey in STORAGE) {\n    return Promise.resolve(STORAGE[cacheKey]);\n  }\n\n  return fetch(url, reqOpts)\n    .then(checkStatus)\n    .then(res => parseBody(res, reqOpts.headers.Accept, opts.withHeaders))\n    .then(body => {\n      if (opts.cache) {\n        STORAGE[cacheKey] = body;\n      }\n      return body;\n    })\n    .catch(err => handleError(err, url, reqOpts, opts));\n}\n\n// For GET requests, all the unique request data should be in the URL\n// For non-GET requests with body, also hash that to get a unique cache key\nfunction getCacheKey(url, { method, body }) {\n  let cacheKey = url;\n  if (method && method !== 'GET' && body) {\n    cacheKey += hash(body);\n  }\n\n  return cacheKey;\n}\n\nfunction loadOpts(url, reqOpts) {\n  // Defaults\n  var defaultReqOpts = {\n    credentials: 'include',\n    headers: { Accept: 'application/json' }\n  };\n  var defaultOpts = {\n    handleError: true,\n    cache: false,\n    retry: { delay: 0, maxDelay: 3000 }\n  };\n\n  // Pull out non-request options, if any\n  var opts = reqOpts.opts || {};\n  var requestOpts = omit(reqOpts, 'opts');\n\n  // Parse the request options\n  if (requestOpts.method && requestOpts.method.toUpperCase() !== 'GET') {\n    defaultReqOpts.headers['Content-Type'] = 'application/json';\n  }\n  if (requestOpts.query) {\n    url = url + '?' + qs.stringify(requestOpts.query);\n    delete requestOpts.query;\n  }\n  if (requestOpts.body && typeof requestOpts.body !== 'string') {\n    requestOpts.body = JSON.stringify(requestOpts.body);\n  }\n  if (requestOpts.credentials === false) {\n    delete defaultReqOpts.credentials;\n    delete requestOpts.credentials;\n  }\n\n  // Parse additional options\n  if (!opts.retry) {\n    defaultOpts.retry = false;\n  }\n  if (typeof opts.retry === 'boolean') { delete opts.retry; }\n\n  return {\n    url,\n    opts: merge(defaultOpts, opts),\n    reqOpts: merge(defaultReqOpts, requestOpts)\n  };\n}\n\n/**\n * Makes AJAX requests and handles errors based on supplied options\n *\n * @param {string} url\n * @param {object} reqOpts: fetch request object\n * @param {object} opts: handler options, with the shape:\n *   {\n *    {boolean} handleError: defaults to true\n *    {boolean} cache: defaults to false\n *    {boolean} withHeaders: optional\n *    {boolean} retry: optional\n *    {object} retry: optional, custom retry params of `delay` and `maxDelay`\n *   }\n */\nexport default function(url, reqOpts = {}) {\n  var parsed = loadOpts(url, reqOpts);\n  return request(parsed.url, parsed.reqOpts, parsed.opts);\n}\n","module.exports = {\n  type: 'line',\n  attribute: 'id'\n};\n","var qs = require('querystring');\n\nmodule.exports = function(ctx, next) {\n  ctx.query = qs.parse(ctx.querystring);\n  next();\n};\n","var moment = require('moment-timezone');\nvar messages = require('../config/messages');\nvar userActions = require('../actions/users');\nvar messageActions = require('../actions/messages');\n\n// TODO: set this threshold based on when AnthemUser ships\nconst NEW_USER_MARK = moment('2018-03-29', 'YYYY-MM-DD').utc();\n\nexport default function initNewUser() {\n  var user = app.state.get(['user']);\n  var isNewUser = !user.hasLoggedIn && moment(user.createdOn).utc().isAfter(NEW_USER_MARK);\n\n  // If this is the user's first login AND the account was recently created, show\n  // them our welcome message\n  if (isNewUser) {\n    messageActions.showMessage({\n      type: 'positive',\n      message: messages.NEW_USER_MESSAGE.replace(\n        '{url}',\n        'https://www.chorus.help/hc/en-us/articles/360009073453-Getting-started-with-the-story-editor'\n      )\n    });\n  }\n\n  // Flag this user as having logged on if they haven't\n  if (!user.hasLoggedIn) {\n    userActions.updateAnthemUser({ hasLoggedIn: true });\n  }\n}\n","function _recordPageview(url) {\n  if (window.ga) {\n    window.ga('send', 'pageview', url);\n  }\n}\n\nfunction _recordEvent(action, label, value) {\n  if (window.ga) {\n    window.ga('send', 'event', action, label, value);\n  }\n}\n\nmodule.exports = {\n  sendPageview: _recordPageview,\n  sendEvent: _recordEvent\n};\n","var { defaults } = require('lodash');\nvar hash = require('../../shared/content-hash');\nvar messages = require('../config/messages');\n\nconst DEFAULTS = {\n  dismissible: true,\n  type: 'negative'\n};\n\nexport function showMessage(data) {\n  var id = hash(data.message);\n  if (findMessageIndex(id) === -1 && validatePersistence(data)) {\n    data.id = id;\n    data = defaults(data, DEFAULTS);\n    app.state.select(['messages']).push(data);\n  }\n\n  return id;\n}\n\nfunction validatePersistence(data) {\n  // Non-persistent messages don't already have a `id` attr, we should display\n  if (!data.id) {\n    return true;\n  }\n\n  // This is a persistent message that the user has seen before, don't display\n  var storageKey = `message-${data.id}`;\n  if (window.localStorage.getItem(storageKey) === 'shown') {\n    return false;\n  }\n\n  // This is a new persistent message, record + display\n  window.localStorage.setItem(storageKey, 'shown');\n  return true;\n}\n\nexport function removeMessage(id) {\n  var index = findMessageIndex(id);\n  app.state.select(['messages']).splice([index, 1]);\n}\n\nfunction findMessageIndex(id) {\n  return app.state.get(['messages']).findIndex(message => message.id === id);\n}\n\nexport function showError(error = messages.UNEXPECTED) {\n  var hasError = app.state.get(['messages']).some(message => message.isError);\n  if (!hasError) {\n    showMessage({\n      message: error,\n      type: 'negative',\n      isError: true\n    });\n  }\n}\n","var uuid = require('uuid');\n\nvar USE_FIXED_HEIGHT = [\n  'gallery',\n  'html',\n  'image',\n  'imageslider',\n  'ratingcard',\n  'video',\n  'hr',\n  'toh_project_details',\n  'toh_tools'\n];\n\nmodule.exports = function(type) {\n  return {\n    type: 'embed',\n    tag: 'IFRAME',\n    add: function(node, value) {\n      var object = {};\n      object[type] = value;\n      node.setAttribute('data-object', JSON.stringify(object));\n      node.setAttribute('data-frame-id', uuid.v4());\n      node.setAttribute('allowfullscreen', '');\n\n      var objectType = type === 'doc' ? value.type : type;\n      node.classList.add(objectType + '-object');\n      if (USE_FIXED_HEIGHT.includes(objectType)) {\n        node.setAttribute('data-preserve-height', true);\n      }\n\n      var depth = numParents();\n      var src = depth ? '/object-v2.html?parents=' + depth : '/object-v2.html';\n      node.setAttribute('src', src);\n\n      return node;\n    },\n    remove: function(node) {\n      node.removeAttribute('data-object');\n      node.removeAttribute('data-frame-id');\n      node.removeAttribute('allowfullscreen');\n      node.removeAttribute('data-preserve-height');\n      node.removeAttribute('src');\n      node.className = '';\n\n      return node;\n    },\n    value: function(node) {\n      return JSON.parse(node.dataset.object)[type];\n    },\n    match: function(node) {\n      return node.tagName === 'IFRAME' && 'object' in node.dataset && type in JSON.parse(node.dataset.object);\n    }\n  };\n};\n\nfunction numParents() {\n  /* jshint ignore:start */\n  var num = 0;\n  var win = window;\n  while (window && win !== window.top) {\n    num += 1;\n    win = win.parent;\n  }\n\n  return num;\n  /* jshint ignore:end */\n}\n","const LOOKS_LIKE_URL = /\\w\\.[^\\s]+/;\n\nexport default function isValidUrl(url) {\n  var host = url.replace(/^(https?:\\/\\/|mailto:)/, '').split('/')[0];\n  var containsComma = /,/.test(host);\n  var containsSpaceEncoding = /(%20)/.test(host);\n  var isLocalFile = /^file:\\/\\//.test(url);\n  var looksValid = LOOKS_LIKE_URL.test(url) && !/\\s/g.test(url);\n\n  return looksValid && !containsComma && !containsSpaceEncoding && !isLocalFile;\n}\n\n// checks for period and backslash-- example.com/\nexport function isValidUrlWithSlash(url) {\n  return /\\w\\.[^\\s]+\\//.test(url);\n}\n","var { get: getPath } = require('lodash');\n\nmodule.exports = function getWordCount(delta) {\n  var text = delta.ops.reduce(function(text, op) {\n    if (typeof op.insert === 'string' && !getPath(op, ['attributes', 'mark'])) {\n      return text + op.insert;\n    } else {\n      return text;\n    }\n  }, '');\n  var words = text.trim().match(/\\S+/g);\n  return words ? words.length : 0;\n};\n","const { omit, merge } = require('lodash');\nconst { Delta } = require('rich-text');\nconst request = require('../lib/request');\nconst { hasPolicyRole } = require('../lib/authorization');\nconst modalActions = require('./modals');\nconst autosave = require('./autosave');\nconst editorActions = require('./editor');\nconst assetActions = require('./assets');\n\nconst ID_FROM_CDN_URL_PATTERN = /chorus_(asset|image)\\/(file|image)\\/([\\d]+)\\//;\nexport const HAS_IMAGE_HISTORY = ['story', 'gallery'];\n\nfunction setCropData(image) {\n  if (!image.subject && !image.crop) {\n    image.crop = { x: 0, y: 0, w: image.width, h: image.height };\n    image.subject = { x: Math.round(image.width / 2), y: Math.round(image.height / 2) };\n  }\n  return image;\n}\n\n// If we're building an image with no existing source info (i.e. a wire image),\n// then use along the current user and community data.\nfunction setSourceData(image) {\n  image.network_id   = image.network_id || app.state.get(['community', 'network', 'id']);\n  image.community_id = image.community_id || app.state.get(['community', 'id']);\n  image.user_id      = image.user_id || app.state.get(['user', 'id']);\n  return image;\n}\n\nexport function getImage(id) {\n  return request('/api/assets/images/' + id);\n}\n\nfunction getChorusImage(id) {\n  return request(`/api/chorus/images/${id}`);\n}\n\nexport function uploadImageUrl(type, target = {}) {\n  modalActions.pushModal({ uploadImageUrl: { type, target } });\n}\n\nexport function updateUploadProgress(progress) {\n  app.state.set(['uploadProgress'], progress);\n}\n\nexport function selectImage(imageType, target = {}) {\n  modalActions.pushModal({ selectAsset: { imageType, target, type: 'image' } });\n}\n\nexport function editImage(image, label, type, target = {}) {\n  let data = setSourceData(setCropData(Object.assign({}, image)));\n  let editObject = { editObject: { data, label, type, target } };\n  // if selectAsset modal already exists or use does not have access to assets\n  if (modalActions.getModal('selectAsset') || !hasPolicyRole('editor.accessAssets')) {\n    modalActions.pushModal(editObject);\n  } else {\n    // insert the selectImage modal in between the current modal and the editImage modal\n    modalActions.pushModal(editObject, {\n      selectAsset: { target, type: 'image', imageType: type },\n      tail: app.state.get('modal')\n    });\n  }\n}\n\nexport async function getAndEditImage(localImage, type, target = {}) {\n  let image = await getImage(localImage.id);\n  editImage(merge({}, image, localImage), 'Update', type, target);\n}\n\nexport function saveImage(image) {\n  return assetActions.saveAsset('image', image).then(result => {\n    return Object.assign({}, image, omit(result, 'caption'));\n  });\n}\n\nexport function uploadImages(params, onProgress, flash = true) {\n  return assetActions.uploadAssets('image', params, onProgress, flash);\n}\n\nexport function uploadImage(params, onProgress, flash = true) {\n  return assetActions.uploadAsset('image', params, onProgress, flash);\n}\n\n// If the provided url is a Vox CDN url, try to find the ChorusAsset record\n// for the url\nexport async function getImageFromUrl(url) {\n  if (assetActions.validateImageUrl(url) && /vox-cdn/.test(url) && ID_FROM_CDN_URL_PATTERN.test(url)) {\n    let match = url.match(ID_FROM_CDN_URL_PATTERN);\n    let idFromUrl = parseInt(match[3]);\n    let assetId = idFromUrl;\n\n    // If the CDN url is for a ChorusImage, get that record's ChorusAsset id,\n    // which may be `null` for older records\n    if (match[1] === 'image') {\n      let chorusImage = await getChorusImage(idFromUrl);\n      assetId = chorusImage.chorus_asset_id;\n    }\n\n    // Get the ChorusAsset for the CDN url if we've found a valid ID\n    if (assetId) {\n      return getImage(assetId);\n    }\n  }\n\n  return null;\n}\n\nexport function imageFromData(data) {\n  var image = {\n    id: data.id,\n    src: data.url,\n    width: data.width,\n    height: data.height,\n    crop: data.crop,\n    subject: data.subject,\n    caption: data.caption || '',\n    credit: data.credit || '',\n    hide_credit: data.hide_credit != null ? data.hide_credit : false,\n    letterbox: data.letterbox != null ? data.letterbox : false,\n    mask_text: data.mask_text\n  };\n  return setCropData(image);\n}\n\nexport function insertImageAtPath({ docId, path }, data) {\n  var image = imageFromData(data);\n  var oldImage = autosave.getDocCursor(docId).get(['head', 'contents'].concat(path));\n\n  var delta = [{ p: path, od: oldImage, oi: image }];\n  delta = delta.concat(buildImageHistoryDelta(docId, image.id));\n  return autosave.resolveOnLocalUpdate(docId, delta);\n}\n\nexport function removeImageAtPath({ docId, path }, image) {\n  return autosave.resolveOnLocalUpdate(docId, [{ p: path, od: image }]);\n}\n\nexport function insertInlineImage({ docId, lineId }, data) {\n  updateImageHistory(docId, data.id);\n  return editorActions.insertObject(docId, lineId, { image: imageFromData(data) });\n}\n\nexport function insertInlineImageAtMouseEvent(docId, event, data) {\n  var delta = new Delta().insert({ image: imageFromData(data) });\n\n  updateImageHistory(docId, data.id);\n  return editorActions.insertAtMouseEvent(docId, event, delta);\n}\n\nexport function buildImageHistoryDelta(docId, assetId) {\n  var doc = autosave.getDocCursor(docId);\n  var schemaName = doc.get(['schema_name']);\n  var imageHistory = doc.get(['head', 'contents', 'image_history']) || [];\n  var addToHistory = (\n    HAS_IMAGE_HISTORY.includes(schemaName) &&\n    !imageHistory.find(id => id === assetId)\n  );\n\n  return addToHistory\n    ? [{ p: ['image_history', imageHistory.length], li: assetId }]\n    : [];\n}\n\nfunction updateImageHistory(docId, assetId) {\n  var delta = buildImageHistoryDelta(docId, assetId);\n  if (delta.length > 0) {\n    autosave.localUpdate(docId, delta);\n  }\n}\n\nexport function validatePartnerPlatformsImageSize(bytes, maxSize) {\n  // maxSize in MB\n  return parseFloat(bytes / 1000000) < maxSize;\n}\n","module.exports = require('./object')('newsletter');\n","var Delta = require('rich-text').Delta;\n\nmodule.exports = function toRichText(string) {\n  var text = string.replace(/\\r/g, '');\n  text = /\\n$/.test(text) ? text : `${text}\\n`;\n  return new Delta().insert(text);\n};\n","module.exports = function sentenceCase(str) {\n  return str ? str[0].toUpperCase() + str.substring(1).toLowerCase() : str;\n};\n","var moment = require('moment-timezone');\nvar uuid = require('uuid');\nvar toRichText = require('../../../shared/to_rich_text');\nvar { isCommunityPostAuthor } = require('../../lib/authorization');\nvar isCustomstory = require('../../../shared/is_customstory');\n\nmodule.exports = function(doc) {\n  switch (doc.schema_name) {\n  case 'story':\n    if (isCustomstory(doc.head.contents)) {\n      return customstoryContents();\n    }\n    return storyContents();\n  case 'gallery':\n    return galleryContents();\n  case 'aside':\n    return asideContents();\n  case 'table':\n    return tableContents();\n  case 'poll':\n    return pollContents();\n  case 'scorecard':\n    return scorecardContents(doc);\n  case 'imageslider':\n    return imagesliderContents();\n  case 'productcard':\n    return productcardContents();\n  default:\n    return {};\n  }\n};\n\nfunction storyContents() {\n  return {\n    draft: {\n      hed: toRichText('Untitled'),\n      dek: toRichText(''),\n      slug: toRichText(''),\n      body: toRichText(''),\n      teaser: toRichText(''),\n      entry_password: toRichText(''),\n      autotweets: [\n        { body: toRichText('') },\n        { body: toRichText('') }\n      ],\n      disable_ads: false,\n      do_not_distribute: isCommunityPostAuthor(),\n      hide_from_amp: false,\n      is_restricted_in_privacy_consent_region: false,\n      noindex: false,\n      nofollow: false,\n      paywalled: false,\n      affiliate_link_rewriting_disabled: false,\n      styles: '',\n      site_groups: [],\n      super_groups: [],\n      campaign_groups: [],\n      whitelisted_network_ids: [],\n      contributors: [],\n      additional_byline: toRichText(''),\n      internal_title: toRichText(''),\n      internal_description: toRichText(''),\n      social_title: toRichText(''),\n      social_description: toRichText(''),\n      seo_title: toRichText(''),\n      seo_description: toRichText(''),\n      canonical_url_override: toRichText(''),\n      structured_tags: {}\n    },\n    embargoed: false,\n    hidden: false,\n    publish_history: [],\n    image_history: [],\n\n    ...(app.state.get(['community', 'printSlugEnabled']) ? {\n      print_slug: toRichText('')\n    } : {})\n  };\n}\n\nfunction customstoryContents() {\n  const contents = storyContents();\n  contents.draft.hide_from_amp = true;\n\n  return contents;\n}\n\nfunction galleryContents() {\n  return {\n    title: toRichText('Untitled'),\n    images: [],\n    image_history: []\n  };\n}\n\nfunction asideContents() {\n  return {\n    title: toRichText('Untitled'),\n    body: toRichText('')\n  };\n}\n\nfunction tableContents() {\n  return {\n    title: toRichText('Untitled'),\n    credit: toRichText(''),\n    caption: toRichText(''),\n    columns: [],\n    rows: [],\n    sort_column: 0,\n    sort_descending: false,\n    searchable: false,\n    sortable: false,\n    per_page: 0,\n    google_spreadsheet_url: '',\n    upload_filename: '',\n    style: 'table'\n  };\n}\n\nfunction pollContents() {\n  return {\n    title: toRichText(''),\n    options: [{\n      uuid: uuid.v4(),\n      value: toRichText('')\n    }],\n    close_date: moment().add(2, 'weeks').toISOString()\n  };\n}\n\nfunction scorecardContents(doc) {\n  var contents = {\n    title: toRichText('Untitled')\n  };\n\n  var type = doc.head.contents.type;\n  switch (type) {\n  case 'product':\n    contents.pros = toRichText('');\n    contents.cons = toRichText('');\n    break;\n  case 'venue':\n    contents.google_critic_snippet = toRichText('');\n    contents.body = toRichText('');\n    break;\n  case 'game':\n    contents.platform_scores = [];\n    contents.body = toRichText('');\n    break;\n  }\n\n  return contents;\n}\n\nfunction imagesliderContents() {\n  return {\n    caption: toRichText('')\n  };\n}\n\nfunction productcardContents() {\n  return {\n    title:        toRichText('Untitled'),\n    description:  toRichText(''),\n    retailers:    []\n  };\n}\n","var { omit } = require('lodash');\nvar Sentry = require('@sentry/browser');\nvar messageActions = require('./messages');\nvar HttpStatusError = require('../lib/errors/http_status_error');\n\nexport function handleError(err, emit = true) {\n  reportError(err, emit);\n  return Promise.reject(err);\n}\n\nexport function reportError(err, emit = true) {\n  // Log out stack for debugging, but not in test mode to stop polluting the\n  // test output\n  let env;\n  try {\n    env = app.env; // get from app for Ractive pages\n  } catch (error) {\n    env = process.env.NODE_ENV; // get from node for Vue pages\n  }\n\n  if (env !== 'test') {\n    console.error(err);\n    console.error(err.stack || err.message);\n  }\n\n  if (!(err instanceof HttpStatusError)) {\n    Sentry.captureException(err, {\n      tags: {\n        error_name: err.name,\n        from: err.from\n      },\n      extra: omit(err, 'name', 'message', 'stack', 'from')\n    });\n  }\n\n  if (emit) {\n    messageActions.showError();\n  }\n}\n\nexport function reportMessage(message, opts) {\n  if (app.env !== 'test') {\n    console.warn(message, opts);\n  }\n\n  Sentry.captureMessage(message, opts);\n}\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"span\",f:[{t:3,r:\"pullquote.value\",p:[1,7,6]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","function makeFormats() {\n  return {\n    bold: require('./bold'),\n    italic: require('./italic'),\n    mark: require('./mark'),\n    strike: require('./strike'),\n    superscript: require('./superscript'),\n    subscript: require('./subscript'),\n    firstheader: require('./firstheader'),\n    secondheader: require('./secondheader'),\n    thirdheader: require('./thirdheader'),\n    fourthheader: require('./fourthheader'),\n    fifthheader: require('./fifthheader'),\n    bullet: require('./bullet'),\n    list: require('./list'),\n    blockquote: require('./blockquote'),\n    link: require('./link'),\n    ins: require('./ins'),\n    del: require('./del'),\n    br: require('./br'),\n    autolink: require('./autolink'),\n    id: require('./id'),\n    position: require('./position'),\n    grouping: require('./grouping'),\n    dropcap: require('./dropcap'),\n    leadgraf: require('./leadgraf'),\n    endmark: require('./endmark'),\n    ad_placement: require('./ad_placement'),\n    image: require('./image'),\n    pullquote: require('./pullquote'),\n    oembed: require('./oembed'),\n    video: require('./video'),\n    hr: require('./hr'),\n    html: require('./html'),\n    doc: require('./doc'),\n    small: require('./small'),\n    actionbox: require('./actionbox'),\n    readmore: require('./readmore'),\n    ratingcard: require('./ratingcard'),\n    newsletter: require('./newsletter'),\n    credits: require('./credits'),\n    toh_project_details: require('./toh_project_details'),\n    toh_tools: require('./toh_tools'),\n    pym: require('./pym')\n  };\n}\n\nconst formatOptions = {\n  blockTag: 'P',\n  formatOrder: [\n    // inline: wrapper tag\n    'bold',\n    'italic',\n    'mark',\n    'small',\n    'strike',\n    'superscript',\n    'subscript',\n    'autolink',\n    'link', // links come last so that they can merge sibling nodes\n\n    // objects\n    'actionbox',\n    'credits',\n    'doc',\n    'hr',\n    'html',\n    'image',\n    'oembed',\n    'pullquote',\n    'ratingcard',\n    'newsletter',\n    'readmore',\n    'video',\n    'toh_project_details',\n    'toh_tools',\n    'pym',\n\n    // line: wrapper tag\n    'position',\n    'grouping',\n    'blockquote',\n\n    // line: wrapper tag + switch tag\n    'bullet',\n    'list',\n\n    // line: switch tag\n    'firstheader',\n    'secondheader',\n    'thirdheader',\n    'fourthheader',\n    'fifthheader',\n\n    // line: add classes / attributes\n    'dropcap',\n    'leadgraf',\n    'endmark',\n    'ad_placement',\n    'br',\n    'id'\n  ]\n};\n\nmodule.exports = { formats: makeFormats(), options: formatOptions };\n","var list = { type: 'line', parentTag: 'OL', tag: 'LI' };\nmodule.exports = Object.assign({}, list, { exclusive: true, inherit: true });\n","export default function isShortlink(url) {\n  const domain = app.state.get(['community', 'network', 'schemaDomain']);\n  const pattern = `(http|https)(://${domain}/e/)([0-9]+)`;\n  return new RegExp(pattern, 'g').test(url);\n}\n","export default function resizeObject(win) {\n  var frame = win.frameElement;\n  if (!frame.hasAttribute('data-preserve-height')) {\n    var height = win.document.documentElement.scrollHeight;\n    frame.style.height = `${height}px`;\n  }\n\n  // Propagate up to parents if subframe\n  if (win.parent !== win.top) {\n    resizeObject(win.parent);\n  }\n}\n","exports.activefield = function(node, target = 'input, textarea, [contenteditable]') {\n  target = node.querySelector(target);\n\n  var placeholder = node.querySelector('.ql-placeholder');\n\n  if (target == null) {\n    throw new Error('Failed to initialize activefield decorator, could not find target node');\n  }\n\n  var setClasses = function(hasFocus) {\n    var hasContent;\n    if ('value' in target) {\n      hasContent = target.value.length > 0;\n    } else if (placeholder && placeholder.textContent.length > 0) {\n      hasContent = placeholder.textContent.length > 0;\n    } else {\n      hasContent = target.textContent.length > 0;\n    }\n    node.classList.toggle('has-content', hasContent);\n    node.classList.toggle('has-focus', hasFocus);\n    node.classList.toggle('has-content-or-focus', hasContent || hasFocus);\n  };\n\n  var onFocus = function() {\n    setClasses(true);\n  };\n\n  var onBlur = function() {\n    setClasses(false);\n  };\n\n  var onInput = function() {\n    setClasses(document.activeElement === target);\n  };\n\n  var observer = new MutationObserver(onInput);\n  observer.observe(target, {\n    attributes: true,\n    characterData: true,\n    subtree: true\n  });\n\n  target.addEventListener('focus', onFocus);\n  target.addEventListener('blur', onBlur);\n  target.addEventListener('input', onInput);\n\n  onInput();\n\n  return {\n    teardown: () => {\n      target.removeEventListener('focus', onFocus);\n      target.removeEventListener('blur', onBlur);\n      target.removeEventListener('input', onInput);\n      observer.disconnect();\n    }\n  };\n};\n","var userActions = require('../actions/users');\nvar { defer } = require('lodash');\n\nmodule.exports = function() {\n  // must defer until `window.app` is defined, since userActions uses it\n  defer(userActions.acknowledgeAnnouncements);\n};\n","var Ractive = require('ractive');\n\nrequire('../vendor/ractive-events-keys');\n\nmodule.exports = function() {\n  Object.assign(Ractive.defaults, {\n    debug: true,\n    isolated: true,\n    modifyArrays: false,\n    once: function(event, callback) {\n      var self = this;\n      var wrapped = function() {\n        self.off(event, wrapped);\n        callback.apply(self, arguments);\n      };\n      self.on(event, wrapped);\n    },\n    listenTo: function(obj, name, callback, useCapture) {\n      callback = callback.bind(this);\n      (obj.on || obj.addEventListener).call(obj, name, callback, useCapture);\n      this.on('teardown', function() {\n        (obj.off || obj.removeEventListener).call(obj, name, callback, useCapture);\n      });\n      return this;\n    },\n    listenToOnce: function(obj, name, callback) {\n      callback = callback.bind(this);\n      obj.once(name, callback);\n      this.on('teardown', function() {\n        obj.off(name, callback);\n      });\n      return this;\n    }\n  });\n\n  Object.assign(Ractive.decorators,\n    require('../lib/ractive-decorator-playgif'),\n    require('../lib/ractive-decorator-autosize'),\n    require('../lib/ractive-decorator-sticky'),\n    require('../lib/ractive-decorator-activefield')\n  );\n\n  Ractive.defaults.onconstruct = function(opts) {\n    if (this.cursors == null) { return; }\n\n    var watcher = app.state.watch(this.cursors);\n\n    opts.data = opts.data || {};\n    Object.assign(opts.data, watcher.get());\n\n    watcher.on('update', () => this.set(watcher.get()));\n  };\n\n  Ractive.defaults.syncCursor = function(key) {\n    var cursor = this.cursors[key];\n    if (!cursor) {\n      throw new Error('unknown cursor for key: ' + key);\n    }\n    cursor = app.state.select(cursor);\n    this.observe(key, val => cursor.set(val), { init: false });\n  };\n\n  Ractive.defaults.refreshIframeComponent = function(paths, iframeKey) {\n    this.observe(paths, newValue => {\n      if (newValue) {\n        var iframe = this.find(iframeKey);\n        if (iframe) {\n          iframe.src = iframe.src;\n        }\n      }\n    });\n  };\n};\n","var { isEqual, omit } = require('lodash');\n\n// Adds a modal to the top of the stack\nexport function pushModal(data, tail) {\n  var current = app.state.get('modal');\n  // only push the modal if it's different from what's already at the top of the stack\n  if (!isEqual(data, omit(current, 'tail'))) {\n    data.tail = tail || current;\n    app.state.set('modal', data);\n    document.body.classList.add('has-modal');\n    if (app.state.get('overlay')) {\n      var overlay = document.querySelector('.m-overlay');\n      overlay.classList.remove('is-full-screen');\n    }\n  }\n}\n\n// Replaces the modal at the top of the stack with the provided one\nexport function swapModal(data) {\n  var current = app.state.get('modal');\n  if (current.tail) {\n    data.tail = current.tail;\n  }\n  app.state.set('modal', data);\n}\n\n// Removes modal at the top of the stack\nexport function popModal() {\n  var current = app.state.get('modal');\n  if (current.tail) {\n    app.state.set('modal', current.tail);\n  } else {\n    closeModal();\n  }\n}\n\nexport function closeModal() {\n  app.state.set('modal', null);\n  document.body.classList.remove('has-modal');\n  if (app.state.get('overlay')) {\n    var overlay = document.querySelector('.m-overlay');\n    overlay.classList.add('is-full-screen');\n  }\n}\n\nexport function getModal(key) {\n  return app.state.get('modal', key);\n}\n","var querystring = require('querystring');\nvar request = require('../lib/request');\nvar graphqlRequest = require('../lib/graphql_request');\nvar communityQueries = require('../graphql/queries/communities');\nvar { getChorusVideoAccess } = require('./users');\n\nexport function loadCommunity(communityId, context) {\n  return Promise.all([\n    getCommunity(communityId, context),\n    getEntitlements(communityId),\n    getChorusVideoAccess(communityId)\n  ]).then(([community, entitlements, canAccessChorusVideo]) => {\n    if (community.autoTagging && entitlements.includes('use_no_geo_tags')) {\n      community.autoTagging.autotagTagTypes = community.autoTagging.autotagTagTypes.filter(t => !t.includes('geo'));\n    }\n    app.state.set(['community'], community);\n    app.state.set(['entitlements'], entitlements);\n    app.state.set(['user', 'canAccessChorusVideo'], canAccessChorusVideo || false);\n  });\n}\n\nexport async function getCommunity(communityId, context) {\n  var { community } = await graphqlRequest('/api/tower/graphql', {\n    query: communityQueries[`${context}Community`],\n    variables: { communityId }\n  });\n  if (!community) {\n    throw new Error('Community not found.');\n  }\n\n  // Convert CONSTANT_CASE enums to expected case\n  if (context === 'Editor') {\n    community.autoTagging.autolinkTagTypes = community.autoTagging.autolinkTagTypes.map(tagType => tagType.toLowerCase());\n    community.autoTagging.autotagTagTypes = community.autoTagging.autotagTagTypes.map(tagType => tagType.toLowerCase());\n  }\n\n  return community;\n}\n\nexport async function getPrintOptions(communityId) {\n  var { community } = await graphqlRequest('/api/tower/graphql', {\n    query: `query PrintOptions($communityId: Int!) {\n      community(id: $communityId) {\n        desk: siteConfigString(key: \"print_desks\")\n        category: siteConfigString(key: \"print_categories\")\n        article_type: siteConfigString(key: \"print_article_types\")\n        placement: siteConfigString(key: \"print_placements\")\n      }\n    }`,\n    variables: { communityId }\n  });\n  if (!community) {\n    throw new Error('Community not found.');\n  }\n\n  return Object.keys(community).reduce((acc, key) => {\n    if (!community[key]) {\n      return acc;\n    }\n\n    return {\n      ...acc,\n      // split on new lines and clean up\n      [key]: (community[key] ? community[key].split('\\n') : [])\n        .map(item => item.trim())\n        .filter(Boolean),\n    };\n  }, {});\n}\n\nexport function getEntitlements(communityId) {\n  // .slice(1) removes the leading ? from the first query item\n  var query = querystring.parse(window.location.search.slice(1));\n  return request('/api/entitlements', {\n    query: {\n      userId: app.state.get(['user', 'id']),\n      communityId: communityId,\n      entitlements: query.entitlements ? query.entitlements.split(',') : []\n    }\n  });\n}\n","module.exports = function isGif(image) {\n  return image && /\\.gif(\\?|$)/.test(image.url || image.preview_url || image.src);\n};\n","/**\n * Removes `http[s]://` from a url before using to query for a doc. Elasticsearch\n * indices of docs have a public_url that does not contain a protocol therefore\n * we can't query those docs with the URL protocol\n * @param {String} url a valid URL\n * @return {String} The URL without the protocol\n */\nexport default function stripProtocol(url) {\n  return url.replace(/http[s]?:\\/\\//, '');\n}\n","var autosave = require('../../actions/autosave');\nvar contentsDefaults = require('./contents_defaults');\nvar convertObjectFormat = require('./convert_object_format');\n\nexport default function(docId) {\n  var doc = autosave.getDocCursor(docId).get();\n  var contents = doc.head.contents;\n  var defaults = contentsDefaults(doc);\n  var delta = [];\n\n  for (let [key, value] of Object.entries(defaults)) {\n    if (contents[key] == null && value != null) {\n      delta.push({ p: [key], oi: value });\n    }\n  }\n\n  // Set defaults on nested draft object\n  if (defaults.draft) {\n    if (contents.draft) {\n      for (let [key, value] of Object.entries(defaults.draft)) {\n        if (contents.draft[key] == null && value != null) {\n          delta.push({ p: ['draft', key], oi: value });\n        }\n      }\n    } else {\n      delta.push({ p: ['draft'], oi: defaults.draft });\n    }\n  }\n\n  delta = delta.concat(convertObjectFormat(contents));\n\n  return delta.length > 0 ? autosave.resolveOnLocalUpdate(doc.id, delta, -1) : Promise.resolve();\n}\n","module.exports = { tag: 'DEL' };\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { get: getPath } = require('lodash');\nvar toInternalHtml = require('../../lib/quill/to_internal_html');\nvar isEmpty = require('../../../shared/delta/is_empty');\nvar hermanoActions = require('../../actions/hermano');\nvar thumborUrl = require('../../lib/thumbor_url');\n\ncomponent.exports = {\n  data: {\n    doc: null,\n    record: null\n  },\n  computed: {\n    displayScore: function() {\n      var contents = this.get('doc.head.contents');\n      return (\n        (contents.type === 'venue' && (contents.score === 0 || contents.score)) ||\n        (contents.type !== 'venue' && contents.score)\n      );\n    },\n    scoreHeading: function() {\n      var type = this.get('doc.head.contents.type');\n      return type === 'product' ? 'Overall' : 'Score';\n    },\n    thumbnailUrl: function() {\n      var contents = this.get('doc.head.contents');\n      var record = this.get('record');\n      var src = getPath(contents, ['image', 'src']);\n\n      if (contents.type !== 'game' && !src && record) {\n        src = hermanoActions.imageForRecord(record);\n      }\n\n      if (src) {\n        return thumborUrl(src, { fit_in: true, width: 800, height: 500 });\n      }\n    },\n    pros: function() {\n      var pros = this.get('doc.head.contents.pros');\n      return pros && !isEmpty(pros) && toInternalHtml(pros);\n    },\n    cons: function() {\n      var cons = this.get('doc.head.contents.cons');\n      return cons && !isEmpty(cons) && toInternalHtml(cons);\n    },\n    body: function() {\n      var body = this.get('doc.head.contents.body');\n      return body && toInternalHtml(body);\n    }\n  },\n  oninit: function() {\n    var contents = this.get('doc.head.contents');\n    if (contents.hermano_id) {\n      hermanoActions.getRecord(contents.type, contents.hermano_id).then(record => {\n        this.set('record', record);\n      });\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"scorecard-inner\"},f:[{t:4,n:50,r:\"record\",f:[{t:7,p:[3,5,51],e:\"div\",a:{\"class\":\"scorecard-title\"},f:[{t:2,r:\"record.name\",p:[3,34,80]}]}],p:[2,3,32]},\" \",{t:4,n:50,r:\"displayScore\",f:[{t:7,p:[7,5,140],e:\"div\",a:{\"class\":\"score-container\"},f:[{t:7,p:[8,7,176],e:\"div\",a:{\"class\":\"score-type\"},f:[{t:7,p:[9,9,209],e:\"p\",a:{\"class\":\"score-heading\"},f:[{t:2,r:\"scoreHeading\",p:[9,34,234]}]},\" \",{t:7,p:[10,9,263],e:\"span\",a:{\"class\":\"score\"},f:[{t:2,r:\"doc.head.contents.score\",p:[10,29,283]}]}]},\" \",{t:4,r:\"doc.head.contents.platform_scores\",f:[{t:7,p:[13,9,384],e:\"div\",a:{\"class\":\"score-type\"},f:[{t:7,p:[14,11,419],e:\"p\",a:{\"class\":\"score-heading\"},f:[{t:2,r:\"./name\",p:[14,36,444]}]},\" \",{t:7,p:[15,11,472],e:\"span\",a:{\"class\":\"score\"},f:[{t:2,r:\"./score\",p:[15,31,492]}]}]}],p:[12,7,337]}]}],p:[6,3,115]},\" \",{t:4,n:50,r:\"thumbnailUrl\",f:[{t:7,p:[22,5,623],e:\"div\",a:{\"class\":\"scorecard-image\"},f:[{t:7,p:[23,7,659],e:\"img\",a:{src:[{t:2,r:\"thumbnailUrl\",p:[23,17,669]}]}}]}],p:[21,3,598]},\" \",{t:4,n:50,r:\"pros\",f:[{t:7,p:[28,5,731],e:\"h4\",a:{\"class\":\"description-heading\"},f:[\"Good stuff\"]},\" \",{t:7,p:[29,5,783],e:\"div\",a:{\"class\":\"description\"},f:[{t:3,r:\"pros\",p:[29,30,808]}]}],p:[27,3,714]},\" \",{t:4,n:50,r:\"cons\",f:[{t:7,p:[32,5,854],e:\"h4\",a:{\"class\":\"description-heading\"},f:[\"Bad stuff\"]},\" \",{t:7,p:[33,5,905],e:\"div\",a:{\"class\":\"description\"},f:[{t:3,r:\"cons\",p:[33,30,930]}]}],p:[31,3,837]},\" \",{t:4,n:50,r:\"body\",f:[{t:7,p:[36,5,976],e:\"div\",a:{\"class\":\"description\"},f:[{t:3,r:\"body\",p:[36,30,1001]}]}],p:[35,3,959]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","module.exports = { tag: 'MARK' };\n","var autosize = require('autosize');\nvar { debounce } = require('lodash');\nvar iframeReady = require('./iframe_ready');\n\nexports.autosize = function(node, padding = 0) {\n  if (node.tagName === 'IFRAME') {\n    return autosizeIframe(node, padding);\n  } else if (node.tagName === 'TEXTAREA') {\n    return autosizeTextarea(node);\n  }\n};\n\nfunction autosizeIframe(node, padding) {\n  var observer;\n  var resize = function() {\n    var el = node.contentDocument && node.contentDocument.documentElement;\n    if (el) {\n      node.style.height = el.scrollHeight + padding + 'px';\n      el.style.overflow = 'hidden';\n    }\n  };\n\n  iframeReady(node).then(function() {\n    node.contentWindow.addEventListener('resize', resize);\n\n    // twitter and facebook embeds somehow don't trigger the window resize event\n    if (node.contentWindow.twttr) {\n      node.contentWindow.twttr.events.bind('rendered', resize);\n    }\n    if (node.contentWindow.FB) {\n      node.contentWindow.FB.Event.subscribe('xfbml.render', resize);\n    }\n\n    observer = new MutationObserver(debounce(resize, 200));\n    observer.observe(node, { attributes: true });\n    observer.observe(node.contentDocument.body, {\n      childList: true,\n      attributes: true,\n      characterData: true,\n      subtree: true\n    });\n\n    resize();\n  }).catch(function() {});\n\n  return {\n    teardown: function() {\n      try {\n        if (observer) {\n          observer.disconnect();\n        }\n        if (node && node.contentWindow) {\n          node.contentWindow.removeEventListener('resize', resize);\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n}\n\nfunction autosizeTextarea(node) {\n  autosize(node);\n\n  return {\n    teardown: function() {\n      autosize.destroy(node);\n    }\n  };\n}\n","var thirdheader = { type: 'line', tag: 'H3' };\nmodule.exports = Object.assign({}, thirdheader, { exclusive: true });\n","var Ractive = require('ractive');\nvar component = module;\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":\"pym-inner\"},f:[{t:7,p:[2,3,26],e:\"div\",a:{\"data-pym-src\":[{t:3,r:\"pym.url\",p:[2,21,44]}]}},\" \",{t:7,p:[3,3,67],e:\"script\",a:{type:\"text/javascript\",src:\"https://pym.nprapps.org/pym.v1.min.js\"}}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var OT = require('../../shared/ottypes/anthem0');\nvar sentryActions = require('../actions/sentry');\n\n// This library warps the three OT methods we use in the client in try/catch\n// guards. We assume all OT errors are \"fatal\" in that they probably break\n// autosave, so we log & emit an error prompting to refresh. Still, we pass\n// the error back up the stack as well to be handled where the OT method was\n// called (e.g. autosave)\n\nexport default {\n  compose(op1, op2) {\n    try {\n      return OT.compose(op1, op2);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  },\n  apply(snapshot, op) {\n    try {\n      return OT.apply(snapshot, op);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  },\n  transform(op1, op2, side) {\n    try {\n      return OT.transform(op1, op2, side);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  }\n};\n"],"sourceRoot":""}