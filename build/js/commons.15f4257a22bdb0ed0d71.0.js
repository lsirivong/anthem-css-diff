(window.webpackJsonp=window.webpackJsonp||[]).push([["commons"],{"+0Ce":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserTwitterHandle=t.UserNamesTitles=t.UserNames=t.UserName=t.UserChorusVideo=t.SearchContributors=t.CurrentUser=void 0;t.CurrentUser='\n  query CurrentUser($size: String!) {\n    currentUser {\n      id\n      createdOn\n      fullOrUserName\n      email\n      timeZone\n      networkRoles\n      memberships: communityMemberships {\n        status\n        roles\n        community {\n          id\n          name\n          faviconUrl\n          network {\n            id\n            name\n            svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n          }\n        }\n      }\n      networkMemberships {\n        networkId\n        imageUrl(size: $size)\n        network {\n          primaryCommunity {\n            id\n          }\n        }\n      }\n    }\n  }\n';t.UserChorusVideo="\n  query UserChorusVideo($scopeId: Int!) {\n    currentUser {\n      canAccessChorusVideo(scopeType: COMMUNITY, scopeId: $scopeId)\n    }\n  }\n";t.UserTwitterHandle="\n  query UserTwitterHandle($id: Int!) {\n    user(id: $id) {\n      twitterUsername\n    }\n  }\n";t.UserName="\n  query UserName($id: Int!) {\n    user(id: $id) {\n      id\n      fullOrUserName\n    }\n  }\n";t.UserNames="\n  query UserNames($ids: [Int!]!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n    }\n  }\n";t.UserNamesTitles="\n  query UserNamesTitles($ids: [Int!]!, $communityId: Int!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n      authorProfile(communityId: $communityId) {\n        title\n      }\n    }\n  }\n";t.SearchContributors="\n  query SearchContributors($text: String!, $communityId: Int!) {\n    searchUsers(query: {\n      text: $text,\n      prefix: true,\n      communityIds: [$communityId],\n      roles: [FREELANCE, AUTHOR, TRUSTED_AUTHOR, EDITOR, MANAGER],\n      fallbackNetworkRoles: [NETWORK_ADMIN, NETWORK_EDITOR],\n      statuses: [ACTIVE, PROVISIONAL, PERMISSIONS_SUSPENDED],\n      perPage: 25\n    }) {\n      results {\n        id\n        fullOrUserName\n        username\n      }\n    }\n  }\n"},"+N1L":function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports={data:{video:null},computed:{src:function(){var e=this.get("video"),t=`${app.config.volumeEmbedUrl}/${e.uuid}`;return e.playerType&&(t+="?player_type="+e.playerType),t}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"iframe",a:{allowfullscreen:0,src:[{t:2,r:"src",p:[1,30,29]}]}}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},"/+ob":function(e,t,n){"use strict";(function(e){var t,r=(t=n("hiad"))&&t.__esModule?t:{default:t};var o=n("FR06"),s=e;s.exports={data:{doc:null},computed:{content:function(){var e=this.get("doc");return(0,r.default)(e.head.contents.body)}}},s.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"aside-inner"},f:[{t:3,r:"content",p:[1,26,25]}]}]},e.exports=o.extend(s.exports)}).call(this,n("YuTi")(e))},"/LVe":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=app.state.select(["autosave","docsById",e]);"story"===t.get().schema_name&&(t.on("update",()=>{t.get()&&a(t.get())}),a(t.get()))};var{difference:r}=n("LvDl"),o=n("dnr0"),s=n("SiKE"),i=n("7a9H");function a(e){var t=app.state.get(["subdocs"]).map(e=>{let{id:t}=e;return t}),n=i(e.head.contents),a=r(n,t);0!==a.length&&s.searchDocs({ids:a.join(",")}).then(e=>{let{docs:t}=e;t.map(e=>o.setAndInitDoc(e))})}e.exports=t.default},"/MMw":function(e,t,n){"use strict";function r(e){var t=e.contentDocument;return t&&"about:blank"!==t.URL&&("interactive"===t.readyState||"complete"===t.readyState)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return Promise.reject(new Error("iframeReady(): argument must not be "+e));return new Promise((t,n)=>{var o=null,s=null;try{if(r(e))return t();o=setInterval(()=>{r(e)&&(clearInterval(o),clearTimeout(s),t())},50),s=setTimeout(()=>{clearInterval(o),n(new Error("iframeReady(): timed out waiting for iframe to become ready"))},1e4)}catch(e){clearInterval(o),clearTimeout(s),n(e)}})},e.exports=t.default},0:function(e,t,n){n("j36g"),e.exports=n("WJG9")},"0+zM":function(e,t,n){"use strict";e.exports=n("m/vA")("image")},"0316":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllDocWarnings=function(e){return o.getAllDocObjects(e,["oembed","doc"]).reduce((e,t)=>{var n=c(t);return n&&e.push({object:t,message:n}),e},[])},t.getMessage=function(e){return a(c(e))},t.getMessageForWarnings=a,t.hasStatus=function(e,t,n){return e.includes(u(t,n))},n("Kz25");var r=app.config.partnerPlatforms,o=n("SiKE");const s=["poll"],i={STRIP:"will be stripped out on",BLOCK:"will block this story from"};function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?`${t?"These":"This"} ${e}.`:""}function c(e){var t,n=Object.keys(e)[0],o="",s="",i="";"oembed"===n?(o=((t=e.oembed).provider_name||new URL(t.url).hostname||"").toLowerCase(),s=e.oembed.html||""):"doc"===n&&(i=e.doc.type);var a=function(e,t,n){if(!app.state.get(["community","publishForGoogleAmp"]))return;if(l(r.google_amp.blocklist,e)||d('iframe[src^="http://"]',t))return"BLOCK";if("vox media"===e&&!d('div[data-iframe^="https://"]',t))return"BLOCK";if(p(n)||e&&!l(r.google_amp.allowlist,e)&&!d('iframe[src^="https://"]',t)&&!d('iframe[src^="//"]',t))return"STRIP"}(o,s,i),c=function(e,t,n){if(!app.state.get(["community","publishForAppleNews"]))return;if(l(r.apple_news.blocklist,e)||d('iframe[src*="docs.google.com"]',t))return"STRIP";if("vox media"===e&&!d('div[data-iframe-fallback^="https://"]',t))return"STRIP";if(p(n)||e&&!l(r.apple_news.allowlist,e))return"STRIP"}(o,s,i);if(!a&&!c)return"";if(a===c)return u(a,"Google AMP and Apple News");var f=[];return a&&f.push(u(a,"Google AMP")),c&&f.push(u(c,"Apple News")),f.join(" and ")}function u(e,t){return i[e]+" "+t}function l(e,t){return e.some(e=>t.includes(e))}function d(e,t){var n=document.createElement("div");return n.innerHTML=t,n.querySelectorAll(e).length>0}function p(e){return s.includes(e)}},1:function(e,t){},"1+zu":function(e,t,n){"use strict";var r=n("a62e"),o=n("Dh7P"),s=n("Lly2"),i=n("AUH+"),a=n("bz8U"),c=n("WxQR");e.exports=function(e){return r(e)?"mapstack":o(e)?"stream":s(e)?"link":i(e)?"package":a(e)?"page":c(e)?"custom story":"story"}},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t,n){n("j36g"),e.exports=n("RvNt")},"14QZ":function(e,t,n){"use strict";e.exports={tag:"INS"}},"157X":function(e,t,n){"use strict";e.exports=Object.assign({},{tag:"EM"},{prepare:"italic"})},"1bwG":function(e,t,n){"use strict";e.exports=n("m/vA")("credits")},"1fi2":function(e,t,n){"use strict";e.exports=n("m/vA")("pullquote")},"1wDL":function(e,t,n){"use strict";var r=n("LvDl").flatten;e.exports=function(e){return r(e.map(e=>e.stories))}},2:function(e,t){},"2GoG":function(e,t,n){"use strict";e.exports=function(e){var t=e.current_page,n=e.per_page,r=e.item_count;return{page:t,perPage:n,total:r,totalPages:0===r?1:Math.ceil(r/n)}}},"2jot":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){app.state.set("connected",!0),app.socket.on("disconnect",c),app.socket.on("reconnect",()=>u("socket")),app.socket.on("reconnect_failed",l),app.contentApiSocket.on("disconnect",c),app.contentApiSocket.on("reconnect",()=>u("contentApiSocket")),app.contentApiSocket.on("reconnect_failed",l),app.on("sockets.disconnect",a),window.addEventListener("beforeunload",()=>{s=!0})};var r=n("6fkZ"),o=n("lvH+");let s=!1,i=null;function a(e){app.socket.disconnect(),app.contentApiSocket.disconnect(),app.state.set(["connected"],!1),app.state.set(["socketError"],!0),"stale-tab"===e&&o.showMessage({type:"negative",dismissible:!1,message:r.RELOAD_STALE_TAB})}function c(e){if("io client disconnect"!==e){var t=app.state.get(["connected"])&&!s&&!i;app.state.set(["connected"],!1),t&&(i=o.showMessage({type:"cautionary",message:r.RECONNECTING}))}}function u(e){app[e].disconnected&&app[e].connect();var t=!app.state.get(["connected"])&&!s&&i;app.state.set(["connected"],!0),t&&(o.removeMessage(i),i=null)}function l(){app.state.set(["socketError"],!0),o.removeMessage(i),o.showMessage({type:"negative",dismissible:!1,message:r.RECONNECT_ERROR})}e.exports=t.default},"2zRN":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t,n=[];r(e,"draft.body")&&(t=c(e.draft.body),t.length()>0&&n.push({p:["draft","body"],t:"rich-text",o:t}));e.body&&(t=c(e.body),t.length()>0&&n.push({p:["body"],t:"rich-text",o:t}));e.pros&&(t=c(e.pros),t.length()>0&&n.push({p:["pros"],t:"rich-text",o:t}));e.cons&&(t=c(e.cons),t.length()>0&&n.push({p:["cons"],t:"rich-text",o:t}));if(r(e,"draft.map_points")){const r=e.draft.map_points;for(let[e,o]of r.entries())t=c(o.body),t.length()>0&&n.push({p:["draft","map_points",e,"body"],t:"rich-text",o:t})}return n};const{has:r,pick:o,omit:s}=n("LvDl"),i=n("tNa1").Delta,a=Object.keys(n("JUFS").object.properties);function c(e){const t=new i;for(let n of e.ops)1===n.insert?t.delete(1).insert(o(n.attributes,a),s(n.attributes,a)):t.retain(n.insert.length||1);return t.chop()}e.exports=t.default},3:function(e,t){},"3bBC":function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,{debounce:o}=n("LvDl"),s=n("sg+F");r.exports={cursors:{docLabel:["docLabel"],newsletters:["community","newsletters"],modal:["modal"],overlay:["overlay"]},data:{type:"",isSubframe:!1,isCollapsed:!1,isSelected:!1,subdoc:null},computed:{objectType:function(){var e=this.get("type"),t=this.get("subdoc");return"doc"===e?t&&t.schema_name:e},objectData:function(){var e=this.get("type");return this.get("doc"===e?"subdoc":e)},canEdit:function(){var e=this.get("objectType"),t=this.get("objectData"),n=this.get("newsletters");return"newsletter"===e&&n.length>1||t&&(!t.hasOwnProperty("canEdit")||t.canEdit)},isEditorContext:function(){return!this.get("isSubframe")&&!this.get("objectData.isLeadArt")&&!this.get("isChecklist")},wrapperClass:function(){var e=[this.get("objectType")];return this.get("objectData.isLeadArt")&&e.push("is-lead-art"),this.get("canEdit")||e.push("is-static"),e.join(" ")},hideWarning:function(){return this.get("objectData.isLeadArt")||this.get("isChecklist")||"mapstack"===this.get("docLabel")}},oninit:function(){this.setInitialState(),this.setInitialHeightData(),"hr"===this.get("type")&&document.body.classList.add("hr"),this.get("isSubframe")&&window.frameElement.classList.add("is-subframe"),this.listenTo(window,"message",()=>{this.expand,"pym"===this.get("objectType")&&setTimeout(()=>{s(window)},500)}),this.listenTo(window,"resize",o(()=>s(window),1e3))},onrender:function(){s(window)},setInitialState:function(){this.set({frameId:window.frameElement.dataset.frameId,isSubframe:window.parent&&window.parent.frameElement,isChecklist:window.parent.document.body.querySelectorAll(".m-checklist").length>0,hasFixedHeight:window.frameElement.hasAttribute("data-preserve-height")});var e=this.get("type"),t=this.get("doc.id");if("doc"===e&&t){var n=app.state.get(["subdocs"])||[];this.set("subdoc",n.find(e=>{let{id:n}=e;return n===t}))}},setInitialHeightData:function(){var e=this.isSmallScreen(),t=this.get("isEditorContext"),n=this.get("hasFixedHeight");if(n||e&&t){document.documentElement.classList.add("has-fixed-height");var r=null!==this.get("overlay")&&null!==this.get("modal");e&&t&&(r?this.set("isCollapsed",!0):this.get("isCollapsed")||(window.frameElement.classList.add("is-expanded"),n||document.documentElement.classList.remove("has-fixed-height")))}},expand:function(e){let{data:t,origin:n}=e;if("object.selected"===t.event&&t.payload===this.get("frameId")&&n===window.top.location.origin){var r=this.get("isCollapsed"),o=this.get("hasFixedHeight"),i=this.get("isEditorContext"),a=this.isSmallScreen();i&&a&&r&&(window.frameElement.classList.add("is-expanded"),o||document.documentElement.classList.remove("has-fixed-height"),s(window),this.set("isCollapsed",!1))}},isSmallScreen:function(){return window.parent&&window.parent===window.top&&window.parent.innerWidth<=640}},r.exports.template={v:1,t:[{t:4,n:50,r:"hr",f:[{t:7,p:[24,3,976],e:"hr"}],p:[23,1,963]},{t:4,n:51,f:[{t:7,p:[26,3,992],e:"div",a:{class:["container ",{t:2,r:"wrapperClass",p:[26,25,1014]}]},f:[{t:4,n:50,x:{r:["isCollapsed"],s:"!_0"},f:[{t:4,n:50,x:{r:["type"],s:'_0==="doc"'},f:[{t:4,n:50,x:{r:["objectData"],s:"!_0"},f:[{t:7,p:[30,11,1125],e:"div",a:{class:"loading"},f:[{t:7,p:[31,13,1159],e:"res-icon",a:{size:"medium",name:"more"}}]}],p:[29,9,1095]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="aside"'},f:[{t:7,p:[35,11,1280],e:"aside",a:{doc:[{t:2,r:"objectData",p:[35,23,1292]}]}}],p:[34,9,1239]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="gallery"'},f:[{t:7,p:[38,11,1384],e:"gallery",a:{doc:[{t:2,r:"objectData",p:[38,25,1398]}]}}],p:[37,9,1341]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="imageslider"'},f:[{t:7,p:[41,11,1496],e:"imageslider",a:{doc:[{t:2,r:"objectData",p:[41,29,1514]}]}}],p:[40,9,1449]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="scorecard"'},f:[{t:7,p:[44,11,1614],e:"scorecard",a:{doc:[{t:2,r:"objectData",p:[44,27,1630]}]}}],p:[43,9,1569]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="poll"'},f:[{t:7,p:[47,11,1723],e:"poll",a:{doc:[{t:2,r:"objectData",p:[47,22,1734]}]}}],p:[46,9,1683]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="table"'},f:[{t:7,p:[50,11,1823],e:"table",a:{doc:[{t:2,r:"objectData",p:[50,23,1835]}]}}],p:[49,9,1782]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="productcard"'},f:[{t:7,p:[53,11,1931],e:"productcard",a:{doc:[{t:2,r:"objectData",p:[53,29,1949]}]}}],p:[52,9,1884]}],p:[28,7,1064]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="actionbox"'},f:[{t:7,p:[58,9,2060],e:"actionbox",a:{actionbox:[{t:2,r:"objectData",p:[58,31,2082]}]}}],p:[57,7,2017]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="html"'},f:[{t:7,p:[61,9,2169],e:"html",a:{html:[{t:2,r:"objectData",p:[61,21,2181]}]}}],p:[60,7,2131]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="image"'},f:[{t:7,p:[64,9,2264],e:"image",a:{image:[{t:2,r:"image",p:[64,23,2278]}]}}],p:[63,7,2225]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="newsletter"'},f:[{t:7,p:[67,9,2362],e:"newsletter",a:{newsletter:[{t:2,r:"objectData",p:[67,33,2386]}]}}],p:[66,7,2318]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="oembed"'},f:[{t:7,p:[70,9,2476],e:"oembed",a:{oembed:[{t:2,r:"objectData",p:[70,25,2492]}]}}],p:[69,7,2436]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="pullquote"'},f:[{t:7,p:[73,9,2581],e:"pullquote",a:{pullquote:[{t:2,r:"objectData",p:[73,31,2603]}]}}],p:[72,7,2538]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="ratingcard"'},f:[{t:7,p:[76,9,2696],e:"ratingcard",a:{ratingcard:[{t:2,r:"objectData",p:[76,33,2720]}]}}],p:[75,7,2652]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="readmore"'},f:[{t:7,p:[79,9,2812],e:"readmore",a:{readmore:[{t:2,r:"objectData",p:[79,29,2832]}]}}],p:[78,7,2770]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="video"'},f:[{t:7,p:[82,9,2919],e:"video",a:{video:[{t:2,r:"objectData",p:[82,23,2933]}]}}],p:[81,7,2880]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="credits"'},f:[{t:7,p:[85,9,3019],e:"credits",a:{credits:[{t:2,r:"objectData",p:[85,27,3037]}]}}],p:[84,7,2978]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="toh_project_details"'},f:[{t:7,p:[88,9,3137],e:"toh-project-details",a:{toh_project_details:[{t:2,r:"objectData",p:[88,51,3179]}]}}],p:[87,7,3084]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="toh_tools"'},f:[{t:7,p:[91,9,3281],e:"toh-tools",a:{toh_tools:[{t:2,r:"objectData",p:[91,31,3303]}]}}],p:[90,7,3238]}," ",{t:4,n:50,x:{r:["objectType"],s:'_0==="pym"'},f:[{t:7,p:[94,9,3389],e:"pym",a:{pym:[{t:2,r:"objectData",p:[94,19,3399]}]}}],p:[93,7,3352]}],p:[27,5,1037]}," ",{t:4,n:50,r:"objectData",f:[{t:7,p:[99,7,3478],e:"info-bar",a:{objectType:[{t:2,r:"objectType",p:[100,21,3508]}],objectData:[{t:2,r:"objectData",p:[101,21,3544]}],hideWarning:[{t:2,r:"hideWarning",p:[102,22,3581]}],isCollapsed:[{t:2,r:"isCollapsed",p:[103,22,3619]}]}}],p:[98,5,3453]}]}," ",{t:4,n:50,r:"canEdit",f:[{t:7,p:[109,5,3699],e:"div",a:{class:"edit-button"},f:["Edit"]}],p:[108,3,3679]}],r:"hr"}]},r.exports.components={pym:n("yw8Q"),"toh-tools":n("Mbhk"),"toh-project-details":n("YHZh"),credits:n("eFbp"),video:n("+N1L"),table:n("U+jF"),scorecard:n("x07u"),readmore:n("GJsQ"),ratingcard:n("4qoa"),pullquote:n("qt6N"),poll:n("LgHX"),productcard:n("Y51Y"),oembed:n("k+vd"),newsletter:n("LrtX"),imageslider:n("Jawb"),image:n("T9lS"),html:n("BRal"),gallery:n("QcUh"),aside:n("/+ob"),actionbox:n("b5Lw"),"info-bar":n("FMQD")},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},"3g6Y":function(e,t,n){"use strict";e.exports={type:"line",splitAffinity:"left",add:function(e,t){return e.setAttribute("data-dropcap",t.toString()),e},remove:function(e){return e.removeAttribute("data-dropcap"),e},value:function(e){return"true"===e.dataset.dropcap},match:function(e){return"P"===e.tagName&&e.hasAttribute("data-dropcap")}}},"3hiN":function(e,t,n){"use strict";e.exports={type:"line",attribute:"data-ad-placement-anchor"}},4:function(e,t){},"4S2D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=`${app.config.ssl?"wss":"ws"}://${window.location.host}/`,t={transports:["websocket"],reconnectionAttempts:app.config.sockets.reconnectAttempts};app.socket=r(e,t),app.contentApiSocket=r(e,Object.assign({},t,{path:"/api/content/socket.io/"}))};var r=n("gFX4");e.exports=t.default},"4mBr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEntryById=function(e){if(!e)return Promise.resolve(null);return r("/api/chorus/entries/"+e)},t.getEntryByUrl=function(e){const t=document.createElement("a");t.href=e;const n=s(e)?t.pathname.substring(3):t.pathname.substring(1);if(!n)throw new Error("invalid Chorus url");return r("/api/chorus/entries/"+n,{query:{community_id:app.state.get(["community","id"])},opts:{handleError:!1}})},t.searchEntries=function(e){return r("/api/chorus/entries",{query:e}).then(e=>[e._embedded.entry,o(e)])},t.searchEntriesByTitle=function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r("/api/chorus/entries/title_autocomplete",{query:{q:e,type:t,per_page:n,community_id:app.state.get(["community","id"]),published:o}})},t.updateEntry=function(e,t){return r("/api/chorus/entries/"+e.entry_id,{method:"PUT",query:{community_id:e.community_id},body:t,opts:{handleError:!1}})},t.updateEntryFlags=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n&&app.state.set(["requestInProgress"],!0),null==e.entry_id)return Promise.reject(new Error("Cannot update flags on a doc without an entry_id"));return r(`/api/chorus/entries/${e.entry_id}/flags`,{method:"PUT",query:{community_id:e.community_id},body:t}).then(()=>{n&&app.state.set(["requestInProgress"],!1)}).catch(()=>(n&&app.state.set(["requestInProgress"],!1),Promise.reject()))};var r=n("kh36"),o=n("2GoG"),s=n("sMLR")},"4qoa":function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports={cursors:{ratingCardMaxStars:["community","ratingCardMaxStars"]},data:{ratingcard:null},computed:{stars:function(){var e=this.get("ratingcard.rating"),t="",n=this.get("ratingCardMaxStars");for(let n=0;n<Math.floor(e);n++)t+='<div class="star active"></div>';e%1!=0&&(t+='<div class="star halfsies"></div>');for(let r=0;r<n-Math.ceil(e);r++)t+='<div class="star inactive"></div>';return t}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"span",f:["Rating: ",{t:2,r:"ratingcard.rating",p:[1,15,14]}]}," ",{t:7,p:[2,1,43],e:"div",a:{class:"stars"},f:[{t:3,r:"stars",p:[2,20,62]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},5:function(e,t){},"5mjy":function(e,t,n){"use strict";e.exports=n("m/vA")("html")},"5qpz":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.acknowledgeAnnouncements=function(){var e=d(app.state.get("user","lastAnnouncementSeenAt")).utc(),t=d(app.config.announcements.last_announcement_posted_at).utc();return e.isBefore(t)?m({lastAnnouncementSeenAt:d.utc().toISOString()}):Promise.resolve()},t.getChorusVideoAccess=async function(e){const{currentUser:t}=await l("/api/tower/graphql",{query:o,variables:{scopeId:e}});return!!t&&t.canAccessChorusVideo},t.getCurrentUser=async function(){var{currentUser:e}=await l("/api/tower/graphql",{query:r,variables:{size:"small"}});const t=p(app.config.policyRoles,"app.access");return e.memberships=e.memberships.filter(e=>e.roles.some(e=>t[e])),e.fullOrUserName=e.fullOrUserName||"Unknown User",e},t.getTimezone=function(){return app.state.get("user","timeZone")||app.state.get("community","timeZone")},t.getTwitterUsername=async function(e){const{user:t}=await l("/api/tower/graphql",{query:s,variables:{id:e}});return t.twitterUsername},t.getUser=async function(e){var{user:t}=await l("/api/tower/graphql",{query:i,variables:{id:e}});return t},t.getUsers=async function(e){if(0===e.length)return[];var{users:t}=await l("/api/tower/graphql",{query:a,variables:{ids:f(e)}});return t},t.getUsersWithTitles=async function(e,t){if(0===e.length)return[];var{users:n}=await l("/api/tower/graphql",{query:c,variables:{ids:f(e),communityId:t}});return n},t.readAnnouncements=function(){var e=d(app.state.get("user","lastAnnouncementReadAt")).utc(),t=d(app.config.announcements.last_announcement_posted_at).utc();if(e.isBefore(t)){var n=d.utc().toISOString();return app.state.set(["user","lastAnnouncementSeenAt"],n),app.state.set(["user","lastAnnouncementReadAt"],n),m({lastAnnouncementReadAt:n})}return Promise.resolve()},t.updateAnthemUser=m,t.userLabel=function(e){var t=e.first_name,n=e.last_name;if(!t&&!n)return e.username;if(!n)return t;if(!t)return n;return t+" "+n};var{CurrentUser:r,UserChorusVideo:o,UserTwitterHandle:s,UserName:i,UserNames:a,UserNamesTitles:c}=n("+0Ce"),u=n("kh36"),l=n("XhB+"),d=n("f0Wu"),{get:p,uniq:f}=n("LvDl");function m(e){return u("/api/users/currentUser",{method:"PUT",body:e})}},6:function(e,t){},"6C0i":function(e,t,n){"use strict";t.sticky=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var o=document.querySelector(t),s=n?document.querySelector(n):null;if(null==o)throw new Error("Failed to initialize sticky decorator, could not find scroll container");var i=function(){var t=e.getBoundingClientRect(),n=e.nextElementSibling?e.nextElementSibling.getBoundingClientRect():t,i=o.getBoundingClientRect();if(r)if(s){var a=s.getBoundingClientRect(),c=n.top<i.top+t.height&&a.top>i.top;e.classList.toggle("is-sticky",c),o.classList.toggle("is-sticky",c)}else e.classList.toggle("is-sticky",n.top<i.top+t.height);else Math.abs(n.top-i.bottom)>=t.height&&(e.classList.toggle("is-sticky",n.top>i.bottom),o.classList.toggle("has-sticky-footer",n.top>i.bottom))};return o.addEventListener("scroll",i),window.addEventListener("resize",i),i(),{teardown:()=>{o.removeEventListener("scroll",i),window.removeEventListener("resize",i)}}}},"6bnl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_ALT_TEXT_LIMIT=void 0,t.getAssetType=function(e){return Object.keys(p).find(t=>f(t,e))},t.saveAsset=function(e,t){if("image"===e&&(t.title||"").length>500)return m(!1,u.ALT_TEXT_OVER_LIMIT.replace("{alt_text_limit}",500));return t.id?function(e,t){var n=r(t,["title","credit","search_text","source_caption"]);n.credit&&(n.credit=s(n.credit));if("image"===e){var o=r(t,["usage_rights"]);n=Object.assign({},n,o)}return i(`/api/assets/${e}s/${t.id}`,{method:"PUT",body:n,opts:{handleError:!1}}).catch(()=>m(!1))}(e,t):function(e,t){var n=r(t,["title","credit","search_text","network_id","community_id","user_id","source","source_id","source_caption","preview_url","remote_file_url"]);n.credit&&(n.credit=s(n.credit));"merlin"===n.source&&(n.caption=t.caption);return i(`/api/assets/${e}s`,{method:"POST",body:n,opts:{handleError:!1}}).catch(n=>"image"===e&&"merlin"===t.source&&503===n.response.status?m(!1,u.MERLIN_API_DOWN):m(!1))}(e,t)},t.searchAssets=function(e,t){t.per_page=12;var n=app.state.get(["entitlements"]);n.includes("use_network_asset_search")&&t.sources&&t.sources.includes("upload")?t.network_id=app.state.get(["community","network","id"]):t.community_id=app.state.get(["community","id"]);t.deleted=!1;for(let e of["ids","sources"])e in t&&(t[e]=t[e].join(","));return i(`/api/assets/${e}s`,{query:t,opts:{withHeaders:!0,handleError:!1}}).then(e=>{var t=c({page:parseInt(e.headers.get("Page")),perPage:parseInt(e.headers.get("Per-Page")),total:parseInt(e.headers.get("Total"))});return[e.data,t]}).catch(r=>403===r.response.status&&t.sources&&n.includes("use_network_asset_search")?m(!1,u.NETWORK_ASSETS_ACCESS_DENIED):"image"===e&&"getty"===t.source&&503===r.response.status?m(!1,u.GETTY_API_DOWN):m())},t.storeSelectSnapshot=function(e){app.state.set(["modal","selectAsset","snapshot"],e)},t.uploadAsset=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!f(e,t))return m(r,u.UNSUPPORTED_ASSET_TYPE);var s=new FormData;s.append("user_id",app.state.get(["user","id"])),s.append("network_id",app.state.get(["community","network","id"])),s.append("community_id",app.state.get(["community","id"])),"file"===e&&d.setParams(t);o(t,(e,t)=>s.append(t,e));const i=t.file&&"image/gif"===t.file.type||t.remote_file_url&&t.remote_file_url.endsWith(".gif");return a(`/api/assets/${e}s`,"POST",s,n).catch(t=>h(t,e,r,i))},t.uploadAssets=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var o=new FormData,s=!1;for(let n of Array.from(t.files))f(e,{file:n})?o.append("files",n):s=!0;if(s)return m(r,u.UPLOAD_INVALID_FILE);return o.append("source",t.source),o.append("user_id",app.state.get(["user","id"])),o.append("network_id",app.state.get(["community","network","id"])),o.append("community_id",app.state.get(["community","id"])),a(`/api/assets/${e}s/batch`,"POST",o,n).catch(t=>h(t,e,r))},t.validateImageUrl=function(e){return e.match(p.image.urlPattern)};var{pick:r,forOwn:o}=n("LvDl"),s=n("kabW"),i=n("kh36"),a=n("82ys"),c=n("JOwg"),u=n("6fkZ"),l=n("lvH+"),d=n("J28P");t.IMAGE_ALT_TEXT_LIMIT=500;const p={image:{urlPattern:/\.(jpe?g|gif|png)(\?.+)?$/i,mimeTypes:["image/jpeg","image/pjpeg","image/gif","image/png","image/x-png"]},file:{urlPattern:/\.(pdf|docx|mp3?)(\?.+)?$/i,mimeTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","audio/mpeg","audio/mp3"]}};function f(e,t){var n=p[e];return n&&(t.file&&(n.mimeTypes.includes(t.file.type)||t.file.name.match(n.urlPattern))||t.remote_file_url&&t.remote_file_url.match(n.urlPattern))}function m(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e&&(t?l.showMessage({type:"cautionary",message:t}):l.showError()),Promise.reject(new Error(t||u.UNEXPECTED))}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(403===e.response.status&&app.state.get(["entitlements"]).includes("use_network_asset_search"))return m(n,u.NETWORK_ASSETS_ACCESS_DENIED);if(413===e.response.status){let e=u.FILE_TOO_LARGE;return r?e=u.GIF_TOO_LARGE.replace("{size}",12).replace("{platforms}","all platforms"):"image"===t&&(e=u.IMAGE_TOO_LARGE),m(n,e)}return m(n)}},"6fkZ":function(e,t,n){"use strict";t.ALT_TEXT_OVER_LIMIT="Alt text is currently limited to {alt_text_limit} characters. Please try again.",t.APPLE_NEWS_MEMBERS_ONLY_WARNING="This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.",t.COMMUNITY_CHANGED="This {docLabel} has been moved!",t.CSV_TOO_LARGE="This CSV is too large. Please upload a file under 1 MB.",t.DATA_LINKS_ERROR="Suggestions timed out. Try again or add links manually.",t.DRAFT_HERMANO_RECORD="This {record} is a draft; it will be published automatically when this {docLabel} is published.",t.EMBARGOED="This story is embargoed.",t.HIDDEN="This story is hidden.",t.FEEDBACK_SENT="Message sent!",t.FILE_TOO_LARGE="Files must be under 100 MB.",t.GETTY_API_DOWN="Getty image search is unavailable. Please try again later.",t.GIF_IN_IMAGE_CARD="GIFs cannot be published with {type} cards. Choose another?",t.GIF_TOO_LARGE="This GIF is over {size} MB and will block this story from publishing to {platforms}.",t.IMAGE_IN_GALLERY="This image is already included in the gallery. Choose another?",t.IMAGE_TOO_LARGE="Images must be under 10,000 x 10,000 pixels.",t.INVALID_LINK_MESSAGE="Please enter a valid URL.",t.INVALID_SPREADSHEET_URL="Please add a valid public Google Sheet URL and try again.",t.INVALID_STREAM_MEMBERSHIP="This type of story cannot be added.",t.MERLIN_API_DOWN="Merlin image search is unavailable. Please try again later.",t.MISSING_LEGACY_ENTRY='Editing is disabled because a more recent version of this story may exist. &nbsp;<a href="https://www.chorus.help/hc/en-us/requests/new">Contact us for help.</a>',t.NETWORK_ASSETS_ACCESS_DENIED="You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.",t.NEW_USER_MESSAGE='Welcome to Chorus! &nbsp;<a href="{url}">Check out our getting started guide.</a>',t.OEMBED_GENERIC_ERROR="Something went wrong. Make sure this embed is shareable and try again.",t.OEMBED_INSECURE_ERROR="This embed URL is insecure. Only HTTPS embeds are supported.",t.OEMBED_SUPPORT_ERROR="Embeds from this source are not supported at this time.",t.OEMBED_PDF_SUPPORT_ERROR="PDFs must be under 10 MB.",t.OEMBED_YOUTUBE_SUPPORT_ERROR="Embeds are disabled for this video by the YouTube account owner.",t.PLAGSCAN_ERROR="An error occurred. Please try scanning the story again.",t.PLAGSCAN_LOW_WORD_COUNT="You can scan this story once it's over 50 words.",t.PLAGSCAN_OUT_OF_DATE="The latest version of this story has not been scanned.",t.PLAGSCAN_RETRIEVED="A report has been generated for this story.",t.PLAGSCAN_SUBMITTED="A report is being generated.",t.PLAGSCAN_UNSCANNED="Submit the story for approval to generate a report.",t.PUBLISH_PACKAGE_ACTIVE_MESSAGE="Your stories are being {action}...",t.PUBLISH_PACKAGE_WARNING_MESSAGE="{gerund} this landing page will {verb} all drafts in this package.",t.PYM_EMBED_GENERIC_ERROR="Something went wrong. Make sure this Pym.js embed is shareable and try again.",t.PYM_EMBED_INSECURE_ERROR="This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.",t.PYM_EMBED_SUPPORT_ERROR="Pym.js embeds from this source are not supported at this time.",t.REALTIME_ERROR="Autosave failed. Please reload your browser.",t.RECONNECT_ERROR="Something went wrong reconnecting. Please reload your browser.",t.RECONNECTING="Reconnecting...",t.RELOAD_REQUIRED="Please reload to get the latest updates.",t.RELOAD_STALE_TAB="You've been away for a while, please reload.",t.REQUIRED_FIELD="This field is required.",t.RESCUE_SAVED_REASSURE='Your work has been saved in &nbsp;<a href="{url}">this version.</a>',t.SEND_TO_PRINT_SUCCESS="Sent to print!",t.SHEET_PERMISSIONS="Please make the Google Sheet public to continue.",t.STRUCTURED_TAGS_ERROR="Suggestions timed out. Try again or add tags manually.",t.TOO_MANY_EDITORS="More than 10 editors at a time is not recommended.",t.UNEXPECTED="An error occurred. Try again or reload your browser.",t.UNSAVED_WARNING="Your changes are still being saved; leaving now could cause data loss!",t.UNSUPPORTED_ASSET_TYPE='This format is not supported. <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">Learn more about supported file formats.</a>',t.UPLOAD_INVALID_FILE='At least one of the uploaded files is not supported. Please review supported <a href="https://www.chorus.help/hc/en-us/articles/360010240753">image</a> and <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">file</a> formats and try again.',t.UPLOAD_TOO_MANY_FILES="One file at a time, please."},7:function(e,t){},"7LEj":function(e,t,n){"use strict";var r=n("afKu").bind(null,"sha1"),o=n("JpzS").bind(null,r,64);e.exports=function(e,t){var n=function(e,t){var n=[];t.meta&&n.push("meta");if(t.trim){var r=["trim"];!0!==t.trim&&r.push(t.trim),n.push(r.join(":"))}if(t.crop=t.crop||function(e){var t=e.width,n=e.height,r=e.original_width,o=e.original_height,s=e.center;if(!r||!o||!s||!t&&!n)return;if(!Array.isArray(s)||2!==s.length)throw new Error("center must be an array of x,y");t=Math.abs(t||r),n=Math.abs(n||o);var i=s[0],a=s[1],c=t/n,u=r/o;if(c>u){var l=Math.round(r/c),d=Math.round(a-.5*l),p=Math.round(a+.5*l);return d<0?(d=0,p=l):p>o&&(d=o-l,p=o),[0,d,r,p]}if(c<u){var f=Math.round(o*c),m=Math.round(i-.5*f),h=Math.round(i+.5*f);return m<0?(m=0,h=f):h>r&&(m=r-f,h=r),[m,0,h,o]}}(t),t.crop){var o=t.crop[0],s=t.crop[1],i=t.crop[2],a=t.crop[3];(o>0||s>0||a>0||i>0)&&n.push(o+"x"+s+":"+i+"x"+a)}for(let e of["fit_in","adaptive_fit_in","full_fit_in","adaptive_full_fit_in"])t[e]&&n.push(e.toString().replace(/_/g,"-"));if((t.fit_in||t.full_fit_in)&&!t.width&&!t.height)throw new Error("When using fit_in or full_fit_in, you must specify width and/or height");var c=function(e){var t=e.width,n=e.height;t&&e.flip&&(t*=-1);n&&e.flop&&(n*=-1);(t||n)&&(t||(t=0),n||(n=0));var r=null!=t,o=null!=n;!e.flip||r||o||(t="-0",o||e.flop||(n="0"));!e.flop||r||o||(n="-0",r||e.flip||(t="0"));if(t||n)return t+"x"+n}(t);c&&n.push(c);t.halign&&"center"!==t.halign&&n.push(t.halign);t.valign&&"middle"!==t.valign&&n.push(t.valign);t.smart&&n.push("smart");t.filters&&t.filters.length&&n.push("filters:"+t.filters.join(":"));return n.push(e.replace(/https?:\/\//,"")),n.join("/")}(e,t),r=o(t.config.key).update(n).digest("base64").replace(/\+/g,"-").replace(/\//g,"_");return t.config.host+"/"+r+"/"+n}},"7a9H":function(e,t,n){"use strict";var{uniq:r}=n("LvDl");e.exports=function(e){const t=[],n=e.draft.body;if(n)for(let e of n.ops)"object"==typeof e.insert&&"doc"in e.insert&&t.push(e.insert.doc.id);const o=e.draft.main_gallery;return o&&t.push(o.id),r(t)}},8:function(e,t){},"82ys":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,s){return new Promise((i,a)=>{var c=new XMLHttpRequest,u={"X-Requested-With":"XMLHttpRequest",Accept:"application/json"},l=e=>{var t=new Error(e);return o.showError(),a(t)};c.onerror=()=>l("An network error occurred."),c.ontimeout=()=>l("The XMLHttpRequest timed out."),c.onload=()=>{if(c.status<200||c.status>=300){var e=new r("Response status not within range: "+c.status,c);return a(e)}return i(JSON.parse(c.response))},s&&c.upload.addEventListener("progress",e=>{s({loaded:e.loaded,total:e.total})}),c.open(t,e,!0),c.withCredentials=!0;for(let e of Object.keys(u))c.setRequestHeader(e,u[e]);c.send(n)})};var r=n("Xbgq"),o=n("lvH+");e.exports=t.default},9:function(e,t){},"AUH+":function(e,t,n){"use strict";e.exports=function(e){return e.draft.hasOwnProperty("package_toc")}},AUQt:function(e,t,n){"use strict";e.exports=function(e,t){let{latest:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{latest:!0};e=(e||[]).slice(),n&&e.reverse();const r=e.find(e=>t.indexOf(e.event_type)>-1);if(r)return"backdated"===r.event_type?r.backdated_date:r.date}},BRal:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"pre",f:["\n  ",{t:7,p:[2,3,8],e:"code",f:[{t:2,r:"html.value",p:[2,9,14]}]},"\n"]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},BUA9:function(e,t,n){"use strict";e.exports=n("m/vA")("toh_project_details")},CUho:function(e,t,n){"use strict";var r=n("tNa1").Delta;e.exports=function(e,t){var n=0;for(var o of e.ops){if(t(o))return n;n+=new r([o]).length()}return-1}},CqzZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e&&e.message&&setTimeout(()=>r.showMessage(e),1e3);app.socket.on("flash-message",e=>{r.showMessage(e),e.forceRefresh&&app.emit("sockets.disconnect","force-refresh")})};var r=n("lvH+");e.exports=t.default},Dh7P:function(e,t,n){"use strict";e.exports=function(e){return"unison_stream"===e.draft.entry_layout}},EfGf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecord=function(e,t){var n=t.match(/[^/]+$/)[0];return r(`${i(e)}/search.json?record_id=${n}`,{opts:{cache:!0}}).then(e=>e.data[0])},t.hermanoIdForMapPoint=function(e){var t=app.state.get(["community","network","slug"]),n="curbed"===t?"building":"venue";return e.network=t,r(i(n)+"/create_or_update",{method:"POST",opts:{handleError:!1},body:e}).then(e=>s(e.data.display_type.toLowerCase())+e.data.id)},t.imageForRecord=function(e){return o(e,["image","url"])||o(e,["default_release","cover_art","large_url"])||o(e,["image_urls",0])||null},t.searchHermano=function(e,t){var n=s(e);return r(i(e)+"/search.json",{opts:{cache:!0},query:{keywords:t}}).then(e=>e.data.map(e=>Object.assign({},e,{hermano_id:`${n}${e.id}`})))};var r=n("kh36"),{get:o}=n("LvDl");function s(e){return"product"===e?"Verge::Product/":"game"===e?"Polygon::Game/":"venue"===e?"Geo::Venue/":"building"===e?"Geo::Building/":void 0}function i(e){return"product"===e?"/api/hermano/verge/products":"game"===e?"/api/hermano/polygon/games":"venue"===e?"/api/hermano/geo/venues":"building"===e?"/api/hermano/geo/buildings":void 0}},FKmm:function(e,t,n){"use strict";e.exports={tag:"SMALL"}},FLer:function(e,t,n){"use strict";e.exports=function(e){return e.hasOwnProperty("package_uuid")}},FMQD:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,o=n("0316"),s=n("6fkZ"),i=n("oRyF"),a=n("K5N4").toInlineHtml,c=n("WZPN"),u=n("mlrC"),l=n("v2gr");r.exports={data:{hideWarning:!1,isCollapsed:!1,objectType:"",objectData:{},largeGIFWarning:""},computed:{titleName:function(){var e=this.get("objectType");switch(e){case"actionbox":return"Action box";case"aside":return"Sidebar";case"html":return"HTML block";case"imageslider":return"Image slider";case"oembed":return"Embed";case"pullquote":return"Pull quote";case"ratingcard":return"Rating card";case"readmore":return"Related";case"toh_project_details":return"Project details";case"toh_tools":return"Tools and materials";case"pym":return"Pym.js embed";case"productcard":return"Product card";default:return i(e)}},warning:function(){var e=this.get("objectType");return"html"===e?s.HAS_HTML_WARNING_OBJECT:"oembed"===e?o.getMessage({oembed:this.get("objectData")}):"poll"===e?o.getMessage({doc:{type:"poll",id:this.get("objectData.id")}}):null},caption:function(){var e=this.get("objectType");return"image"===e?this.getImageCaption():"table"===e?this.getTableCaption():"video"===e?this.getVideoCaption():"gallery"===e?this.getGalleryTitle():null},metadata:function(){var e=this.get("objectType");return"gallery"===e?this.getGalleryMetadata():"table"===e?this.getTableMetadata():null}},oninit:function(){"image"===this.get("objectType")&&l(this.get("objectData"))&&this.getGIFWarning()},getGalleryMetadata:function(){var e=this.get("objectData.head.contents.images");return`${e.length} ${1===e.length?"image":"images"}`},getImageCaption:function(){var e=this.get("objectData"),t="";return e.caption&&(t+=e.caption),e.credit&&!e.hide_credit&&(e.caption&&(t+=" | "),t+=e.credit),t},getTableCaption:function(){var e=this.get("objectData.head.contents"),t="";return c(e.caption)||(t+=a(e.caption)),c(e.credit)||(c(e.caption)||(t+=" | "),t+=a(e.credit)),t},getTableMetadata:function(){var e=this.get("objectData.head.contents.rows");return e.length>5?`5 of ${e.length} rows`:null},getVideoCaption:function(){return this.get("objectData.caption")},getGalleryTitle:function(){return this.get("objectData.title")},getGIFWarning:function(){var e=this.get("objectData");u.getImage(e.id).then(e=>{var t;u.validatePartnerPlatformsImageSize(e.size,20)?u.validatePartnerPlatformsImageSize(e.size,12)||(t=s.GIF_TOO_LARGE.replace("{size}",12).replace("{platforms}","Google AMP")):t=s.GIF_TOO_LARGE.replace("{size}",20).replace("{platforms}","Google AMP and Apple News"),this.set("largeGIFWarning",t)})}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"info-bar"},f:[{t:4,n:50,x:{r:["isCollapsed"],s:"!_0"},f:[{t:4,n:50,x:{r:["warning","largeGIFWarning","hideWarning"],s:"(_0||_1)&&!_2"},f:[{t:7,p:[4,7,109],e:"div",a:{class:"info-bar__warn"},f:[{t:2,x:{r:["warning","largeGIFWarning"],s:"_0||_1"},p:[4,35,137]}]}],p:[3,5,50]}," ",{t:4,n:50,r:"caption",f:[{t:7,p:[7,7,212],e:"div",a:{class:"info-bar__caption"},f:[{t:3,r:"caption",p:[7,38,243]}]}],p:[6,5,190]}],p:[2,3,25]}," ",{t:7,p:[11,3,288],e:"div",a:{class:"info-bar__title"},f:[{t:7,p:[12,5,322],e:"div",a:{class:"info-bar__type"},f:[{t:2,r:"titleName",p:[13,7,357]}," ",{t:4,n:50,x:{r:["objectType","objectData.mask_text"],s:'(_0==="image"||_0==="video")&&_1'},f:[{t:7,p:[15,9,468],e:"res-badge",a:{size:"smallest",design:"apple"},f:["Sensitive"]}],p:[14,7,377]}]}," ",{t:4,n:50,r:"isCollapsed",f:[{t:7,p:[19,7,587],e:"svg",a:{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},f:[{t:7,p:[20,9,740],e:"title",f:["Expand object"]}," ",{t:7,p:[21,9,777],e:"defs"}," ",{t:7,p:[22,9,799],e:"g",a:{id:"down",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},f:[{t:7,p:[23,13,935],e:"g",a:{id:"Page-1",transform:"translate(6.000000, 8.000000)",stroke:"#000000"},f:[{t:7,p:[24,17,1026],e:"polyline",a:{id:"Stroke-1",points:"6 0 3 3 0 0"}}]}]}]}],p:[18,5,561]}," ",{t:4,n:50,x:{r:["isCollapsed","metadata"],s:"!_0&&_1"},f:[{t:7,p:[30,7,1181],e:"div",a:{class:"info-bar__metadata"},f:[{t:2,r:"metadata",p:[30,39,1213]}]}],p:[29,5,1142]}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},Fw7v:function(e,t,n){"use strict";var r=n("rE/H"),o=n("gjeX");e.exports=function(e){return o(r(e))}},"G+OF":function(e,t,n){"use strict";var r=n("LYbu");t.playgif=function(e){return r([e]),{teardown:function(){}}}},GJsQ:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"readmore-inner"},f:[{t:4,r:"readmore",f:[{t:7,p:[3,5,49],e:"div",a:{class:"readmore-item"},f:[{t:7,p:[4,7,83],e:"div",a:{class:"readmore-title"},f:[{t:3,r:"./title",p:[4,35,111]}]}]}],p:[2,3,31]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},H0mI:function(e,t,n){"use strict";var r=n("3XHv").type;r.registerSubtype(n("tNa1").type),e.exports=r},HdNO:function(e,t,n){"use strict";e.exports={type:"line",splitAffinity:"left",add:function(e,t){return e.setAttribute("data-leadgraf",t.toString()),e},remove:function(e){return e.removeAttribute("data-leadgraf"),e},value:function(e){return"true"===e.dataset.leadgraf},match:function(e){return"P"===e.tagName&&e.hasAttribute("data-leadgraf")}}},HpKO:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",parentTag:"UL",tag:"LI"},{exclusive:!0,inherit:!0})},"I/Dn":function(e,t,n){"use strict";e.exports=n("m/vA")("toh_tools")},J28P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.editFile=function(e,t){i.pushModal({editObject:{type:"file",data:e,target:t}})},t.insertFile=function(e,t){let{docId:n}=e;a.insertAtCaret(n,c(n,t))},t.insertFileAtMouseEvent=function(e,t,n){a.insertAtMouseEvent(e,t,c(e,n))},t.saveFile=function(e){return s.saveAsset("file",e)},t.selectFile=function(e){i.pushModal({selectAsset:{type:"file",target:e}})},t.setParams=function(e){e.title=o(e,["file","name"])||(t=e.remote_file_url,n=t.match(/.*\/(.*?)$/),n?n[1]:"Untitled");var t,n};var{Delta:r}=n("tNa1"),{get:o}=n("LvDl"),s=n("6bnl"),i=n("tz4B"),a=n("e5Yr");function c(e,t){var n=t.title||"Untitled";return(new r).insert(n,{link:t.url})}},JOwg:function(e,t,n){"use strict";e.exports=function(e){var{total:t,perPage:n}=e;return e.totalPages=0===t?1:Math.ceil(t/n),e}},JQTl:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.pubHistoryUpdate=w,t.publishOrSchedule=v,t.scheduleDoc=_,t.sendToPrint=async function(e,t){app.state.set(["requestInProgress"],!0);try{await i(`/api/content/docs/${e.id}/dti_publish`,{method:"POST",body:{deskName:t}}),c.showMessage({type:"positive",message:g})}catch(e){c.showError()}finally{app.state.set(["requestInProgress"],!1)}},t.unschedule=function(e,t){return v(e,{publishScheduledFor:null},t)};const i=n("kh36"),a=n("SiKE"),c=n("lvH+"),u=n("K5N4").toPlaintext,l=n("f0Wu"),d=n("V8PI"),p=n("AUH+"),f=n("1wDL"),m=n("mMcG"),h=n("AUQt"),{SEND_TO_PRINT_SUCCESS:g}=n("6fkZ"),y=n("q1SX");async function v(e,t,n){app.state.set(["requestInProgress"],!0);const r=e.head.contents;let o=1,s=0;if(p(r)){const e=r.draft.package_toc,i=f(e);o+=i.length,n({loaded:s,total:o});try{await Promise.all(i.reduce((e,r)=>{const i=app.state.get(["packageDocs",r.uuid]);return d(i.status)||e.push(b(i,t)),s+=1,n({loaded:s,total:o}),e},[]))}catch(e){y.reportError(e)}}await b(e,t),n&&n({loaded:o,total:o}),app.state.set(["requestInProgress"],!1)}async function b(e,t){"publishScheduledFor"in t?await _(e,t.publishScheduledFor):await async function(e,t){try{await i(`/api/content/docs/${e.id}/publish`,{method:"POST",body:t})}catch(t){p(e.head.contents)&&y.reportError(t,!1),c.showError(),app.state.set(["requestInProgress"],!1)}}(e,t),null!==t.publishScheduledFor&&function(e,t,n){if(window.ga){const e=t.head.contents.draft,r=t.head.contents.publish_history,o=h(r,["published","published_via_schedule","backdated"],{latest:!1}),s=h(r,["published","published_via_schedule","backdated"]),i=o&&o!==s,a=e=>e?l(e).format("YYYY-MM-DD HH:mm"):"";window.ga("send",{hitType:"event",eventCategory:"publish",eventAction:"publish:entry",dimension1:t.entry_id,dimension4:e.contributors[0].chorus_id,dimension5:a(n.publishScheduledFor||o),dimension8:a(n.publishScheduledFor||s),dimension10:e.site_groups.map(e=>e.name).join(":"),dimension11:app.state.get("community","slug"),dimension12:app.state.get(["community","network","slug"]),dimension26:new Date(n.publishScheduledFor||s).getHours(),dimension35:app.state.get("user","fullOrUserName"),dimension36:u(e.hed),dimension37:u(e.internal_title),dimension38:u(e.seo_title),dimension39:u(e.social_title),dimension40:i?"Yes":"No",dimension53:m(e.body)})}}(t.publishScheduledFor,e,t)}async function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.head.contents.publish_history;let s,i;s=t?"SCHEDULED":h(r,["approved"])?"APPROVED":h(r,["submitted"])?"SUBMITTED":"DRAFT",i=t?t&&e.head.contents.publish_scheduled_for?"rescheduled":"scheduled":"schedule_canceled",await a.updateDoc(e.id,{status:s,delta:[{p:["publish_scheduled_for"],oi:t,od:e.head.contents.publish_scheduled_for},...w(e,i,o({publishScheduledFor:t},n))]})}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={date:(new Date).toISOString(),user_id:n.userId||app.state.get(["user","id"]),event_type:t};"community_changed"===t?(r.origin_community_id=app.state.get(["community","id"]),r.destination_community_id=n.communityId):"scheduled"!==t&&"rescheduled"!==t||(r.scheduled_date=n.publishScheduledFor);const o=e.head.contents.publish_history.length;return[{p:["publish_history",o],li:r}]}},JUFS:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema#","id":"https://usechorus.com/schema/rich-text.json","document":{"type":"object","properties":{"ops":{"type":"array","minItems":1,"items":{"$ref":"#/op/insert"}}},"required":["ops"],"default":{"ops":[{"insert":"\\n"}]},"additionalProperties":false},"delta":{"type":"object","properties":{"ops":{"type":"array","items":{"oneOf":[{"$ref":"#/op/insert"},{"$ref":"#/op/retain"},{"$ref":"#/op/delete"}]}}},"required":["ops"],"default":{"ops":[{"insert":"\\n"}]},"additionalProperties":false},"op":{"insert":{"type":"object","properties":{"insert":{"oneOf":[{"type":"string","minLength":1},{"type":"integer","enum":[1]},{"$ref":"#/object"}]},"attributes":{"$ref":"#/attributes"}},"required":["insert"],"additionalProperties":false},"retain":{"type":"object","properties":{"retain":{"type":"integer"},"attributes":{"type":"object","minProperties":1}},"required":["retain"],"additionalProperties":false},"delete":{"type":"object","properties":{"delete":{"type":"integer","minimum":1}},"required":["delete"],"additionalProperties":false}},"attributes":{"type":"object","properties":{"actionbox":{"$ref":"#/object/properties/actionbox","context":"object"},"ad_placement":{"type":"string","context":"any-line"},"author":{"type":"string","context":"any"},"autolink":{"type":"object","context":"text","properties":{"id":{"type":"string"},"href":{"type":"string"},"disabled":{"type":"boolean"}},"required":["id","href","disabled"],"additionalProperties":false},"blockquote":{"type":"boolean","const":true,"context":"text-line"},"bold":{"type":"boolean","const":true,"context":"text"},"br":{"type":"boolean","const":true,"context":"text-line"},"bullet":{"type":"boolean","const":true,"context":"text-line"},"doc":{"$ref":"#/object/properties/doc","context":"object"},"dropcap":{"type":"boolean","const":true,"context":"text-line"},"endmark":{"type":"boolean","const":true,"context":"text-line"},"fifthheader":{"type":"boolean","const":true,"context":"text-line"},"firstheader":{"type":"boolean","const":true,"context":"text-line"},"fourthheader":{"type":"boolean","const":true,"context":"text-line"},"grouping":{"type":"string","context":"object-line","pattern":"^(2-up|3-up-top|3-up-bottom|4-up)$"},"hr":{"$ref":"#/object/properties/hr","context":"object"},"html":{"$ref":"#/object/properties/html","context":"object"},"id":{"type":"string","context":"any-line"},"image":{"$ref":"#/object/properties/image","context":"object"},"italic":{"type":"boolean","const":true,"context":"text"},"leadgraf":{"type":"boolean","const":true,"context":"text-line"},"link":{"type":"string","context":"text"},"list":{"type":"boolean","const":true,"context":"text-line"},"mark":{"type":"boolean","const":true,"context":"text"},"newsletter":{"$ref":"#/object/properties/newsletter","context":"object"},"oembed":{"$ref":"#/object/properties/oembed","context":"object"},"position":{"type":"string","context":"object-line","pattern":"^(default|float-left|float-right|hang-left|hang-right|full-bleed|wide-block)$"},"pullquote":{"$ref":"#/object/properties/pullquote","context":"object"},"ratingcard":{"$ref":"#/object/properties/ratingcard","context":"object"},"readmore":{"$ref":"#/object/properties/readmore","context":"object"},"secondheader":{"type":"boolean","const":true,"context":"text-line"},"small":{"type":"boolean","const":true,"context":"text"},"strike":{"type":"boolean","const":true,"context":"text"},"subscript":{"type":"boolean","const":true,"context":"text"},"superscript":{"type":"boolean","const":true,"context":"text"},"thirdheader":{"type":"boolean","const":true,"context":"text-line"},"video":{"$ref":"#/object/properties/video","context":"object"},"credits":{"$ref":"#/object/properties/credits","context":"object"},"toh_project_details":{"$ref":"#/object/properties/toh_project_details","context":"object"},"toh_tools":{"$ref":"#/object/properties/toh_tools","context":"object"},"pym":{"$ref":"#/object/properties/pym","context":"object"}},"minProperties":1,"additionalProperties":false},"object":{"type":"object","properties":{"actionbox":{"type":"object","context":"object","properties":{"title":{"type":"string","format":"html"},"description":{"type":"string","format":"html"},"label":{"type":"string","format":"html"},"url":{"type":"string"}},"required":["label","url"],"additionalProperties":false},"doc":{"$ref":"definitions.json#/doc","context":"object"},"html":{"type":"object","context":"object","properties":{"value":{"type":"string","format":"html"},"reason":{"type":"string"}},"required":["value"],"additionalProperties":false},"hr":{"type":"boolean","context":"object","enum":[true]},"image":{"$ref":"definitions.json#/image","context":"object"},"newsletter":{"type":"object","context":"object","properties":{"name":{"type":"string"},"slug":{"type":"string"}},"required":["name","slug"],"additionalProperties":false},"oembed":{"$ref":"definitions.json#/oembed","context":"object"},"pullquote":{"type":"object","context":"object","properties":{"value":{"type":"string","format":"html"}},"required":["value"],"additionalProperties":false},"readmore":{"type":"array","context":"object","items":{"type":"object","properties":{"url":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"image":{"type":"string"}}}},"ratingcard":{"type":"object","context":"object","properties":{"rating":{"type":"number"},"title":{"type":"string"}},"required":["rating"],"additionalProperties":false},"video":{"$ref":"definitions.json#/video","context":"object"},"credits":{"$ref":"definitions.json#/credits","context":"object"},"toh_project_details":{"type":"object","context":"object","properties":{"skill":{"type":"integer"},"skill_description":{"type":"string"},"estimated_cost":{"type":"string"},"estimated_time":{"type":"string"}},"additionalProperties":false},"toh_tools":{"type":"array","context":"object","items":{"type":"object","properties":{"url":{"type":"string"},"caption":{"type":"string"},"image":{"$ref":"definitions.json#/image"}},"required":["caption","image"]}},"pym":{"type":"object","context":"object","properties":{"url":{"type":"string"}},"required":["url"],"additionalProperties":false}},"minProperties":1,"maxProperties":1,"additionalProperties":false}}')},Jawb:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,o=n("Tc/J");r.exports={data:{doc:null},computed:{imageLeft:function(){return o(this.get("doc.head.contents.image_left.src"),{fit_in:!0,width:800,height:500})},imageRight:function(){return o(this.get("doc.head.contents.image_right.src"),{fit_in:!0,width:800,height:500})}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"imageslider-container"},f:[{t:7,p:[2,3,38],e:"div",a:{class:"imageslider-inner"},f:[{t:7,p:[3,5,74],e:"div",a:{class:"imageslider__image imageslider__image--left"},f:[{t:4,n:50,r:"doc.head.contents.image_left",f:[{t:7,p:[5,9,183],e:"img",a:{src:[{t:2,r:"imageLeft",p:[5,19,193]}]}}],p:[4,7,138]}]}," ",{t:7,p:[8,5,240],e:"div",a:{class:"imageslider__image imageslider__image--right"},f:[{t:4,n:50,r:"doc.head.contents.image_right",f:[{t:7,p:[10,9,351],e:"img",a:{src:[{t:2,r:"imageRight",p:[10,19,361]}]}}],p:[9,7,305]}]}," ",{t:7,p:[13,5,409],e:"div",a:{class:"imageslider__handle"}}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},Jwuz:function(e,t,n){"use strict";e.exports=function(){window.Promise=window.Promise||n("FR06").Promise,n("LpSC"),n("n6Wm")}},"K+3G":function(e,t,n){"use strict";function r(e){Error.call(this);var t="GraphQL errors returned. "+e.length+" errors occurred";"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=new Error(t).stack,this.message=t,this.data=e,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var o=r;t.default=o,e.exports=t.default},KJnR:function(e,t,n){"use strict";e.exports={type:"line",attribute:"data-grouping"}},Kgvr:function(e,t,n){"use strict";e.exports=n("m/vA")("pym")},LYbu:function(e,t,n){"use strict";e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=Object.assign({on:"mouseenter",off:"mouseleave",autoResize:!0,overlay:!1,circleBackgroundColor:"#33C7E0",circleTextColor:"#fff",gifText:"GIF",removeAnchor:!0},t),r=function(e,t,r){t=Math.floor(t),r=Math.floor(r);e.fillStyle=n.circleBackgroundColor,e.beginPath(),e.arc(t,r,35,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle=n.circleTextColor,e.font="sans-serif",e.textAlign="center",e.textBaseline="middle",e.fillText(n.gifText,t,r)};for(let t of e){if("IMG"!==t.tagName||!/\.gif$/i.test(t.src))return!0;var o=document.createElement("canvas"),s=o.getContext("2d"),i=new Image,a=function(e,t){var n=t.src;t.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t.style.width=e.width,t.style.height=e.height,setTimeout((function(){t.src=n}),0),e.parentNode.replaceChild(t,e)},c=function(e,t){t.parentNode.replaceChild(e,t)};i.onload=function(){var e=t.offsetWidth,u=t.offsetHeight;o.width=e,o.height=u,s.drawImage(i,0,0,e,u);var l=getComputedStyle(t);if(!0===n.autoResize){o.setAttribute("data-src",t.src),o.setAttribute("class","gif");var d=document.createElement("span");d.classList.add("p-playgif"),d.style.float=l.float,d.style.margin=l.margin,d.style.padding=l.padding,d.style.width=l.width,d.style.height=l.height,d.style.position="relative",d.style.display="block",o.style.position="absolute",o.style.top="0",o.style.left="0",d.appendChild(o),o=d}else o.style.float=l.float,o.style.margin=l.margin,o.style.padding=l.padding,o.style.display=l.display;t.parentNode.replaceChild(o,t);var p=o.parentNode,f=getComputedStyle(p);"p"===p.tagName||"none"===f.maxWidth&&"none"===f.maxHeight||(e=p.offsetWidth,u=p.offsetHeight),n.removeAnchor&&"A"===p.tagName&&/\.gif$/i.test(p.href)&&p.parentNode.replaceChild(o,p),e>150&&u>150&&n.overlay&&r(s,e/2,u/2),o.addEventListener(n.on,(function(){a(o,t)})),t.addEventListener(n.off,(function(){c(o,t)}))},i.src=t.src}}},LgHX:function(e,t,n){"use strict";(function(e){var t,r=(t=n("hiad"))&&t.__esModule?t:{default:t};var o=n("FR06"),s=e;s.exports={data:{doc:null},computed:{title:function(){return(0,r.default)(this.get("doc.head.contents.title"))},options:function(){return this.get("doc.head.contents.options").map(e=>(0,r.default)(e.value))}}},s.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"poll-inner"},f:[{t:7,p:[2,3,27],e:"h2",f:[{t:3,r:"title",p:[2,7,31]}]}," ",{t:7,p:[3,3,50],e:"div",a:{class:"poll-options"},f:[{t:4,r:"options",f:[{t:7,p:[5,7,100],e:"label",f:[{t:7,p:[6,9,116],e:"input",a:{type:"radio"}}," ",{t:7,p:[7,9,145],e:"b"}," ",{t:3,r:".",p:[8,9,161]}]}],p:[4,5,81]}]}]}]},e.exports=o.extend(s.exports)}).call(this,n("YuTi")(e))},Lly2:function(e,t,n){"use strict";e.exports=function(e){return e.draft.hasOwnProperty("redirect_url")}},LrtX:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports={data:{newsletter:null},computed:{name:function(){return this.get("newsletter.name").replace(/'/g,"")}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"span",f:["Subscribe to ",{t:7,p:[1,20,19],e:"em",f:[{t:2,r:"name",p:[1,24,23]}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},Lzo0:function(e,t,n){"use strict";var r,o,s,i;"undefined"!=typeof window&&window,i=function(e){var t=function(e){return function(t,n){var r;return t.addEventListener("keydown",r=function(r){(r.which||r.keyCode)===e&&(r.preventDefault(),n({node:t,original:r}))},!1),{teardown:function(){t.removeEventListener("keydown",r,!1)}}}},n=t;(n=e.events).enter=t(13),n.tab=t(9),n.escape=t(27),n.space=t(32),n.leftarrow=t(37),n.rightarrow=t(39),n.downarrow=t(40),n.uparrow=t(38)},e.exports?i(n("FR06")):(o=[n("FR06")],void 0===(s="function"==typeof(r=i)?r.apply(t,o):r)||(e.exports=s))},MN9u:function(e,t,n){"use strict";t.story="story",t.gallery="gallery",t.aside="sidebar",t.table="table",t.poll="poll",t.scorecard="scorecard",t.imageslider="image slider",t.productcard="product card"},Mbhk:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"ol",a:{class:"toh-tools-inner"},f:[{t:4,r:"toh_tools",f:[{t:7,p:[3,5,50],e:"li",a:{class:"toh-tools-inner__tool"},f:[{t:7,p:[4,7,91],e:"div",a:{class:"toh-tools-inner__image-container"},f:[{t:7,p:[5,9,146],e:"div",a:{class:"toh-tools-inner__image-wrapper"},f:[{t:7,p:[6,13,203],e:"img",a:{src:[{t:2,r:"./image.src",p:[6,23,213]}]}}]}]}," ",{t:7,p:[9,7,270],e:"div",a:{class:"toh-tools-inner__caption"},f:[{t:2,r:"./caption",p:[9,45,308]}]}]}],p:[2,3,31]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},OUIM:function(e,t,n){"use strict";e.exports=n("m/vA")("ratingcard")},PhNL:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",tag:"H2"},{exclusive:!0})},QPIe:function(e,t,n){"use strict";e.exports={type:"line",splitAffinity:"right",add:function(e,t){return e.setAttribute("data-endmark",t.toString()),e},remove:function(e){return e.removeAttribute("data-endmark"),e},value:function(e){return"true"===e.dataset.endmark},match:function(e){return"P"===e.tagName&&e.hasAttribute("data-endmark")}}},QWOE:function(e,t,n){"use strict";e.exports={type:"line",reverseMerge:!0,add:function(e){return e.classList.add("soft-break"),e},remove:function(e){return e.classList.remove("soft-break"),e},value:function(e){return e.classList.contains("soft-break")},match:function(e){return e.classList.contains("soft-break")}}},QcUh:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,{debounce:o}=n("LvDl"),s=n("LYbu"),i=n("Tc/J");r.exports={data:{doc:null},computed:{thumbnailUrl:function(){var e=this.get("doc.head.contents.images");if(e.length>0)return i(e[0].src,{fit_in:!0,width:800,height:500})}},onrender:function(){this.observe("isCollapsed",o(e=>{if(!e){var t=this.find("img");t&&s([t])}}))}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"gallery-inner"},f:[{t:4,n:50,r:"thumbnailUrl",f:[{t:7,p:[3,5,55],e:"img",a:{src:[{t:2,r:"thumbnailUrl",p:[3,15,65]}]}}],p:[2,3,30]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},Qw7n:function(e,t,n){"use strict";const{get:r}=n("LvDl");function o(e,t,n){return e.networkRoles.some(e=>n[e])||e.memberships.some(e=>function(e,t){return"ACTIVE"===e.status&&e.roles.some(e=>t[e])}(e,n)&&t===e.community.id)}e.exports={hasPolicyRole:function(e){return o(app.state.get("user"),app.state.get(["community","id"]),r(app.config.policyRoles,e))},isNetworkAdmin:function(){return app.state.get("user").networkRoles.includes("NETWORK_ADMIN")},isCommunityPostAuthor:function(){return o(app.state.get("user"),app.state.get(["community","id"]),{COMMUNITY_POST_AUTHOR:!0})}}},RvNt:function(e,t,n){"use strict";n("Jwuz")();var r=n("SplK"),o=n("t5HI"),s=n("h1AX"),i=n("/0HX"),a=!1;const c=["actionbox","credits","doc","hr","html","image","newsletter","oembed","pullquote","toh_project_details","toh_tools","pym","ratingcard","readmore","video"];function u(e){e.preventDefault(),e.stopPropagation();var t=new MouseEvent("click",{bubbles:!0,cancelable:!0});return a||window.frameElement.dispatchEvent(t),!1}window.app=new function(){this.config=window.top.app.config,this.env=window.top.app.env,this.state=new r(window.top.app.state.deepClone()),o(this)},window.addEventListener("load",(function(){var e=JSON.parse(window.frameElement.dataset.object);e.type=Object.keys(e).find(e=>c.includes(e)),document.body.innerHTML="";var t=n("3bBC");s(new t({data:e}),document.body),i.init({loadCSSManually:!0,shimStyles:!0})})),window.addEventListener("click",u),window.addEventListener("touchend",u),window.addEventListener("touchmove",()=>a=!0),window.addEventListener("touchstart",()=>a=!1)},SiKE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeDocCommunityAndRedirect=async function(e){app.state.set(["requestInProgress"],!0);const t=app.state.get(["doc"]);"SCHEDULED"===t.status&&await f.unschedule(t);const n=f.pubHistoryUpdate(t,"community_changed",{communityId:e}),o=(await m.getCommunity(e,"Basic")).twitterScreenName||null,s=(0,r.get)(t.head.contents,["draft","autotweets",0,"handle"])||null;o===s||(0,a.default)(t.status)||n.push({p:["draft","autotweets",0,"handle"],od:s,oi:o});await E(t.id,{community_id:e,delta:n}),(0,a.default)(t.status)?await f.publishOrSchedule(t,{republishPublished:!0}):await d.updateEntry(t,{community_id:e});document.location.href=`/preflight/${t.uuid}?communityChanged=true`},t.createDoc=_,t.createDocAndRedirect=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(e,t).then(e=>{var n="compose";"LandingPage"===t.entry_type?n="package":"CustomStory"===t.entry_type&&(n="customstory"),document.location.href=`/${n}/${e.uuid}`})},t.getAllDocObjects=function(e,t){var n=e.head.contents,r=j(e),o=(0,u.default)(n.draft.body,t);for(let e of r)"aside"!==e.schema_name&&"scorecard"!==e.schema_name||!e.head.contents.hasOwnProperty("body")||(o=o.concat((0,u.default)(e.head.contents.body,t)));const s=n.draft.main_oembed;t.includes("oembed")&&s&&o.push({oembed:s});return o},t.getDoc=function(e){return(0,s.default)("/api/content/docs/"+e,{query:{includes:"owner,updateUser,community,external_ids"},opts:{cache:!0,force:!0}})},t.getEntryParams=function(e){return(0,s.default)(`/api/content/docs/${e}/entry_params`)},t.searchDocs=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=e.q||"",o=w(e);let{docs:a,pagination:c,parsedQuery:u}=await(0,s.default)("/api/content/docs",{query:o,opts:t});if("story"===e.schema_name){let e=[];for(let t of a){let n=(0,r.get)(t,["head","contents","draft","contributors"],[]);e=e.concat(n.map(e=>e.chorus_id))}let t=await h.getUsers(e);for(let e of a){let n=(0,r.get)(e,["head","contents","draft","contributors"],[]);e.contributors=(0,r.compact)(n.map(e=>t.find(t=>t&&t.id===e.chorus_id)))}}return{docs:a,formattedQuery:x(u,n),pagination:(0,i.default)(c)}},t.setArchived=function(e){var t=!e.archived;return E(e.id,{archived:t}).then(()=>t)},t.setStatus=async function(e,t,n){try{app.state.set(["requestInProgress"],!0),await E(e.id,{status:t,delta:f.pubHistoryUpdate(e,n||t.toLowerCase())}),app.state.set(["requestInProgress"],!1)}catch(e){p.showError()}},t.setTrashed=function(e){var t=(0,r.get)(e,["head","contents","trashed_at"]),n=t?null:(0,o.default)().toISOString(),s=Promise.resolve();n&&"SCHEDULED"===e.status&&(s=f.unschedule(e));return s.then(()=>E(e.id,{delta:[{p:["trashed_at"],od:t,oi:n}]})).then(()=>d.updateEntryFlags(e,{trashed_at:n})).then(()=>n).catch(()=>p.showError())},t.subdocsForDoc=j,t.updateDoc=E,t.validateDoc=function(e){return(0,s.default)(`/api/content/docs/${e}/validate`,{query:{returnErrors:!0,returnWarnings:!0,returnValid:!0}})};var r=n("LvDl"),o=b(n("f0Wu")),s=b(n("kh36")),i=b(n("JOwg")),a=b(n("V8PI")),c=b(n("vKTg")),u=b(n("VKDZ")),l=b(n("7a9H")),d=v(n("4mBr")),p=v(n("lvH+")),f=v(n("JQTl")),m=v(n("u6+C")),h=v(n("5qpz")),g=n("mKD4");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=o?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function b(e){return e&&e.__esModule?e:{default:e}}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return app.state.set(["requestInProgress"],!0),(0,s.default)("/new"+e,{method:"POST",query:{community_id:app.state.get("community","id")},body:t}).then(e=>(app.state.set(["requestInProgress"],!1),e))}function w(e){const t=(0,r.cloneDeep)(e);const n=(t.q||"").split(" ").reduce((e,t)=>((0,g.isValidUrlWithSlash)(t)?e.url=(0,c.default)(t):t&&e.q.push(t),e),{url:void 0,q:[]});return n.q.length>0?t.q=n.q.join(" "):delete t.q,n.url&&(t.url=n.url),t}function x(e,t){if(!e||!t)return[];let{keywordQueries:n,phrases:r,tokens:o}=e;return n.reduce((e,t)=>{let{keyword:n,type:r,value:o}=t;return"type"===n&&"page"===o&&window.location.pathname.includes("pages")||("phrase"===r?o=`"${o}"`:"date"===r&&(o=o.original),e.push(`${n}:${o}`)),e},[]).map(e=>({type:"keyword",value:e})).concat((r||[]).map(e=>({type:"phrase",value:`"${e}"`}))).concat([{type:"tokens",value:o}]).filter(e=>{let{value:t}=e;return""!==t})}function E(e,t){return(0,s.default)("/api/content/docs/"+e,{method:"PUT",body:t},{handleError:!1})}function j(e){var t=(0,l.default)(e.head.contents);return app.state.get(["subdocs"]).filter(e=>t.includes(e.id))}},Sx0W:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=class{constructor(){this.queue=[],this.isProcessing=!1}push(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.queue.push({callback:e,args:n})}async process(){if(!this.isProcessing)if(this.isProcessing=!0,this.queue.length<=0)this.isProcessing=!1;else{for(;this.queue.length>0;){const{callback:e,args:t}=this.queue.shift();await e(...t)}this.isProcessing=!1}}},e.exports=t.default},T9lS:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,{debounce:o}=n("LvDl"),s=n("LYbu"),i=n("Tc/J");r.exports={data:{image:null},computed:{thumbnailUrl:function(){return i(this.get("image.src"),{fit_in:!0,width:800,height:500})}},onrender:function(){this.observe("isCollapsed",o(e=>{if(!e){var t=this.find("img");s([t])}}))}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"image-inner"},f:[{t:7,p:[2,3,28],e:"img",a:{src:[{t:2,r:"thumbnailUrl",p:[2,13,38]}]}}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},TSSK:function(e,t,n){"use strict";e.exports={add:function(e,t,n){if(e.nodeType!==Node.ELEMENT_NODE){var r=e.ownerDocument.createElement("span");n(e).wrap(r),e=r}return e.setAttribute("data-autolink-id",t.id),e.setAttribute("data-autolink-href",t.href),t.disabled?e.setAttribute("data-autolink-disabled",""):e.removeAttribute("data-autolink-disabled"),e},remove:function(e){return e.removeAttribute("data-autolink-id"),e.removeAttribute("data-autolink-href"),e.removeAttribute("data-autolink-disabled"),e},value:function(e){return{id:e.getAttribute("data-autolink-id"),href:e.getAttribute("data-autolink-href"),disabled:e.hasAttribute("data-autolink-disabled")}},match:function(e){return e.hasAttribute("data-autolink-id")}}},TTX0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){window.quills={};var t={user:e,users:[],messages:[],entitlements:[],subdocs:o({cursors:{docsById:["autosave","docsById"]},get:e=>{let{docsById:t}=e;return s(t,e=>"story"!==e.schema_name)}}),packageDocs:o({cursors:{doc:["doc"],docsById:["autosave","docsById"]},get:e=>{let{doc:t,docsById:n}=e;return a(t.head.contents)?Object.keys(n).reduce((e,t)=>{var r=n[t];return c(r.head.contents)&&(e[r.uuid]=r),e},{}):{}}}),docMissingEntry:o({cursors:{doc:["doc"]},get:e=>{let{doc:t}=e;return t&&!t.entry_id}}),readOnly:o({cursors:{autosaveError:["autosave","error"],docMissingEntry:["docMissingEntry"],trashedAt:["doc","head","contents","trashed_at"],socketError:["socketError"],messages:["messages"]},get:e=>{let{autosaveError:t,docMissingEntry:n,trashedAt:r,socketError:o,messages:s}=e;return n||t||null!=r||o||s.some(e=>e.forceRefresh)}}),docLabel:o({cursors:{doc:["doc"]},get:e=>{let{doc:t}=e;return i(t)}}),subdocLabel:o({cursors:{subdoc:["subdoc"]},get:e=>{let{subdoc:t}=e;return t?i(t):""}}),appWorking:o({cursors:{autosaveDirty:["autosave","dirty"],requestInProgress:["requestInProgress"]},get:e=>{let{autosaveDirty:t,requestInProgress:n}=e;return t&&Object.keys(t).length>0||n}})};app.state=new r(t,{pure:!1,immutable:!1})};var r=n("SplK"),{dynamicNode:o}=r,{filter:s}=n("LvDl"),i=n("ZOem"),a=n("AUH+"),c=n("FLer");e.exports=t.default},"Tc/J":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return r(e,Object.assign({},t,{config:app.config.thumbor}))};var r=n("7LEj");e.exports=t.default},TzQr:function(e,t,n){"use strict";e.exports={tag:"A",add:function(e,t){return e.setAttribute("href",t),e},remove:function(e){return e.removeAttribute("href"),e},value:function(e){return e.getAttribute("href")}}},"U+jF":function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,o=n("K5N4").toPlaintext,s=n("hBDZ");r.exports={data:{doc:null},computed:{title:function(){return o(this.get("doc.head.contents.title"))},rows:function(){var e=this.get("doc.head.contents");return s(e)?e.rows.slice(0,5):[]}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"h2",f:[{t:2,r:"title",p:[1,5,4]}]}," ",{t:7,p:[2,1,19],e:"div",a:{class:"table__container"},f:[{t:4,r:"rows",i:"i",f:[{t:7,p:[4,5,68],e:"div",a:{class:"table__row"},f:[{t:4,rx:{r:"rows",m:[{t:30,n:"i"}]},i:"j",f:[{t:7,p:[6,9,122],e:"div",a:{class:"table__cell"},f:[{t:7,p:[7,11,158],e:"strong",f:[{t:2,rx:{r:"doc.head.contents.columns",m:[{t:30,n:"j"}]},p:[7,19,166]},":"]}," ",{t:3,rx:{r:"rows",m:[{t:30,n:"i"},{t:30,n:"j"}]},p:[7,62,209]}]}],p:[5,7,99]}]}],p:[3,3,52]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},V8PI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return["PUBLISHED","UPDATED"].includes(e)},e.exports=t.default},VKDZ:function(e,t,n){"use strict";e.exports=function(e,t){return e.ops.reduce((e,n)=>{var r=t.find(e=>n.insert.hasOwnProperty(e));return r&&e.push({[r]:n.insert[r]}),e},[])}},Vsx1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditorCommunity=t.DashboardCommunity=t.BasicCommunity=void 0;t.EditorCommunity='\n  query EditorCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      slug\n      domain\n      schemaDomain\n      commentArchiveAgeInDays\n      faviconUrl\n      placeFirstAvailableDefault\n      timeZone\n      placeholderImageUrl\n      twitterScreenName\n      twitterSendDefault\n      defaultImageSearchParams\n      featuresEnabled:                siteConfigBoolean(key: "features_enabled")\n      adsEnabled:                     siteConfigBoolean(key: "ads_enabled")\n      paywallEnabled:                 siteConfigBoolean(key: "paywall_enabled")\n      tweetWithImageByDefault:        siteConfigBoolean(key: "tweet_with_image_by_default")\n      entryDisclaimerEnabled:         siteConfigBoolean(key: "entry_disclaimer_enabled")\n      commentsEnabled:                siteConfigBoolean(key: "comments_enabled")\n      coralCommentsEnabled:           siteConfigBoolean(key: "coral_enabled")\n      commentsClosedDefault:          siteConfigBoolean(key: "comments_closed_on_editorial_posts_by_default")\n      publishForGoogleAmp:            siteConfigBoolean(key: "publish_for_google_amp")\n      bylineShowTitle:                siteConfigBoolean(key: "byline_show_title")\n      printSlugEnabled:               siteConfigBoolean(key: "print_slug_enabled")\n      printDeskHidden:                siteConfigBoolean(key: "print_desk_hidden")\n      ratingCardMaxStars:             siteConfigInt(key: "rating_card_max_stars")\n      useProjectDetails:              siteConfigBoolean(key: "project_details_enabled")\n      useToolsAndMaterials:           siteConfigBoolean(key: "tools_and_materials_enabled")\n      projectDetailsSkillLevels:      siteConfigJson(key: "project_details_skill_levels")\n      hasGettyApi:                    hasSiteConfig(key: "getty_api_config", type: "json")\n      hasUsatodayApi:                 hasSiteConfig(key: "usatoday_api_config", type: "json")\n      hasPlagscan:                    hasSiteConfig(key: "plagscan_api_config", type: "json")\n      hasMerlinApi:                   hasSiteConfig(key: "merlin_api_config", type: "json")\n      entrySlugIsEvergreenDefault:    siteConfigBoolean(key: "entry_slug_is_evergreen_default")\n      showEntryEvergreenUrlToggle:    siteConfigBoolean(key: "show_entry_evergreen_url_toggle")\n      defaultGroupSlug:               siteConfigString(key: "default_story_group_slug")\n      headlessModeEnabled:            siteConfigBoolean(key: "headless_mode_enabled")\n      externalPreviewEnabled:         hasSiteConfig(key: "external_preview_url", type: "string")\n      externalPreviewUrl:             siteConfigString(key: "external_preview_url")\n      externalPreviewMode:            siteConfigString(key: "external_preview_mode")\n      externalPreviewSharedSecret:    siteConfigString(key: "external_preview_shared_secret")\n      externalPreviewRequestMethod:   siteConfigString(key: "external_preview_request_method")\n      externalPreviewApiHeaders:      siteConfigJson(key: "external_preview_api_headers")\n      externalPreviewEnableAmp:       siteConfigBoolean(key: "external_preview_enable_amp")\n      publishForAppleNews:            siteConfigBoolean(key: "publish_for_apple_news")\n      useAffiliateLinks:              siteConfigBoolean(key: "use_affiliate_links")\n      allowDisablingOfAffiliateLinks: siteConfigBoolean(key: "allow_disabling_of_affiliate_links_in_stories")\n      network {\n        id\n        name\n        schemaDomain\n        slug\n        autoplayDefault:      siteConfigBoolean(key: "autoplay_videos_on_entry_pages")\n        usesSuperGroups:      siteConfigBoolean(key: "uses_super_groups")\n        usesCampaignGroups:   networkConfigBoolean(key: "uses_campaign_groups?")\n        usesAutotags:         siteConfigBoolean(key: "uses_autotagger")\n        excludesFromRssFeeds: networkConfigBoolean(key: "excludes_from_rss_feeds?")\n\n        organization {\n          id\n          slug\n        }\n      }\n      locale {\n        lat\n        lng\n      }\n      newsletters {\n        name\n        slug\n      }\n      googleAmpLogo {\n        url\n      }\n      autoTagging {\n        leagueRequired\n        leagueId\n        teamId\n        autolinkTagTypes\n        autotagTagTypes: manualTagTypes\n      }\n    }\n  }\n';t.DashboardCommunity='\n  query DashboardCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      faviconUrl\n      timeZone\n      printSlugEnabled: siteConfigBoolean(key: "print_slug_enabled")\n      network {\n        id\n        name\n        schemaDomain\n      }\n    }\n  }\n';t.BasicCommunity="\n  query BasicCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      twitterScreenName\n    }\n  }\n"},WJG9:function(e,t,n){"use strict";var r=n("cjKa").EventEmitter2,o=n("h1AX"),s=n("5qpz"),i=n("Jwuz"),a=n("TTX0"),c=n("4S2D"),u=n("2jot"),l=n("e27B"),d=n("fXFj"),p=n("t5HI"),f=n("fccc"),m=n("f7b1"),h=n("suft"),g=n("CqzZ"),y=n("lnkl"),v=window.App=function(e){let{env:t,config:n}=e;r.call(this),this.setMaxListeners(0),this.env=t,this.config=n};Object.assign(v.prototype,r.prototype),v.prototype.init=async function(e){let{anthemUser:t,message:n}=e;var r=await s.getCurrentUser();i(),a(Object.assign(t,r)),c(),u(),l(),d(),p(),f(),m(),h(),g(n),y(),this.router.start()},v.prototype.render=function(e,t,n){n=n||document.body;var r=this.rootComponent;return r instanceof e?r.set(t):(this.rootComponent=new e({data:t}),(r?r.teardown():Promise.resolve()).then(()=>o(this.rootComponent,n)))}},WJcc:function(e,t,n){"use strict";e.exports=n("m/vA")("doc")},WZPN:function(e,t,n){"use strict";var r=n("K5N4").toPlaintext;e.exports=function(e){return 0===r(e).trim().length}},WxQR:function(e,t,n){"use strict";e.exports=function(e){return e.draft&&e.draft.hasOwnProperty("customstory_pages")}},Xbgq:function(e,t,n){"use strict";function r(e,t){Error.call(this),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=new Error(e).stack,this.message=e,this.response=t,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var o=r;t.default=o,e.exports=t.default},"XhB+":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var{data:r,errors:s}=await i(e,{method:"POST",body:t,opts:o({cache:!0},n)});if(!r&&s)throw new a(s);return r};var i=n("kh36"),a=n("K+3G");e.exports=t.default},Y51Y:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,{toInternalHtml:o,toPlaintext:s}=n("K5N4"),i=n("Tc/J"),a=n("ZwvY");r.exports={data:{doc:null,isCollapsed:!1},computed:{thumbnailUrl:function(){var e=this.get("doc.head.contents.image");if(!e)return null;var t=a(e.crop,e.subject,1.33);return i(e.src,{width:184,height:200,crop:[t.x,t.y,t.x+t.w,t.y+t.h]})},title:function(){return s(this.get("doc.head.contents.title"))},description:function(){return o(this.get("doc.head.contents.description"))},retailers:function(){return this.get("doc.head.contents.retailers").map(e=>({name:s(e.name),url:e.url,price:e.sale_price?Math.round(e.sale_price):Math.round(e.price)}))},pricing:function(){var e=this.get("doc.head.contents.retailers");if(e.length){var t=Math.round(e[0].price),n=Math.round(e[0].sale_price);return n?{price:t,salePrice:n,percent:100-Math.floor(n/t*100)}:{price:t}}}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:["productcard-inner ",{t:4,n:50,r:"thumbnailUrl",f:["productcard-inner--has-image"],p:[1,31,30]}]},f:[{t:4,n:50,r:"thumbnailUrl",f:[{t:7,p:[3,5,115],e:"div",a:{class:"productcard-image-wrapper"},f:[{t:7,p:[4,7,161],e:"img",a:{src:[{t:2,r:"thumbnailUrl",p:[4,17,171]}]}}]}],p:[2,3,90]}," ",{t:7,p:[8,3,216],e:"div",a:{class:"productcard-info"},f:[{t:7,p:[9,5,251],e:"h2",f:[{t:7,p:[9,9,255],e:"strong",f:[{t:2,r:"title",p:[9,17,263]}]}]}," ",{t:7,p:[10,5,291],e:"div",a:{class:"productcard-pricing"},f:[{t:4,n:50,x:{r:["pricing.salePrice","pricing.price"],s:"_0&&_1"},f:[{t:7,p:[12,9,382],e:"span",a:{class:0},f:[{t:2,r:"pricing.percent",p:[12,21,394]},"% off"]}," ",{t:7,p:[12,55,428],e:"span",f:[{t:7,p:[12,61,434],e:"s",f:["$",{t:2,r:"pricing.price",p:[12,65,438]}]}]}," ",{t:7,p:[12,94,467],e:"span",f:["$",{t:2,r:"pricing.salePrice",p:[12,101,474]}]}],p:[11,7,331]},{t:4,n:51,f:[{t:4,n:50,r:"pricing.price",f:[{t:7,p:[15,9,556],e:"span",f:["$",{t:2,r:"pricing.price",p:[15,16,563]}]}],p:[14,9,526]}],x:{r:["pricing.salePrice","pricing.price"],s:"_0&&_1"}}]}," ",{t:3,r:"description",p:[19,5,633]}," ",{t:7,p:[20,5,655],e:"div",a:{class:"productcard-retailers"},f:[{t:4,r:"retailers",f:[{t:7,p:[22,9,720],e:"res-button",a:{design:"primary",class:"productcard-button"},m:[{t:4,n:50,x:{r:["url","name"],s:"!_0||!_1"},f:[' disabled="disabled"'],p:[22,64,775]}],f:[{t:4,n:50,x:{r:["url","name"],s:"!_0||!_1"},f:[{t:7,p:[23,32,856],e:"res-icon",a:{name:"warning"}}],p:[23,11,835]}," ",{t:7,p:[24,11,910],e:"button",f:[{t:2,r:"name",p:[24,19,918]}," ",{t:4,n:50,r:"price",f:["$",{t:2,r:"price",p:[24,42,941]}],p:[24,28,927]}]}]}],p:[21,7,697]}]}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},YHZh:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports={cursors:{skillLevels:["community","projectDetailsSkillLevels"]},computed:{stars:function(){var e=this.get("toh_project_details.skill"),t="",n=this.get("skillLevels").length;for(let n=0;n<e;n++)t+='<div class="star active"></div>';for(let r=0;r<n-e;r++)t+='<div class="star inactive"></div>';return t},skillLevel:function(){return this.get("skillLevels")[this.get("toh_project_details.skill")-1]}}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"span",f:[{t:3,r:"skillLevel",p:[1,7,6]}]}," ",{t:7,p:[2,1,30],e:"div",a:{class:"stars"},f:[{t:3,r:"stars",p:[2,20,49]}]}," ",{t:4,n:50,r:"toh_project_details.skill_description",f:[{t:7,p:[4,3,115],e:"span",f:[{t:2,r:"toh_project_details.skill_description",p:[4,9,121]}]}],p:[3,1,67]},{t:4,n:50,r:"toh_project_details.estimated_cost",f:[{t:7,p:[7,3,223],e:"span",f:[{t:7,p:[7,9,229],e:"strong",f:["Cost:"]}," ",{t:2,r:"toh_project_details.estimated_cost",p:[7,32,252]}]}],p:[6,1,178]},{t:4,n:50,r:"toh_project_details.estimated_time",f:[{t:7,p:[10,3,351],e:"span",f:[{t:7,p:[10,9,357],e:"strong",f:["Estimated time:"]}," ",{t:2,r:"toh_project_details.estimated_time",p:[10,42,390]}]}],p:[9,1,306]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},YPbQ:function(e,t,n){"use strict";e.exports={type:"line",attribute:"data-position"}},YS4a:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"m-404"},f:[{t:7,p:[3,3,23],e:"svg",a:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 162.5 303.5","enable-background":"new 0 0 162.5 303.5","xml:space":"preserve"},f:[{t:7,p:[5,5,244],e:"g",f:[{t:7,p:[6,7,254],e:"path",a:{fill:"#54C2BA",d:"M162.5,188.5L40.3,127.3c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,23V0L31,65.9\n        C4.1,79.5,0,96.7,0,105.8s4,26.3,31,39.9l131.5,65.9V188.5z"}}," ",{t:7,p:[8,7,449],e:"path",a:{fill:"#E0DB24",d:"M162.5,234.4L40.3,173.2c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,69V46L31,111.9\n        C4.1,125.3,0,142.5,0,151.7c0,9,4,26.3,31,39.9l131.5,65.9V234.4z"}}," ",{t:7,p:[10,7,652],e:"path",a:{fill:"#C74A27",d:"M40.3,219c-12.4-6.2-19.7-14.1-19.7-21.5s7.2-15.1,19.7-21.5l122.2-61.2V91.9L31,157.8\n        C4,171.4,0,188.6,0,197.7c0,9,4,26.3,31,39.9l131.5,65.9v-23L40.3,219z"}}]}]}," ",{t:7,p:[15,3,861],e:"h2",f:["Page not found"]}," ",{t:7,p:[17,3,888],e:"h3",f:["Sorry, that page doesnt exist. Want to head back to ",{t:7,p:[17,66,951],e:"a",a:{href:"/"},f:["Chorus"]},"?"]}," ",{t:7,p:[19,3,983],e:"p",f:[{t:7,p:[19,6,986],e:"strong",f:["Need help?"]}]}," ",{t:7,p:[20,3,1020],e:"ul",f:[{t:7,p:[21,5,1029],e:"li",f:[{t:7,p:[21,9,1033],e:"a",a:{href:"https://status.voxmedia.com/"},f:["Platform status"]}]}," ",{t:7,p:[22,5,1101],e:"li",f:[{t:7,p:[22,9,1105],e:"a",a:{href:"https://chorussupport.zendesk.com/hc/en-us"},f:["Help center"]}]}," ",{t:7,p:[23,5,1183],e:"li",f:[{t:7,p:[23,9,1187],e:"a",a:{href:"https://www.chorus.help/hc/en-us/requests/new"},f:["Contact us"]}]}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},Ydhc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(function(e,t){const n=app.socket,r=app.state.select("users"),o=e=>{r.get().find(t=>t.id===e.id)||r.push(e)};n.on(`presence.${e}.greet`,o),n.on(`presence.${e}.joined`,t=>{o(t),n.emit(`presence.${e}.greet`,t.socketId)}),n.on(`presence.${e}.left`,e=>{r.set(r.get().filter(t=>t.socketId!==e.socketId))}),n.on("reconnect",()=>{r.set([]),n.emit("presence.join",e,t,app.state.get(["user"]),o)}),n.emit("presence.join",e,t,app.state.get(["user"]),o)})(e,t),function(e){const t=app.contentApiSocket;t.on("reconnect",()=>t.emit("presence.join",e)),t.emit("presence.join",e)}(e)},e.exports=t.default},Z91r:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",tag:"H5"},{exclusive:!0})},ZOem:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"story"===e.schema_name?r(e.head.contents):o[e.schema_name]};var r=n("1+zu"),o=n("MN9u");e.exports=t.default},ZbOo:function(e,t,n){"use strict";e.exports={tag:"SUP"}},ZwvY:function(e,t,n){"use strict";e.exports=function(e,t,n){if(e&&t&&n){var r=Math.min(e.h,e.w/n);r=Math.round(r);var o=Math.min(e.w,e.h*n);o=Math.round(o);var s=t.y-r/2;s=Math.max(s,e.y),s=Math.min(s,e.y+e.h-r),s=Math.round(s);var i=t.x-o/2;return i=Math.max(i,e.x),i=Math.min(i,e.x+e.w-o),{x:i=Math.round(i),y:s,w:o,h:r}}}},a62e:function(e,t,n){"use strict";e.exports=function(e){return e.draft.hasOwnProperty("map_points")}},aBYB:function(e,t,n){"use strict";e.exports=n("m/vA")("oembed")},avVH:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",parentTag:"BLOCKQUOTE"},{exclusive:!0,inherit:!0})},axPB:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",tag:"H4"},{exclusive:!0})},b5Lw:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"actionbox-inner"},f:[{t:7,p:[2,3,32],e:"div",a:{class:"content"},f:[{t:7,p:[3,5,58],e:"div",a:{class:"actionbox-title"},f:[{t:3,r:"actionbox.title",p:[3,34,87]}]}," ",{t:7,p:[4,5,119],e:"div",a:{class:"actionbox-description"},f:[{t:3,r:"actionbox.description",p:[4,40,154]}]}]}," ",{t:7,p:[6,3,199],e:"res-button",a:{design:"primary",class:"actionbox-button"},f:[{t:7,p:[7,5,258],e:"button",f:[{t:3,r:"actionbox.label",p:[8,7,273]}]}]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},bBXQ:function(e,t,n){"use strict";e.exports=n("m/vA")("video")},bz8U:function(e,t,n){"use strict";e.exports=function(e){return"unison_page"===e.draft.entry_layout}},casY:function(e,t,n){"use strict";e.exports=n("m/vA")("hr")},cfah:function(e,t,n){"use strict";e.exports=function(e){return new Promise((function(t){setTimeout(t,e)}))}},clL1:function(e,t,n){"use strict";var r=n("YS4a");e.exports=function(){app.render(r)}},dnr0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.docInState=$,t.getDocCursor=G,t.initDoc=Y,t.isDirty=H,t.localUpdate=z,t.onReconnect=function(){for(let t of C())if(!j.get(t)&&!A.get(t)){A.set(t,!0);var e=G(t).get(["head","end_sequence"]);Z(t,e).then((function(e){for(let n of e)X(t,n);A.unset(t)})).catch(e=>{L(e,!1)})}},t.remoteUpdate=X,t.resolveOnClean=Q,t.resolveOnLocalUpdate=function(e,t,n){return z(e,t,n),Q(e)},t.setAndInitDoc=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if($(e.id)||k.get(e.id))return Promise.resolve();return k.set(e.id,!0),W(e,n).then(()=>Y(e.id,t)).then(()=>k.unset(e.id))},t.setDoc=W,t.teardownDoc=function(e){if(!$(e))return Promise.resolve();return Q(e).then(()=>{x.unset(e),app.socket.emit(`presence.${e}.leave`),app.contentApiSocket.emit(`presence.${e}.leave`)})},t.unsetDocAlias=function(e){return app.state.unset(e)},t.updateDocFlag=function(e,t,n){if(!$(e))return;G(e).set(t,n)};const{throttle:r,set:o}=n("LvDl"),{dynamicNode:s}=n("SplK"),i=n("fEA7"),a=n("kh36"),c=n("zmXh"),u=n("6fkZ"),l=n("Ydhc"),d=n("wbkn"),p=n("/LVe"),f=n("lvH+"),m=n("q1SX"),h=n("Fw7v"),g=n("Sx0W");var y=window.localStorage,v=!1,b=app.config,_=app.state.select("user"),w=app.state.select(["autosave","dirty"]),x=app.state.select(["autosave","docsById"]),E=app.state.select(["autosave","inLine"]),j=app.state.select(["autosave","inFlight"]),O=app.state.select(["autosave","sentIds"]),P=app.state.select(["autosave","quills"]),A=app.state.select(["autosave","reconnectingIds"]),k=app.state.select(["autosave","initializingIds"]);const T=["story"];function S(e){return"rescue:"+e}function I(e){return"message:"+e}function C(){return Object.keys(x.get()).map(e=>parseInt(e))}function D(e){if(!$(e)){var t=new Error("An invalid docId was supplied to autosave.");t.name="AutosaveReferenceError",t.doc_id=e,L(t)}}function M(e){w.set(e,!0),app.emit("autosave.dirty."+e,E.get(e),j.get(e))}function L(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v=!0,e.from="autosave",w.set({}),app.emit("autosave.error",e),t&&m.reportError(e)}function R(e,t){G(e).select(["head","delta"]).apply(e=>c.compose(e,t)),G(e).select(["head","contents"]).apply(e=>c.apply(e,t))}var U=r((function(){for(let e of C())j.get(e)||!E.get(e)||v||(j.set([e],E.get(e)),E.unset(e),q(e),N(e))}),b.autosaveThrottle,{leading:!1,trailing:!0});function N(e){if(!v){if(E.get(e))try{var t=c.compose(j.get([e,"delta"]),E.get([e,"delta"]));j.set([e,"delta"],t),E.unset(e),q(e)}catch(e){return e.name="OTError",void L(e)}var n=G(e),r=G(e).select(["head","end_sequence"]),o=G(e).select(["head","contents"]),s=j.get([e,"delta"]),u=i.v4(),l=r.get()+1;return O.set(u,!0),a("/api/content/docs/"+n.get("id")+"/contents",{method:"PATCH",body:{user_id:j.get([e,"userId"]),delta:s,sequence:l,uuid:u,content_hash:h(o.get()),schema_version:n.get("schema_version")},opts:{handleError:!1,retry:{delay:0,maxDelay:2e4}}}).then(()=>{app.emit("autosave.success."+e,j.get(e)),y.removeItem(S(e)),j.unset(e),r.set(l),E.get(e)?M(e):function(e){w.unset(e),app.emit("autosave.clean."+e)}(e),U()}).catch(t=>409===(t.response&&t.response.status)?function(e,t){return t.response.clone().json().then((function(n){if(/too low/.test(n.message)&&n.packets){for(let t of n.packets)X(e,t);return N(e)}return Promise.reject(t)}))}(e,t):Promise.reject(t)).catch(t=>{L(t,!1),setTimeout(()=>F(e,!1),5e3)})}}function q(e){app.emit("autosave.check-update",e);var t=[],n=G(e).get(["head","contents"]);try{if(j.get(e)&&(t=c.compose(t,j.get([e,"delta"]))),E.get(e)&&(t=c.compose(t,E.get([e,"delta"]))),window.quills[e]){var r=window.quills[e],s=P.get([e,"path"]);r&&s&&o(n,s,r.getContents())}}catch(e){return e.name="OTError",void L(e)}var i=G(e);y.setItem(S(e),JSON.stringify({doc_id:i.get("id"),user_id:_.get("id"),schema_version:i.get("schema_version"),schema_name:i.get("schema_name"),end_sequence:null,contents:n,delta:t}))}function F(e,t){var n=y.getItem(S(e));if(n)return a("/api/content/versions",{method:"POST",body:JSON.parse(n),opts:{handleError:!1}}).then(n=>{if(!(window.location.pathname.indexOf("package")>-1)&&T.indexOf(n.schema_name)>-1){var r=G(e).get("uuid"),o={message:u.RESCUE_SAVED_REASSURE.replace("{url}",`/compose/${r}/version/${n.id}`),type:"cautionary"};t?f.showMessage(o):function(e,t){y.setItem(I(e),JSON.stringify(t))}(e,o)}y.removeItem(S(e))}).catch(e=>{L(e,!1)})}function B(e){setTimeout(()=>function(e){var t=I(e);if(y.hasOwnProperty(t)){var n=JSON.parse(y.getItem(t));f.showMessage(n),y.removeItem(t)}}(e),1e3),y.hasOwnProperty(S(e))&&setTimeout(()=>F(e,!1),500)}function G(e){return D(e),x.select(e)}function $(e){return e&&x.get(e)}function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t=w.get();return e?t[e]:Object.keys(t).length>0}function W(e,t){return x.set(e.id,e),t&&app.state.set(t,s({cursors:{doc:["autosave","docsById",e.id]},get:e=>{let{doc:t}=e;return t}})),Promise.resolve()}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return B(e),l(e.toString(),t),p(e),d(e)}function z(e,t,n){D(e),n=n||_.get("id");var r=G(e);r.set("updated_at",(new Date).toISOString()),E.get(e)?E.set([e,"userId"],n):E.set(e,{delta:[],userId:n}),t=function(e,t){if(e&&e.length>0){var n=e.findIndex(e=>"legacy_updated_at"===e.event_type);if(n>-1){var r=e[n];return t.push({p:["publish_history",n],ld:r}),t}}return t}(r.get(["head","contents","publish_history"]),t);try{E.set([e,"delta"],c.compose(E.get([e,"delta"]),t)),q(e),R(e,t),M(e),app.emit("autosave.local-update",e,t),U()}catch(e){e.name="OTError",L(e)}}let V=!1;const K=new g;function X(e,t){V?K.push(J,e,t):J(e,t)}async function J(e,t){if(v||!$(e))return;if(O.get(t.uuid))return void O.unset(t.uuid);const n=G(e).select(["head","end_sequence"]),r=n.get();if(!(t.sequence<=r))if(t.sequence>r+1)try{await async function(e,t){V=!0;const n=await Z(e,t);if(!n.length)throw new Error("Unable to get missing sequences");const r=n.map(e=>e.sequence),o=r.every((e,t)=>0===t||e-r[t-1]==1);if(r[0]>t+1||!o)throw new Error(`Still missing sequences after fetching. Current: ${t}, Got: ${r}`);for(let t of n)await J(e,t);V=!1,K.process()}(e,r)}catch(r){r.original_name=r.name,r.name="AutosaveSequenceError",r.doc_id=e,r.missed_packets=t.sequence-(n.get()+1),L(r)}else{app.emit("autosave.check-update",e);try{var o,s;j.get(e)&&(o=c.transform(t.delta,j.get([e,"delta"]),"left"),s=c.transform(j.get([e,"delta"]),t.delta,"right"),t.delta=o,j.set([e,"delta"],s)),E.get(e)&&(o=c.transform(t.delta,E.get([e,"delta"]),"left"),s=c.transform(E.get([e,"delta"]),t.delta,"right"),t.delta=o,E.set([e,"delta"],s)),n.set(t.sequence),R(e,t.delta)}catch(e){e.name="OTError",L(e)}app.emit("autosave.remote-update",e,t)}}function Q(e){return new Promise((t,n)=>{if(!H(e))return t();app.once("autosave.clean."+e,t),app.once("autosave.error",n)})}function Z(e,t){return a(`/api/content/docs/${e}/ops?sequence__gt=${t}`,{opts:{retry:{delay:0,maxDelay:2e4}}})}},e27B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=window.onerror;window.onerror=()=>{e&&e.apply(this,arguments),r.showError()}};var r=n("lvH+");e.exports=t.default},e5Yr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertAtCaret=s,t.insertAtMouseEvent=function(e,t,n){var r,o=window.getSelection();t.rangeParent&&t.rangeOffset?(r=document.createRange()).setStart(t.rangeParent,t.rangeOffset):document.caretRangeFromPoint&&(r=document.caretRangeFromPoint(t.clientX,t.clientY));if(r instanceof window.Range){var i=window.quills[e];o.removeAllRanges(),o.addRange(r),i.root.focus(),i.update()}return s(e,n)},t.insertObject=function(e,t,n){var i=window.quills[e],a=i.getContents(),c=t&&o(a,e=>e.attributes&&e.attributes.id===t);if(c){var u=(new r).retain(c-1).delete(1).insert(n);i.focus(),i.updateContents(u,"user"),i.setSelection(c-1,1)}else s(e,(new r).insert(n))},t.setQuillReference=function(e,t,n){window.quills[e]=t,app.state.set(["autosave","quills",e],{path:n})},t.trackDeltas=function(e){app.state.set(["tracked_deltas",e],[])},t.unsetQuillReference=function(e){window.quills[e]=null,app.state.unset(["autosave","quills",e])},t.untrackDeltas=function(e){app.state.unset(["tracked_deltas",e])};var{Delta:r}=n("tNa1"),o=n("CUho");function s(e,t){var n=window.quills[e];if(n){n.focus();var o=new r,s=n.getSelection();if(s)o.retain(s.index),o.delete(s.length);else{var i=n.getContents();o.retain(i.length())}return o=o.concat(t),n.updateContents(o,"user")}}},eFbp:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"credits-inner"},f:[{t:4,r:"credits",f:[{t:7,p:[3,5,47],e:"div",a:{class:"credits-item"},f:[{t:7,p:[4,7,80],e:"span",a:{class:"credits-role"},f:[{t:3,r:"./role",p:[4,34,107]}]},": ",{t:3,r:"./name",p:[4,58,131]}]}],p:[2,3,30]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},eW75:function(e,t,n){"use strict";var r=n("lvGN");e.exports=function(e,t){r.sendPageview(e.pathname),t()}},efn1:function(e,t,n){"use strict";e.exports={tag:"SUB"}},f7b1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){app.state.set("sentry",{inLine:[],inFlight:null});var e=app.config.sentry,t=r(app.state.get(["user"]),["id","email","fullOrUserName","fullName","lastAnnouncementReadAt","lastAnnouncementSeenAt"]);e&&e.dsn&&(o.init({dsn:e.dsn,release:e.release,environment:app.env||"production",integrations:[new s({depth:3})],allowUrls:i}),o.configureScope(e=>{e.setUser(t)}))};const{pick:r}=n("LvDl"),o=window.Sentry=n("WSEr"),{ExtraErrorData:s}=n("eX0o"),i=[/stories\.usechorus\.com/,/chorus\.voxmedia\.com/,/vox-cdn\.com/,/anthem\.sb[\d]+\.k8s\.voxops\.net/];e.exports=t.default},fXFj:function(e,t,n){"use strict";e.exports=function(){document.addEventListener("keydown",(function(e){var t=!1;if(8===e.keyCode){var n=e.srcElement||e.target;t=!n.isContentEditable&&"TEXTAREA"!==n.tagName.toUpperCase()&&("INPUT"!==n.tagName.toUpperCase()||"TEXT"!==n.type.toUpperCase()&&"PASSWORD"!==n.type.toUpperCase()&&"FILE"!==n.type.toUpperCase()&&"EMAIL"!==n.type.toUpperCase()&&"SEARCH"!==n.type.toUpperCase()&&"DATE"!==n.type.toUpperCase()&&"NUMBER"!==n.type.toUpperCase())||(n.readOnly||n.disabled)}t&&e.preventDefault()}))}},fccc:function(e,t,n){"use strict";var r=n("KVl8");e.exports=function(){r("*",n("eW75"),n("lI3N")),r("/(compose|preview|u-layout|preflight|sass-editor|package|customstory|configure)/(.*)",(function(e,t){Promise.all([n.e("vendor"),n.e(0),n.e(8)]).then((function(){var r=[n("sBhV")];(function(n){n(e,t)}).apply(null,r)})).catch(n.oe)})),r("/compose/(.*)",(function(e,t){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(2)]).then((function(){var r=[n("mbVf")];(function(n){n(e,t)}).apply(null,r)})).catch(n.oe)})),r("/compose/:id/diff/:baseId/:targetId",(function(e){n.e("vendor").then((function(){var t=[n("qzBG")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/compose/:id/version/:version",(function(e){n.e("vendor").then((function(){var t=[n("I3vv")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/compose/:id",(function(e){n.e("vendor").then((function(){var t=[n("+axf")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/configure/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(9)]).then((function(){var t=[n("Loac")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/package/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(7)]).then((function(){var t=[n("eQWk")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/preview/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(6)]).then((function(){var t=[n("lvl2")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/u-layout/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(5)]).then((function(){var t=[n("ZEd0")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/preflight/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(3)]).then((function(){var t=[n("W4Sa")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/sass-editor/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(10)]).then((function(){var t=[n("QxH2")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("/customstory/:id",(function(e){Promise.all([n.e("vendor"),n.e(0),n.e(1),n.e(4)]).then((function(){var t=[n("i0Mb")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),r("*",(function(e){n.e("commons").then((function(){var t=[n("clL1")];(t=>t(e)).apply(null,t)})).catch(n.oe)})),app.router=r}},gtSH:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",tag:"H1"},{exclusive:!0})},h1AX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return window.scrollTo(0,0),e.render(t).catch(r.reportError)};var r=n("q1SX");e.exports=t.default},hBDZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{columns:t,rows:n}=e;return t.length>0&&n&&n.some(e=>e.length>0)},e.exports=t.default},hc2C:function(e,t,n){"use strict";e.exports=n("m/vA")("actionbox")},hiad:function(e,t,n){"use strict";var r=n("K5N4"),o=n("qtFk");e.exports=function(e){return(0,r.toHtml)(e,o.formats,o.options)}},"hv+U":function(e,t,n){"use strict";e.exports=Object.assign({},{tag:"STRONG"},{prepare:"bold"})},jbLp:function(e,t,n){"use strict";e.exports={tag:"S"}},"k+vd":function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,o=n("sg+F");r.exports={data:{oembed:null},computed:{srcdoc:function(){var e=this.get("oembed.html");return e?`\n        <style>\n          body { margin: 0; overflow: hidden; }\n          iframe { display: block; margin: 0 auto; }\n        </style>\n        ${e.replace(/"twitter-tweet"/,'"twitter-tweet" data-align="center"').replace(/(<iframe[^>]*src="[^"]+twitch\.tv[^"#]+)/,"$1&amp;parent="+window.top.location.hostname)}\n      `:"<b>Error</b>"}},handleIframe:function(){var e=this.find("iframe");o(e.contentWindow),e.contentWindow.addEventListener("resize",()=>o(e.contentWindow)),e.contentWindow.twttr&&e.contentWindow.twttr.events.bind("rendered",()=>o(e.contentWindow)),e.contentWindow.FB&&e.contentWindow.FB.Event.subscribe("xfbml.render",()=>o(e.contentWindow))}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"iframe",a:{id:"oembed-iframe",allowFullscreen:0,src:"javascript: parent.document.querySelector('#oembed-iframe').getAttribute('srcdoc')",srcdoc:[{t:2,r:"srcdoc",p:[6,11,171]}]},o:"autosize",v:{load:{m:"handleIframe",a:{r:[],s:"[]"}}}}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},kOm9:function(e,t,n){"use strict";e.exports=n("m/vA")("readmore")},kabW:function(e,t,n){"use strict";function r(e,t,n){for(var r=e[n];r&&r[n];)r=r[n];for(;r;)3===r.nodeType?(r.nodeValue=r.nodeValue.replace(t,""),r=0===r.nodeValue.length?o(r)[n]:r.parentNode):r=r.hasChildNodes()?r.parentNode:o(r)[n]}function o(e){var t=e.parentNode;return t.removeChild(e),t}e.exports=function(e){var t=document.createElement("div");return t.innerHTML=e,r(t,/^\s+/,"firstChild"),r(t,/\s+$/,"lastChild"),t.innerHTML}},kh36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=h(e,t);return m(n.url,n.reqOpts,n.opts)};const{merge:r,omit:o}=n("LvDl"),s=n("Qyje"),i=n("cfah"),a=n("Xbgq"),c=n("lvH+"),{reportError:u}=n("q1SX"),l=n("Fw7v"),d={};function p(e){if(e.ok)return e;var t=new a("Response status not within range: "+e.status,e);return Promise.reject(t)}function f(e,t,n){return n?{data:t,headers:e.headers}:t}function m(e,t,n){let r=function(e,t){let{method:n,body:r}=t,o=e;n&&"GET"!==n&&r&&(o+=l(r));return o}(e,t);return n.cache&&!n.force&&r in d?Promise.resolve(d[r]):fetch(e,t).then(p).then(e=>{return r=e,o=t.headers.Accept,s=n.withHeaders,204===r.status?Promise.resolve():"text/html"===o?r.text().then(e=>f(r,e,s)):r.json().then(e=>f(r,e,s));var r,o,s}).then(e=>(n.cache&&(d[r]=e),e)).catch(r=>function(e,t,n,r){var o=e.response&&e.response.status;if(r.retry&&r.retry.delay<r.retry.maxDelay&&(!o||502===o||503===o)){var{retry:s}=r,a=Math.min(s.delay+1e3,s.maxDelay);return s.delay=a,i(a).then(()=>m(t,n,r))}return r.handleError&&(window.app&&window.app.state?c.showError():(console.warn("An unexpected error occurred while making a request, but the app is not able to display it"),u(e,!1))),Promise.reject(e)}(r,e,t,n))}function h(e,t){var n={credentials:"include",headers:{Accept:"application/json"}},i={handleError:!0,cache:!1,retry:{delay:0,maxDelay:3e3}},a=t.opts||{},c=o(t,"opts");return c.method&&"GET"!==c.method.toUpperCase()&&(n.headers["Content-Type"]="application/json"),c.query&&(e=e+"?"+s.stringify(c.query),delete c.query),c.body&&"string"!=typeof c.body&&(c.body=JSON.stringify(c.body)),!1===c.credentials&&(delete n.credentials,delete c.credentials),a.retry||(i.retry=!1),"boolean"==typeof a.retry&&delete a.retry,{url:e,opts:r(i,a),reqOpts:r(n,c)}}e.exports=t.default},kyeX:function(e,t,n){"use strict";e.exports={type:"line",attribute:"id"}},lI3N:function(e,t,n){"use strict";var r=n("s4NR");e.exports=function(e,t){e.query=r.parse(e.querystring),t()}},lnkl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=app.state.get(["user"]);!e.hasLoggedIn&&r(e.createdOn).utc().isAfter(a)&&i.showMessage({type:"positive",message:o.NEW_USER_MESSAGE.replace("{url}","https://www.chorus.help/hc/en-us/articles/360009073453-Getting-started-with-the-story-editor")});e.hasLoggedIn||s.updateAnthemUser({hasLoggedIn:!0})};var r=n("f0Wu"),o=n("6fkZ"),s=n("5qpz"),i=n("lvH+");const a=r("2018-03-29","YYYY-MM-DD").utc();e.exports=t.default},lvGN:function(e,t,n){"use strict";e.exports={sendPageview:function(e){window.ga&&window.ga("send","pageview",e)},sendEvent:function(e,t,n){window.ga&&window.ga("send","event",e,t,n)}}},"lvH+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessage=function(e){var t=c(e);app.state.select(["messages"]).splice([t,1])},t.showError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.UNEXPECTED;var t=app.state.get(["messages"]).some(e=>e.isError);t||a({message:e,type:"negative",isError:!0})},t.showMessage=a;var{defaults:r}=n("LvDl"),o=n("Fw7v"),s=n("6fkZ");const i={dismissible:!0,type:"negative"};function a(e){var t=o(e.message);return-1===c(t)&&function(e){if(!e.id)return!0;var t="message-"+e.id;if("shown"===window.localStorage.getItem(t))return!1;return window.localStorage.setItem(t,"shown"),!0}(e)&&(e.id=t,e=r(e,i),app.state.select(["messages"]).push(e)),t}function c(e){return app.state.get(["messages"]).findIndex(t=>t.id===e)}},"m/vA":function(e,t,n){"use strict";var r=n("fEA7"),o=["gallery","html","image","imageslider","ratingcard","video","hr","toh_project_details","toh_tools"];e.exports=function(e){return{type:"embed",tag:"IFRAME",add:function(t,n){var s={};s[e]=n,t.setAttribute("data-object",JSON.stringify(s)),t.setAttribute("data-frame-id",r.v4()),t.setAttribute("allowfullscreen","");var i="doc"===e?n.type:e;t.classList.add(i+"-object"),o.includes(i)&&t.setAttribute("data-preserve-height",!0);var a=function(){var e=0,t=window;for(;window&&t!==window.top;)e+=1,t=t.parent;return e}(),c=a?"/object-v2.html?parents="+a:"/object-v2.html";return t.setAttribute("src",c),t},remove:function(e){return e.removeAttribute("data-object"),e.removeAttribute("data-frame-id"),e.removeAttribute("allowfullscreen"),e.removeAttribute("data-preserve-height"),e.removeAttribute("src"),e.className="",e},value:function(t){return JSON.parse(t.dataset.object)[e]},match:function(t){return"IFRAME"===t.tagName&&"object"in t.dataset&&e in JSON.parse(t.dataset.object)}}}},mKD4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace(/^(https?:\/\/|mailto:)/,"").split("/")[0],n=/,/.test(t),o=/(%20)/.test(t),s=/^file:\/\//.test(e);return r.test(e)&&!/\s/g.test(e)&&!n&&!o&&!s},t.isValidUrlWithSlash=function(e){return/\w\.[^\s]+\//.test(e)};const r=/\w\.[^\s]+/},mMcG:function(e,t,n){"use strict";var{get:r}=n("LvDl");e.exports=function(e){var t=e.ops.reduce((function(e,t){return"string"!=typeof t.insert||r(t,["attributes","mark"])?e:e+t.insert}),"").trim().match(/\S+/g);return t?t.length:0}},mlrC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HAS_IMAGE_HISTORY=void 0,t.buildImageHistoryDelta=b,t.editImage=y,t.getAndEditImage=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=await g(e.id);y(o({},r,e),"Update",t,n)},t.getImage=g,t.getImageFromUrl=async function(e){if(d.validateImageUrl(e)&&/vox-cdn/.test(e)&&p.test(e)){let n=e.match(p),r=parseInt(n[3]),o=r;if("image"===n[1]){let e=await(t=r,i("/api/chorus/images/"+t));o=e.chorus_asset_id}if(o)return g(o)}var t;return null},t.imageFromData=v,t.insertImageAtPath=function(e,t){let{docId:n,path:r}=e;var o=v(t),s=u.getDocCursor(n).get(["head","contents"].concat(r)),i=[{p:r,od:s,oi:o}];return i=i.concat(b(n,o.id)),u.resolveOnLocalUpdate(n,i)},t.insertInlineImage=function(e,t){let{docId:n,lineId:r}=e;return _(n,t.id),l.insertObject(n,r,{image:v(t)})},t.insertInlineImageAtMouseEvent=function(e,t,n){var r=(new s).insert({image:v(n)});return _(e,n.id),l.insertAtMouseEvent(e,t,r)},t.removeImageAtPath=function(e,t){let{docId:n,path:r}=e;return u.resolveOnLocalUpdate(n,[{p:r,od:t}])},t.saveImage=function(e){return d.saveAsset("image",e).then(t=>Object.assign({},e,r(t,"caption")))},t.selectImage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.pushModal({selectAsset:{imageType:e,target:t,type:"image"}})},t.updateUploadProgress=function(e){app.state.set(["uploadProgress"],e)},t.uploadImage=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return d.uploadAsset("image",e,t,n)},t.uploadImageUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.pushModal({uploadImageUrl:{type:e,target:t}})},t.uploadImages=function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return d.uploadAssets("image",e,t,n)},t.validatePartnerPlatformsImageSize=function(e,t){return parseFloat(e/1e6)<t};const{omit:r,merge:o}=n("LvDl"),{Delta:s}=n("tNa1"),i=n("kh36"),{hasPolicyRole:a}=n("Qw7n"),c=n("tz4B"),u=n("dnr0"),l=n("e5Yr"),d=n("6bnl"),p=/chorus_(asset|image)\/(file|image)\/([\d]+)\//,f=["story","gallery"];function m(e){return e.subject||e.crop||(e.crop={x:0,y:0,w:e.width,h:e.height},e.subject={x:Math.round(e.width/2),y:Math.round(e.height/2)}),e}function h(e){return e.network_id=e.network_id||app.state.get(["community","network","id"]),e.community_id=e.community_id||app.state.get(["community","id"]),e.user_id=e.user_id||app.state.get(["user","id"]),e}function g(e){return i("/api/assets/images/"+e)}function y(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=h(m(Object.assign({},e))),s={editObject:{data:o,label:t,type:n,target:r}};c.getModal("selectAsset")||!a("editor.accessAssets")?c.pushModal(s):c.pushModal(s,{selectAsset:{target:r,type:"image",imageType:n},tail:app.state.get("modal")})}function v(e){return m({id:e.id,src:e.url,width:e.width,height:e.height,crop:e.crop,subject:e.subject,caption:e.caption||"",credit:e.credit||"",hide_credit:null!=e.hide_credit&&e.hide_credit,letterbox:null!=e.letterbox&&e.letterbox,mask_text:e.mask_text})}function b(e,t){var n=u.getDocCursor(e),r=n.get(["schema_name"]),o=n.get(["head","contents","image_history"])||[];return f.includes(r)&&!o.find(e=>e===t)?[{p:["image_history",o.length],li:t}]:[]}function _(e,t){var n=b(e,t);n.length>0&&u.localUpdate(e,n)}t.HAS_IMAGE_HISTORY=f},o757:function(e,t,n){"use strict";e.exports=n("m/vA")("newsletter")},oRrG:function(e,t,n){"use strict";var r=n("tNa1").Delta;e.exports=function(e){var t=e.replace(/\r/g,"");return t=/\n$/.test(t)?t:t+"\n",(new r).insert(t)}},oRyF:function(e,t,n){"use strict";e.exports=function(e){return e?e[0].toUpperCase()+e.substring(1).toLowerCase():e}},odTr:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n("f0Wu"),i=n("fEA7"),a=n("oRrG"),{isCommunityPostAuthor:c}=n("Qw7n"),u=n("WxQR");function l(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({draft:{hed:a("Untitled"),dek:a(""),slug:a(""),body:a(""),teaser:a(""),entry_password:a(""),autotweets:[{body:a("")},{body:a("")}],disable_ads:!1,do_not_distribute:c(),hide_from_amp:!1,is_restricted_in_privacy_consent_region:!1,noindex:!1,nofollow:!1,paywalled:!1,affiliate_link_rewriting_disabled:!1,styles:"",site_groups:[],super_groups:[],campaign_groups:[],whitelisted_network_ids:[],contributors:[],additional_byline:a(""),internal_title:a(""),internal_description:a(""),social_title:a(""),social_description:a(""),seo_title:a(""),seo_description:a(""),canonical_url_override:a(""),structured_tags:{}},embargoed:!1,hidden:!1,publish_history:[],image_history:[]},app.state.get(["community","printSlugEnabled"])?{print_slug:a("")}:{})}e.exports=function(e){switch(e.schema_name){case"story":return u(e.head.contents)?function(){const e=l();return e.draft.hide_from_amp=!0,e}():l();case"gallery":return{title:a("Untitled"),images:[],image_history:[]};case"aside":return{title:a("Untitled"),body:a("")};case"table":return{title:a("Untitled"),credit:a(""),caption:a(""),columns:[],rows:[],sort_column:0,sort_descending:!1,searchable:!1,sortable:!1,per_page:0,google_spreadsheet_url:"",upload_filename:"",style:"table"};case"poll":return{title:a(""),options:[{uuid:i.v4(),value:a("")}],close_date:s().add(2,"weeks").toISOString()};case"scorecard":return function(e){var t={title:a("Untitled")};switch(e.head.contents.type){case"product":t.pros=a(""),t.cons=a("");break;case"venue":t.google_critic_snippet=a(""),t.body=a("");break;case"game":t.platform_scores=[],t.body=a("")}return t}(e);case"imageslider":return{caption:a("")};case"productcard":return{title:a("Untitled"),description:a(""),retailers:[]};default:return{}}}},q1SX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return a(e,t),Promise.reject(e)},t.reportError=a,t.reportMessage=function(e,t){"test"!==app.env&&console.warn(e,t);o.captureMessage(e,t)};var{omit:r}=n("LvDl"),o=n("WSEr"),s=n("lvH+"),i=n("Xbgq");function a(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=app.env}catch(e){t="production"}"test"!==t&&(console.error(e),console.error(e.stack||e.message)),e instanceof i||o.captureException(e,{tags:{error_name:e.name,from:e.from},extra:r(e,"name","message","stack","from")}),n&&s.showError()}},qt6N:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"span",f:[{t:3,r:"pullquote.value",p:[1,7,6]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},qtFk:function(e,t,n){"use strict";e.exports={formats:{bold:n("hv+U"),italic:n("157X"),mark:n("xnDb"),strike:n("jbLp"),superscript:n("ZbOo"),subscript:n("efn1"),firstheader:n("gtSH"),secondheader:n("PhNL"),thirdheader:n("ylbk"),fourthheader:n("axPB"),fifthheader:n("Z91r"),bullet:n("HpKO"),list:n("rPDQ"),blockquote:n("avVH"),link:n("TzQr"),ins:n("14QZ"),del:n("wtCg"),br:n("QWOE"),autolink:n("TSSK"),id:n("kyeX"),position:n("YPbQ"),grouping:n("KJnR"),dropcap:n("3g6Y"),leadgraf:n("HdNO"),endmark:n("QPIe"),ad_placement:n("3hiN"),image:n("0+zM"),pullquote:n("1fi2"),oembed:n("aBYB"),video:n("bBXQ"),hr:n("casY"),html:n("5mjy"),doc:n("WJcc"),small:n("FKmm"),actionbox:n("hc2C"),readmore:n("kOm9"),ratingcard:n("OUIM"),newsletter:n("o757"),credits:n("1bwG"),toh_project_details:n("BUA9"),toh_tools:n("I/Dn"),pym:n("Kgvr")},options:{blockTag:"P",formatOrder:["bold","italic","mark","small","strike","superscript","subscript","autolink","link","actionbox","credits","doc","hr","html","image","oembed","pullquote","ratingcard","newsletter","readmore","video","toh_project_details","toh_tools","pym","position","grouping","blockquote","bullet","list","firstheader","secondheader","thirdheader","fourthheader","fifthheader","dropcap","leadgraf","endmark","ad_placement","br","id"]}}},rPDQ:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",parentTag:"OL",tag:"LI"},{exclusive:!0,inherit:!0})},sMLR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=app.state.get(["community","network","schemaDomain"]);return new RegExp(`(http|https)(://${t}/e/)([0-9]+)`,"g").test(e)},e.exports=t.default},"sg+F":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=t.frameElement;if(!n.hasAttribute("data-preserve-height")){var r=t.document.documentElement.scrollHeight;n.style.height=r+"px"}t.parent!==t.top&&e(t.parent)},e.exports=t.default},"sg+r":function(e,t,n){"use strict";t.activefield=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input, textarea, [contenteditable]";t=e.querySelector(t);var n=e.querySelector(".ql-placeholder");if(null==t)throw new Error("Failed to initialize activefield decorator, could not find target node");var r=function(r){var o;o="value"in t?t.value.length>0:n&&n.textContent.length>0?n.textContent.length>0:t.textContent.length>0,e.classList.toggle("has-content",o),e.classList.toggle("has-focus",r),e.classList.toggle("has-content-or-focus",o||r)},o=function(){r(!0)},s=function(){r(!1)},i=function(){r(document.activeElement===t)},a=new MutationObserver(i);return a.observe(t,{attributes:!0,characterData:!0,subtree:!0}),t.addEventListener("focus",o),t.addEventListener("blur",s),t.addEventListener("input",i),i(),{teardown:()=>{t.removeEventListener("focus",o),t.removeEventListener("blur",s),t.removeEventListener("input",i),a.disconnect()}}}},suft:function(e,t,n){"use strict";var r=n("5qpz"),{defer:o}=n("LvDl");e.exports=function(){o(r.acknowledgeAnnouncements)}},t5HI:function(e,t,n){"use strict";var r=n("FR06");n("Lzo0"),e.exports=function(){Object.assign(r.defaults,{debug:!0,isolated:!0,modifyArrays:!1,once:function(e,t){var n=this,r=function(){n.off(e,r),t.apply(n,arguments)};n.on(e,r)},listenTo:function(e,t,n,r){return n=n.bind(this),(e.on||e.addEventListener).call(e,t,n,r),this.on("teardown",(function(){(e.off||e.removeEventListener).call(e,t,n,r)})),this},listenToOnce:function(e,t,n){return n=n.bind(this),e.once(t,n),this.on("teardown",(function(){e.off(t,n)})),this}}),Object.assign(r.decorators,n("G+OF"),n("yJod"),n("6C0i"),n("sg+r")),r.defaults.onconstruct=function(e){if(null!=this.cursors){var t=app.state.watch(this.cursors);e.data=e.data||{},Object.assign(e.data,t.get()),t.on("update",()=>this.set(t.get()))}},r.defaults.syncCursor=function(e){var t=this.cursors[e];if(!t)throw new Error("unknown cursor for key: "+e);t=app.state.select(t),this.observe(e,e=>t.set(e),{init:!1})},r.defaults.refreshIframeComponent=function(e,t){this.observe(e,e=>{if(e){var n=this.find(t);n&&(n.src=n.src)}})}}},tz4B:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeModal=s,t.getModal=function(e){return app.state.get("modal",e)},t.popModal=function(){var e=app.state.get("modal");e.tail?app.state.set("modal",e.tail):s()},t.pushModal=function(e,t){var n=app.state.get("modal");if(!r(e,o(n,"tail"))){if(e.tail=t||n,app.state.set("modal",e),document.body.classList.add("has-modal"),app.state.get("overlay"))document.querySelector(".m-overlay").classList.remove("is-full-screen")}},t.swapModal=function(e){var t=app.state.get("modal");t.tail&&(e.tail=t.tail);app.state.set("modal",e)};var{isEqual:r,omit:o}=n("LvDl");function s(){(app.state.set("modal",null),document.body.classList.remove("has-modal"),app.state.get("overlay"))&&document.querySelector(".m-overlay").classList.add("is-full-screen")}},"u6+C":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.getCommunity=d,t.getEntitlements=p,t.getPrintOptions=async function(e){var{community:t}=await c("/api/tower/graphql",{query:'query PrintOptions($communityId: Int!) {\n      community(id: $communityId) {\n        desk: siteConfigString(key: "print_desks")\n        category: siteConfigString(key: "print_categories")\n        article_type: siteConfigString(key: "print_article_types")\n        placement: siteConfigString(key: "print_placements")\n      }\n    }',variables:{communityId:e}});if(!t)throw new Error("Community not found.");return Object.keys(t).reduce((e,n)=>t[n]?o(o({},e),{},{[n]:(t[n]?t[n].split("\n"):[]).map(e=>e.trim()).filter(Boolean)}):e,{})},t.loadCommunity=function(e,t){return Promise.all([d(e,t),p(e),l(e)]).then(e=>{let[t,n,r]=e;t.autoTagging&&n.includes("use_no_geo_tags")&&(t.autoTagging.autotagTagTypes=t.autoTagging.autotagTagTypes.filter(e=>!e.includes("geo"))),app.state.set(["community"],t),app.state.set(["entitlements"],n),app.state.set(["user","canAccessChorusVideo"],r||!1)})};var i=n("s4NR"),a=n("kh36"),c=n("XhB+"),u=n("Vsx1"),{getChorusVideoAccess:l}=n("5qpz");async function d(e,t){var{community:n}=await c("/api/tower/graphql",{query:u[t+"Community"],variables:{communityId:e}});if(!n)throw new Error("Community not found.");return"Editor"===t&&(n.autoTagging.autolinkTagTypes=n.autoTagging.autolinkTagTypes.map(e=>e.toLowerCase()),n.autoTagging.autotagTagTypes=n.autoTagging.autotagTagTypes.map(e=>e.toLowerCase())),n}function p(e){var t=i.parse(window.location.search.slice(1));return a("/api/entitlements",{query:{userId:app.state.get(["user","id"]),communityId:e,entitlements:t.entitlements?t.entitlements.split(","):[]}})}},v2gr:function(e,t,n){"use strict";e.exports=function(e){return e&&/\.gif(\?|$)/.test(e.url||e.preview_url||e.src)}},vKTg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/http[s]?:\/\//,"")},e.exports=t.default},wbkn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=r.getDocCursor(e).get(),n=t.head.contents,i=o(t),a=[];for(let[e,t]of Object.entries(i))null==n[e]&&null!=t&&a.push({p:[e],oi:t});if(i.draft)if(n.draft)for(let[e,t]of Object.entries(i.draft))null==n.draft[e]&&null!=t&&a.push({p:["draft",e],oi:t});else a.push({p:["draft"],oi:i.draft});return(a=a.concat(s(n))).length>0?r.resolveOnLocalUpdate(t.id,a,-1):Promise.resolve()};var r=n("dnr0"),o=n("odTr"),s=n("2zRN");e.exports=t.default},wtCg:function(e,t,n){"use strict";e.exports={tag:"DEL"}},x07u:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e,{get:o}=n("LvDl"),s=n("hiad"),i=n("WZPN"),a=n("EfGf"),c=n("Tc/J");r.exports={data:{doc:null,record:null},computed:{displayScore:function(){var e=this.get("doc.head.contents");return"venue"===e.type&&(0===e.score||e.score)||"venue"!==e.type&&e.score},scoreHeading:function(){return"product"===this.get("doc.head.contents.type")?"Overall":"Score"},thumbnailUrl:function(){var e=this.get("doc.head.contents"),t=this.get("record"),n=o(e,["image","src"]);if("game"!==e.type&&!n&&t&&(n=a.imageForRecord(t)),n)return c(n,{fit_in:!0,width:800,height:500})},pros:function(){var e=this.get("doc.head.contents.pros");return e&&!i(e)&&s(e)},cons:function(){var e=this.get("doc.head.contents.cons");return e&&!i(e)&&s(e)},body:function(){var e=this.get("doc.head.contents.body");return e&&s(e)}},oninit:function(){var e=this.get("doc.head.contents");e.hermano_id&&a.getRecord(e.type,e.hermano_id).then(e=>{this.set("record",e)})}},r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"scorecard-inner"},f:[{t:4,n:50,r:"record",f:[{t:7,p:[3,5,51],e:"div",a:{class:"scorecard-title"},f:[{t:2,r:"record.name",p:[3,34,80]}]}],p:[2,3,32]}," ",{t:4,n:50,r:"displayScore",f:[{t:7,p:[7,5,140],e:"div",a:{class:"score-container"},f:[{t:7,p:[8,7,176],e:"div",a:{class:"score-type"},f:[{t:7,p:[9,9,209],e:"p",a:{class:"score-heading"},f:[{t:2,r:"scoreHeading",p:[9,34,234]}]}," ",{t:7,p:[10,9,263],e:"span",a:{class:"score"},f:[{t:2,r:"doc.head.contents.score",p:[10,29,283]}]}]}," ",{t:4,r:"doc.head.contents.platform_scores",f:[{t:7,p:[13,9,384],e:"div",a:{class:"score-type"},f:[{t:7,p:[14,11,419],e:"p",a:{class:"score-heading"},f:[{t:2,r:"./name",p:[14,36,444]}]}," ",{t:7,p:[15,11,472],e:"span",a:{class:"score"},f:[{t:2,r:"./score",p:[15,31,492]}]}]}],p:[12,7,337]}]}],p:[6,3,115]}," ",{t:4,n:50,r:"thumbnailUrl",f:[{t:7,p:[22,5,623],e:"div",a:{class:"scorecard-image"},f:[{t:7,p:[23,7,659],e:"img",a:{src:[{t:2,r:"thumbnailUrl",p:[23,17,669]}]}}]}],p:[21,3,598]}," ",{t:4,n:50,r:"pros",f:[{t:7,p:[28,5,731],e:"h4",a:{class:"description-heading"},f:["Good stuff"]}," ",{t:7,p:[29,5,783],e:"div",a:{class:"description"},f:[{t:3,r:"pros",p:[29,30,808]}]}],p:[27,3,714]}," ",{t:4,n:50,r:"cons",f:[{t:7,p:[32,5,854],e:"h4",a:{class:"description-heading"},f:["Bad stuff"]}," ",{t:7,p:[33,5,905],e:"div",a:{class:"description"},f:[{t:3,r:"cons",p:[33,30,930]}]}],p:[31,3,837]}," ",{t:4,n:50,r:"body",f:[{t:7,p:[36,5,976],e:"div",a:{class:"description"},f:[{t:3,r:"body",p:[36,30,1001]}]}],p:[35,3,959]}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},xnDb:function(e,t,n){"use strict";e.exports={tag:"MARK"}},yJod:function(e,t,n){"use strict";var r=n("GemG"),{debounce:o}=n("LvDl"),s=n("/MMw");function i(e,t){var n,r=function(){var n=e.contentDocument&&e.contentDocument.documentElement;n&&(e.style.height=n.scrollHeight+t+"px",n.style.overflow="hidden")};return s(e).then((function(){e.contentWindow.addEventListener("resize",r),e.contentWindow.twttr&&e.contentWindow.twttr.events.bind("rendered",r),e.contentWindow.FB&&e.contentWindow.FB.Event.subscribe("xfbml.render",r),(n=new MutationObserver(o(r,200))).observe(e,{attributes:!0}),n.observe(e.contentDocument.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),r()})).catch((function(){})),{teardown:function(){try{n&&n.disconnect(),e&&e.contentWindow&&e.contentWindow.removeEventListener("resize",r)}catch(e){console.error(e)}}}}function a(e){return r(e),{teardown:function(){r.destroy(e)}}}t.autosize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"IFRAME"===e.tagName?i(e,t):"TEXTAREA"===e.tagName?a(e):void 0}},ylbk:function(e,t,n){"use strict";e.exports=Object.assign({},{type:"line",tag:"H3"},{exclusive:!0})},yw8Q:function(e,t,n){"use strict";(function(e){var t=n("FR06"),r=e;r.exports.template={v:1,t:[{t:7,p:[1,1,0],e:"div",a:{class:"pym-inner"},f:[{t:7,p:[2,3,26],e:"div",a:{"data-pym-src":[{t:3,r:"pym.url",p:[2,21,44]}]}}," ",{t:7,p:[3,3,67],e:"script",a:{type:"text/javascript",src:"https://pym.nprapps.org/pym.v1.min.js"}}]}]},e.exports=t.extend(r.exports)}).call(this,n("YuTi")(e))},zmXh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("H0mI"),o=n("q1SX"),s={compose(e,t){try{return r.compose(e,t)}catch(e){throw o.reportError(e,!1),e}},apply(e,t){try{return r.apply(e,t)}catch(e){throw o.reportError(e,!1),e}},transform(e,t,n){try{return r.transform(e,t,n)}catch(e){throw o.reportError(e,!1),e}}};t.default=s,e.exports=t.default}}]);
//# sourceMappingURL=commons.15f4257a22bdb0ed0d71.0.js.map