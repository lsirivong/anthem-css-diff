{"version":3,"sources":["webpack:///./client/lib/quill/keybindings/auto_bullet.js","webpack:///./client/lib/quill/keybindings/asterisk_bold.js","webpack:///./client/lib/closest.js","webpack:///./client/lib/quill/keybindings/_inline.js","webpack:///./client/lib/quill/keybindings/remove_empty_line_formats.js","webpack:///./client/components/configure.html","webpack:///./client/components/autosave-datepicker.html","webpack:///./client/lib/quill/keybindings/underscore_italic.js","webpack:///./client/components/form-section.html","webpack:///./client/lib/quill/keybindings/curly_quotes.js","webpack:///./client/components/form-subsection.html","webpack:///./client/routes/configure.js","webpack:///./client/lib/quill/keybindings/save_no_op.js","webpack:///./client/lib/get_color.js","webpack:///./client/lib/quill/keybindings/angle_blockquote.js","webpack:///./client/lib/quill/keybindings/auto_list.js","webpack:///./client/lib/quill/keybindings/toggle_link.js","webpack:///./client/initializers/quill/autosave.js","webpack:///./client/initializers/quill/multi_cursor.js","webpack:///./client/components/quill.html","webpack:///./client/components/autosave-radio.html","webpack:///./client/lib/quill/keybindings/index.js","webpack:///./client/components/tooltip.html","webpack:///./client/components/autosave-toggle.html","webpack:///./client/lib/quill/keybindings/tilde_strike.js","webpack:///./client/lib/quill/keybindings/auto_emdash.js","webpack:///./client/lib/quill/keybindings/enter_remove_header.js","webpack:///./client/lib/quill/keybindings/auto_link.js","webpack:///./client/lib/quill/keybindings/enter_remove_unsplittable_formats.js","webpack:///./client/components/autosave-quill.html","webpack:///./client/lib/quill/keybindings/hash_header.js","webpack:///./client/components/datepicker.html","webpack:///./client/components/radio-button-group.html","webpack:///./client/lib/quill/keybindings/_block.js","webpack:///./client/initializers/quill/objects.js","webpack:///./client/lib/quill/keybindings/auto_fraction.js","webpack:///./client/components/autosave-dropdown.html","webpack:///./client/lib/quill/keybindings/shift_enter_soft_break.js","webpack:///./client/lib/quill/keybindings/toggle_mark.js"],"names":["shiftKey","module","exports","el","selector","matches","parentNode","char","formatName","options","escapedChar","escapeRegExp","edge","pattern","RegExp","Object","assign","key","collapsed","prefix","handler","range","context","this","quill","scroll","whitelist","split","length","insertText","index","format","wrapLength","lastIndexOf","delta","Delta","retain","delete","history","cutoff","updateContents","setSelection","recordSelection","undoOnBackspace","FORMATS","metaKey","ctrlKey","altKey","offset","preventDefault","Ractive","require","component","cursors","doc","docId","externalIds","contents","entitlements","communityId","data","copied","capitalize","printOptions","printPubDateMoment","computed","formattedExternalIds","get","formattedIds","i","name","id","push","useSendToPrint","includes","response","getPrintOptions","makeOptions","map","option","value","label","text","set","placeholder","path","toPlaintext","desk","category","article_type","placement","err","reportError","document","body","classList","add","navigator","clipboard","writeText","template","v","p","optionSelector","t","n","x","r","s","f","e","a","richText","type","page","fieldgroup","block","autosize","inline","currentDateMoment","sectionName","readonly","slot","design","click","m","size","components","tooltip","navigation","extend","dateLabel","disabled","year","month","day","oninit","momentDate","date","observe","saveDate","init","debounce","handleYearMonthDayChange","previous","formattedValue","localUpdate","od","oi","disablePickers","datepicker","class","OPEN_PUNCTUATION","prevText","getText","event","test","insert","toggle","active","noverflow","toggleLabel","toggleIcon","paddingless","ConfigureMetadata","NotFound","customFieldsEnabled","app","render","shortKey","array","socketId","state","indexOf","getModule","link","listenTo","packet","update","handleTextChange","getValue","ops","getContents","autosave","o","cursorManager","theme","addModule","room","socket","pendingDelta","sendLocation","getSelection","emit","on","inLine","inFlight","composeDelta","throttle","userId","user","find","color","getColor","CURSOR_COLORS","transformPosition","setCursor","fullOrUserName","removeCursor","isEqual","op","compose","Quill","closest","toolbar","modules","formats","onrender","matchVisual","userOnly","keyboard","bindings","scrollingContainer","tooltipOptions","modal","querySelector","contains","horizontalPadding","verticalPadding","keyCode","newVal","oldVal","container","root","target","fire","focused","setAttribute","enable","undefined","settingHtml","html","dangerouslyPasteHTML","innerHTML","replace","settingText","setText","settingContents","setContents","onteardown","inlineMode","teardown","forceQuillFocus","clickTarget","original","__quill","focus","inputClass","onSave","save","angleBlockquote","asteriskBold","autoBullet","autoEmdash","autoFraction","autoLink","autoList","curlyQuotes","enterRemoveUnsplittableFormats","enterRemoveHeader","hashHeader","removeEmptyLineFormats","saveNoOp","shiftEnterSoftBreak","tildeStrike","toggleLink","toggleMark","underscoreItalic","uuid","onconstruct","_guid","readOnly","disabledValue","default","invert","toggleValue","oldValue","newValue","change","REMOVE_HEADERS","firstheader","secondheader","thirdheader","fourthheader","fifthheader","keys","suffix","line","getLine","scrollIntoView","LINK_PATTERN","TLD_SET","Set","0","matchText","1","preSpace","2","bareLinkText","3","quotedLinkText","4","url","5","protocol","6","tld","match","has","href","once","REMOVE_FROM_BEFORE_SPLIT","br","endmark","REMOVE_FROM_AFTER_SPLIT","dropcap","leadgraf","position","Promise","resolve","then","formatLine","getPath","sentryActions","initMultiCursor","initObjects","initAutosave","hash","tracked","ignoreChanges","ariaLb","scrollContainer","isMainBody","trackDeltas","Array","isArray","onready","quillContents","contentsDelta","diff","reportMessage","level","extra","initContents","clear","from","ractiveContext","bodyData","isPathMatch","prefixMatch","updatePath","every","item","select","_oldContents","source","BINDINGS","call","moment","chunk","calendarOpen","monthInView","pastIsAllowed","futureIsAllowed","minDateMoment","placeholderDate","calendar","now","daysInMonth","result","calendarItem","today","isSame","isBefore","isAfter","unshift","weeks","monthYearTitle","firstOfMonth","inView","dateText","mdy","parseInt","testMoment","verifyNum","num","isValid","changeMonth","dir","current","newMonth","subtract","selectDay","setToday","validate","isNaN","title","rx","dismissible","twoway","checked","addEventListener","iframe","tagName","contentWindow","JSON","parse","dataset","object","lineId","findClosestId","imageActions","getAndEditImage","image","videoActions","getAndEditVideo","video","oembedActions","editOembed","oembed","subdocActions","editDoc","objectActions","editObject","node","stopAt","VALID_FRACTIONS","PATTERN","fraction","superscript","subscript","oncomplete","mark"],"mappings":"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","file":"9.854d016163c0a3cd102d.0.js","sourcesContent":["import block from './_block';\n\nexport default block(/^[-*]$/, 'bullet');\n","import inline from './_inline';\n\nexport default inline('*', 'bold', {\n  shiftKey: null\n});\n","/**\n * Similar to jQuery's $(el).closest(selector)\n *\n * Return the first element found to match the selector, starting with the\n * element itself, then traversing up through the element's ancestors.\n *\n * If neither the element nor any of its parent elements match the selector,\n * null is returned.\n *\n * Is commonly used to perform event delegation.\n *\n * @param {HTMLElement} el - The element to start searching from.\n * @param {string} selector - A selector expression to match elements against.\n * @returns {?HTMLElement}\n */\nmodule.exports = function closest(el, selector) {\n  while (el && typeof el.matches === 'function') {\n    if (el.matches(selector)) {\n      return el;\n    } else {\n      el = el.parentNode;\n    }\n  }\n  return null;\n};\n","import { Delta } from 'rich-text';\nimport { escapeRegExp } from 'lodash';\n\nexport default function inline(char, formatName, options) {\n  const escapedChar = escapeRegExp(char);\n  const edge = `[^\\\\s${escapedChar}]`;\n  const between = `[^${escapedChar}]*`;\n  const wrappable = `(${edge}|${edge}${between}${edge})`;\n  const pattern = new RegExp(`(^|\\\\s)(${escapedChar}${wrappable})$`);\n\n  return Object.assign({\n    key: char,\n    collapsed: true,\n    prefix: pattern,\n    handler(range, context) {\n      // Abort if the format is not whitelisted\n      if (!this.quill.scroll.whitelist[formatName]) {\n        return true;\n      }\n\n      // Abort if there an even number of the trigger char on this line\n      if (context.prefix.split(char).length % 2 !== 0) {\n        return true;\n      }\n\n      // Insert the char, for undo\n      this.quill.insertText(range.index, char, context.format, 'user');\n\n      // Build a delta that applies the format and removes the fenceposts\n      const wrapLength = context.prefix.length - context.prefix.lastIndexOf(char) - 1;\n      const delta = new Delta()\n        .retain(range.index - wrapLength - 1)\n        .delete(1)\n        .retain(wrapLength, { [formatName]: true })\n        .delete(1);\n\n      // Apply the delta\n      this.quill.history.cutoff();\n      this.quill.updateContents(delta, 'user');\n      this.quill.history.cutoff();\n\n      // Manually fix selection for the removed character\n      this.quill.setSelection(range.index - 1, 0, 'user');\n\n      // Record the selection so it is applied on undo/redo\n      this.quill.history.recordSelection(range.index + 1, range.index - 1);\n\n      // Register backspace as undo shortcut\n      this.quill.history.undoOnBackspace();\n\n      // Turn the applied format back off\n      this.quill.format(formatName, false);\n\n      return false;\n    }\n  }, options);\n}\n","const FORMATS = [\n  'list',\n  'bullet',\n  'blockquote'\n];\n\nexport default {\n  key: ['Backspace', 'Enter'],\n  shiftKey: null,\n  metaKey: null,\n  ctrlKey: null,\n  altKey: null,\n  collapsed: true,\n  offset: 0,\n  format: FORMATS,\n  handler(range, context) {\n    let preventDefault = false;\n\n    for (let format of FORMATS) {\n      if (context.format[format]) {\n        this.quill.format(format, false, 'user');\n        preventDefault = true;\n      }\n    }\n\n    return !preventDefault;\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\n  import { capitalize, get as getPath } from 'lodash';\n  import { getPrintOptions } from '../actions/communities';\n  import { reportError } from '../actions/sentry';\n  import { toPlaintext } from 'convert-rich-text';\n\n  component.exports = {\n    cursors: {\n      doc: ['doc'],\n      docId: ['doc', 'id'],\n      externalIds: ['doc', 'external_ids'],\n      contents: ['doc', 'head', 'contents'],\n      entitlements: ['entitlements'],\n      communityId: ['community', 'id'],\n    },\n\n    data: {\n      copied: false,\n      capitalize: capitalize,\n      printOptions: [],\n      printPubDateMoment: null,\n    },\n\n    computed: {\n      formattedExternalIds: function() {\n        let externalIds = this.get('externalIds');\n        let formattedIds = [];\n\n        for (let i = 0; i < externalIds.length; i++) {\n          const [name, id] = externalIds[i].split(':');\n          formattedIds.push({ name: name, id: id });\n        }\n\n        return formattedIds;\n      },\n      useSendToPrint: function() {\n        return this.get('entitlements').includes('use_send_to_print');\n      },\n    },\n\n    async oninit() {\n      if (this.get('useSendToPrint')) {\n        try {\n          const response = await getPrintOptions(this.get('communityId'));\n          const contents = this.get('contents');\n\n          const makeOptions = options => (options || []).map(option => ({\n            value: option,\n            label: option,\n            text: option,\n          }));\n\n          this.set('deskOptions', {\n            label: 'Print desk',\n            placeholder: 'Select a desk',\n            key: 'print_planned_section',\n            path: ['draft', 'custom_field_texts', 'print_planned_section'],\n            value: toPlaintext(getPath(contents, ['draft', 'custom_field_texts', 'print_planned_section'])),\n            options: makeOptions(response.desk),\n          });\n\n          this.set('categoryOptions', {\n            label: 'Print category',\n            placeholder: 'Select a category',\n            key: 'print_category',\n            path: ['draft', 'custom_field_texts', 'print_category'],\n            value: toPlaintext(getPath(contents, ['draft', 'custom_field_texts', 'print_category'])),\n            options: makeOptions(response.category),\n          });\n\n          this.set('articleTypeOptions', {\n            label: 'Print article type',\n            placeholder: 'Select a type',\n            key: 'print_article_type',\n            path: ['draft', 'custom_field_texts', 'print_article_type'],\n            value: toPlaintext(getPath(contents, ['draft', 'custom_field_texts', 'print_article_type'])),\n            options: makeOptions(response.article_type),\n          });\n\n          this.set('placementOptions', {\n            label: 'Print placement',\n            placeholder: 'Select a placement',\n            key: 'print_placement',\n            path: ['draft', 'custom_field_texts', 'print_placement'],\n            value: toPlaintext(getPath(contents, ['draft', 'custom_field_texts', 'print_placement'])),\n            options: makeOptions(response.placement),\n          });\n        } catch(err) {\n          reportError(err);\n        }\n      }\n\n      document.body.classList.add('is-editable');\n    },\n\n    async copyExternalId(id) {\n      await navigator.clipboard.writeText(id);\n      this.set({ copied: true });\n    },\n  };\n  \ncomponent.exports.template = {v:1,p:{optionSelector:[{t:4,n:50,x:{r:[\"options.length\"],s:\"_0>0\"},f:[{t:7,p:[3,5,34],e:\"form-subsection\",a:{label:[{t:2,r:\"label\",p:[3,29,58]}]},f:[{t:7,p:[4,7,76],e:\"div\",a:{\"class\":\"m-field\"},f:[{t:4,n:50,x:{r:[\"options.length\"],s:\"_0>4\"},f:[{t:7,p:[6,11,143],e:\"autosave-dropdown\",a:{placeholder:[{t:2,r:\"placeholder\",p:[7,26,187]}],options:[{t:2,r:\"options\",p:[8,22,225]}],contents:[{t:2,r:\"contents\",p:[9,23,260]}],value:[{t:2,r:\"value\",p:[10,20,293]}],path:[{t:2,r:\"path\",p:[11,19,322]}],docId:[{t:2,r:\"doc.id\",p:[12,20,351]}],richText:\"true\"}}],p:[5,9,106]},{t:4,n:51,f:[{t:7,p:[16,11,431],e:\"autosave-radio\",a:{id:[{t:2,r:\"key\",p:[17,17,463]}],name:[{t:2,r:\"key\",p:[18,18,489]}],options:[{t:2,r:\"options\",p:[19,22,518]}],value:[{t:2,r:\"value\",p:[20,20,550]}],path:[{t:2,r:\"path\",p:[21,19,579]}],docId:[{t:2,r:\"doc.id\",p:[22,20,608]}],contents:[{t:2,r:\"contents\",p:[23,23,642]}],type:\"radios\",richText:\"true\"}}],x:{r:[\"options.length\"],s:\"_0>4\"}}]}]}],p:[2,3,3]}]},t:[{t:7,p:[11,1,466],e:\"navigation\",a:{page:\"configure\"}},\" \",{t:7,p:[15,1,512],e:\"div\",a:{\"class\":\"l-content m-configure p-flex\"},f:[{t:7,p:[16,3,557],e:\"div\",a:{\"class\":\"l-content__inner p-flex--v\"},f:[{t:7,p:[17,5,602],e:\"form-section\",a:{fieldgroup:\"true\"},f:[{t:7,p:[18,7,641],e:\"form-subsection\",a:{label:\"Corrections\"},f:[{t:7,p:[19,9,687],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"Type the text of your correction here.\"]},\" \",{t:7,p:[23,9,796],e:\"res-input\",a:{\"class\":\"res-input__textarea\",block:0},f:[{t:7,p:[24,11,852],e:\"autosave-quill\",a:{id:\"configure-corrections\",path:\"['draft', 'custom_field_texts', 'corrections']\",docId:[{t:2,r:\"doc.id\",p:[27,20,992]}],contents:[{t:2,r:\"contents\",p:[28,23,1026]}],autosize:\"true\"}}]}]},\" \",{t:7,p:[34,7,1134],e:\"form-subsection\",a:{label:\"Label\"},f:[{t:7,p:[35,9,1174],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"Adds a custom display label to the top of the story. Defaults to section if left blank.\"]},\" \",{t:7,p:[38,9,1331],e:\"autosave-quill\",a:{id:\"configure-label\",path:\"['draft', 'custom_field_texts', 'label']\",docId:[{t:2,r:\"doc.id\",p:[41,18,1453]}],contents:[{t:2,r:\"contents\",p:[42,21,1485]}],autosize:\"true\",inline:\"true\"}}]},\" \",{t:7,p:[48,7,1592],e:\"form-subsection\",f:[{t:7,p:[49,9,1618],e:\"div\",a:{\"class\":\"m-field\"},f:[{t:7,p:[50,11,1650],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"Allows Digital Design to override the standard article template.\"]},\" \",{t:7,p:[54,11,1791],e:\"autosave-toggle\",a:{label:\"Enable override\",path:\"['draft', 'custom_field_flags', 'enable_override']\",docId:[{t:2,r:\"doc.id\",p:[57,20,1933]}],value:[{t:2,r:\"contents.draft.custom_field_flags.enable_override\",p:[58,20,1964]}],\"default\":\"false\",type:\"switch\"}}]},\" \",{t:7,p:[64,9,2110],e:\"div\",a:{\"class\":\"m-field\"},f:[{t:7,p:[65,11,2142],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"Allows Digital Design and Audience teams to remove the right rail on the desktop article page.\"]},\" \",{t:7,p:[69,11,2313],e:\"autosave-toggle\",a:{label:\"Remove right rail\",path:\"['draft', 'custom_field_flags', 'remove_right_rail']\",docId:[{t:2,r:\"doc.id\",p:[72,20,2459]}],value:[{t:2,r:\"contents.draft.custom_field_flags.remove_right_rail\",p:[73,20,2490]}],\"default\":\"false\",type:\"switch\"}}]},\" \",{t:7,p:[79,9,2638],e:\"div\",a:{\"class\":\"m-field\"},f:[{t:7,p:[80,11,2670],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"Stop article page from refreshing automatically. Useful if the page contains a long video.\"]},\" \",{t:7,p:[84,11,2837],e:\"autosave-toggle\",a:{label:\"Suppress refresh\",path:\"['draft', 'custom_field_flags', 'suppress_refresh']\",docId:[{t:2,r:\"doc.id\",p:[87,20,2981]}],value:[{t:2,r:\"contents.draft.custom_field_flags.suppress_refresh\",p:[88,20,3012]}],\"default\":\"false\",type:\"switch\"}}]}]},\" \",{t:4,n:50,r:\"useSendToPrint\",f:[{t:4,r:\"deskOptions\",f:[{t:8,r:\"optionSelector\",p:[97,11,3240]}],p:[96,9,3213]},\" \",{t:4,r:\"categoryOptions\",f:[{t:8,r:\"optionSelector\",p:[101,11,3325]}],p:[100,9,3294]},\" \",{t:4,r:\"articleTypeOptions\",f:[{t:8,r:\"optionSelector\",p:[105,11,3417]}],p:[104,9,3383]},\" \",{t:4,r:\"placementOptions\",f:[{t:8,r:\"optionSelector\",p:[109,11,3510]}],p:[108,9,3478]},\" \",{t:7,p:[112,9,3569],e:\"form-subsection\",a:{label:\"Print publication date\"},f:[{t:7,p:[113,11,3628],e:\"autosave-datepicker\",a:{docId:[{t:2,r:\"doc.id\",p:[114,20,3668]}],contents:[{t:2,r:\"contents\",p:[115,23,3702]}],path:\"['print_publication_date']\",currentDateMoment:[{t:2,r:\"printPubDateMoment\",p:[117,32,3793]}],sectionName:\"print_pub_date\"}}]},\" \",{t:7,p:[122,9,3928],e:\"form-subsection\",a:{label:\"Editor Note\"},f:[{t:7,p:[123,11,3976],e:\"res-input\",a:{\"class\":\"res-input__textarea\",block:0},f:[{t:7,p:[124,13,4034],e:\"autosave-quill\",a:{id:\"configure-editor-note\",path:\"['draft', 'custom_field_texts', 'print_editors_note']\",docId:[{t:2,r:\"doc.id\",p:[127,22,4187]}],contents:[{t:2,r:\"contents\",p:[128,25,4223]}],autosize:\"true\"}}]}]}],p:[95,7,3182]},\" \",{t:4,n:52,r:\"formattedExternalIds\",f:[{t:7,p:[136,9,4392],e:\"form-subsection\",f:[{t:7,p:[137,11,4420],e:\"div\",a:{\"class\":\"m-field m-field__shortlink-input\"},f:[{t:7,p:[138,13,4479],e:\"res-input\",f:[{t:7,p:[139,15,4505],e:\"label\",f:[{t:2,x:{r:[\"capitalize\",\"name\"],s:\"_0(_1)\"},p:[140,17,4529]},\" Id \",{t:7,p:[141,17,4569],e:\"tooltip\",a:{placement:\"top-start\"},f:[\"This is the \",{t:2,r:\"name\",p:[142,31,4631]},\" Id of this story.\"]}]},\" \",{t:7,p:[145,15,4724],e:\"input\",a:{readonly:0,type:\"text\",value:[{t:2,r:\"id\",p:[145,50,4759]}]}},\" \",{t:7,p:[146,15,4784],e:\"res-button\",a:{slot:\"outer-right\",design:\"primary\"},v:{click:{m:\"copyExternalId\",a:{r:[\"id\"],s:\"[_0]\"}}},f:[{t:7,p:[147,17,4879],e:\"res-icon\",a:{name:\"copy\"}},\" \",{t:7,p:[148,17,4920],e:\"button\"}]},\" \",{t:4,r:\"copied\",f:[{t:7,p:[151,17,5008],e:\"span\",a:{slot:\"help\",\"class\":\"help\"},f:[{t:7,p:[152,19,5058],e:\"res-icon\",a:{name:\"check-circle\",size:\"medium\"}},\" Copied!\"]}],p:[150,15,4980]}]}]}]}],p:[135,7,4353]}]}]}]}]};\ncomponent.exports.components = {\"autosave-datepicker\": require('./autosave-datepicker.html'), \"autosave-radio\": require('./autosave-radio.html'), \"autosave-dropdown\": require('./autosave-dropdown.html'), tooltip: require('./tooltip.html'), \"autosave-quill\": require('./autosave-quill.html'), \"autosave-toggle\": require('./autosave-toggle.html'), \"form-subsection\": require('./form-subsection.html'), \"form-section\": require('./form-section.html'), navigation: require('./navigation.html')};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\nimport { get as getPath, debounce } from 'lodash';\nimport moment from 'moment-timezone';\nimport { localUpdate } from '../actions/autosave';\n\ncomponent.exports = {\n  data: {\n    label: null,\n    dateLabel: 'Select a date',\n    docId: null,\n    contents: null,\n    path: null,\n    disabled: false,\n    sectionName: 'section-name',\n    year: null,\n    month: null,\n    day: null,\n  },\n\n  oninit: function() {\n    const value = getPath(this.get('contents'), this.get('path'));\n    if (value) {\n      const momentDate = moment(value);\n      this.set('datetime', momentDate);\n      this.set('year', momentDate.year());\n      this.set('month', momentDate.month());\n      this.set('day', momentDate.date());\n    }\n\n    this.observe('datetime', this.saveDate, { init: false });\n    this.observe('year month day', debounce(this.handleYearMonthDayChange, 100), { init: false });\n  },\n\n  handleYearMonthDayChange: function() {\n    const year = this.get('year');\n    const month = this.get('month') + 1;\n    const day = this.get('day');\n    if (year && month && day) {\n      this.set('datetime', moment(`${year}-${month}-${day}`, 'YYYY-M-D'));\n    } else {\n      this.set('datetime', null);\n    }\n  },\n\n  saveDate: function() {\n    const previous = getPath(this.get('contents'), this.get('path'));\n    const value = this.get('datetime');\n    const formattedValue = value ? moment(value).format('YYYY-MM-DD') : null;\n\n    if (previous === formattedValue) {\n      return;\n    }\n\n    localUpdate(this.get('docId'), [{\n      p: this.get('path'),\n      od: previous,\n      oi: formattedValue,\n    }]);\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:4,n:50,r:\"label\",f:[{t:7,p:[4,3,65],e:\"label\",a:{\"class\":\"m-datetime__title\"},f:[{t:3,r:\"label\",p:[4,36,98]}]}],p:[3,1,49]},{t:7,p:[6,1,126],e:\"section\",a:{\"class\":\"m-datetime\"},f:[{t:7,p:[7,3,157],e:\"datepicker\",a:{year:[{t:2,r:\"year\",p:[8,11,179]}],month:[{t:2,r:\"month\",p:[9,12,200]}],day:[{t:2,r:\"day\",p:[10,10,220]}],label:[{t:2,r:\"dateLabel\",p:[11,12,240]}],disablePickers:[{t:2,r:\"disabled\",p:[12,21,275]}],sectionName:[{t:2,r:\"sectionName\",p:[13,18,306]}]}}]}]};\ncomponent.exports.components = {datepicker: require('./datepicker.html')};\nmodule.exports = Ractive.extend(component.exports);\n","import inline from './_inline';\n\nexport default inline('_', 'italic', {\n  shiftKey: null\n});\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  data: {\n    fieldgroup: false,\n    class: '',\n    label: ''\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"section\",a:{\"class\":[{t:4,n:50,r:\"fieldgroup\",f:[\"m-field-group\"],p:[1,17,16]},\" \",{t:4,n:50,r:\"class\",f:[{t:2,r:\"class\",p:[1,69,68]}],p:[1,56,55]}]},f:[{t:4,n:50,r:\"label\",f:[{t:7,p:[3,5,107],e:\"h2\",f:[{t:2,r:\"label\",p:[3,9,111]}]}],p:[2,3,89]},\" \",{t:2,r:\"yield\",p:[5,3,138]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","import { Delta } from 'rich-text';\n\nconst OPEN_PUNCTUATION = /(^|[\\s{[(<'\"])$/;\n\nexport default {\n  key: ['\"', '\\''],\n  shiftKey: null,\n  handler(range, context) {\n    let prevText = this.quill.getText(range.index - 1, 1);\n    let char;\n    if (context.event.key === '\"') {\n      char = OPEN_PUNCTUATION.test(prevText) ? '' : '';\n    } else {\n      char = OPEN_PUNCTUATION.test(prevText) ? '' : '';\n    }\n    let delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .insert(char, context.format);\n    this.quill.updateContents(delta, 'user');\n    this.quill.setSelection(range.index + 1, 0, 'silent');\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  data: {\n    label: '',\n    class: '',\n    toggle: false,\n    active: false,\n    noverflow: false,\n    toggleLabel: '',\n    toggleIcon: 'gear'\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":[\"m-field-group__subsection \",{t:2,r:\"class\",p:[1,39,38]}]},m:[{t:4,n:50,r:\"noverflow\",f:[\"style=\\\"overflow: initial;\\\"\"],p:[1,50,49]}],f:[{t:4,n:50,r:\"toggle\",f:[{t:7,p:[3,5,122],e:\"res-button\",a:{design:\"default\",paddingless:0},f:[{t:7,p:[4,7,170],e:\"res-icon\",a:{name:[{t:2,r:\"toggleIcon\",p:[4,23,186]}]}},\" \",{t:7,p:[5,7,210],e:\"button\",a:{type:\"button\"},v:{click:{m:\"toggle\",a:{r:[],s:\"[\\\"active\\\"]\"}}},f:[{t:2,r:\"toggleLabel\",p:[5,57,260]}]}]},\" \",{t:4,n:50,r:\"active\",f:[{t:2,r:\"yield\",p:[8,7,328]}],p:[7,5,307]}],p:[2,3,103]},{t:4,n:51,f:[{t:4,n:50,r:\"label\",f:[{t:7,p:[12,7,385],e:\"h3\",f:[{t:2,r:\"label\",p:[12,11,389]}]}],p:[11,5,365]},\" \",{t:2,r:\"yield\",p:[14,5,420]}],r:\"toggle\"}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","const ConfigureMetadata = require('../components/configure.html');\nconst NotFound = require('../components/404.html');\nconst customFieldsEnabled = require('../lib/custom_fields_enabled');\n\nmodule.exports = function() {\n  if (customFieldsEnabled()) {\n    app.render(ConfigureMetadata);\n  } else {\n    app.render(NotFound);\n  }\n};\n","// Do nothing on cmd/ctrl+s, since autosave will handle it for us\nexport default {\n  key: 's',\n  shortKey: true,\n  handler() {\n    return false;\n  }\n};\n","module.exports = function getColor(array, socketId) {\n  var socketIds = app.state.get('users').map(({ socketId }) => socketId);\n  var index = socketIds.indexOf(socketId);\n  return array[index % array.length];\n};\n","import block from './_block';\n\nexport default block(/^>$/, 'blockquote');\n","import block from './_block';\n\nexport default block(/^1[.)]$/, 'list');\n","export default {\n  key: 'k',\n  shortKey: true,\n  handler(range, context) {\n    const tooltip = this.quill.getModule('link-tooltip');\n    if (tooltip) {\n      tooltip.toggle(!context.format.link);\n    } else {\n      return true;\n    }\n  }\n};\n","var autosave = require('../../actions/autosave');\n\nexport default function initAutosave(component, quill) {\n  // Autosave events\n  component.listenTo(app, 'autosave.remote-update', (docId, packet) => component.update(docId, packet.delta));\n  component.listenTo(app, 'autosave.local-update', component.update);\n  component.listenTo(app, 'autosave.check-update', (docId) => {\n    if (docId === component.get('docId')) {\n      quill.update();\n    }\n  });\n\n  // Quill text-change\n  component.listenTo(quill, 'text-change', component.handleTextChange);\n\n  // On load, if ops.length === 0, this is a new doc. We need to send an\n  // autosave packet with the initial newline that Quill inserts by default\n  if (component.getValue().ops.length === 0) {\n    var contents = quill.getContents();\n    autosave.localUpdate(component.get('docId'), [{\n      p: component.get('path'),\n      t: 'rich-text',\n      o: contents\n    }], -1);\n  }\n}\n","var Delta = require('rich-text').Delta;\nvar { throttle, isEqual } = require('lodash');\nvar getColor = require('../../lib/get_color');\n\nconst CURSOR_COLORS = [\n  '#BC1B92',\n  '#406EE2',\n  '#68A1B5',\n  '#DCA427',\n  '#E04D20'\n];\n\nexport default function initMultiCursor(component, quill, path, id) {\n  var cursorManager = quill.theme.addModule('multi-cursor', true);\n  var docId = component.get('docId');\n  var room = `${id}.${path}`;\n  var socket = app.socket;\n  var pendingDelta = new Delta();\n\n  // Connection logic\n  socket.emit('cursors.connect', room);\n  socket.on('reconnect', () => socket.emit('cursors.connect', room));\n  component.on('teardown', () => socket.emit(`cursors.${room}.leave`));\n\n  // Compose incoming packets that apply to the current document\n  component.listenTo(app, `autosave.dirty.${docId}`, (inLine, inFlight) => {\n    if (inLine) {\n      pendingDelta = composeDelta(pendingDelta, inLine.delta, path);\n    }\n    if (inFlight) {\n      pendingDelta = composeDelta(pendingDelta, inFlight.delta, path);\n    }\n  });\n\n  // Reset the pending delta whenever autosave resolves\n  component.listenTo(app, `autosave.clean.${docId}`, () => {\n    pendingDelta = new Delta();\n  });\n\n  function sendLocation() {\n    var range = quill.getSelection();\n    var index = range ? range.index + range.length : null;\n    socket.emit(`cursors.${room}.change`, index);\n  }\n\n  component.listenTo(quill, 'selection-change', throttle(sendLocation, 500));\n  component.listenTo(app, `autosave.success.${docId}`, sendLocation);\n\n  // Move cursor based on server-side data\n  component.listenTo(socket, `cursors.${room}.change`, (socketId, userId, index) => {\n    if (index != null) {\n      var user = app.state.get(['users']).find(({ id }) => id === userId);\n      var color = getColor(CURSOR_COLORS, socketId);\n      index = pendingDelta.transformPosition(index);\n      cursorManager.setCursor(userId, index, user.fullOrUserName, color);\n    } else {\n      cursorManager.removeCursor(userId);\n    }\n  });\n}\n\nfunction composeDelta(pendingDelta, delta, path) {\n  for (let op of delta) {\n    if (isEqual(op.p, path) && op.t === 'rich-text') {\n      pendingDelta = pendingDelta.compose(op.o);\n    }\n  }\n\n  return pendingDelta;\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar Quill = require('quill');\nvar closest = require('../lib/closest');\n\ncomponent.exports = {\n  data: {\n    disabled: false,\n    toolbar: false,\n    inline: false,\n    id: null,\n    modules: '',\n    formats: '',\n    autosize: false\n  },\n  onrender: function() {\n    var options = {\n      modules: {\n        'debounced-text-change': true,\n        'double-spaces': true,\n        clipboard: {\n          matchVisual: false\n        },\n        history: {\n          userOnly: true\n        },\n        'inline-mode': this.get('inline'),\n        keyboard: {\n          bindings: require('../lib/quill/keybindings')\n        },\n        'soft-breaks': true\n      },\n      formats: this.get('formats').split(/\\s+/)\n    };\n\n    options.formats.push('author');\n\n    if (this.get('scrollContainer')) {\n      options.scrollingContainer = this.get('scrollContainer');\n    }\n\n    if (this.get('formats').includes('link')) {\n      let tooltipOptions = {};\n      let modal = document.querySelector('.p-modal');\n      if (modal && modal.contains(this.el)) {\n        tooltipOptions = { horizontalPadding: 0, verticalPadding: 10 };\n      }\n      options.modules['link-tooltip'] = tooltipOptions;\n      // Prevent ctrl + k from opening address bar search in windows chrome / chromeos chrome\n      this.listenTo(document, 'keydown', function(e) {\n        if (e.keyCode === 75 && e.ctrlKey === true) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    if (this.get('formats').includes('autolink')) {\n      options.modules['autolink-tooltip'] = true;\n    }\n\n    if (this.get('placeholder') != null) {\n      options.modules.placeholder = {\n        placeholder: this.get('placeholder'),\n        autosize: this.get('autosize')\n      };\n      this.observe('placeholder', (newVal, oldVal) => {\n        if (newVal !== oldVal) {\n          this.quill.getModule('placeholder').set(newVal);\n        }\n      }, { init: false });\n    }\n\n    if (this.get('modules')) {\n      for (let key of this.get('modules').split(/\\s+/)) {\n        options.modules[key] = true;\n      }\n    }\n\n    if (this.get('toolbar')) {\n      options.modules.toolbar = {\n        container: this.get('toolbar')\n      };\n    }\n\n    var quill = this.quill = new Quill(this.find('div'), options);\n\n    // If a link is clicked, call preventDefault() to prevent page.js from taking over\n    this.listenTo(quill.root, 'click', e => {\n      if (closest(e.target, 'a')) {\n        e.preventDefault();\n      }\n    });\n\n    if (this.get('toolbar')) {\n      quill.on('selection-change', (range) => {\n        this.fire('focus-changed', { focused: range != null, id: this.get('toolbar') });\n      });\n    }\n\n    // TODO: make Quill handle ariaLb logic: https://github.com/voxmedia/anthem/pull/623/files#r47805753\n    if (this.get('ariaLb')) {\n      quill.root.setAttribute('aria-labelledby', this.get('ariaLb'));\n    }\n\n    // bind enabled attribute to editor state\n    this.observe('disabled', disabled => quill.enable(!disabled));\n\n    // notify quill when scrollContainer changes\n    this.observe('scrollContainer', selector => {\n      quill.scrollingContainer = document.querySelector(selector);\n    }, { init: false });\n\n    if (this.get('html') !== undefined) {\n      // e.g. html=\"{{someHTML}}\"\n      var settingHtml = false;\n\n      // html -> quill\n      this.observe('html', function(html) {\n        if (!settingHtml) { quill.clipboard.dangerouslyPasteHTML(html || ''); }\n      });\n\n      // quill -> html\n      this.listenTo(quill, 'debounced-text-change', function() {\n        var html = quill.root.innerHTML\n          .replace(/^<p>|(<br>)?<\\/p>$/g, '')\n          .replace(/<\\/p><p>/g, '<br>');\n\n        settingHtml = true;\n        this.set('html', html);\n        settingHtml = false;\n      });\n    } else if (this.get('text') !== undefined) {\n      // e.g. text=\"{{someText}}\"\n      var settingText = false;\n\n      this.observe('text', text => {\n        if (!settingText) {\n          quill.setText(text || '');\n        }\n      });\n\n      this.listenTo(quill, 'debounced-text-change', () => {\n        settingText = true;\n        this.set('text', quill.getText().replace(/\\n$/, ''));\n        settingText = false;\n      });\n    } else if (this.get('contents') !== undefined) {\n      // e.g. contents=\"{{someContents}}\"\n      var settingContents = false;\n\n      // set initial contents\n      this.observe('contents', function(contents) {\n        if (!settingContents) { quill.setContents(contents || []); }\n      });\n\n      // set up two-way binding\n      this.listenTo(quill, 'debounced-text-change', function() {\n        settingContents = true;\n        this.set('contents', quill.getContents());\n        settingContents = false;\n      });\n    }\n\n    this.fire('ready', quill);\n  },\n  onteardown: function() {\n    const inlineMode = this.quill && this.quill.getModule('inline-mode');\n    if (inlineMode) {\n      inlineMode.teardown();\n    }\n  },\n  forceQuillFocus: function() {\n    const clickTarget = this.event.original.target;\n    if (!clickTarget.classList.contains('res-input__input')) return;\n    clickTarget.__quill.focus();\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[2,1,115],e:\"div\",a:{\"data-gramm\":\"false\",\"class\":[{t:2,r:\"class\",p:[2,32,146]}],id:[{t:2,r:\"id\",p:[2,47,161]}],\"use-as-res-input\":0},v:{click:{m:\"forceQuillFocus\",a:{r:[],s:\"[]\"}}}}]};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\nimport { get as getPath } from 'lodash';\nimport { Delta } from 'rich-text';\nimport { localUpdate } from '../actions/autosave';\n\ncomponent.exports = {\n  data: {\n    value: null,\n    name: null,\n    options: null,\n    path: null,\n    docId: null,\n    contents: null,\n    inputClass: 'is-small',\n    type: 'buttons',\n    disabled: false,\n    richText: false,\n  },\n  oninit: function() {\n    this.on('save', this.onSave);\n  },\n  onSave: function(value) {\n    const path = this.get('path');\n    const previous = getPath(this.get('contents'), path);\n    const insert = this.get('richText') ?\n      new Delta().insert(value) : value;\n\n    localUpdate(this.get('docId'), [{\n      p: path,\n      od: previous,\n      oi: insert\n    }]);\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[3,1,57],e:\"radio-button-group\",a:{value:[{t:2,r:\"value\",p:[4,10,86]}],options:[{t:2,r:\"options\",p:[5,12,108]}],type:[{t:2,r:\"type\",p:[7,9,146]}],inputClass:[{t:2,r:\"inputClass\",p:[8,15,170]}],disabled:[{t:2,r:\"disabled\",p:[9,13,198]}],name:[{t:2,r:\"name\",p:[10,9,220]}]},v:{save:\"save\"}}]};\ncomponent.exports.components = {\"radio-button-group\": require('./radio-button-group.html')};\nmodule.exports = Ractive.extend(component.exports);\n","import angleBlockquote from './angle_blockquote';\nimport asteriskBold from './asterisk_bold';\nimport autoBullet from './auto_bullet';\nimport autoEmdash from './auto_emdash';\nimport autoFraction from './auto_fraction';\nimport autoLink from './auto_link';\nimport autoList from './auto_list';\nimport curlyQuotes from './curly_quotes';\nimport enterRemoveHeader from './enter_remove_header';\nimport enterRemoveUnsplittableFormats from './enter_remove_unsplittable_formats';\nimport hashHeader from './hash_header';\nimport removeEmptyLineFormats from './remove_empty_line_formats';\nimport saveNoOp from './save_no_op';\nimport shiftEnterSoftBreak from './shift_enter_soft_break';\nimport tildeStrike from './tilde_strike';\nimport toggleLink from './toggle_link';\nimport toggleMark from './toggle_mark';\nimport underscoreItalic from './underscore_italic';\n\nexport default {\n  angleBlockquote,\n  asteriskBold,\n  autoBullet,\n  autoEmdash,\n  autoFraction,\n  autoLink,\n  autoList,\n  curlyQuotes,\n  enterRemoveUnsplittableFormats,\n  enterRemoveHeader,\n  hashHeader,\n  removeEmptyLineFormats,\n  saveNoOp,\n  shiftEnterSoftBreak,\n  tildeStrike,\n  toggleLink,\n  toggleMark,\n  underscoreItalic,\n  // Turn off these native bindings\n  'blockquote empty enter': null,\n  'header enter': null,\n  'list autofill': null,\n  'list empty enter': null,\n  'outdent backspace': null\n};\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  data: {\n    placement: 'bottom-end',\n    uuid: null,\n    class: ''\n  },\n  onconstruct() {\n    this.data.uuid = this._guid;\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"div\",a:{\"class\":[\"m-tooltip \",{t:2,r:\"class\",p:[1,23,22]}]},f:[{t:7,p:[2,3,36],e:\"res-button\",a:{id:[{t:2,r:\"uuid\",p:[2,19,52]}],design:\"default\",paddingless:0},f:[{t:7,p:[3,5,96],e:\"res-icon\",a:{name:\"tooltip\"}},\" \",{t:7,p:[4,5,127],e:\"button\",a:{type:\"button\"}}]},\" \",{t:7,p:[6,3,177],e:\"res-dropdown\",a:{design:\"dark\",\"for\":[{t:2,r:\"uuid\",p:[6,36,210]}],placement:[{t:2,r:\"placement\",p:[6,57,231]}]},m:[{t:4,n:50,r:\"active\",f:[\"visible\"],p:[6,72,246]}],f:[{t:2,r:\"yield\",p:[7,5,280]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\nvar autosave = require('../actions/autosave');\n\n/*\nParameters:\n\nlabel [String] (optional) - Accessibly labels the input.\n\nvalue [Boolean] - A cursor representing the checkbox's value.\n\npath [String] - The path to the value for autosaving.\n\ndefault [Boolean] - The default to save to value if the cursor is null on initialization.\n\ntype [string] - The kind of toggle. Currently available: 'switch', 'checkbox'.\n\ninvert [Boolean]  - Determines whether toggle value is inverted.\n*/\n\ncomponent.exports = {\n  cursors: {\n    readOnly: ['readOnly']\n  },\n  data: {\n    docId: null,\n    value: null,\n    disabledValue: null,\n    default: false,\n    path: null,\n    disabled: false,\n    label: '',\n    type: 'switch',\n    invert: false\n  },\n  computed: {\n    toggleValue: function() {\n      if (this.get('disabled') && this.get('disabledValue') != null) {\n        return this.get('disabledValue');\n      }\n      return this.get('invert') ? !this.get('value') : this.get('value');\n    }\n  },\n  oninit: function() {\n    if (this.get('value') == null) {\n      autosave.localUpdate(this.get('docId'), [{\n        p: this.get('path'),\n        oi: this.get('default')\n      }], -1);\n    }\n  },\n  toggle: function() {\n    var oldValue = this.get('value');\n    var newValue = !oldValue;\n    autosave.localUpdate(this.get('docId'), [{\n      p: this.get('path'),\n      od: oldValue,\n      oi: newValue\n    }]);\n    this.fire('toggle', newValue);\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:4,n:50,x:{r:[\"type\"],s:\"_0==\\\"switch\\\"\"},f:[{t:7,p:[2,3,27],e:\"res-switch\",m:[{t:4,r:\"toggleValue\",f:[\"checked\"],p:[2,15,39]},{t:4,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},f:[\"disabled\"],p:[2,55,79]}],v:{change:{m:\"toggle\",a:{r:[],s:\"[]\"}}},a:{\"class\":[{t:2,r:\"class\",p:[2,122,146]}]},f:[{t:7,p:[3,5,162],e:\"input\",a:{type:\"checkbox\"}},\" \",{t:7,p:[4,5,190],e:\"label\",f:[{t:2,r:\"label\",p:[4,12,197]}]}]}],p:[1,1,0]},{t:4,n:51,f:[{t:7,p:[7,3,242],e:\"res-checkbox\",m:[{t:4,r:\"toggleValue\",f:[\"checked\"],p:[7,17,256]},{t:4,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},f:[\"disabled\"],p:[7,57,296]}],v:{change:{m:\"toggle\",a:{r:[],s:\"[]\"}}},a:{\"class\":[{t:2,r:\"class\",p:[7,124,363]}]},f:[{t:7,p:[8,5,379],e:\"input\",a:{type:\"checkbox\"}},\" \",{t:7,p:[9,5,407],e:\"label\",f:[{t:2,r:\"label\",p:[9,12,414]}]}]}],x:{r:[\"type\"],s:\"_0==\\\"switch\\\"\"}}]};\nmodule.exports = Ractive.extend(component.exports);\n","import inline from './_inline';\n\nexport default inline('~', 'strike', {\n  shiftKey: null\n});\n","import { Delta } from 'rich-text';\n\nexport default {\n  key: '-',\n  collapsed: true,\n  prefix: /-$/,\n  handler(range, context) {\n    const delta = new Delta()\n      .retain(range.index - 1)\n      .delete(2)\n      .insert('', context.format);\n\n    // Insert the dash normally, for undo\n    this.quill.insertText(range.index, '-', context.format, 'user');\n\n    // Apply the delta\n    this.quill.history.cutoff();\n    this.quill.updateContents(delta, 'user');\n    this.quill.history.cutoff();\n\n    // Manually change the selection upon undo/redo\n    this.quill.setSelection(range.index, 0, 'silent');\n    this.quill.history.recordSelection(range.index + 1, range.index);\n\n    // Register backspace as undo shortcut\n    this.quill.history.undoOnBackspace();\n  }\n};\n","// When hitting 'Enter' at the end of a paragraph formatted as a header,\n// the next line should revert to standard paragraph formatting\n\nimport { Delta } from 'rich-text';\n\nconst REMOVE_HEADERS = {\n  firstheader: null,\n  secondheader: null,\n  thirdheader: null,\n  fourthheader: null,\n  fifthheader: null\n};\n\nexport default {\n  key: 'Enter',\n  collapsed: true,\n  format: Object.keys(REMOVE_HEADERS),\n  suffix: /^$/,\n  handler(range, context) {\n    let [line, offset] = this.quill.getLine(range.index);\n    let delta = new Delta()\n      .retain(range.index)\n      .insert('\\n', context.format)\n      .retain(line.length() - offset - 1)\n      .retain(1, REMOVE_HEADERS);\n    this.quill.updateContents(delta, 'user');\n    this.quill.setSelection(range.index + 1, 'silent');\n    this.quill.scrollIntoView();\n  }\n};\n","import { Delta } from 'rich-text';\n\n// Matches URLs with optional preceeding link text separated by colon, e.g:\n//   Vox:vox.com\n//   \"The Verge Podcasts\":https://theverge.com/podcasts\n\n// Comments and whitespace are stripped to turn into a real RegExp\n// Compiled version at: http://rubular.com/r/QPbcWUWuqi\nconst LINK_PATTERN = new RegExp(`\n  # Preceeding space, or beginning of line (capture group 1)\n  (^|\\\\s)\n\n  # Link text + colon separator (optional), e.g. <\"my link text\":>\n  (?:\n    # The link text itself, either:\n    (?:\n      ([^\\\\s\"]+)         # A run of non-whitespace, non-quote characters (capture group 2)\n      |\n      [\"]([^\"]+)[\"]  # Anything between quote marks (capture group 3)\n    )\n\n    # Separator\n    :\n  )?\n\n  # URL (capture group 4)\n  (\n    (https?:\\\\/\\\\/)?      # Protocol (optional, capture group 5)\n    (?:[\\\\w-]+\\\\.)+       # Subdomains\n    ([\\\\w-]+)             # TLD (capture group 6)\n    (?::\\\\d+)?            # Port (optional)\n    (?:\\\\/[^\\\\s:]*?)?     # Path starting with a / (optional)\n  )\n\n  # Trailing punctuation (optional)\n  (?:[.,'\":)])?\n\n  # Anchored to end\n  $\n`.replace(/(\\s+|#.*?\\n)/g, ''));\n\nconst TLD_SET = new Set(['com', 'net', 'org', 'gov', 'co', 'uk', 'us', 'ca', 'eu', 'biz', 'info', 'io', 'ly']);\n\nexport default {\n  key: ['Enter', ' '],\n  collapsed: true,\n  shiftKey: null,\n  prefix: LINK_PATTERN,\n  handler(range, context) {\n    if (!this.quill.scroll.whitelist.link) {\n      return true;\n    }\n\n    const {\n      0: matchText,\n      1: preSpace,\n      2: bareLinkText,\n      3: quotedLinkText,\n      4: url,\n      5: protocol,\n      6: tld\n    } = context.prefix.match(LINK_PATTERN);\n\n    if (!TLD_SET.has(tld)) {\n      return true;\n    }\n\n    // Prepend protocol if necessary\n    const href = protocol ? url : `http://${url}`;\n\n    // Make a delta the formats the matched text with the url\n    const delta = new Delta()\n      .retain(range.index - matchText.length + preSpace.length);\n\n    if (bareLinkText) {\n      delta.retain(bareLinkText.length, { link: href });\n      delta.delete(1 + url.length); // The separator colon and url\n    } else if (quotedLinkText) {\n      delta.delete(1); // The opening quote\n      delta.retain(quotedLinkText.length, { link: href });\n      delta.delete(2 + url.length); // The closing quote, separator colon, and url\n    } else {\n      delta.retain(url.length, { link: href });\n    }\n\n    // Allow the default behavior to happen first\n    this.quill.once('debounced-text-change', () => {\n      // Apply the delta\n      this.quill.history.cutoff();\n      this.quill.updateContents(delta, 'user');\n      this.quill.history.cutoff();\n\n      // Ensure the selection remains unchanged upon undo/redo\n      this.quill.history.recordSelection(range.index + 1);\n\n      // Register backspace as undo shortcut\n      this.quill.history.undoOnBackspace();\n    });\n\n    return true;\n  }\n};\n","// Normally when a line is split, both the original and new lines are formatted\n// exactly the same. For some attributes, we want only the old line to keep the\n// relevant format, and to strip it from the new one (or vice versa).\n\nconst REMOVE_FROM_BEFORE_SPLIT = {\n  br: false,\n  endmark: false\n};\n\nconst REMOVE_FROM_AFTER_SPLIT = {\n  dropcap: false,\n  leadgraf: false,\n  position: false\n};\n\nexport default {\n  key: 'Enter',\n  shiftKey: false,\n  format: [\n    ...Object.keys(REMOVE_FROM_BEFORE_SPLIT),\n    ...Object.keys(REMOVE_FROM_AFTER_SPLIT)\n  ],\n  handler(range) {\n    // Allow the enter key to split a line normally, then remove formats\n    Promise.resolve().then(() => {\n      this.quill.formatLine(range.index, 1, REMOVE_FROM_BEFORE_SPLIT, 'user');\n      this.quill.formatLine(range.index + 1, 1, REMOVE_FROM_AFTER_SPLIT, 'user');\n    });\n    return true;\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { Delta } = require('rich-text');\nvar { get: getPath, isEqual } = require('lodash');\nvar autosave = require('../actions/autosave');\nvar sentryActions = require('../actions/sentry');\nvar initMultiCursor = require('../initializers/quill/multi_cursor');\nvar initObjects = require('../initializers/quill/objects');\nvar initAutosave = require('../initializers/quill/autosave');\nvar hash = require('../../shared/content-hash');\n\nfunction initContents(component, quill, contents) {\n  quill.setContents(contents);\n  const quillContents = quill.getContents();\n  const contentsDelta = new Delta(contents);\n  let diff = contentsDelta.diff(quillContents);\n  const composedHash = hash(contentsDelta.compose(diff));\n  const quillHash = hash(quillContents);\n\n  if (composedHash !== quillHash) {\n    sentryActions.reportMessage('Ops mismatch found on autosave-quill init', {\n      level: 'warning',\n      extra: {\n        docId: component.get('docId'),\n        entitlements: component.get('entitlements'),\n        path: component.get('path'),\n      }\n    });\n\n    autosave.localUpdate(\n      component.get('docId'),\n      [{\n        p: component.get('path'),\n        od: contents,\n        oi: quillContents\n      }],\n      -1\n    );\n  } else if (diff.length() > 0) {\n    sentryActions.reportMessage('Diff found on autosave-quill init', {\n      level: 'warning',\n      extra: {\n        docId: component.get('docId'),\n        entitlements: component.get('entitlements'),\n        path: component.get('path'),\n        diff: diff\n      }\n    });\n    component.save(diff, -1);\n  }\n}\n\ncomponent.exports = {\n  cursors: {\n    readOnly: ['readOnly'],\n    tracked: ['tracked_deltas'],\n    entitlements: ['entitlements']\n  },\n  data: {\n    ignoreChanges: false,\n    docId: null,\n    contents: null,\n    path: [],\n    formats: '',\n    class: 'm-quill-input',\n    id: null,\n    autosize: false,\n    inline: false,\n    toolbar: false,\n    modules: '',\n    quill: null,\n    ariaLb: false,\n    scrollContainer: null,\n    disabled: false,\n    isMainBody: false\n  },\n  computed: {\n    trackDeltas: function() {\n      var docId = this.get('docId');\n      var tracked = this.get('tracked');\n      return (\n        tracked &&\n        tracked[docId] &&\n        Array.isArray(tracked[docId])\n      );\n    }\n  },\n  getValue: function() {\n    var contents = this.get('contents');\n    var path = this.get('path');\n    return getPath(contents, path);\n  },\n  oninit: function() {\n    this.once('quill.ready', this.onready);\n\n    if (this.get('isMainBody')) {\n      this.listenTo(app, 'editor.reload-contents', (docId, contents) => {\n        if (docId === this.get('docId')) {\n          this.set('ignoreChanges', true);\n          var data = getPath(contents, this.get('path'));\n          this.get('quill').setContents(data);\n          this.set('ignoreChanges', false);\n        }\n      });\n    }\n  },\n  onready: function(quill) {\n    this.set('quill', quill);\n\n    // Set things up and report an error if something goes wrong\n    try {\n      initMultiCursor(this, quill, this.get('path'), this.get('docId'));\n      initObjects(quill, this.get('docId'));\n      initContents(this, quill, this.getValue());\n      quill.history.clear();\n      initAutosave(this, quill);\n    } catch (err) {\n      app.state.set(['autosave', 'error'], err);\n      err.from = 'autosave-quill';\n      err.ractiveContext = this.get();\n      err.bodyData = this.get('contents');\n      sentryActions.reportError(err);\n    }\n\n    this.fire('ready', quill, this.get('path'));\n  },\n  update: function(docId, delta) {\n    // Only apply updates for the doc in scope + if other data isn't being saved\n    if (!this.get('ignoreChanges') && this.get('docId') === docId) {\n      var path = this.get('path');\n      var quill = this.get('quill');\n\n      // For each op in the delta, do:\n      // A) Update the contents if the op is valid rich-text && the op applies\n      //    applies to the current Quill instance (based on `path` comparison).\n      // B) Override the quill contents if this is a full update op && the op\n      //    applies to the current Quill instance.\n      // C) If the op affects content before or at this Quill instance's path,\n      //    override the contents to ensure they're in sync with state.\n      for (let op of delta) {\n        const isPathMatch = isEqual(path, op.p);\n        if (isPathMatch && op.t === 'rich-text' && op.o) {\n          quill.updateContents(op.o, 'api');\n        } else if (isPathMatch && op.oi) {\n          quill.setContents(op.oi, 'api');\n        } else if (this.prefixMatch(op.p)) {\n          const value = this.getValue();\n          if (value) {\n            quill.setContents(value, 'api');\n          }\n        }\n      }\n    }\n  },\n  // An update path is a prefix if:\n  // A) It is as long as or shorter than the Quill instance path\n  // B) The path values either match at each index, or if the values are\n  //    numbers and therefore part of a list. This ensures all list members\n  //    update in the case of a list shift or reordering.\n  prefixMatch(updatePath) {\n    var path = this.get('path');\n    return updatePath.length <= path.length && updatePath.every((item, index) => {\n      return item === path[index] || typeof item === 'number';\n    });\n  },\n  // `userId` - use `undefined` to default to the current user id\n  save: function(delta, userId = undefined) {\n    this.set('ignoreChanges', true);\n\n    if (this.get('trackDeltas')) {\n      var docId = this.get('docId');\n      app.state.select(['tracked_deltas', docId]).push(delta);\n    }\n\n    autosave.localUpdate(\n      this.get('docId'),\n      [{\n        p: this.get('path'),\n        t: 'rich-text',\n        o: delta\n      }],\n      userId\n    );\n\n    this.set('ignoreChanges', false);\n  },\n  handleTextChange: function(delta, _oldContents, source) {\n    if (source === 'user') {\n      this.save(delta);\n    }\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[3,1,44],e:\"quill\",a:{\"class\":[{t:2,r:\"class\",p:[4,10,60]}],formats:[{t:2,r:\"formats\",p:[5,12,82]}],autosize:[{t:2,r:\"autosize\",p:[6,13,107]}],inline:[{t:2,r:\"inline\",p:[7,11,131]}],toolbar:[{t:2,r:\"toolbar\",p:[8,12,154]}],modules:[{t:2,r:\"modules\",p:[9,12,178]}],disabled:[{t:2,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},p:[10,13,203]}],placeholder:[{t:2,r:\"placeholder\",p:[11,16,244]}],ariaLb:[{t:2,r:\"ariaLb\",p:[12,11,271]}],scrollContainer:[{t:2,r:\"scrollContainer\",p:[13,20,302]}],id:[{t:2,r:\"id\",p:[14,7,329]}]}}]};\ncomponent.exports.components = {quill: require('./quill.html')};\nmodule.exports = Ractive.extend(component.exports);\n","import block from './_block';\n\nconst BINDINGS = {\n  1: block(/^#$/, 'firstheader'),\n  2: block(/^##$/, 'secondheader'),\n  3: block(/^###$/, 'thirdheader'),\n  4: block(/^####$/, 'fourthheader'),\n  5: block(/^#####$/, 'fifthheader')\n};\n\nexport default {\n  key: ' ',\n  collapsed: true,\n  prefix: /^#{1,5}$/,\n  handler(range, context) {\n    return BINDINGS[context.offset].handler.call(this, range, context);\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nvar moment = require('moment-timezone');\nvar { chunk } = require('lodash');\n\ncomponent.exports = {\n  data: {\n    sectionName: '',\n    disablePickers: false,\n    calendarOpen: false,\n    month: null,\n    year: null,\n    day: null,\n    monthInView: null,\n    label: '',\n    pastIsAllowed: true,\n    futureIsAllowed: true,\n    minDateMoment: null,\n    placeholderDate: null\n  },\n  computed: {\n    calendar: function() {\n      if (!this.get('monthInView')) {\n        return [];\n      }\n\n      var now = moment();\n      var monthInView = this.get('monthInView');\n      var year = this.get('year');\n      var month = this.get('month');\n      var day = this.get('day');\n      var pastIsAllowed = this.get('pastIsAllowed');\n      var futureIsAllowed = this.get('futureIsAllowed');\n      var minDateMoment = this.get('minDateMoment');\n\n      // Set the days in the month\n      var daysInMonth = monthInView.daysInMonth();\n      var result = [];\n      // eslint-disable-next-line no-restricted-syntax\n      for (var i = 1; i <= daysInMonth; i++) {\n        var active = year === monthInView.year() && month === monthInView.month() && day === i;\n\n        // Before today or is today for calendar styling\n        var calendarItem = moment().year(monthInView.year()).month(monthInView.month()).date(i);\n        var today = calendarItem.isSame(now, 'day');\n        var disabled = (\n          (calendarItem.isBefore(now, 'day') && !pastIsAllowed) ||\n          (minDateMoment && calendarItem.isBefore(minDateMoment, 'day')) ||\n          (calendarItem.isAfter(now, 'day') && !futureIsAllowed)\n        );\n\n        result.push({ date: i, active, today, disabled });\n      }\n\n      // Create blank tiles for the first row to offset day one\n      // eslint-disable-next-line no-restricted-syntax\n      for (i = 0; i < this.get('firstOfMonth'); i++) {\n        result.unshift({ date: null, active: false });\n      }\n\n      return result;\n    },\n    weeks: function() {\n      return chunk(this.get('calendar'), 7);\n    },\n    monthYearTitle: function() {\n      if (this.get('monthInView')) {\n        return this.get('monthInView').format('MMMM, YYYY');\n      }\n    },\n    firstOfMonth: function() {\n      var inView = this.get('monthInView');\n      return inView ? moment([inView.year(), inView.month() + 1], 'Y, M').date(1).day() : null;\n    },\n    dateText: {\n      get: function() {\n        var year = this.get('year');\n        var month = this.get('month');\n        var day = this.get('day');\n        return (!year || month < 0 || !day) ? this.get('placeholderDate') : `${month + 1}/${day}/${year}`;\n      },\n      set: function(data) {\n        var mdy = data.split('/');\n        var month = parseInt(mdy[0]) - 1;\n        var day = parseInt(mdy[1]);\n        var year = parseInt(mdy[2]);\n\n        var testMoment = moment(`${year}-${month + 1}-${day}`, 'YYYY-M-DD');\n        var isValidDate = (\n          this.verifyNum(month + 1)                                             &&\n          this.verifyNum(day)                                                   &&\n          this.verifyNum(year, num => num > 1000 || (num > -1 && num < 100))    &&\n          testMoment.isValid()                                                  &&\n          (!testMoment.isBefore(moment(), 'day') || this.get('pastIsAllowed'))  &&\n          (!testMoment.isAfter(moment(), 'day') || this.get('futureIsAllowed'))\n        );\n\n        if (isValidDate) {\n          this.set({ month, day, year });\n        } else if (data === '') {\n          // edge case to support clearing the value\n          this.set({ month: null, day: null, year: null });\n        }\n      }\n    }\n  },\n  oninit: function() {\n    var year = this.get('year');\n    var month = this.get('month');\n    var monthInView = moment();\n    if (year && month) {\n      monthInView = monthInView.year(year).month(month);\n    }\n    this.set('monthInView', monthInView);\n\n    this.observe('month, year', value => {\n      if (value) {\n        this.set('monthInView', moment().year(this.get('year')).month(this.get('month')));\n      }\n    });\n  },\n  changeMonth: function(dir) {\n    // Increment and decrement the monthInView & update the month to reflect\n    var current = this.get('monthInView');\n    var newMonth = dir === 'next' ? current.add(1, 'months') : current.subtract(1, 'months');\n    this.set('monthInView', newMonth);\n  },\n  selectDay: function(day) {\n    // On set new day if a non-blank calendar tile has been selected\n    if (day) {\n      this.set('day', day);\n      this.set('month', this.get('monthInView').month());\n      this.set('year', this.get('monthInView').year());\n    }\n  },\n  setToday: function() {\n    var now = moment();\n    this.set({\n      year: now.year(),\n      month: now.month(),\n      day: now.date(),\n      monthInView: now\n    });\n  },\n  verifyNum: function(num, validate) {\n    if (!validate) {\n      validate = value => value > 0;\n    }\n    return !isNaN(num) && validate(num);\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[3,1,50],e:\"dismissible\",a:{\"class\":\"m-field p-buttoned-input\",active:[{t:2,r:\"calendarOpen\",p:[3,55,104]}]},f:[{t:7,p:[4,3,125],e:\"label\",a:{\"for\":[\"datepicker-\",{t:2,r:\"sectionName\",p:[4,26,148]}],\"class\":[\"is-fixed \",{t:4,r:\"disablePickers\",f:[\"is-disabled\"],p:[4,59,181]}]},f:[{t:2,r:\"label\",p:[4,97,219]}]},\" \",{t:7,p:[5,3,239],e:\"input\",a:{id:[\"datepicker-\",{t:2,r:\"sectionName\",p:[6,20,265]}],type:\"text\",value:[{t:2,r:\"dateText\",p:[8,12,309]}],placeholder:\"MM/DD/YYYY\",\"class\":[{t:4,r:\"calendarOpen\",f:[\"is-open\"],p:[10,12,363]},{t:4,r:\"disablePickers\",f:[\" is-disabled\"],p:[10,42,393]}]},m:[{t:4,r:\"disablePickers\",f:[\"disabled\"],p:[11,5,435]}]},\" \",{t:7,p:[14,3,476],e:\"button\",a:{type:\"button\",\"class\":[{t:4,r:\"calendarOpen\",f:[\"is-primary\"],p:[14,66,539]},\" \",{t:4,r:\"disablePickers\",f:[\"is-disabled\"],p:[14,99,572]}]},v:{click:{m:\"toggle\",a:{r:[],s:\"[\\\"calendarOpen\\\"]\"}}},m:[{t:4,r:\"disablePickers\",f:[\"disabled\"],p:[14,136,609]}],f:[{t:7,p:[15,5,647],e:\"res-icon\",a:{size:\"medium\",name:\"calendar\",title:\"Open calendar\"}},\" \",{t:7,p:[16,5,715],e:\"res-icon\",a:{size:\"medium\",name:\"down\"}}]},\" \",{t:4,n:50,r:\"calendarOpen\",f:[{t:7,p:[20,5,793],e:\"div\",a:{\"class\":\"m-calendar\"},f:[{t:7,p:[21,7,824],e:\"button\",a:{type:\"button\",\"class\":\"m-calendar__prev\"},v:{click:{m:\"changeMonth\",a:{r:[],s:\"[\\\"prev\\\"]\"}}},f:[{t:7,p:[22,9,911],e:\"res-icon\",a:{size:\"large\",title:\"Previous month\",name:\"left\"}}]},\" \",{t:7,p:[24,7,994],e:\"h1\",a:{\"class\":\"m-calendar__monthyear\"},f:[{t:2,r:\"monthYearTitle\",p:[24,41,1028]}]},\" \",{t:7,p:[25,7,1058],e:\"button\",a:{type:\"button\",\"class\":\"m-calendar__next\"},v:{click:{m:\"changeMonth\",a:{r:[],s:\"[\\\"next\\\"]\"}}},f:[{t:7,p:[26,9,1145],e:\"res-icon\",a:{size:\"large\",title:\"Next month\",name:\"right\"}}]},\" \",{t:7,p:[29,7,1226],e:\"table\",f:[{t:7,p:[30,9,1242],e:\"tr\",a:{\"class\":\"m-calendar__weekdays\"},f:[{t:7,p:[31,11,1286],e:\"th\",f:[\"Su\"]},{t:7,p:[31,22,1297],e:\"th\",f:[\"Mo\"]},{t:7,p:[31,33,1308],e:\"th\",f:[\"Tu\"]},{t:7,p:[31,44,1319],e:\"th\",f:[\"We\"]},{t:7,p:[31,55,1330],e:\"th\",f:[\"Th\"]},{t:7,p:[31,66,1341],e:\"th\",f:[\"Fr\"]},{t:7,p:[31,77,1352],e:\"th\",f:[\"Sa\"]}]},\" \",{t:4,n:52,r:\"weeks\",i:\"i\",f:[{t:7,p:[34,11,1414],e:\"tr\",a:{\"class\":\"m-calendar__week\"},f:[{t:4,n:52,rx:{r:\"weeks\",m:[{t:30,n:\"i\"}]},f:[{t:4,n:50,r:\".disabled\",f:[{t:7,p:[37,17,1523],e:\"td\",a:{\"class\":\"is-disabled\"},f:[{t:2,r:\".date\",p:[37,41,1547]}]}],p:[36,15,1489]},{t:4,n:51,f:[{t:7,p:[39,17,1601],e:\"td\",a:{\"class\":[{t:4,n:50,r:\".active\",f:[\"is-active\"],p:[39,28,1612]},\" \",{t:4,n:50,r:\".today\",f:[\"is-today\"],p:[39,60,1644]}]},v:{click:{m:\"selectDay\",a:{r:[\".date\"],s:\"[_0]\"}}},f:[{t:2,r:\".date\",p:[40,19,1722]}]}],r:\".disabled\"}],p:[35,13,1456]}]}],p:[33,9,1386]}]},\" \",{t:7,p:[48,7,1854],e:\"button\",a:{\"class\":\"m-calendar__clear\",type:\"button\"},v:{click:{m:\"setToday\",a:{r:[],s:\"[]\"}}},f:[\"Today\"]}]}],p:[19,3,768]}]}]};\ncomponent.exports.components = {dismissible: require('./dismissible.html')};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  twoway: false,\n  cursors: {\n    readOnly: ['readOnly']\n  },\n  data: {\n    type: 'buttons',\n    disabled: false,\n    inputClass: '',\n    name: null,\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[2,1,49],e:\"span\",a:{\"class\":\"m-radio-button-group\"},f:[{t:4,n:50,x:{r:[\"type\"],s:\"_0===\\\"buttons\\\"\"},f:[{t:4,r:\"options\",f:[{t:7,p:[5,7,137],e:\"label\",a:{title:[{t:2,r:\"label\",p:[5,21,151]}]},f:[{t:7,p:[6,9,171],e:\"input\",a:{type:\"radio\",value:[{t:2,r:\"value\",p:[8,18,218]}],checked:[{t:2,x:{r:[\"~/value\",\"value\"],s:\"_0===_1\"},p:[9,20,248]}],disabled:[{t:2,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},p:[10,21,291]}]},v:{change:{m:\"fire\",a:{r:[\"value\"],s:\"[\\\"save\\\",_0]\"}}}},\" \",{t:7,p:[13,9,369],e:\"span\",a:{type:\"button\",\"class\":\"is-secondary -small\"},f:[{t:4,n:50,r:\"icon\",f:[{t:7,p:[15,13,453],e:\"res-icon\",a:{size:\"medium\",title:[{t:2,r:\"label\",p:[15,44,484]}],name:[{t:2,r:\"icon\",p:[15,61,501]}]}}],p:[14,11,428]},{t:4,n:51,f:[{t:2,r:\"label\",p:[17,13,550]}],r:\"icon\"}]}]}],p:[4,5,118]}],p:[3,3,87]},{t:4,n:51,f:[{t:4,r:\"options\",f:[{t:7,p:[24,7,660],e:\"res-radio\",a:{\"class\":\"m-radio-button-group__row\"},m:[{t:4,x:{r:[\"~/value\",\"value\"],s:\"_0===_1\"},f:[\"checked\"],p:[24,52,705]}],f:[{t:7,p:[25,9,749],e:\"input\",a:{type:\"radio\",value:[{t:2,r:\"value\",p:[27,18,796]}],\"class\":[{t:2,r:\"inputClass\",p:[28,18,824]}],name:[{t:2,r:\"name\",p:[29,17,856]}],disabled:[{t:2,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},p:[30,21,886]}]},v:{change:{m:\"fire\",a:{r:[\"value\"],s:\"[\\\"save\\\",_0]\"}}}},\" \",{t:7,p:[32,9,963],e:\"label\",f:[{t:2,r:\"label\",p:[32,16,970]}]}]}],p:[23,5,641]}],x:{r:[\"type\"],s:\"_0===\\\"buttons\\\"\"}}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","import { Delta } from 'rich-text';\n\nexport default function block(pattern, formatName, options) {\n  return Object.assign({\n    key: ' ',\n    collapsed: true,\n    prefix: pattern,\n    handler(range, context) {\n      // Abort if the format is not whitelisted\n      if (!this.quill.scroll.whitelist[formatName]) {\n        return true;\n      }\n\n      // Build delta that deletes the shortcut and reformats the line\n      const [line, offset] = this.quill.scroll.line(range.index);\n      const delta = new Delta()\n        .retain(range.index - offset)\n        .delete(offset + 1)\n        .retain(line.length() - offset - 1)\n        .retain(1, { [formatName]: true });\n\n      // Insert space for undo\n      this.quill.insertText(range.index, ' ', context.format, 'user');\n\n      // Apply delta\n      this.quill.history.cutoff();\n      this.quill.updateContents(delta, 'user');\n      this.quill.history.cutoff();\n\n      // Record position in undo history\n      this.quill.history.recordSelection(range.index + 1, range.index - 1);\n\n      // Register backspace as undo shortcut\n      this.quill.history.undoOnBackspace();\n\n      return false;\n    }\n  }, options);\n}\n","var imageActions = require('../../actions/images');\nvar objectActions = require('../../actions/objects');\nvar videoActions = require('../../actions/videos');\nvar oembedActions = require('../../actions/oembeds');\nvar subdocActions = require('../../actions/subdocs');\n\nexport default function initObjects(quill, docId) {\n  // Clicking again on a selected object iframe will trigger its edit interface\n  quill.root.addEventListener('click', e => {\n    var iframe = e.target;\n    if (\n      iframe.tagName === 'IFRAME' && iframe.contentWindow.document.body &&\n      iframe.contentWindow.document.body.classList.contains('is-active')\n    ) {\n      var data = JSON.parse(iframe.dataset.object);\n      var target = { docId, lineId: findClosestId(iframe.parentNode, quill.root) };\n\n      if (\n        ('hr' in data) ||\n        ('newsletter' in data && app.state.get(['community', 'newsletters']).length <= 1)\n      ) {\n        return;\n      }\n\n      if ('image' in data) {\n        imageActions.getAndEditImage(data.image, 'image_inline', target);\n      } else if ('video' in data) {\n        videoActions.getAndEditVideo(data.video, 'Update', target);\n      } else if ('oembed' in data) {\n        oembedActions.editOembed(data.oembed, 'Update', target);\n      } else if ('doc' in data) {\n        subdocActions.editDoc(data.doc.id, 'Update', target);\n      } else {\n        objectActions.editObject(data, 'Update', target);\n      }\n    }\n  }, true);\n}\n\nfunction findClosestId(node, stopAt) {\n  while (node && node !== stopAt) {\n    if (node.id) {\n      return node.id;\n    } else {\n      node = node.parentNode;\n    }\n  }\n  return null;\n}\n","import { Delta } from 'rich-text';\n\nconst VALID_FRACTIONS = ['1/2', '1/3', '1/4', '2/3', '3/4'];\nconst PATTERN = /(^|\\s)-?([123]\\/[234])$/;\n\nexport default {\n  key: ' ',\n  collapsed: true,\n  prefix: PATTERN,\n  handler(range, context) {\n    const match = context.prefix.match(PATTERN);\n    const fraction = match[2];\n\n    if (VALID_FRACTIONS.includes(fraction)) {\n      const delta = new Delta()\n        .retain(range.index - fraction.length)\n        .retain(1, { superscript: true })\n        .delete(1)\n        .insert('\\u2044', context.format)\n        .retain(1, { subscript: true });\n\n      // Insert the space normally, for undo\n      this.quill.insertText(range.index, ' ', context.format, 'user');\n\n      // Apply the delta\n      this.quill.history.cutoff();\n      this.quill.updateContents(delta, 'user');\n      this.quill.history.cutoff();\n\n      // Manually fix the cursor to come after the space, and also upon undo/redo\n      this.quill.setSelection(range.index + 1, 0, 'silent');\n      this.quill.history.recordSelection(range.index + 1);\n\n      // Register backspace as undo shortcut\n      this.quill.history.undoOnBackspace();\n      return false;\n    }\n\n    return true;\n  }\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nimport { get as getPath } from 'lodash';\nimport { Delta } from 'rich-text';\nvar autosave = require('../actions/autosave');\n\ncomponent.exports = {\n  cursors: {\n    readOnly: ['readOnly']\n  },\n  data: {\n    docId: null,\n    contents: null,\n    value: null,\n    options: [],\n    default: null,\n    path: null,\n    class: '',\n    disabled: false,\n    id: '',\n    label: null,\n    placeholder: null,\n    size: 'small',\n    richText: false,\n    userId: null,\n  },\n  oncomplete: function() {\n    if (this.get('value') == null && this.get('default') !== null) {\n      autosave.localUpdate(this.get('docId'), [{\n        p: this.get('path'),\n        oi: this.get('default')\n      }], -1);\n    }\n  },\n  save: function() {\n    var target = this.event.original.target;\n    var docId = this.get('docId');\n    var insert = target.value || null;\n    const previous = getPath(this.get('contents'), this.get('path'));\n    // if the value is a number, cast it\n    insert = isNaN(insert) ? insert : parseInt(insert);\n    if (this.get('richText')) {\n      const delta = new Delta();\n      insert = delta.insert(insert);\n    }\n    autosave.localUpdate(docId, [{\n      p: this.get('path'),\n      od: previous,\n      oi: insert,\n    }], this.get('userId'));\n    this.fire('save');\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"res-select\",a:{size:[{t:2,r:\"size\",p:[1,19,18]}]},f:[{t:4,n:50,r:\"label\",f:[{t:7,p:[3,5,49],e:\"label\",f:[{t:2,r:\"label\",p:[3,12,56]}]}],p:[2,3,31]},\" \",{t:7,p:[5,3,86],e:\"select\",a:{value:[{t:2,r:\"value\",p:[6,12,105]}],disabled:[{t:2,x:{r:[\"disabled\",\"readOnly\"],s:\"_0||_1\"},p:[7,15,130]}]},m:[{t:4,n:50,r:\"class\",f:[\"class=\\\"\",{t:2,r:\"class\",p:[8,25,180]},\"\\\"\"],p:[8,5,160]},{t:4,n:50,r:\"id\",f:[\"id=\\\"\",{t:2,r:\"id\",p:[10,19,239]},\"\\\"\"],p:[10,5,225]}],v:{change:{m:\"save\",a:{r:[],s:\"[]\"}}},f:[{t:4,n:50,r:\"placeholder\",f:[{t:7,p:[13,7,288],e:\"option\",a:{placeholder:0},f:[{t:2,r:\"placeholder\",p:[13,30,311]}]}],p:[12,5,262]},\" \",{t:4,n:52,r:\"options\",f:[{t:4,n:50,r:\"./text\",f:[{t:7,p:[17,9,402],e:\"option\",a:{value:[{t:2,r:\"value\",p:[17,24,417]}]},f:[{t:2,r:\"text\",p:[17,35,428]}]}],p:[16,7,376]},{t:4,n:51,f:[{t:7,p:[19,9,469],e:\"option\",a:{value:[{t:2,r:\".\",p:[19,24,484]}]},f:[{t:2,r:\".\",p:[19,31,491]}]}],r:\"./text\"}],p:[15,5,352]}]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","export default {\n  key: 'Enter',\n  shiftKey: true,\n  handler(range) {\n    // Allow the default handler to take place first, then add the format\n    Promise.resolve().then(() => {\n      this.quill.formatLine(range.index, 1, { br: true }, 'user');\n    });\n    return true;\n  }\n};\n","export default {\n  key: 'u',\n  shiftKey: true,\n  shortKey: true,\n  handler(range, context) {\n    this.quill.format('mark', !context.format.mark, 'user');\n  }\n};\n"],"sourceRoot":""}