{"version":3,"sources":["webpack:///./client/graphql/queries/users.js","webpack:///./shared/vue/app-loader/app-loader.vue","webpack:///shared/vue/community-select/components/community-cell.vue","webpack:///./storyeditor/components/app-overlay.vue?17ce","webpack:///./shared/vue/community-select/components/community-cell.vue","webpack:///./shared/delta/group_items_match.js","webpack:///storyeditor/components/search-panel/dashboard-search-panel.vue","webpack:///storyeditor/components/modals/saved-search-delete-modal.vue","webpack:///storyeditor/components/sidebars/chorus-help.vue","webpack:///./storyeditor/components/header/status-icon.vue?3497","webpack:///./shared/get_story_type.js","webpack:///./shared/has_minimal_layout.js","webpack:///./storyeditor/components/app-sidebar.vue?c499","webpack:///./storyeditor/components/errors/not-found.vue?c477","webpack:///storyeditor/components/dashboard-doc-cell-actions.vue","webpack:///./shared/vue/community-select/components/community-cell.vue?d623","webpack:///./shared/get_package_stories.js","webpack:///./storyeditor/index.js","webpack:///./client/lib/parse_chorus_pagination.js","webpack:///./storyeditor/components/layout-mode/layout.vue?d8da","webpack:///./shared/delta/group_is_complete.js","webpack:///./storyeditor/components/search-panel/saved-search-list.vue?0b96","webpack:///./storyeditor/components/header/new-story-button.vue?59a1","webpack:///storyeditor/components/chip.vue","webpack:///./storyeditor/components/utils/scroll-lock.vue","webpack:///./shared/vue/community-select/components/community-menu.vue?e5ff","webpack:///./client/actions/entry.js","webpack:///storyeditor/components/layout-mode/edit-block.vue","webpack:///./storyeditor/components/header/community-lockup.vue?5578","webpack:///./storyeditor/config/blockLabels.js","webpack:///./storyeditor/components/header/banner-message.vue?9b39","webpack:///./storyeditor/components/app-sidebar.vue","webpack:///./shared/vue/community-select/index.vue?4396","webpack:///./client/actions/users.js","webpack:///./client/config/messages.js","webpack:///shared/vue/banner-messages/message.vue","webpack:///./shared/subdoc_ids.js","webpack:///./storyeditor/components/header/new-story-button.vue","webpack:///./storyeditor/components/layout-mode/edit-package-cover.vue","webpack:///storyeditor/components/modals/saved-search-create-modal.vue","webpack:///./storyeditor/store/actions.js","webpack:///./shared/vue/app-loader/store.js","webpack:///./storyeditor/store/plugins/capiSocket.js","webpack:///storyeditor/components/errors/not-found.vue","webpack:///./storyeditor/components/sidebars/chorus-help.vue?394c","webpack:///storyeditor/components/header/banner-message.vue","webpack:///./storyeditor/components/header/user-status.vue?e054","webpack:///./shared/is_package.js","webpack:///./shared/get_event_datetime.js","webpack:///storyeditor/components/header/editor-subnav.vue","webpack:///./storyeditor/store/commands.js","webpack:///./storyeditor/router/views/doc.vue","webpack:///./storyeditor/components/app-overlay.vue","webpack:///./shared/delta/get_offset.js","webpack:///./storyeditor/config/timings.js","webpack:///./shared/is_stream.js","webpack:///./storyeditor/lib/initialize/convert_object_format.js","webpack:///./shared/vue/community-select/index.vue","webpack:///./storyeditor/components/search-panel/search-form.vue","webpack:///./storyeditor/components/overlays/chorus-help-announcement.vue?9205","webpack:///./storyeditor/queries/headlessConfig.graphql","webpack:///./shared/content-hash.js","webpack:///./storyeditor/components/layout-mode/edit-package-cover.vue?f129","webpack:///./storyeditor/components/tooltip.vue?b747","webpack:///./storyeditor/components/header/banner-message.vue","webpack:///./shared/ottypes/anthem0.js","webpack:///./shared/delta/get_attributes.js","webpack:///./storyeditor/app.vue?47e0","webpack:///./shared/vue/store/mutations.js","webpack:///storyeditor/components/app-overlay.vue","webpack:///./storyeditor/components/errors/not-found.vue","webpack:///storyeditor/components/autosave-radio.vue","webpack:///./storyeditor/components/dashboard-doc-cell.vue","webpack:///./client/lib/parse_pagination.js","webpack:///./client/actions/publish.js","webpack:///./client/lib/errors/graphql_error.js","webpack:///./storyeditor/components/search-panel/search-form.vue?8353","webpack:///./storyeditor/components/modals/shortlink-modal.vue?9586","webpack:///./storyeditor/components/header/editor-mobile-subnav.vue","webpack:///./shared/delta/parse_groups.js","webpack:///./storyeditor/components/modals/saved-search-delete-modal.vue?3cb8","webpack:///storyeditor/components/layout-mode/layout.vue","webpack:///./shared/is_link_post.js","webpack:///storyeditor/components/layout-mode/edit-layout.vue","webpack:///./storyeditor/components/overlays/chorus-help-contact-form.vue?6662","webpack:///./client/config/doc_labels.js","webpack:///./storyeditor/components/search-panel/dashboard-search-panel.vue?0cdf","webpack:///./client/config/doc_statuses.js","webpack:///./storyeditor/components/layout-mode/edit-layout.vue?0a1b","webpack:///storyeditor/components/header/status-icon.vue","webpack:///./storyeditor/store/autosave/getters.js","webpack:///./storyeditor/components/header/dashboard-nav.vue?3ddb","webpack:///./storyeditor/components/search-panel/dashboard-search-panel.vue","webpack:///shared/vue/community-select/components/community-menu.vue","webpack:///./storyeditor/store/plugins/anthemSocket.js","webpack:///./storyeditor/components/layout-mode/edit-block.vue?55be","webpack:///./storyeditor/config/layoutOptions.js","webpack:///storyeditor/components/layout-mode/edit-package-cover.vue","webpack:///./storyeditor/components/dashboard-doc-cell-actions.vue","webpack:///./shared/delta/get_op.js","webpack:///./storyeditor/components/dashboard-doc-cell.vue?b38c","webpack:///./storyeditor/components/header/editor-subnav.vue","webpack:///./storyeditor/components/modals/saved-search-create-modal.vue?79c9","webpack:///./shared/vue/community-select/components/community-menu.vue","webpack:///storyeditor/components/header/editor-mobile-subnav.vue","webpack:///./shared/vue/config.js","webpack:///./client/actions/docs.js","webpack:///./storyeditor/lib/publish.js","webpack:///./shared/chunk_by.js","webpack:///./storyeditor/store/autosave/plugin.js","webpack:///./storyeditor/router/views/dashboard.vue?968a","webpack:///./client/lib/is_published.js","webpack:///./shared/delta/get_objects.js","webpack:///./storyeditor/components/chip.vue?3f7e","webpack:///storyeditor/components/errors/error-boundary.vue","webpack:///./storyeditor/components/layout-mode/edit-layout.vue","webpack:///./client/graphql/queries/communities.js","webpack:///./storyeditor/store/autosave/actions.js","webpack:///./storyeditor/components/chip.vue","webpack:///shared/vue/community-select/index.vue","webpack:///./storyeditor/components/errors/error-boundary.vue","webpack:///./storyeditor/actions/saved_search.js","webpack:///./shared/is_customstory.js","webpack:///storyeditor/components/header/user-status.vue","webpack:///storyeditor/router/views/doc.vue","webpack:///./client/lib/errors/http_status_error.js","webpack:///./client/lib/graphql_request.js","webpack:///storyeditor/components/app-modal.vue","webpack:///shared/vue/app-loader/app-loader.vue","webpack:///./shared/vue/lib/apollo_client.js","webpack:///./storyeditor/components/sidebars/chorus-help.vue","webpack:///./client/lib/can_copy_or_move.js","webpack:///storyeditor/app.vue","webpack:///./storyeditor/components/header/help-toggle.vue?ee3c","webpack:///./storyeditor/components/search-panel/saved-search-list.vue","webpack:///./storyeditor/store/mutations.js","webpack:///./storyeditor/components/header/user-status.vue","webpack:///./client/lib/get_doc_label.js","webpack:///./storyeditor/components/overlays/chorus-help-contact-form.vue","webpack:///./storyeditor/store/autosave/mutations.js","webpack:///./shared/is_mapstack.js","webpack:///./shared/vue/store/commands.js","webpack:///./storyeditor/components/search-panel/editable-list-item.vue?2adb","webpack:///storyeditor/components/header/editor-nav.vue","webpack:///./shared/vue/lib/sentry_client.js","webpack:///./storyeditor/router/views/doc.vue?7571","webpack:///./storyeditor/components/app-modal.vue?7df6","webpack:///storyeditor/components/header/new-story-button.vue","webpack:///./shared/is_page.js","webpack:///storyeditor/components/overlays/chorus-help-announcement.vue","webpack:///./storyeditor/store/index.js","webpack:///./storyeditor/components/layout-mode/edit-block.vue","webpack:///storyeditor/components/search-panel/saved-search-list.vue","webpack:///./client/lib/wait.js","webpack:///storyeditor/components/tooltip.vue","webpack:///./storyeditor/router/index.js","webpack:///./storyeditor/components/dashboard-doc-cell-activity.vue","webpack:///./storyeditor/components/autosave-radio.vue","webpack:///./storyeditor/components/autocomplete-input.vue","webpack:///./storyeditor/components/modals/saved-search-delete-modal.vue","webpack:///./storyeditor/store/getters.js","webpack:///storyeditor/router/views/dashboard.vue","webpack:///./shared/vue/banner-messages/message.vue","webpack:///./storyeditor/components/autocomplete-input.vue?1bd0","webpack:///storyeditor/components/autocomplete-input.vue","webpack:///./storyeditor/components/search-panel/editable-list-item.vue","webpack:///./storyeditor/components/tooltip.vue","webpack:///./shared/vue/queries/currentCommunity.graphql","webpack:///./shared/group_sort_network_memberships.js","webpack:///./storyeditor/components/overlays/chorus-help-announcement.vue","webpack:///./storyeditor/components/header/editor-mobile-subnav.vue?1448","webpack:///storyeditor/components/dashboard-doc-cell.vue","webpack:///./storyeditor/app.vue","webpack:///./storyeditor/lib/docs.js","webpack:///storyeditor/components/search-panel/search-form.vue","webpack:///./shared/errors/community_mismatch.js","webpack:///./storyeditor/router/views/dashboard.vue","webpack:///./shared/is_live_post.js","webpack:///./storyeditor/queries/searchGroups.graphql","webpack:///./client/lib/request.js","webpack:///./shared/errors/not_found.js","webpack:///storyeditor/components/dashboard-doc-cell-activity.vue","webpack:///./storyeditor/components/header/editor-nav.vue?0c8f","webpack:///./client/actions/messages.js","webpack:///./client/lib/is_valid_url.js","webpack:///./shared/delta/get_word_count.js","webpack:///./shared/vue/queries/currentUser.graphql","webpack:///./storyeditor/components/layout-mode/layout.vue","webpack:///./storyeditor/components/header/status-icon.vue","webpack:///./storyeditor/lib/initialize/contents_defaults.js","webpack:///./storyeditor/components/app-modal.vue","webpack:///./shared/to_rich_text.js","webpack:///./shared/sentence_case.js","webpack:///./storyeditor/queries/searchContributors.graphql","webpack:///storyeditor/components/modals/shortlink-modal.vue","webpack:///./storyeditor/components/header/editor-subnav.vue?ae62","webpack:///./storyeditor/components/dashboard-doc-cell-actions.vue?6697","webpack:///./client/actions/sentry.js","webpack:///./storyeditor/components/layout-mode/form-subsection.vue","webpack:///storyeditor/components/app-sidebar.vue","webpack:///./client/lib/is_shortlink.js","webpack:///storyeditor/components/overlays/chorus-help-contact-form.vue","webpack:///./storyeditor/components/header/help-toggle.vue","webpack:///./storyeditor/store/autosave/index.js","webpack:///./client/actions/communities.js","webpack:///storyeditor/components/layout-mode/form-subsection.vue","webpack:///./shared/vue/store/getters.js","webpack:///storyeditor/components/search-panel/editable-list-item.vue","webpack:///storyeditor/components/header/community-lockup.vue","webpack:///./client/lib/strip_protocol.js","webpack:///storyeditor/components/header/help-toggle.vue","webpack:///./storyeditor/components/header/community-lockup.vue","webpack:///./storyeditor/components/autosave-radio.vue?4ff3","webpack:///./shared/vue/app-loader/app-loader.vue?808f","webpack:///./storyeditor/components/modals/saved-search-create-modal.vue","webpack:///./storyeditor/lib/authorization.js","webpack:///./shared/vue/banner-messages/message.vue?a1f4","webpack:///./storyeditor/components/dashboard-doc-cell-activity.vue?6e1e","webpack:///./client/lib/pluralize.js","webpack:///./storyeditor/components/header/dashboard-nav.vue","webpack:///./storyeditor/components/layout-mode/form-subsection.vue?7f86","webpack:///./storyeditor/components/header/editor-nav.vue","webpack:///storyeditor/components/header/dashboard-nav.vue","webpack:///./storyeditor/components/modals/shortlink-modal.vue","webpack:///./storyeditor/lib/get_page_type.js","webpack:///storyeditor/components/utils/scroll-lock.vue","webpack:///./shared/vue/banner-messages/store.js","webpack:///./client/lib/initials.js","webpack:///./client/lib/anthem0.js"],"names":["__vue_script__","__vue_render__","__vue_static_render_fns__","exports","props","community","type","Object","required","defaultLogoUrl","String","selectionId","Number","default","computed","href","render","_vm","this","_h","$createElement","_c","_self","attrs","currentOverlay","class","pageType","componentClass","staticClass","on","$event","closeOverlay","_v","component","tag","childProps","orientation","_e","staticRenderFns","GROUPED_SUBDOCS","module","group","every","item","hasOwnProperty","some","doc","components","SearchForm","SavedSearchList","isCollapsed","Boolean","isSearching","updateQuery","Function","defaultQuery","formattedQuery","Array","setSavedSearchName","data","mobileKey","toggleKey","searchView","saving","savedSearches","currentSavedSearch","$route","name","watch","currentCommunity","id","showSavedSearches","fetchSearches","value","length","clearSearch","isMobile","closeSearchPanel","methods","$refs","searchForm","keywordInput","focus","$emit","clearSavedSearch","params","searches","handleError","error","searchId","saveButtonRef","keyword","$store","commit","addSavedSearch","blur","search","communityId","updatedSearch","deleteSavedSearch","message","disableButtons","announcementEntries","page","getAnnouncementEntries","query","community_id","announcements","entry_group_ids","entry_group_id","draft","hidden","per_page","order","response","entries","_embedded","entry","pagination","dek","body","body_extended","title","url","lastRead","Date","toISOString","currentUser","lastAnnouncementReadAt","sessionStorage","setItem","wrapperClass","key","status","toLowerCase","statusIcon","_s","isMapstack","require","isStream","isLinkPost","isPackage","isPage","isCustomstory","contents","layout","orientationClass","pushContentClass","currentSidebarTag","currentSidebar","preventDefault","closeSidebar","nativeOn","resetErrorBoundary","_m","filter","canArchiveOrTrashStories","onMoveCompleted","canCopyOrMoveDoc","copyInProgress","destination","docObj","moveCompleted","moveInProgress","head","trashed_at","copy_doc_uuid","uuid","copiedDoc","method","opts","window","location","assign","isLeaving","dropdown","toggle","setMoveInProgress","toggleArchived","setMoveCompleted","updateArchivedAndTrashed","archived","toggleTrashed","trashedDoc","Promise","all","faviconUrl","flatten","toc","map","section","stories","Vue","store","config","router","el","apolloProvider","ignoredElements","res","manifest","tags","h","App","current_page","perPage","total","item_count","totalPages","Math","ceil","currentDoc","autosave","ready","style","selectedBlockIds","postMessage","packageCoverIndex","deselectBlocks","ref","staticStyle","iframeurl","expectedLength","parseInt","grouping","charAt","_l","runSavedSearch","openDeleteModal","renameSavedSearch","readOnly","storyTypes","loadingNewDoc","newDoc","defaults","story","index","chipLabel","chipId","stringLimit","stringItem","slice","network","communities","selectCommunity","expandedNetworks","expandNetwork","domProps","logo","resolve","request","a","document","createElement","slugOrId","isShortlink","pathname","substring","Error","app","state","get","then","parsePagination","q","published","entry_id","trackProgress","set","reject","catch","AutosaveRadio","FormSubsection","blockIds","CONFLICTING_SELECTION","Symbol","productCardLayoutOptions","getObject","canSetAlignment","canUseLayout","blocksAreAdjacent","objects","currentGrouping","previousOffset","offset","getOffset","getBlockValue","getBlockDocData","object","keys","docLabels","objectLabel","result","push","canSetWide","canSetFullBleed","pluralize","string","attr","blockObj","op","insert","values","getBlockAttributes","field","resets","resetIncompleteGroups","updates","updateFieldValue","save","delta","reduce","compose","dispatch","event","groupIds","line","selectedGroupIds","payload","position","firstId","lockupClass","path","avatarWrapClass","firstLine","firstLineTruncatedClass","hasSecondLineClass","secondLine","mobileTruncatedClass","communityName","pullquote","oembed","html","actionbox","readmore","toh_project_details","toh_tools","pym","toggleMenu","menuOpen","hasMenu","networks","allowedRoles","activeMemberships","closeMenu","lastSeen","moment","utc","lastPosted","last_announcement_posted_at","isBefore","updateAnthemUser","lastAnnouncementSeenAt","async","graphqlRequest","UserChorusVideo","variables","scopeId","canAccessChorusVideo","CurrentUser","size","accessRoles","getPath","policyRoles","memberships","membership","roles","role","fullOrUserName","user","UserTwitterHandle","twitterUsername","UserName","ids","users","UserNames","uniq","UserNamesTitles","now","first","first_name","last","last_name","username","ALT_TEXT_OVER_LIMIT","APPLE_NEWS_MEMBERS_ONLY_WARNING","COMMUNITY_CHANGED","CSV_TOO_LARGE","DATA_LINKS_ERROR","DRAFT_HERMANO_RECORD","EMBARGOED","HIDDEN","FEEDBACK_SENT","FILE_TOO_LARGE","GETTY_API_DOWN","GIF_IN_IMAGE_CARD","GIF_TOO_LARGE","IMAGE_IN_GALLERY","IMAGE_TOO_LARGE","INVALID_LINK_MESSAGE","INVALID_SPREADSHEET_URL","INVALID_STREAM_MEMBERSHIP","MERLIN_API_DOWN","MISSING_LEGACY_ENTRY","NETWORK_ASSETS_ACCESS_DENIED","NEW_USER_MESSAGE","OEMBED_GENERIC_ERROR","OEMBED_INSECURE_ERROR","OEMBED_SUPPORT_ERROR","OEMBED_PDF_SUPPORT_ERROR","OEMBED_YOUTUBE_SUPPORT_ERROR","PLAGSCAN_ERROR","PLAGSCAN_LOW_WORD_COUNT","PLAGSCAN_OUT_OF_DATE","PLAGSCAN_RETRIEVED","PLAGSCAN_SUBMITTED","PLAGSCAN_UNSCANNED","PUBLISH_PACKAGE_ACTIVE_MESSAGE","PUBLISH_PACKAGE_WARNING_MESSAGE","PYM_EMBED_GENERIC_ERROR","PYM_EMBED_INSECURE_ERROR","PYM_EMBED_SUPPORT_ERROR","REALTIME_ERROR","RECONNECT_ERROR","RECONNECTING","RELOAD_REQUIRED","RELOAD_STALE_TAB","REQUIRED_FIELD","RESCUE_SAVED_REASSURE","SEND_TO_PRINT_SUCCESS","SHEET_PERMISSIONS","STRUCTURED_TAGS_ERROR","TOO_MANY_EDITORS","UNEXPECTED","UNSAVED_WARNING","UNSUPPORTED_ASSET_TYPE","UPLOAD_INVALID_FILE","UPLOAD_TOO_MANY_FILES","messageBanner","registerModule","designForNotice","notice","ops","gallery","main_gallery","placeholder","clearModal","namespaced","loading","mutations","SET_LOADING","connectListeners","contentApiSocket","room","currentDocId","emit","initContentApiPresence","docId","packet","includes","messages","persistent","anthemSocket","once","off","subscribe","mutation","cmd","SET_DOC","socketUrl","ssl","host","socket","transports","reconnection","reconnectionAttempts","sockets","reconnectAttempts","CAPI_SOCKET","createSocket","REMOVE_DOC_FROM_STATE","disconnect","leaveRoom","announcement","openEntry","blurb","openContactForm","Message","displaySystemMessage","systemMessage","messageShown","storageKey","localStorage","getItem","bannerMessage","messageType","timeout","icon","names","initials","hiddenNames","join","history","eventTypes","latest","reverse","find","indexOf","event_type","backdated_date","date","CommunityLockup","UserStatus","StatusIcon","HelpToggle","navLinks","pageActive","hed","Delta","isValid","entry_layout","changes","has","convertObjects","p","t","o","pros","cons","mapPoints","map_points","i","mapPoint","OBJECT_TYPES","properties","fixDelta","delete","pick","attributes","omit","retain","chop","loc","source","definitionRefs","findOperation","definitions","element","forEach","def","refs","Set","collectFragmentReferences","node","kind","add","selectionSet","selections","selection","variableDefinitions","operationName","opRefs","allRefs","newRefs","refName","prevRefs","childRef","oneQuery","stringify","md5","packageStoryLayout","packageStoryLayoutOptions","packageStoryLayoutPath","sendFetch","sendError","className","placement","active","_t","json0","registerSubtype","getOp","errorBoundaryKey","SET_CONTEXT","entitlements","undefined","ChorusHelpAnnouncement","ChorusHelpContactForm","options","richText","onResolve","onError","radioValue","od","oi","asyncSave","deskName","messageActions","showMessage","err","showError","onProgress","publishOrSchedule","publishScheduledFor","docActions","toPlaintext","isPublished","getPackageStories","getWordCount","getEventDatetime","sentryActions","loaded","package_toc","promises","packageDoc","publishOrScheduleDoc","reportError","scheduleDoc","publishDoc","eventName","ga","publish_history","firstPublishedDate","lastPublishedDate","isRepublish","formatDate","format","hitType","eventCategory","eventAction","dimension1","dimension4","contributors","chorus_id","dimension5","dimension8","dimension10","site_groups","g","dimension11","dimension12","dimension26","getHours","dimension35","dimension36","dimension37","internal_title","dimension38","seo_title","dimension39","social_title","dimension40","dimension53","trackPublishOrScheduleEvent","eventType","publish_scheduled_for","updateDoc","pubHistoryUpdate","user_id","userId","origin_community_id","destination_community_id","scheduled_date","li","GraphQLError","errors","call","captureStackTrace","stack","constructor","prototype","create","onSearchSubmit","_k","keyCode","directives","rawName","expression","target","composing","slot","model","callback","$$v","groupList","currentPage","checkboxKey","isArray","checked","_i","$$a","$$el","$$c","$$i","$set","concat","label","_q","dateOperator","dateString","contributorList","storyType","typeAccess","disableSaveButton","modalId","openCreateModal","saveButton","disableSearchButton","shortlink","copyShortlink","chunkBy","groupIsComplete","lines","chunk","next","prev","deleteSearch","EditLayout","EditBlock","EditPackageCover","siteConfig","draftBody","externalLayoutUrl","componentData","packageCovers","navHeight","notifications","addEventListener","onMessage","removeEventListener","layoutIframe","contentWindow","apollo","update","Tooltip","packageCoverLeadStoryLayoutOptions","packageTOCOrientationOptions","featuresEnabled","docLabel","package_toc_layout","package_toc_hidden","submitFeedback","aside","table","poll","scorecard","imageslider","productcard","heading","emptyForm","setSearchView","goToSearchView","DRAFT","SUBMITTED","APPROVED","PUBLISHED","SCHEDULED","UPDATED","entryLayoutOptions","mainGallery","entryLayout","packageCoverLeadStory","canEditPackageTOC","packageTOCLayout","connected","statusMap","Disconnected","Working","Saved","autosaveError","isPipelineDirty","anthemSocketConnectedStatus","docsById","getters","docIds","dirty","isCurrentDocDirty","access","communityDomain","CommunityCell","fullHeight","setHeight","e","communityMenu","querySelector","communityMenuTrigger","contains","innerHeight","networkRoles","r","isAuthorized","$router","promptReload","unloading","forceRefresh","clearErrorBanners","startTimer","addUser","oldUser","ANTHEM_SOCKET_REMOVE_USER","newUser","socketId","initAnthemServerPresence","resetTimer","displayBanner","handleDisconnect","reason","displayOnce","connectedUsers","ANTHEM_SOCKET_ADD_USER","setTimeout","inactivePeriod","clearTimeout","bindActiveTabEventListeners","bannerType","bannerId","banner","SOCKET_ERROR","m","unsubscribe","ANTHEM_SOCKET_INIT","formattedLabel","currentDropcap","saveField","currentLeadgraf","currentEndMark","option","currentPosition","selectAllInGroup","currentLayout","saveSubdocLayout","center","alignLeft","hangLeft","wide","full","hangRight","alignRight","none","twoUp","threeUpTop","threeUpBottom","fourUp","coverIndex","docUrl","contributorsForDoc","printSlug","lastSentToPrintAt","tableActivityHeading","handleCreate","modifiers","trim","$forceUpdate","activeMobileNav","windowSize","height","configEl","JSON","parse","textContent","publishActions","unschedule","newCommunityHandle","communityActions","getCommunity","twitterScreenName","currentCommunityHandle","republishPublished","entryActions","updateEntry","schemaName","createDoc","entry_type","types","subdocs","subdocsForDoc","subdoc","schema_name","mainOembed","main_oembed","cache","force","searchText","queryWithUrlParsedOut","parseUrlsFromQuery","docs","parsedQuery","userIds","c","userActions","getUsers","compact","u","formatParsedQuery","publishHistoryType","prevTrashedAt","nextTrashedAt","promise","updateEntryFlags","returnErrors","returnWarnings","returnValid","newQuery","cloneDeep","terms","split","memo","term","isValidUrlWithSlash","keywordQueries","phrases","tokens","formatted","original","subdocIds","uuids","memberDocs","searchDocs","requests","memberDoc","collection","predicate","chunks","rescueKey","messageKey","initDoc","removeItem","getNextFlash","rescueTimeout","saveRescueVersion","checkForRescue","setBaseContents","SET_AUTOSAVE_READY","sendIfReady","throttle","inFlight","inLine","SET_INFLIGHT","UNSET_INLINE","storeRescueVersion","sendUpdate","autosaveThrottle","leading","trailing","composed","OT","UPDATE_INFLIGHT_DELTA","docCursor","sequenceCursor","end_sequence","contentsCursor","packetUuid","v4","sequence","SET_SENT_ID","content_hash","schema_version","retry","delay","maxDelay","UNSET_INFLIGHT","UPDATE_SEQUENCE","SET_DIRTY","SET_CLEAN","clone","json","test","packets","retryAfterRebase","sendToSentry","doc_id","flashNow","version","resp","MESSAGE_RESCUE_VERSION","docUuid","replace","setNextFlash","searchPanelClass","searchPanelCollapsed","baseQuery","toggleSearchPanel","isPagesViewMode","back","titleButtonText","savedSearchName","resultsCount","resultsFor","searchPhrase","searchItem","removeChipFromQuery","myDocs","onMyDocsChange","storyLabel","sortBy","onOrderChange","selectedIndices","setDocAction","lastActivityLabel","refInFor","displayActions","updateTernaryCheckbox","setFilter","paginate","truncateString","removeChip","NotFound","console","reconnectDocs","reconnectingIds","ADD_RECONNECTING_DOC","REMOVE_RECONNECTING_DOC","localUpdate","rootState","UPDATE_LAST_MODIFIED_DATE","SET_INLINE","publishHistory","legacyPubEventIndex","findIndex","legacyPubEvent","ld","oldDelta","UPDATE_DOC","remoteUpdate","sentIds","REMOVE_SENT_ID","left","right","transform","UPDATE_INLINE_DELTA","resolveOnLocalUpdate","CLEAR_DIRTY","resolveOnAutosaveReady","SET_FATAL_ERROR","resolveOnClean","updateDocFlag","UPDATE_DOC_BY_PATH","teardownDoc","markError","reportToSentry","from","CommunityMenu","n","maxVisible","Layout","EditorNav","action","fatalError","beforeUnload","appName","getDoc","haltIfTrashed","checkCommunityContexts","initUnsavedWarning","initCommunityChangedNotice","trashedAt","threshold","returnValue","communityChanged","HttpStatusError","ShortlinkModal","SavedSearchCreateModal","SavedSearchDeleteModal","iconName","animation","appLoader","tower","URL","httpLink","HttpLink","uri","toString","credentials","towerClient","ApolloClient","link","InMemoryCache","connectToDevTools","shouldBatch","use","VueApollo","defaultClient","importer","importerClient","defaultOptions","watchQuery","fetchPolicy","getDocLabel","AppSidebar","AppModal","AppOverlay","AppLoader","ErrorBoundary","debouncedComputeSizes","loadDoc","getExternalCommunityId","computeSizes","overlayEscapeHandler","newUserWelcome","getEntitlements","fontSizePx","getComputedStyle","documentElement","getPropertyValue","fontSize","MOBILE_WIDTH","SET_IS_MOBILE","innerWidth","SAVE_WINDOW_SIZE","width","match","storage","NEW_USER_MARK","hasLoggedIn","SET_OVERLAY","SET_SIDEBAR","announcementClass","toggleHelp","sharedMutations","PATCH_USER","patch","when","to","valid","pushContent","SET_MODAL","currentModal","shouldReRender","modalKey","splice","socketError","RESET_ERROR_BOUNDARY","getStoryType","DOC_LABELS","updated_at","apply","isReady","cancel","editing","disabled","onNameClick","edit","onDeleteClick","BannerMessage","EditorSubnav","EditorMobileSubnav","links","tabName","tabLabel","sentry","Sentry","init","dsn","release","environment","env","integrations","Integrations","docPath","log","Vuex","seed","Store","createdOn","email","timeZone","schemaDomain","actions","modules","autosaveStore","plugins","EditableListItem","howLong","VueRouter","rootUrl","origin","base","mode","routes","Dashboard","Doc","beforeEnter","testing","sharedGetters","READ_ONLY","maintenanceMode","CUSTOM_FIELDS_ENABLED","ENABLED_ORGANIZATIONS","organizationEnabled","organization","slug","ENABLED_NETWORKS","networkEnabled","ENABLED_COMMUNITIES","communityEnabled","ANTHEM_SOCKET_CONNECTED_STATUS","DashboardNav","DocCell","SearchPanel","ScrollLock","Chip","defaultOrder","marginTop","bannerMessageOverride","text","phrase","chipGroups","checkParamsAndSearch","preference","MutationObserver","observe","childList","subtree","keyHandler","toRoute","fromRoute","updatedQuery","resetOrder","missingQueryParams","searchParams","getSearchParams","$nextTick","rebuildCheckboxes","trashed","story_type_blocklist","chip","searchPanel","usePush","actionsBtn","toggleDropdown","setupTernaryFollowers","scrollTo","manualClick","evt","trimString","fieldLabel","inputPlaceholder","currentInput","mappedResults","focusIndex","addOpt","currentSelections","removeSelection","queryType","minSearchTextLength","searchInput","searching","currentOptions","debounce","results","mapResults","clearInput","addClickListeners","removeClickListeners","formatOption","contribs","onClickOut","autocompleteInputWrap","handleKeydown","updateValue","arr","autocompleteInput","autocompleteInputResults","halt","which","max","min","children","grouped","networkIndex","svgLogo","activeMobileNavClass","toggleMobileNav","formattedDocStatus","DocCellActivity","DocCellActions","owner","fullName","tail","timezone","checkbox","row","display","unscheduleDoc","updatedDoc","AutocompleteInput","showSaveButton","statuses","pageStatuses","fields","lastSearchedFormValues","groupName","acc","formattedDate","toLocaleDateString","headlessModeEnabled","contrib","getFormValues","formStateChanged","allowSaving","populateFields","changed","buildSearchQuery","clearSearchFields","updateLastSearchedFormValues","updateDateOperator","searchBoxQuery","dispatchEvent","Event","CommunityMismatchError","entryId","inherits","start","coverage_start_time","end","coverage_end_time","hasStarted","hasEnded","reqOpts","parsed","loadOpts","merge","qs","wait","hash","STORAGE","checkStatus","ok","returnWithHeaders","withHeaders","headers","cacheKey","getCacheKey","fetch","parseBody","accepts","Accept","warn","defaultReqOpts","defaultOpts","requestOpts","toUpperCase","NotFoundError","super","activityIconClass","docStatus","isPublishedOrScheduled","isLivePost","expiration_scheduled_for","dateFormat","statusDateTime","diff","statusDate","hidingDate","diffMinutes","diffHours","diffDays","diffYears","datetime","time","displayRelative","diffUnit","getDiffUnit","forceRelative","findMessageIndex","select","hasError","isError","DEFAULTS","dismissible","validatePersistence","containsComma","containsSpaceEncoding","isLocalFile","LOOKS_LIKE_URL","words","storyContents","hide_from_amp","customstoryContents","images","image_history","credit","caption","columns","rows","sort_column","sort_descending","searchable","sortable","google_spreadsheet_url","upload_filename","close_date","google_critic_snippet","platform_scores","scorecardContents","description","retailers","teaser","entry_password","autotweets","disable_ads","do_not_distribute","isCommunityPostAuthor","is_restricted_in_privacy_consent_region","noindex","nofollow","paywalled","affiliate_link_rewriting_disabled","styles","super_groups","campaign_groups","whitelisted_network_ids","additional_byline","internal_description","social_description","seo_description","canonical_url_override","structured_tags","embargoed","printSlugEnabled","print_slug","str","copied","prevDoc","navigator","clipboard","writeText","copyDoc","updateArchived","updateTrashedAt","setShortlinkModal","actionStatus","restoreDoc","captureMessage","process","captureException","error_name","extra","ChorusHelp","domain","RegExp","submitted","feedback","author","userAgent","context","getChorusVideoAccess","autoTagging","autotagTagTypes","querystring","communityQueries","autolinkTagTypes","tagType","ACTIVE_MEMBERSHIPS","itemName","onSaveClick","input","small","firstLineTruncated","fitCommunityName","offscreen","setAttribute","container","innerText","appendChild","clientWidth","wordsInName","originalHeight","clientHeight","currentWord","removeChild","setAnnouncementState","viewAnnouncements","openChorusHelpSidebar","setAnnouncementClass","announcementStats","saveValue","hasRoleOnCommunity","membershipAuthorized","hasPolicyRole","deleteNotice","timeAgo","updateUser","datePrefix","fullDate","hideScheduledMessage","CommunitySelect","NewStoryButton","routeName","isDashboard","lockClass","targetQuery","classList","remove","secureRandomHex","crypto","msCrypto","Uint8Array","getRandomValues","b","random","substr","DELETE_NOTICE","PUT_NOTICE","notices","graphQLErrors","namePart","op1","op2","snapshot","side"],"mappings":"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","file":"storyeditor.f257ee7792b0887c539b.0.js","sourcesContent":["export const CurrentUser = `\n  query CurrentUser($size: String!) {\n    currentUser {\n      id\n      createdOn\n      fullOrUserName\n      email\n      timeZone\n      networkRoles\n      memberships: communityMemberships {\n        status\n        roles\n        community {\n          id\n          name\n          faviconUrl\n          network {\n            id\n            name\n            svgLogo: siteConfigString(key: \"svg_small_mark_full_color\")\n          }\n        }\n      }\n      networkMemberships {\n        networkId\n        imageUrl(size: $size)\n        network {\n          primaryCommunity {\n            id\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const UserChorusVideo = `\n  query UserChorusVideo($scopeId: Int!) {\n    currentUser {\n      canAccessChorusVideo(scopeType: COMMUNITY, scopeId: $scopeId)\n    }\n  }\n`;\n\nexport const UserTwitterHandle = `\n  query UserTwitterHandle($id: Int!) {\n    user(id: $id) {\n      twitterUsername\n    }\n  }\n`;\n\nexport const UserName = `\n  query UserName($id: Int!) {\n    user(id: $id) {\n      id\n      fullOrUserName\n    }\n  }\n`;\n\nexport const UserNames = `\n  query UserNames($ids: [Int!]!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n    }\n  }\n`;\n\nexport const UserNamesTitles = `\n  query UserNamesTitles($ids: [Int!]!, $communityId: Int!) {\n    users(ids: $ids) {\n      id\n      fullOrUserName\n      authorProfile(communityId: $communityId) {\n        title\n      }\n    }\n  }\n`;\n\nexport const SearchContributors = `\n  query SearchContributors($text: String!, $communityId: Int!) {\n    searchUsers(query: {\n      text: $text,\n      prefix: true,\n      communityIds: [$communityId],\n      roles: [FREELANCE, AUTHOR, TRUSTED_AUTHOR, EDITOR, MANAGER],\n      fallbackNetworkRoles: [NETWORK_ADMIN, NETWORK_EDITOR],\n      statuses: [ACTIVE, PROVISIONAL, PERMISSIONS_SUSPENDED],\n      perPage: 25\n    }) {\n      results {\n        id\n        fullOrUserName\n        username\n      }\n    }\n  }\n`;\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-loader.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-loader.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42cf65d1\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./app-loader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <a :href=\"href\" @click.prevent=\"$emit('communityId', community.id)\">\n    <li :class=\"{ 'is-active': selectionId === community.id }\" class=\"m-community-select__item\">\n      <div class=\"m-community-select__avatar\">\n        <img :src=\"community.faviconUrl || defaultLogoUrl\" class=\"m-community-select__icon\" />\n      </div>\n      <span class=\"m-community-select__name\">{{ community.name }}</span>\n      <res-icon v-if=\"selectionId === community.id\" name=\"check-circle\" size=\"medium\"/>\n    </li>\n  </a>\n</template>\n\n<script>\nexport default {\n  props: {\n    community: {\n      type: Object,\n      required: true\n    },\n    defaultLogoUrl: {\n      type: String,\n      required: true\n    },\n    selectionId: {\n      type: Number,\n      default: null\n    },\n  },\n  computed: {\n    href() {\n      // @todo – support a URL format.\n      return '#';\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vue-transition--slide\"}},[(_vm.currentOverlay.component)?_c('div',{class:(\"m-overlay m-overlay--\" + _vm.pageType + \" m-overlay--orientation-\" + (_vm.currentOverlay.orientation)),attrs:{\"id\":\"overlay\"}},[_c('section',{class:(\"m-overlay__content m-\" + _vm.componentClass)},[_c('res-button',{staticClass:\"p-modal__close\",attrs:{\"design\":\"default\"},on:{\"click\":function($event){return _vm.closeOverlay()}}},[_c('res-icon',{attrs:{\"name\":\"x\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"Close\")])],1),_vm._v(\" \"),_c(_vm.currentOverlay.component,{tag:\"component\",attrs:{\"childProps\":_vm.currentOverlay.childProps,\"orientation\":_vm.currentOverlay.orientation}})],1)]):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-cell.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-cell.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13ba1031\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./community-cell.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","const GROUPED_SUBDOCS = ['scorecard'];\n\n// Checks to determine if all objects in the given group are of the same supported type\nmodule.exports = function groupItemsMatch(group) {\n  return (\n    group.every(item => item.hasOwnProperty('image')) ||\n    GROUPED_SUBDOCS.some(type =>\n      group.every(item => item.hasOwnProperty('doc') && type === item.doc.type)\n    )\n  );\n};\n","<template>\n  <transition name=\"vue-transition--slide\" @after-enter=\"isCollapsed = false\" @after-leave=\"isCollapsed = true\">\n    <div v-show=\"!isCollapsed\" class=\"m-search-panel\">\n      <section class=\"m-search-panel__content\">\n        <res-button\n          v-if=\"isMobile\"\n          :key=\"mobileKey\"\n          class=\"m-search-panel__close\"\n          paddingless\n          @click.prevent=\"closeSearchPanel()\">\n          <res-icon name=\"x\"/><button>Close</button>\n        </res-button>\n        <div class=\"m-search-panel__heading\">\n          <h2>{{ heading }}</h2>\n          <res-button\n            v-if=\"searchView\"\n            :disabled=\"$refs.searchForm && $refs.searchForm.emptyForm\"\n            class=\"m-search-panel__clear\"\n            paddingless\n            @click=\"clearSearch\">\n            <res-icon size=\"smaller\" name=\"refresh\"/>\n            <button>Clear</button>\n          </res-button>\n          <res-toggle-buttons v-if=\"showSavedSearches\" :key=\"toggleKey\">\n            <res-button\n              :active=\"searchView\"\n              value=\"1\"\n              @click=\"() => setSearchView(true)\">\n              <res-icon name=\"search\"/><button/>\n            </res-button>\n            <res-button\n              :active=\"!searchView\"\n              value=\"2\"\n              @click=\"() => setSearchView(false)\">\n              <res-icon name=\"list\"/><button/>\n            </res-button>\n          </res-toggle-buttons>\n        </div>\n        <search-form\n          v-show=\"searchView\"\n          ref=\"searchForm\"\n          :isCollapsed=\"isCollapsed\"\n          :isSearching=\"isSearching\"\n          :updateQuery=\"updateQuery\"\n          :closeSearchPanel=\"closeSearchPanel\"\n          :defaultQuery=\"defaultQuery\"\n          :formattedQuery=\"formattedQuery\"\n          :openCreateModal=\"openCreateModal\"\n          :setSavedSearchName=\"setSavedSearchName\"\n          :currentSavedSearch=\"currentSavedSearch\"\n          :showSaveButton=\"showSavedSearches\" />\n        <saved-search-list\n          v-show=\"!searchView && showSavedSearches\"\n          :searches=\"savedSearches\"\n          :goToSearchView=\"goToSearchView\"\n          :renameSavedSearch=\"renameSavedSearch\"\n          :openDeleteModal=\"openDeleteModal\"\n          :runSavedSearch=\"runSavedSearch\"\n          :currentSavedSearch=\"currentSavedSearch\" />\n      </section>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport SavedSearchList from './saved-search-list.vue';\nimport SearchForm from './search-form.vue';\nimport messages from '../../../client/config/messages';\nimport { SET_MODAL } from '../../store/commands';\nimport { getSearches, addSearch, renameSearch, deleteSearch, runSearch } from '../../actions/saved_search';\nimport { mapState } from 'vuex';\nimport { reportError } from '../../../client/actions/sentry';\n\nexport default {\n  components: {\n    SearchForm,\n    SavedSearchList,\n  },\n  props: {\n    isCollapsed : {\n      type: Boolean,\n      default: false,\n      required: true\n    },\n    isSearching : {\n      type: Boolean,\n      default: false,\n      required: true\n    },\n    updateQuery: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    defaultQuery: {\n      type: Object,\n      default: () => ({}),\n      required: true,\n    },\n    formattedQuery: {\n      type: Array,\n      default: () => []\n    },\n    setSavedSearchName: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n  },\n  data() {\n    return {\n      mobileKey: 1,\n      toggleKey: 1,\n      searchView: true,\n      saving: false,\n      savedSearches: [],\n      currentSavedSearch: {},\n    };\n  },\n  computed: {\n    ...mapState(['isMobile', 'currentCommunity']),\n    heading() {\n      return this.searchView ? 'Search' : 'Saved searches';\n    },\n    showSavedSearches() {\n      // Only show saved searches view on main dashboard\n      // (exclude archive, trash, and pages)\n      return this.$route.name === 'dashboard';\n    }\n  },\n  watch: {\n    currentCommunity() {\n      // If the community was not available on mount, fetch the searches\n      // once the community is loaded in app state\n      if (this.currentCommunity.id && this.showSavedSearches) {\n        this.fetchSearches();\n      }\n    },\n    ['currentSavedSearch.name'](value) {\n      const name = value || '';\n      this.setSavedSearchName(name);\n    },\n    ['$route.name'](name) {\n      if (name === 'dashboard') {\n        // If navigating from pages, archive, or trash to the main dashboard\n        // fetch the searches if they have not been already fetched\n        !this.savedSearches.length && this.fetchSearches();\n      } else {\n        // Ensure search form is always visible on pages, archive, and trash\n        this.searchView = true;\n      }\n      // Clear searches when dashboard route name changes\n      this.clearSearch();\n      if (this.isMobile) {\n        this.closeSearchPanel();\n      }\n    }\n  },\n  mounted() {\n    if (this.currentCommunity.id && this.showSavedSearches) {\n      this.fetchSearches();\n    }\n  },\n  methods: {\n    focusKeywordInput() {\n      this.$refs.searchForm.$refs.keywordInput.focus();\n    },\n    closeSearchPanel() {\n      this.$emit('collapse');\n    },\n    clearSearch() {\n      this.$refs.searchForm.clearSearch();\n      this.clearSavedSearch();\n    },\n    setSearchView(value) {\n      this.searchView = value;\n    },\n    goToSearchView() {\n      if (!this.searchView) {\n        this.searchView = true;\n        this.toggleKey++;\n      }\n    },\n    async fetchSearches() {\n      const params = { communityId: String(this.currentCommunity.id) };\n      try {\n        const searches = await getSearches(params);\n        this.savedSearches = searches;\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    async addSavedSearch(params) {\n      this.saving = true;\n      try {\n        const searchId = await addSearch(params);\n        this.currentSavedSearch = { ...params, searchId };\n        this.fetchSearches();\n        this.searchView = false;\n        this.toggleKey++;\n      } catch (error) {\n        this.handleError(error);\n      }\n      this.saving = false;\n    },\n    openCreateModal(saveButtonRef, keyword) {\n      this.$store.commit(SET_MODAL, {\n        childProps: {\n          addSavedSearch: this.addSavedSearch,\n          saving: this.saving,\n          keyword,\n        },\n        component: 'saved-search-create-modal',\n      });\n      // Remove focus from the `Save search` button to allow autofocus in the\n      // create modal input\n      saveButtonRef.blur();\n    },\n    async renameSavedSearch(search, name) {\n      this.saving = true;\n      const params = {\n        communityId: String(this.currentCommunity.id),\n        searchId: search.searchId,\n        name,\n      };\n      try {\n        await renameSearch(params);\n        this.fetchSearches();\n        if (this.currentSavedSearch.searchId === search.searchId) {\n          const updatedSearch = { ...search, name };\n          this.currentSavedSearch = updatedSearch;\n        }\n      } catch (error) {\n        this.handleError(error);\n      }\n      this.saving = false;\n    },\n    async deleteSavedSearch(searchId) {\n      this.saving = true;\n      const params = {\n        communityId: String(this.currentCommunity.id),\n        searchId,\n      };\n      try {\n        await deleteSearch(params);\n        this.fetchSearches();\n        // Clear search if it's the one being deleted\n        if (this.currentSavedSearch.searchId === searchId) {\n          this.clearSearch();\n        }\n      } catch (error) {\n        this.handleError(error);\n      }\n      this.saving = false;\n    },\n    openDeleteModal(searchId) {\n      this.$store.commit(SET_MODAL, {\n        childProps: {\n          deleteSavedSearch: () => this.deleteSavedSearch(searchId),\n          saving: this.saving,\n        },\n        component: 'saved-search-delete-modal',\n      });\n    },\n    async runSavedSearch(search) {\n      const { searchId, query } = search;\n      const params = {\n        communityId: String(this.currentCommunity.id),\n        searchId,\n      };\n      try {\n        this.updateQuery({ ...this.defaultQuery, q: query });\n        await runSearch(params); // increments the search count\n        this.currentSavedSearch = search;\n        if (this.isMobile) {\n          this.closeSearchPanel();\n        }\n      } catch (error) {\n        // Swallow errors from incrementing the search count\n        // as we are not doing anything with search counts right now.\n      }\n    },\n    handleError(error) {\n      reportError(error, false);\n      this.$store.commit('messageBanner/PUT_NOTICE', {\n        type: 'negative',\n        message: messages.UNEXPECTED,\n      });\n    },\n    clearSavedSearch() {\n      this.currentSavedSearch = {};\n    }\n  }\n};\n</script>\n","<template>\n  <div class=\"m-dashboard__modal\">\n    <p class=\"m-dashboard__modal__text\">Delete this search?</p>\n    <div class=\"m-dashboard__modal__actions\">\n      <res-button :disabled=\"disableButtons\" :res-modal-close=\"modalId\" design=\"secondary\" @click=\"deleteSearch\">\n        <button>Delete</button>\n      </res-button>\n      <res-button :disabled=\"disableButtons\" :res-modal-close=\"modalId\">\n        <res-icon class=\"m-dashboard__modal__icon\" name=\"x\" />\n        <button>Cancel</button>\n      </res-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n  props: {\n    childProps: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    ...mapState(['modalId']),\n    disableButtons() {\n      return this.childProps.saving;\n    }\n  },\n  methods: {\n    deleteSearch() {\n      if (this.disableButtons) {\n        return;\n      }\n      const { deleteSavedSearch } = this.childProps;\n      deleteSavedSearch();\n    }\n  }\n};\n</script>\n","<template>\n  <section class=\"m-chorus-help\">\n    <res-button design=\"secondary\" class=\"m-chorus-help__button\">\n      <res-icon name=\"publish\" />\n      <a href=\"https://chorussupport.zendesk.com/hc/en-us\" target=\"_blank\" rel=\"noopener noreferrer\">Open documentation</a>\n    </res-button>\n    <fieldset v-if=\"announcementEntries.length > 0\" class=\"m-chorus-help__announcements\">\n      <legend>What&#8217;s new</legend>\n      <div v-for=\"(announcement, index) in announcementEntries\" :key=\"index\" class=\"m-chorus-help__entry\" @click=\"openEntry(announcement)\">\n        <p><a>\n          <res-badge v-if=\"announcement.isNew\" size=\"smallest\" design=\"grass\">New</res-badge>\n          {{ announcement.title }}\n        </a></p>\n        <p v-if=\"announcement.blurb\">{{ announcement.blurb }}</p>\n      </div>\n    </fieldset>\n    <p class=\"m-chorus-help__feedback\">You can also <a type=\"button\" @click=\"openContactForm()\">contact us</a>.</p>\n  </section>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport request from '../../../client/lib/request';\nimport messages from '../../../client/config/messages';\nimport parsePagination from '../../../client/lib/parse_chorus_pagination';\nimport { SET_OVERLAY } from './../../store/commands';\n\nexport default {\n  data() {\n    return {\n      announcementEntries: [],\n      page: 1\n    };\n  },\n  computed: {\n    ...mapState([\n      'announcements',\n      'currentUser'\n    ]),\n  },\n  mounted() {\n    this.getAnnouncementEntries();\n  },\n  methods: {\n    handleError() {\n      this.$store.commit('messageBanner/PUT_NOTICE', {\n        type: 'negative',\n        message: messages.UNEXPECTED\n      });\n    },\n    async getAnnouncementEntries() {\n      const query = {\n        community_id: this.announcements.community_id,\n        entry_group_ids: this.announcements.entry_group_id,\n        draft: false,\n        hidden: false,\n        per_page: 3,\n        order: 'date'\n      };\n      try {\n        const response = await request('/api/chorus/entries', { query });\n        const entries = response._embedded.entry; // returns an Array\n        const pagination = parsePagination(response);\n        this.announcementEntries = entries;\n        this.page = pagination.page;\n      } catch(error) {\n        this.handleError();\n      }\n    },\n    openEntry(entry) {\n      this.$store.commit(SET_OVERLAY, {\n        childProps: {\n          dek: entry.dek,\n          body: entry.body,\n          body_extended: entry.body_extended,\n          title: entry.title,\n          url: entry.url\n        },\n        component: 'chorus-help-announcement'\n      });\n      // update timestamp for lastAnnouncementReadAt\n      const lastRead = new Date().toISOString(); // today/now\n      // store it in the vuex state...\n      this.currentUser.lastAnnouncementReadAt = lastRead;\n      // store it in the user session...\n      sessionStorage.setItem('lastAnnouncementReadAt', lastRead);\n    },\n    openContactForm() {\n      this.$store.commit(SET_OVERLAY, {\n        childProps: {},\n        component: 'chorus-help-contact-form'\n      });\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.wrapperClass},[_c('res-icon',{key:_vm.status,class:(\"m-nav-top__status-icon m-nav-top__status-icon--\" + (_vm.status.toLowerCase())),attrs:{\"title\":_vm.status,\"name\":_vm.statusIcon,\"size\":\"medium\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.status))])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var isMapstack = require('./is_mapstack');\nvar isStream = require('./is_stream');\nvar isLinkPost = require('./is_link_post');\nvar isPackage = require('./is_package');\nvar isPage = require('./is_page');\nvar isCustomstory = require('./is_customstory');\n\nmodule.exports = function getStoryType(contents) {\n  if (isMapstack(contents)) {\n    return 'mapstack';\n  } else if (isStream(contents)) {\n    return 'stream';\n  } else if (isLinkPost(contents)) {\n    return 'link';\n  } else if (isPackage(contents)) {\n    return 'package';\n  } else if (isPage(contents)) {\n    return 'page';\n  } else if (isCustomstory(contents)) {\n    return 'custom story';\n  }\n  return 'story';\n};\n","module.exports = function hasMinimalLayout(layout) {\n  return layout && layout !== 'unison_standard';\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vue-transition--slide\"}},[(_vm.currentSidebarTag)?_c('div',{class:(\"m-sidebar m-sidebar--\" + _vm.pageType + \" \" + _vm.orientationClass + \" \" + _vm.pushContentClass)},[_c('header',{class:(\"m-\" + _vm.currentSidebarTag)},[(_vm.currentSidebar.title)?_c('h2',[_vm._v(_vm._s(_vm.currentSidebar.title))]):_vm._e(),_vm._v(\" \"),_c('res-button',{staticClass:\"m-sidebar__close\",on:{\"click\":function($event){$event.preventDefault();return _vm.closeSidebar()}}},[_c('res-icon',{attrs:{\"name\":\"x\"}}),_c('button',[_vm._v(\"Close\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"m-sidebar__content\"},[_c(_vm.currentSidebarTag,{tag:\"component\",attrs:{\"id\":_vm.currentSidebar.id,\"childProps\":_vm.currentSidebar.childProps}})],1)]):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-404\"},[_c('svg',{attrs:{\"id\":\"Layer_1\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"viewBox\":\"0 0 162.5 303.5\",\"enable-background\":\"new 0 0 162.5 303.5\",\"xml:space\":\"preserve\"}},[_c('g',[_c('path',{attrs:{\"fill\":\"#54C2BA\",\"d\":\"M162.5,188.5L40.3,127.3c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,23V0L31,65.9\\n        C4.1,79.5,0,96.7,0,105.8s4,26.3,31,39.9l131.5,65.9V188.5z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"fill\":\"#E0DB24\",\"d\":\"M162.5,234.4L40.3,173.2c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,69V46L31,111.9\\n        C4.1,125.3,0,142.5,0,151.7c0,9,4,26.3,31,39.9l131.5,65.9V234.4z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"fill\":\"#C74A27\",\"d\":\"M40.3,219c-12.4-6.2-19.7-14.1-19.7-21.5s7.2-15.1,19.7-21.5l122.2-61.2V91.9L31,157.8\\n        C4,171.4,0,188.6,0,197.7c0,9,4,26.3,31,39.9l131.5,65.9v-23L40.3,219z\"}})])]),_vm._v(\" \"),_c('h2',[_vm._v(\"Page not found\")]),_vm._v(\" \"),_c('h3',[_vm._v(\"Sorry, that page doesn’t exist. Want to head back to \"),_c('router-link',{attrs:{\"to\":\"/\"},nativeOn:{\"click\":function($event){return _vm.resetErrorBoundary($event)}}},[_vm._v(\"Chorus\")]),_vm._v(\"?\")],1),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),_vm._m(1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('strong',[_vm._v(\"Need help?\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://status.voxmedia.com/\"}},[_vm._v(\"Platform status\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"https://chorussupport.zendesk.com/hc/en-us\"}},[_vm._v(\"Help center\")])]),_vm._v(\" \"),_c('li',[_c('a',{attrs:{\"href\":\"https://www.chorus.help/hc/en-us/requests/new\"}},[_vm._v(\"Contact us\")])])])}]\nexport { render, staticRenderFns }","<template>\n  <span>\n    <res-dropdown ref=\"dropdown\" :for=\"doc.uuid\" placement=\"left\">\n      <button\n        v-if=\"canCopyOrMoveDoc\"\n        :disabled=\"readOnly\"\n        @click=\"copyDoc\">\n        Copy\n      </button>\n      <!-- Filter is empty and user can archive/trash -->\n      <button\n        v-if=\"!filter && canArchiveOrTrashStories\"\n        :disabled=\"readOnly\"\n        @click=\"updateArchived('archive')\">\n        Archive\n      </button>\n      <button\n        v-if=\"!filter && canArchiveOrTrashStories\"\n        :disabled=\"readOnly\"\n        @click=\"updateTrashedAt('trash')\">\n        Move to trash\n      </button>\n      <!-- Shortlink button -->\n      <button\n        v-if=\"!filter\"\n        :disabled=\"readOnly\"\n        :res-modal-open=\"modalId\"\n        type=\"button\"\n        @click=\"setShortlinkModal\">\n        Share\n      </button>\n      <!-- Archive view and user can archive/trash -->\n      <button\n        v-if=\"filter === 'archive' && canArchiveOrTrashStories\"\n        :disabled=\"readOnly\"\n        @click=\"updateArchived('dashboard')\">\n        Restore\n      </button>\n      <button\n        v-if=\"filter === 'archive' && canArchiveOrTrashStories\"\n        :disabled=\"readOnly\"\n        @click=\"updateArchivedAndTrashed('trash')\">\n        Move to trash\n      </button>\n      <!-- Trash view -->\n      <button\n        v-if=\"filter === 'trash'\"\n        :disabled=\"readOnly\"\n        @click=\"updateTrashedAt('dashboard')\">\n        Restore\n      </button>\n      <button\n        v-if=\"filter === 'trash'\"\n        :disabled=\"readOnly\"\n        @click=\"updateArchivedAndTrashed('archive')\">\n        Move to archive\n      </button>\n    </res-dropdown>\n\n    <res-button\n      v-if=\"isMobile\"\n      v-show=\"showActionsButton\"\n      :key=\"mobileKey\"\n      :id=\"doc.uuid\"\n      design=\"secondary\">\n      <button type=\"button\">Actions</button>\n    </res-button>\n\n    <res-button\n      v-if=\"!isMobile\"\n      v-show=\"showActionsButton\"\n      :key=\"mobileKey\"\n      :id=\"doc.uuid\"\n      design=\"default\">\n      <res-icon\n        size=\"medium\"\n        title=\"Menu\"\n        name=\"more\"\n        animated=\"false\" />\n      <button type=\"button\" />\n    </res-button>\n\n    {{ actionStatus }}\n\n    <res-button\n      v-if=\"moveCompleted\"\n      :design=\"isMobile ? 'secondary' : ''\"\n      class=\"m-dashboard__table__actions__restore\"\n      @click=\"restoreDoc\">\n      <button type=\"button\">Restore</button>\n    </res-button>\n  </span>\n</template>\n\n<script>\nimport canCopyOrMove from '../../client/lib/can_copy_or_move';\nimport messages from '../../client/config/messages';\nimport request from '../../client/lib/request';\nimport { mapState, mapGetters } from 'vuex';\nimport { reportError } from '../../client/actions/sentry';\nimport { toggleArchived, updateTrashedAt } from '../lib/docs';\nimport { SET_MODAL } from '../store/commands';\n\nexport default {\n  props: {\n    doc: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    },\n    filter: {\n      type: String,\n      default: ''\n    },\n    canArchiveOrTrashStories: {\n      type: Boolean,\n      default: false,\n    },\n    onMoveCompleted: {\n      type: Function,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      canCopyOrMoveDoc: canCopyOrMove(this.doc),\n      copyInProgress: false,\n      destination: '',\n      // Clone of the doc to keep track of changes made via actions\n      docObj: this.doc,\n      moveCompleted: false,\n      moveInProgress: false,\n      mobileKey: 1\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentCommunity',\n      'isMobile',\n      'currentUser',\n      'modalId'\n    ]),\n    ...mapGetters(['readOnly']),\n    showActionsButton() {\n      return !this.moveInProgress && !this.moveCompleted && !this.copyInProgress;\n    },\n    actionStatus() {\n      if (this.moveInProgress) {\n        return `Moving to ${this.destination}`;\n      } else if (this.copyInProgress) {\n        return 'Copying';\n      }\n      return '';\n    },\n    isTrashed() {\n      return this.docObj.head.contents.trashed_at !== null;\n    },\n  },\n  watch: {\n    filter() {\n      this.moveCompleted = false;\n    },\n    isMobile() {\n      this.mobileKey++;\n    }\n  },\n  methods: {\n    handleError(error) {\n      reportError(error, false);\n      this.$store.commit('messageBanner/PUT_NOTICE', {\n        type: 'negative',\n        message: messages.UNEXPECTED\n      });\n    },\n    async copyDoc() {\n      this.copyInProgress = true;\n      const params = {\n        community_id: this.currentCommunity.id,\n        copy_doc_uuid: this.doc.uuid,\n      };\n      try {\n        // TODO: Look into making a util for /newstory requests\n        const copiedDoc = await request('/newstory', {\n          method: 'POST',\n          body: params,\n          opts: { handleError: false }\n        });\n        window.location.assign(`/compose/${copiedDoc.uuid}`);\n      } catch (error) {\n        this.copyInProgress = false;\n        this.handleError(error);\n      }\n    },\n    setMoveInProgress(destination) {\n      this.destination = destination;\n      this.moveInProgress = true;\n      this.moveCompleted = false;\n    },\n    setMoveCompleted(isLeaving) {\n      this.moveInProgress = false;\n      this.moveCompleted = isLeaving;\n      this.onMoveCompleted(isLeaving);\n    },\n    async updateArchived(destination) {\n      // Hide the actions res-dropdown\n      this.$refs.dropdown.toggle();\n      this.setMoveInProgress(destination);\n      await this.toggleArchived();\n      this.setMoveCompleted(true);\n    },\n    async restoreDoc() {\n      if (this.filter && this.destination !== 'dashboard') {\n        return this.updateArchivedAndTrashed(this.destination);\n      }\n\n      if (this.docObj.archived) {\n        this.setMoveInProgress('dashboard');\n        await this.toggleArchived();\n        this.setMoveCompleted(false);\n      } else if (this.docObj.head.contents.trashed_at) {\n        this.setMoveInProgress('dashboard');\n        await this.toggleTrashed();\n        this.setMoveCompleted(false);\n      }\n    },\n    async toggleArchived() {\n      try {\n        const doc = await toggleArchived(this.docObj);\n        this.docObj = doc;\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    async updateTrashedAt(destination) {\n      // Hide the actions res-dropdown\n      this.$refs.dropdown.toggle();\n      this.setMoveInProgress(destination);\n      await this.toggleTrashed();\n      this.setMoveCompleted(true);\n    },\n    async updateArchivedAndTrashed(destination) {\n      // Hide the actions res-dropdown\n      this.$refs.dropdown.toggle();\n      this.setMoveInProgress(destination);\n      try {\n        const [doc, trashedDoc] = await Promise.all([\n          toggleArchived(this.docObj),\n          updateTrashedAt(this.docObj, this.currentUser.id)\n        ]);\n        // merge values in case of discrepancy from promises order\n        this.docObj = { ...trashedDoc, archived: doc.archived };\n        this.setMoveCompleted(true);\n      } catch (error) {\n        this.setMoveCompleted(false);\n        this.handleError(error);\n      }\n    },\n    async toggleTrashed() {\n      try {\n        const doc = await updateTrashedAt(this.docObj, this.currentUser.id);\n        this.docObj = doc;\n      } catch (error) {\n        this.setMoveCompleted(false);\n        this.handleError(error);\n      }\n    },\n    setShortlinkModal() {\n      this.$store.commit(SET_MODAL, {\n        childProps: { doc: this.doc },\n        component: 'shortlink-modal',\n      });\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"href\":_vm.href},on:{\"click\":function($event){$event.preventDefault();return _vm.$emit('communityId', _vm.community.id)}}},[_c('li',{staticClass:\"m-community-select__item\",class:{ 'is-active': _vm.selectionId === _vm.community.id }},[_c('div',{staticClass:\"m-community-select__avatar\"},[_c('img',{staticClass:\"m-community-select__icon\",attrs:{\"src\":_vm.community.faviconUrl || _vm.defaultLogoUrl}})]),_vm._v(\" \"),_c('span',{staticClass:\"m-community-select__name\"},[_vm._v(_vm._s(_vm.community.name))]),_vm._v(\" \"),(_vm.selectionId === _vm.community.id)?_c('res-icon',{attrs:{\"name\":\"check-circle\",\"size\":\"medium\"}}):_vm._e()],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var flatten = require('lodash').flatten;\n\nmodule.exports = function getPackageStories(toc) {\n  return flatten(toc.map(section => section.stories));\n};\n","import Vue from 'vue';\nimport App from './app.vue';\nimport config from '../shared/vue/config';\nimport router from './router';\nimport store from './store';\nimport '../shared/vue/lib/sentry_client';\nimport { apolloProvider } from '../shared/vue/lib/apollo_client';\n\nnew Vue({\n  store: store(config),\n  router,\n  el: '#app',\n  apolloProvider,\n  ignoredElements: res.manifest.tags.all, // eslint-disable-line no-undef\n  render: h => h(App),\n});\n","module.exports = function(response) {\n  var page = response.current_page;\n  var perPage = response.per_page;\n  var total = response.item_count;\n  var totalPages = (total === 0) ? 1 : Math.ceil(total / perPage);\n\n  return { page, perPage, total, totalPages };\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.currentDoc && _vm.autosave.ready)?_c('div',{staticClass:\"m-layout-mode\"},[_c('div',{staticClass:\"l-content p-flex\"},[_c('div',{staticClass:\"p-flex--v m-preview__wrapper\"},[_c('div',{staticClass:\"m-layout-mode__wrapper\",style:(_vm.bannerMessageOverride)},[_c('section',{staticClass:\"m-layout-mode__content\"},[(_vm.selectedBlockIds.length)?_c('edit-block',{attrs:{\"blockIds\":_vm.selectedBlockIds,\"postMessage\":_vm.postMessage}}):(_vm.packageCoverIndex)?_c('edit-package-cover',{attrs:{\"coverIndex\":_vm.packageCoverIndex,\"postMessage\":_vm.postMessage}}):_c('edit-layout')],1),_vm._v(\" \"),(_vm.selectedBlockIds.length || _vm.packageCoverIndex)?_c('div',{staticClass:\"m-layout-mode__navigation\"},[_c('res-button',{attrs:{\"design\":\"default\",\"paddingless\":\"\"}},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.deselectBlocks}},[_c('res-icon',{attrs:{\"name\":\"back\",\"size\":\"small\"}}),_vm._v(\"\\n              Back to layout\\n            \")],1)])],1):_vm._e()]),_vm._v(\" \"),_c('iframe',{ref:\"layoutIframe\",staticStyle:{\"height\":\"500px\"},attrs:{\"id\":\"layout-iframe\",\"src\":_vm.iframeurl,\"width\":\"100%\",\"height\":\"500px\",\"allowfullscreen\":\"\",\"webkitallowfullscreen\":\"\",\"msallowfullscreen\":\"\"}})])])]):_vm._e()}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","// A group is deemed incomplete if its size doesn't match the expected size.\nmodule.exports = function groupIsComplete(group) {\n  if (group.length === 0) {\n    return false;\n  }\n  var expectedLength = parseInt(group[0].grouping.charAt(0), 10);\n  return group.length === expectedLength;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.searches.length)?_c('p',{staticClass:\"m-search-panel__no-searches\"},[_vm._v(\"\\n    No saved searches. Try creating a saved search.\\n  \")]):_vm._e(),_vm._v(\" \"),_c('ul',{staticClass:\"m-search-panel__saved-searches\"},_vm._l((_vm.searches),function(search){return _c('editable-list-item',{key:search.searchId,attrs:{\"itemName\":search.name,\"onNameClick\":function () { return _vm.runSavedSearch(search); },\"onDeleteClick\":function () { return _vm.openDeleteModal(search.searchId); },\"onSaveClick\":function (name) { return _vm.renameSavedSearch(search, name); },\"active\":search.searchId === _vm.currentSavedSearch.searchId,\"disabled\":_vm.readOnly}})}),1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-nav--dashboard__new-story\"},[(_vm.storyTypes.length === 1)?_c('span',[(_vm.isMobile)?_c('res-button',{key:_vm.mobileKey,attrs:{\"disabled\":_vm.loadingNewDoc || _vm.readOnly,\"design\":\"primary\"}},[_c('res-icon',{attrs:{\"name\":\"add\",\"size\":\"medium\"}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.newDoc(_vm.storyTypes[0].type, _vm.storyTypes[0].defaults)}}})],1):_c('res-button',{key:_vm.mobileKey,attrs:{\"disabled\":_vm.loadingNewDoc || _vm.readOnly,\"design\":\"primary\"}},[_c('button',{on:{\"click\":function($event){return _vm.newDoc(_vm.storyTypes[0].type, _vm.storyTypes[0].defaults)}}},[_vm._v(\"New \"+_vm._s(_vm.storyTypes[0].type))])])],1):_c('res-split-button',{key:_vm.mobileKey,attrs:{\"mobile\":_vm.isMobile,\"disabled\":_vm.loadingNewDoc || _vm.readOnly,\"icon\":\"add\"}},[_c('ul',_vm._l((_vm.storyTypes),function(story,index){return _c('li',{key:index,attrs:{\"active\":index === 0}},[_c('a',{on:{\"click\":function($event){return _vm.newDoc(story.type, story.defaults)}}},[_c('span',[_vm._v(\"New \"+_vm._s(story.type))]),_vm._v(\" \"),(story.status)?_c('res-badge',{attrs:{\"size\":\"smallest\",\"design\":\"rose\"}},[_vm._v(_vm._s(story.status))]):_vm._e()],1)])}),0)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div :id=\"chipId\" :title=\"chipLabel\" class=\"m-chip\">\n    <res-badge size=\"medium\" class=\"m-chip__selection\">\n      <span>{{ truncateString(chipLabel) }}</span><res-icon name=\"x\" title=\"remove selection\" @click=\"removeChip(chipId)\" />\n    </res-badge>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    chipLabel: {\n      type: String,\n      required: true\n    },\n    chipId: {\n      type: String,\n      required: true\n    },\n    stringLimit: {\n      type: Number,\n      default: 40\n    }\n  },\n  methods: {\n    removeChip(id) {\n      this.$emit('removeSelection', id);\n    },\n    truncateString(stringItem) {\n      if (stringItem.length <= this.stringLimit) {\n        return stringItem;\n      }\n      // Return stringItem truncated with '...' concatenated to the end of stringItem.\n      return stringItem.slice(0, this.stringLimit) + '...';\n    },\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scroll-lock.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scroll-lock.vue\"\n/* template */\nvar __vue_render__, __vue_static_render_fns__\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-community-select__menu-wrap\",style:(_vm.fullHeight)},[(_vm.networks)?_c('ul',{staticClass:\"m-community-select__list\"},[_vm._l((_vm.networks),function(network){return [(network.communities.length === 1)?_c('community-cell',{key:network.name,attrs:{\"community\":network.communities[0],\"defaultLogoUrl\":_vm.defaultLogoUrl,\"selectionId\":_vm.selectionId},on:{\"communityId\":function($event){return _vm.selectCommunity($event)}}}):_c('ul',{key:network.name,staticClass:\"m-community-select__list\"},[_c('li',{staticClass:\"m-community-select__network\",class:_vm.expandedNetworks[network.id] ? 'is-expanded' : 'is-collapsed'},[_c('div',{staticClass:\"m-community-select__item\",on:{\"click\":function($event){$event.preventDefault();return _vm.expandNetwork(network.id)}}},[_c('div',{staticClass:\"m-community-select__avatar\"},[(network.logo)?_c('div',{domProps:{\"innerHTML\":_vm._s(network.logo)}}):_c('img',{staticClass:\"m-community-select__icon\",staticStyle:{\"height\":\"20px\"},attrs:{\"src\":_vm.defaultLogoUrl}})]),_vm._v(\" \"),_c('span',{staticClass:\"m-community-select__name\"},[_vm._v(_vm._s(network.name))]),_vm._v(\" \"),_c('res-icon',{attrs:{\"size\":\"medium\",\"name\":\"add-circle\"}}),_vm._v(\" \"),_c('res-icon',{attrs:{\"size\":\"medium\",\"name\":\"minus-circle\"}})],1),_vm._v(\" \"),_c('ul',{staticClass:\"m-community-select__sub-list\"},_vm._l((network.communities),function(community){return _c('community-cell',{key:community.id,attrs:{\"community\":community,\"defaultLogoUrl\":_vm.defaultLogoUrl,\"selectionId\":_vm.selectionId},on:{\"communityId\":function($event){return _vm.selectCommunity($event)}}})}),1)])])]})],2):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var request = require('../lib/request');\nvar parsePagination = require('../lib/parse_chorus_pagination');\nvar isShortlink = require('../lib/is_shortlink');\n\nexport function searchEntries(query) {\n  return request('/api/chorus/entries', { query }).then(response => {\n    var entries = response._embedded.entry;\n    var pagination = parsePagination(response);\n    return [entries, pagination];\n  });\n}\n\nexport function searchEntriesByTitle(q, type, perPage, published = false) {\n  return request('/api/chorus/entries/title_autocomplete', {\n    query: {\n      q,\n      type,\n      per_page: perPage,\n      community_id: app.state.get(['community', 'id']),\n      published\n    }\n  });\n}\n\nexport function getEntryById(id) {\n  if (!id) {\n    return Promise.resolve(null);\n  }\n  return request(`/api/chorus/entries/${id}`);\n}\n\nexport function getEntryByUrl(url) {\n  // shortcut to get the slug of the url\n  const a = document.createElement('a');\n  a.href = url;\n  const slugOrId = isShortlink(url)\n    ? a.pathname.substring(3) // gets the entry ID\n    : a.pathname.substring(1); // gets the entry slug\n\n  // If slugOrId is an empty string, do not request to SBN\n  if (!slugOrId) {\n    throw new Error('invalid Chorus url');\n  }\n\n  return request(`/api/chorus/entries/${slugOrId}`, {\n    query: { community_id: app.state.get(['community', 'id']) },\n    opts: { handleError: false }\n  });\n}\n\nexport function updateEntry(doc, params) {\n  return request(`/api/chorus/entries/${doc.entry_id}`, {\n    method: 'PUT',\n    query: { community_id: doc.community_id },\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\nexport function updateEntryFlags(doc, params, trackProgress = true) {\n  trackProgress && app.state.set(['requestInProgress'], true);\n  if (doc.entry_id == null) {\n    return Promise.reject(new Error('Cannot update flags on a doc without an entry_id'));\n  }\n\n  return request(`/api/chorus/entries/${doc.entry_id}/flags`, {\n    method: 'PUT',\n    query: { community_id: doc.community_id },\n    body: params\n  }).then(() => {\n    trackProgress && app.state.set(['requestInProgress'], false);\n  }).catch(() => {\n    trackProgress && app.state.set(['requestInProgress'], false);\n    return Promise.reject();\n  });\n}\n","<template>\n  <div v-if=\"blockIds.length > 0\" class=\"m-layout-mode__tools\">\n    <form-subsection :label=\"formattedLabel\">\n      <!-- have to re-render all these guys via key because change event not emitted to Resonance :*( -->\n      <div v-if=\"displayParagraphOptions\" :key=\"blockIds.join('-')\" class=\"m-layout-mode__group\">\n        <label class=\"is-fixed\">Styles</label>\n        <res-checkbox\n          :checked=\"currentDropcap\"\n          class=\"m-layout-mode__checkbox\"\n          @change=\"saveField('dropcap', !currentDropcap || null)\">\n          <input\n            id=\"dropcap\"\n            :disabled=\"readOnly\"\n            type=\"checkbox\"\n            name=\"dropcap\"\n          />\n          <label>Add drop cap</label>\n        </res-checkbox>\n        <res-checkbox\n          :checked=\"currentLeadgraf\"\n          class=\"m-layout-mode__checkbox\"\n          @change=\"saveField('leadgraf', !currentLeadgraf || null)\">\n          <input\n            id=\"leadgraf\"\n            :disabled=\"readOnly\"\n            type=\"checkbox\"\n            name=\"leadgraf\"\n          />\n          <label>Make text large</label>\n        </res-checkbox>\n        <res-checkbox\n          :checked=\"currentEndMark\"\n          class=\"m-layout-mode__checkbox\"\n          @change=\"saveField('endmark', !currentEndMark || null)\">\n          <input\n            id=\"endMark\"\n            :disabled=\"readOnly\"\n            type=\"checkbox\"\n            name=\"endMark\"\n          />\n          <label>Add end mark</label>\n        </res-checkbox>\n      </div>\n      <div v-if=\"displayAlignmentOptions\" class=\"m-field m-layout-mode__group\">\n        <label class=\"is-fixed\">Alignment</label>\n        <span class=\"m-radio-button-group\">\n          <label v-for=\"option in positionOptions\" :key=\"option.value\" :title=\"option.label\">\n            <input\n              :checked=\"currentPosition === option.value\"\n              :value=\"option.value\"\n              type=\"radio\"\n              @change=\"saveField('position', option.value)\"/>\n            <span type=\"button\" class=\"is-secondary -small\">\n              <res-icon :title=\"option.label\" :name=\"option.icon\" size=\"medium\"/>\n            </span>\n          </label>\n        </span>\n      </div>\n      <div v-if=\"displayGroupingOptions\" class=\"m-field m-layout-mode__group\">\n        <label class=\"is-fixed\">Grouping</label>\n        <span class=\"m-radio-button-group\">\n          <label v-for=\"option in groupingOptions\" :key=\"option.value\" :title=\"option.label\">\n            <input\n              :checked=\"currentGrouping === option.value\"\n              :value=\"option.value\"\n              type=\"radio\"\n              @change=\"saveField('grouping', option.value)\"/>\n            <span type=\"button\" class=\"is-secondary -small\">\n              <res-icon :title=\"option.label\" :name=\"option.icon\" size=\"medium\"/>\n            </span>\n          </label>\n        </span>\n      </div>\n      <div v-if=\"displayGroupingMessage\" class=\"m-layout-mode__grouping-message\">\n        <span>This {{ objectLabel }} is part of a group.</span>\n        <res-button design=\"default\" paddingless>\n          <res-icon name=\"grid\"/>\n          <button type=\"button\" @click=\"selectAllInGroup\">Select all {{ pluralize(objectLabel) }} in group</button>\n        </res-button>\n      </div>\n      <div v-if=\"displayLayoutOptions\" class=\"m-field\">\n        <label class=\"is-fixed\">Layout</label>\n        <span class=\"m-radio-button-group\">\n          <label v-for=\"option in productCardLayoutOptions\" :key=\"option.value\" :title=\"option.label\">\n            <input\n              :checked=\"currentLayout === option.value\"\n              :value=\"option.value\"\n              type=\"radio\"\n              @change=\"saveSubdocLayout(option.value)\"/>\n            <span type=\"button\" class=\"is-secondary -small\">\n              <res-icon :title=\"option.label\" :name=\"option.icon\" size=\"medium\"/>\n            </span>\n          </label>\n        </span>\n      </div>\n    </form-subsection>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport AutosaveRadio from '../autosave-radio.vue';\nimport FormSubsection from './form-subsection.vue';\nimport getOp from '../../../shared/delta/get_op';\nimport getAttributes from '../../../shared/delta/get_attributes';\nimport getOffset from '../../../shared/delta/get_offset';\nimport groupItemsMatch from '../../../shared/delta/group_items_match';\nimport { uniq, capitalize, intersection } from 'lodash';\nimport { Delta } from 'rich-text';\nimport parseGroups from '../../../shared/delta/parse_groups';\nimport hasMinimalLayout from '../../../shared/has_minimal_layout';\nimport * as docLabels from '../../../client/config/doc_labels';\nimport pluralize from '../../../client/lib/pluralize';\nimport {\n  productCardLayoutOptions,\n  alignmentOptions,\n  groupOptions,\n  groupPositions,\n  nonWideSubdocs,\n  nonFullBleedSubdocs,\n  nonAlignedSubdocs,\n  nonWideBlocks,\n} from '../../config/layoutOptions';\nimport blockLabels from '../../config/blockLabels';\n\nexport default {\n  components: {\n    AutosaveRadio,\n    FormSubsection,\n  },\n  props: {\n    blockIds: {\n      type: Array,\n      required: true\n    },\n    postMessage: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      CONFLICTING_SELECTION: Symbol('conflicting'),\n      // TODO: Hard coding read only for now\n      readOnly: false,\n      productCardLayoutOptions,\n    };\n  },\n  computed: {\n    ...mapState([\n      'autosave'\n    ]),\n    ...mapGetters([\n      'currentDoc',\n      'draftBody'\n    ]),\n    // Only display paragraph options if every block is a paragraph\n    displayParagraphOptions() {\n      return this.blockIds.every(id => this.getObject(id).hasOwnProperty('paragraph'));\n    },\n    // Only display alignment options if every block is _not_ a paragraph\n    displayAlignmentOptions() {\n      return this.blockIds.every(id => this.canSetAlignment(this.getObject(id)));\n    },\n    displayLayoutOptions() {\n      return this.blockIds.every(id => this.canUseLayout(this.getObject(id)));\n    },\n    displayGroupingOptions() {\n      // blocks must be both \"adjacent\" as well as images in order to group\n      if (!this.blocksAreAdjacent) {\n        return false;\n      }\n\n      const objects = this.blockIds.map(id => this.getObject(id));\n      const allObjectsMatch = groupItemsMatch(objects);\n      if (!allObjectsMatch) {\n        return false;\n      }\n\n      const isImages = objects[0].hasOwnProperty('image');\n      return isImages ? objects.length > 1 : objects.length === 2;\n    },\n    displayGroupingMessage() {\n      const grouping = this.currentGrouping;\n      return (\n        grouping &&\n        grouping !== this.CONFLICTING_SELECTION &&\n        parseInt(grouping) > this.blockIds.length\n      );\n    },\n    blocksAreAdjacent() {\n      let previousOffset = null;\n      // Loop thru and if any two blocks are separated by a newline or more,\n      // they are not inline - must be inline as well as adjacent\n      for (let id of this.blockIds) {\n        const offset = this.getOffset(id);\n        if (previousOffset && offset - previousOffset > 2) {\n          return false;\n        }\n        previousOffset = offset;\n      }\n      return true;\n    },\n    currentPosition() {\n      return this.getBlockValue('position') || 'default';\n    },\n    currentGrouping() {\n      return this.getBlockValue('grouping');\n    },\n    currentLayout() {\n      return this.getBlockDocData('layout') || 'full_with_square_img';\n    },\n    currentDropcap() {\n      return this.getBlockValue('dropcap');\n    },\n    currentLeadgraf() {\n      return this.getBlockValue('leadgraf');\n    },\n    currentEndMark() {\n      return this.getBlockValue('endmark');\n    },\n    objectLabel() {\n      if (this.blockIds.length > 1) {\n        return 'Group';\n      } else {\n        const object = this.getObject(this.blockIds[0]);\n\n        const key = Object.keys(object)[0];\n        if (blockLabels.hasOwnProperty(key)) {\n          return blockLabels[key];\n        } else if (key === 'doc') {\n          return docLabels[object.doc.type];\n        } else {\n          return key;\n        }\n      }\n    },\n    formattedLabel() {\n      // Display `HTML` in all caps vs. `Html`\n      const label = this.objectLabel === blockLabels.html ? this.objectLabel : capitalize(this.objectLabel);\n\n      return `${label} options`;\n    },\n    positionOptions() {\n      // Available to all entry types + object types\n      let result = [alignmentOptions.center];\n      const hasGallery = this.blockIds.some(id => {\n        const object = this.getObject(id);\n        return object.hasOwnProperty('doc') && object.doc.type === 'gallery';\n      });\n      if (hasGallery) {\n        return result;\n      }\n      result.push(alignmentOptions.alignLeft);\n\n      // Add feature-only layout options\n      if (hasMinimalLayout(this.currentDoc.head.contents.draft.entry_layout)) {\n        result.push(alignmentOptions.hangLeft);\n        // Add additional layout options, if applicable\n        if (this.blockIds.every(id => this.canSetWide(this.getObject(id)))) {\n          result.push(alignmentOptions.wide);\n        }\n        if (this.blockIds.every(id => this.canSetFullBleed(this.getObject(id)))) {\n          result.push(alignmentOptions.full);\n        }\n        result.push(alignmentOptions.hangRight);\n      }\n\n      result.push(alignmentOptions.alignRight);\n      return result;\n    },\n    groupingOptions() {\n      if (this.blockIds.length < 2) {\n        return [];\n      }\n      let result = [groupOptions.none];\n      switch(this.blockIds.length) {\n      case 2:\n        result.push(groupOptions.twoUp);\n        break;\n      case 3:\n        result = result.concat([\n          groupOptions.threeUpTop,\n          groupOptions.threeUpBottom\n        ]);\n        break;\n      case 4:\n        result.push(groupOptions.fourUp);\n        break;\n      }\n      return result;\n    }\n  },\n  methods: {\n    pluralize(string) {\n      return pluralize(string);\n    },\n    getOffset(id) {\n      return getOffset(this.draftBody, op => op.attributes && op.attributes.id === id);\n    },\n    getBlockAttributes(id) {\n      const offset = this.getOffset(id);\n      return getAttributes(this.draftBody, offset);\n    },\n    getBlockDocData(attr) {\n      // get data attributes from (first) doc obj\n      const blockObj = this.getObject(this.blockIds[0]);\n      const type = blockObj.doc.type;\n      if (blockObj.doc[type] && blockObj.doc[type][attr]) {\n        return blockObj.doc[type][attr];\n      }\n      return null;\n    },\n    getObject(id) {\n      const offset = this.getOffset(id);\n      const op = getOp(this.draftBody, offset - 1);\n      if (op == null || typeof op.insert === 'string') {\n        return { paragraph: true };\n      } else {\n        return op.insert;\n      }\n    },\n    getBlockValue(attr) {\n      // Returns the value for the radio-button-group active value for the given\n      // attribute:\n      // A) If only one item is selected, return that item's attribute value\n      // B) If multiple items are selected:\n      //    - Return an attribute value if all items share the same value\n      //    - Return no valid attribute value if not all share the same value\n      if (this.blockIds.length > 1) {\n        let values = this.blockIds.map(id => this.getBlockAttributes(id)[attr] || null);\n        values = uniq(values);\n        return values.length > 1 ? this.CONFLICTING_SELECTION : values[0];\n      } else {\n        return this.getBlockAttributes(this.blockIds[0])[attr] || false;\n      }\n    },\n    saveField(field, value) {\n      // 1) If updates are being applied to only certain members of a grouping,\n      //    reset that entire grouping before performing the actual update. // WUT\n      const resets = this.resetIncompleteGroups();\n\n      // 2) Compose the layout update, removing invalid layouts if necessary\n      const updates = this.updateFieldValue(field, value);\n\n      this.save([{ p: ['draft', 'body'], t: 'rich-text', o: resets.compose(updates) }]);\n    },\n    saveSubdocLayout(value) {\n      const delta = this.blockIds.reduce((result, id) => {\n        var blockObj = this.getObject(id);\n        var type = blockObj.doc.type;\n        blockObj.doc[type] = { layout: value };\n\n        var offset = this.getOffset(id);\n        var delta = new Delta()\n          .retain(offset - 1)\n          .delete(1)\n          .insert(blockObj);\n\n        return result.compose(delta);\n      }, new Delta());\n      this.save([{ p: ['draft', 'body'], t: 'rich-text', o: delta }]);\n    },\n    async save(delta) {\n      try {\n        await this.$store.dispatch('resolveOnLocalUpdate', { docId: this.autosave.currentDocId, delta: delta });\n        this.postMessage({\n          event: 'refetch'\n        });\n      } catch (er) {\n        // resolve on localupdate doesn't reject with an error message\n        this.postMessage({\n          event: 'error'\n        });\n      }\n    },\n    resetIncompleteGroups() {\n      return parseGroups(this.draftBody).reduce((result, group) => {\n        var groupIds = group.map(line => line.id);\n        var selectedGroupIds = intersection(this.blockIds, groupIds);\n\n        // If the group is partially selected...\n        if (selectedGroupIds.length > 0 &&\n            selectedGroupIds.length !== groupIds.length) {\n\n          // Create reset deltas for all the group members\n          for (let line of group) {\n            var delta = new Delta().retain(line.offset).retain(1, { grouping: null });\n            result = result.compose(delta);\n          }\n        }\n\n        return result;\n      }, new Delta());\n    },\n    updateFieldValue(field, value) {\n      return this.blockIds.reduce((result, id) => {\n        var payload = { [field]: value };\n\n        var attrs = this.getBlockAttributes(id);\n        // there are only 3 alignment options (\"groupPositions\") which are \"Valid\" for groups;\n        // if a non valid option is chosen, ungroup blocks--no it is not obvious based on the UI\n        if (field === 'position' && groupPositions.indexOf(value) === -1) {\n          payload.grouping = null;\n        } else if (field === 'grouping' && (groupPositions.indexOf(attrs.position) === -1 || this.currentPosition === this.CONFLICTING_SELECTION)) {\n          payload.position = 'default';\n        }\n\n        var offset = this.getOffset(id);\n        var delta = new Delta().retain(offset).retain(1, payload);\n        return result.compose(delta);\n      }, new Delta());\n    },\n    canSetAlignment(object) {\n      const isSubdoc = object.hasOwnProperty('doc');\n      return !(\n        (isSubdoc && nonAlignedSubdocs.includes(object.doc.type)) ||\n        object.hasOwnProperty('paragraph')\n      );\n    },\n    canSetWide(object) {\n      const isSubdoc = object.hasOwnProperty('doc');\n      return !(\n        (isSubdoc && nonWideSubdocs.includes(object.doc.type)) ||\n        nonWideBlocks.some(type => object.hasOwnProperty(type))\n      );\n    },\n    canSetFullBleed(object) {\n      const isSubdoc = object.hasOwnProperty('doc');\n      return !(\n        (isSubdoc && nonFullBleedSubdocs.includes(object.doc.type)) ||\n        nonWideBlocks.some(type => object.hasOwnProperty(type))\n      );\n    },\n    canUseLayout(object) {\n      const isSubdoc = object.hasOwnProperty('doc');\n      return (isSubdoc && object.doc.type === 'productcard');\n    },\n    selectAllInGroup() {\n      const firstId = this.blockIds[0];\n      const group = parseGroups(this.draftBody).find(group => {\n        return group.some(item => item.id === firstId);\n      });\n      const blockIds = group.map(item => item.id);\n      this.postMessage({\n        event: 'setSelection',\n        blockIds: blockIds\n      });\n    },\n  }\n};\n\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-link',{class:_vm.lockupClass,attrs:{\"to\":{ path: '/', query: { community_id: _vm.communityId } }}},[_c('div',{class:_vm.avatarWrapClass},[_c('img',{staticClass:\"m-community-select__icon\",attrs:{\"src\":_vm.faviconUrl || _vm.defaultLogoUrl}})]),_vm._v(\" \"),(_vm.firstLine && !_vm.isMobile)?_c('span',[_c('span',{class:(\"m-community-select__name m-community-select__name--first \" + _vm.firstLineTruncatedClass + \" \" + _vm.hasSecondLineClass)},[_vm._v(_vm._s(_vm.firstLine))]),_vm._v(\" \"),(_vm.secondLine)?_c('span',{staticClass:\"m-community-select__name m-community-select__name--second m-community-select__name--truncated\"},[_vm._v(_vm._s(_vm.secondLine))]):_vm._e()]):_c('span',{class:(\"m-community-select__name \" + _vm.mobileTruncatedClass)},[_vm._v(_vm._s(_vm.communityName))])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","const blockLabels = {\n  pullquote: 'pull quote',\n  oembed: 'embed',\n  html: 'HTML block',\n  actionbox: 'action box',\n  readmore: 'related',\n  toh_project_details: 'project details',\n  toh_tools: 'tools and materials',\n  pym: 'Pym.js embed',\n};\n\nexport default blockLabels;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('message')}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-sidebar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-sidebar.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b91c811\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./app-sidebar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"m-community-select__menu-trigger\",on:{\"click\":function($event){$event.preventDefault();return _vm.toggleMenu($event)}}},[_c('div',{staticClass:\"m-community-select__lockup\",class:{ 'is-open': _vm.menuOpen && _vm.hasMenu, 'm-community-select__lockup--openable': _vm.hasMenu }},[_c('div',{staticClass:\"m-community-select__avatar\"},[_c('img',{staticClass:\"m-community-select__icon\",attrs:{\"src\":_vm.community.faviconUrl || _vm.defaultLogoUrl}})]),_vm._v(\" \"),_c('span',{staticClass:\"m-community-select__name\"},[_vm._v(_vm._s(_vm.community.name))])])]),_vm._v(\" \"),(_vm.networks && _vm.networks.length)?_c('community-menu',{ref:\"communityMenu\",staticClass:\"m-community-select__menu\",class:{ 'is-active': _vm.menuOpen },attrs:{\"allowedRoles\":_vm.allowedRoles,\"activeMemberships\":_vm.activeMemberships,\"defaultLogoUrl\":_vm.defaultLogoUrl,\"networks\":_vm.networks,\"menuOpen\":_vm.menuOpen},on:{\"closeMenu\":_vm.closeMenu}}):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var { CurrentUser, UserChorusVideo, UserTwitterHandle, UserName, UserNames, UserNamesTitles } = require('../graphql/queries/users');\nvar request = require('../lib/request');\nvar graphqlRequest = require('../lib/graphql_request');\nvar moment = require('moment-timezone');\nvar { get: getPath, uniq } = require('lodash');\n\nexport async function getCurrentUser() {\n  var { currentUser } = await graphqlRequest('/api/tower/graphql', {\n    query: CurrentUser,\n    variables: { size: 'small' }\n  });\n  const accessRoles = getPath(app.config.policyRoles, 'app.access');\n  // Filter memberships\n  currentUser.memberships = currentUser.memberships.filter((membership) => {\n    return membership.roles.some((role) => accessRoles[role]);\n  });\n\n  // Add some custom fallback logic for when fullOrUserName is falsey\n  currentUser.fullOrUserName = currentUser.fullOrUserName || 'Unknown User';\n\n  return currentUser;\n}\n\nexport async function getChorusVideoAccess(communityId) {\n  const { currentUser } = await graphqlRequest('/api/tower/graphql', {\n    query: UserChorusVideo,\n    variables: { scopeId: communityId }\n  });\n  return currentUser ? currentUser.canAccessChorusVideo : false;\n}\n\nexport async function getTwitterUsername(id) {\n  const { user } = await graphqlRequest('/api/tower/graphql', {\n    query: UserTwitterHandle,\n    variables: { id }\n  });\n  return user.twitterUsername;\n}\n\nexport async function getUser(id) {\n  var { user } = await graphqlRequest('/api/tower/graphql', {\n    query: UserName,\n    variables: { id }\n  });\n  return user;\n}\n\nexport async function getUsers(ids) {\n  if (ids.length === 0) {\n    return [];\n  }\n  var { users } = await graphqlRequest('/api/tower/graphql', {\n    query: UserNames,\n    variables: { ids: uniq(ids) }\n  });\n  return users;\n}\n\nexport async function getUsersWithTitles(ids, communityId) {\n  if (ids.length === 0) {\n    return [];\n  }\n  var { users } = await graphqlRequest('/api/tower/graphql', {\n    query: UserNamesTitles,\n    variables: { ids: uniq(ids), communityId }\n  });\n  return users;\n}\n\nexport function updateAnthemUser(params) {\n  return request('/api/users/currentUser', { method: 'PUT', body: params });\n}\n\nexport function getTimezone() {\n  return app.state.get('user', 'timeZone') || app.state.get('community', 'timeZone');\n}\n\nexport function acknowledgeAnnouncements() {\n  var lastSeen = moment(app.state.get('user', 'lastAnnouncementSeenAt')).utc();\n  var lastPosted = moment(app.config.announcements.last_announcement_posted_at).utc();\n  if (lastSeen.isBefore(lastPosted)) {\n    var now = moment.utc().toISOString();\n    // don't change anything in local state, to allow the bouncing indicator\n    // logic to work until next refresh\n    return updateAnthemUser({ lastAnnouncementSeenAt: now });\n  } else {\n    return Promise.resolve();\n  }\n}\n\nexport function readAnnouncements() {\n  var lastRead = moment(app.state.get('user', 'lastAnnouncementReadAt')).utc();\n  var lastPosted = moment(app.config.announcements.last_announcement_posted_at).utc();\n\n  if (lastRead.isBefore(lastPosted)) {\n    var now = moment.utc().toISOString();\n    // set lastAnnouncementSeenAt too, since `acknowledgeAnnouncements`\n    // didn't change that locally in order to let the indicator bounce\n    app.state.set(['user', 'lastAnnouncementSeenAt'], now);\n    app.state.set(['user', 'lastAnnouncementReadAt'], now);\n    return updateAnthemUser({ lastAnnouncementReadAt: now });\n  } else {\n    return Promise.resolve();\n  }\n}\n\nexport function userLabel(user) {\n  var first = user.first_name;\n  var last = user.last_name;\n  if (!first && !last) {\n    return user.username;\n  } else if (!last) {\n    return first;\n  } else if (!first) {\n    return last;\n  }\n  return first + ' ' + last;\n}\n","exports.ALT_TEXT_OVER_LIMIT = 'Alt text is currently limited to {alt_text_limit} characters. Please try again.';\nexports.APPLE_NEWS_MEMBERS_ONLY_WARNING = 'This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.';\nexports.COMMUNITY_CHANGED = 'This {docLabel} has been moved!';\nexports.CSV_TOO_LARGE = 'This CSV is too large. Please upload a file under 1 MB.';\nexports.DATA_LINKS_ERROR = 'Suggestions timed out. Try again or add links manually.';\nexports.DRAFT_HERMANO_RECORD = 'This {record} is a draft; it will be published automatically when this {docLabel} is published.';\nexports.EMBARGOED = 'This story is embargoed.';\nexports.HIDDEN = 'This story is hidden.';\nexports.FEEDBACK_SENT = 'Message sent!';\nexports.FILE_TOO_LARGE = 'Files must be under 100 MB.';\nexports.GETTY_API_DOWN = 'Getty image search is unavailable. Please try again later.';\nexports.GIF_IN_IMAGE_CARD = 'GIFs cannot be published with {type} cards. Choose another?';\nexports.GIF_TOO_LARGE = 'This GIF is over {size} MB and will block this story from publishing to {platforms}.';\nexports.IMAGE_IN_GALLERY = 'This image is already included in the gallery. Choose another?';\nexports.IMAGE_TOO_LARGE = 'Images must be under 10,000 x 10,000 pixels.';\nexports.INVALID_LINK_MESSAGE = 'Please enter a valid URL.';\nexports.INVALID_SPREADSHEET_URL = 'Please add a valid public Google Sheet URL and try again.';\nexports.INVALID_STREAM_MEMBERSHIP = 'This type of story cannot be added.';\nexports.MERLIN_API_DOWN = 'Merlin image search is unavailable. Please try again later.';\nexports.MISSING_LEGACY_ENTRY = 'Editing is disabled because a more recent version of this story may exist. &nbsp;<a href=\"https://www.chorus.help/hc/en-us/requests/new\">Contact us for help.</a>';\nexports.NETWORK_ASSETS_ACCESS_DENIED = 'You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.';\nexports.NEW_USER_MESSAGE = 'Welcome to Chorus! &nbsp;<a href=\"{url}\">Check out our getting started guide.</a>';\nexports.OEMBED_GENERIC_ERROR = 'Something went wrong. Make sure this embed is shareable and try again.';\nexports.OEMBED_INSECURE_ERROR = 'This embed URL is insecure. Only HTTPS embeds are supported.';\nexports.OEMBED_SUPPORT_ERROR = 'Embeds from this source are not supported at this time.';\nexports.OEMBED_PDF_SUPPORT_ERROR = 'PDFs must be under 10 MB.';\nexports.OEMBED_YOUTUBE_SUPPORT_ERROR = 'Embeds are disabled for this video by the YouTube account owner.';\nexports.PLAGSCAN_ERROR = 'An error occurred. Please try scanning the story again.';\nexports.PLAGSCAN_LOW_WORD_COUNT = 'You can scan this story once it\\'s over 50 words.';\nexports.PLAGSCAN_OUT_OF_DATE = 'The latest version of this story has not been scanned.';\nexports.PLAGSCAN_RETRIEVED= 'A report has been generated for this story.';\nexports.PLAGSCAN_SUBMITTED = 'A report is being generated.';\nexports.PLAGSCAN_UNSCANNED = 'Submit the story for approval to generate a report.';\nexports.PUBLISH_PACKAGE_ACTIVE_MESSAGE = 'Your stories are being {action}...';\nexports.PUBLISH_PACKAGE_WARNING_MESSAGE = '{gerund} this landing page will {verb} all drafts in this package.';\nexports.PYM_EMBED_GENERIC_ERROR = 'Something went wrong. Make sure this Pym.js embed is shareable and try again.';\nexports.PYM_EMBED_INSECURE_ERROR = 'This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.';\nexports.PYM_EMBED_SUPPORT_ERROR = 'Pym.js embeds from this source are not supported at this time.';\nexports.REALTIME_ERROR = 'Autosave failed. Please reload your browser.';\nexports.RECONNECT_ERROR = 'Something went wrong reconnecting. Please reload your browser.';\nexports.RECONNECTING = 'Reconnecting...';\nexports.RELOAD_REQUIRED = 'Please reload to get the latest updates.';\nexports.RELOAD_STALE_TAB = 'You\\'ve been away for a while, please reload.';\nexports.REQUIRED_FIELD = 'This field is required.';\nexports.RESCUE_SAVED_REASSURE = 'Your work has been saved in &nbsp;<a href=\"{url}\">this version.</a>';\nexports.SEND_TO_PRINT_SUCCESS = 'Sent to print!';\nexports.SHEET_PERMISSIONS = 'Please make the Google Sheet public to continue.';\nexports.STRUCTURED_TAGS_ERROR = 'Suggestions timed out. Try again or add tags manually.';\nexports.TOO_MANY_EDITORS = 'More than 10 editors at a time is not recommended.';\nexports.UNEXPECTED = 'An error occurred. Try again or reload your browser.';\nexports.UNSAVED_WARNING = 'Your changes are still being saved; leaving now could cause data loss!';\nexports.UNSUPPORTED_ASSET_TYPE = 'This format is not supported. <a href=\"https://www.chorus.help/hc/en-us/articles/360009582854-Files\">Learn more about supported file formats.</a>';\nexports.UPLOAD_INVALID_FILE = 'At least one of the uploaded files is not supported. Please review supported <a href=\"https://www.chorus.help/hc/en-us/articles/360010240753\">image</a> and <a href=\"https://www.chorus.help/hc/en-us/articles/360009582854-Files\">file</a> formats and try again.';\nexports.UPLOAD_TOO_MANY_FILES = 'One file at a time, please.';\n","<template>\n  <div>\n    <res-banner v-for=\"notice in notifications\"\n                :key=\"notice.id\"\n                :id=\"notice.id\"\n                :design=\"designForNotice(notice)\"\n                :persistent=\"notice.persistent || false\"\n                :timeout=\"notice.timeout || false\"\n                inert\n                @close=\"deleteNotice(notice)\">\n      <res-icon v-if=\"notice.icon\" :name=\"notice.icon\"/><span v-html=\"notice.message\" />\n    </res-banner>\n  </div>\n</template>\n\n<script>\nimport store from './store.js';\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'Message',\n  computed: {\n    ...mapState('messageBanner', ['notifications'])\n  },\n  created() {\n    // check to see if module is already registered before registering again\n    // because HMR re-registers this during development\n    if (!this.$store.state.messageBanner) this.$store.registerModule('messageBanner', store);\n  },\n  methods: {\n    designForNotice(notice) {\n      return notice.type || 'neutral';\n    },\n    deleteNotice(notice) {\n      this.$store.commit('messageBanner/DELETE_NOTICE', notice.id);\n    },\n  }\n};\n</script>\n","var { uniq } = require('lodash');\n\nmodule.exports = function(contents) {\n  const ids = [];\n\n  const body = contents.draft.body;\n  if (body) {\n    for (let op of body.ops) {\n      if (typeof op.insert === 'object' && 'doc' in op.insert) {\n        ids.push(op.insert.doc.id);\n      }\n    }\n  }\n\n  const gallery = contents.draft.main_gallery;\n  if (gallery) {\n    ids.push(gallery.id);\n  }\n\n  return uniq(ids);\n};\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./new-story-button.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./new-story-button.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a4900a0\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./new-story-button.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-package-cover.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-package-cover.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c6bd73b0\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit-package-cover.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div class=\"m-dashboard__modal\">\n    <res-input class=\"m-dashboard__modal__input\" @keyup.enter.prevent=\"handleCreate\">\n      <label>Saved search title</label>\n      <input\n        v-model.trim=\"title\"\n        :placeholder=\"placeholder\"\n        autofocus\n        type=\"text\" />\n    </res-input>\n    <div class=\"m-dashboard__modal__actions\">\n      <res-button\n        :disabled=\"disableButtons\"\n        design=\"primary\"\n        @click.prevent=\"handleCreate\">\n        <button>Save search</button>\n      </res-button>\n      <res-button :disabled=\"disableButtons\" @click.prevent=\"clearModal\">\n        <res-icon class=\"m-dashboard__modal__icon\" name=\"x\" />\n        <button>Cancel</button>\n      </res-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { SET_MODAL } from '../../store/commands';\n\nexport default {\n  props: {\n    childProps: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      title: '',\n      placeholder: 'Untitled search',\n    };\n  },\n  computed: {\n    ...mapState(['modalId', 'currentModal', 'currentCommunity']),\n    disableButtons() {\n      return this.childProps.saving;\n    }\n  },\n  mounted() {\n    this.title = this.childProps.keyword || '';\n  },\n  methods: {\n    handleCreate() {\n      if (this.disableButtons) {\n        return;\n      }\n      const { addSavedSearch } = this.childProps;\n      const params = {\n        name: this.title || this.placeholder,\n        communityId: String(this.currentCommunity.id),\n        query: this.$route.query.q,\n      };\n      addSavedSearch(params);\n      this.clearModal();\n    },\n    clearModal() {\n      this.$store.commit(SET_MODAL, {\n        childProps: null,\n        component: null,\n      });\n    }\n  }\n};\n</script>\n","export default {};\n","export default {\n  namespaced: true,\n  state: {\n    loading: false\n  },\n  mutations: {\n    SET_LOADING(state, payload) {\n      state.loading = Boolean(payload);\n    }\n  }\n};\n","import * as cmd from '../commands';\nimport messages from '../../../client/config/messages';\nimport io from 'socket.io-client';\n\nexport default function capiSocket() {\n  return function(store) {\n\n    function createSocket() {\n      const socketUrl = `${(store.state.ssl ? 'wss' : 'ws')}://${window.location.host}/`;\n      const socket = io(socketUrl, {\n        transports: ['websocket'],\n        path: '/api/content/socket.io/',\n        reconnection: true,\n        reconnectionAttempts: store.state.sockets.reconnectAttempts\n      });\n      store.commit(cmd.CAPI_SOCKET, socket);\n    }\n\n    function initContentApiPresence() {\n      const room = store.state.autosave.currentDocId;\n      store.state.autosave.contentApiSocket.on('reconnect', () => store.state.autosave.contentApiSocket.emit('presence.join', room));\n      store.state.autosave.contentApiSocket.emit('presence.join', room);\n    }\n\n    function connectListeners() {\n\n      store.state.autosave.contentApiSocket.on('connect', () => {\n        initContentApiPresence();\n      });\n\n      store.state.autosave.contentApiSocket.on('autosave.remote-update', (docId, packet) => {\n        store.dispatch('remoteUpdate', { docId, packet });\n      });\n\n      store.state.autosave.contentApiSocket.on('autosave.doc-update', (docId, path, value) => {\n        if (path.includes('schema_version')) {\n          store.commit('messageBanner/PUT_NOTICE', {\n            type: 'negative',\n            message: messages.RELOAD_REQUIRED,\n            persistent: true\n          });\n          // send a disconnect event to the general socket, which should\n          // put the current browser tab into a read-only state until the user reloads\n          store.state.anthemSocket.emit('disconnect', 'read-only');\n\n          // @TODO: clear any active intervals or timeouts for the current doc on load\n          // stateMatchObserver.stopAll();\n        }\n        store.dispatch('updateDocFlag', { docId, path, value });\n      });\n\n      store.state.autosave.contentApiSocket.on('autosave.error', () => {\n        store.commit('messageBanner/PUT_NOTICE', {\n          type: 'negative',\n          message: messages.REALTIME_ERROR,\n          persistent: true\n        });\n      });\n\n      store.state.autosave.contentApiSocket.once('autosave.error', () => {\n        // Stop receiving remote updates, they may cause unwanted duplicate\n        // reports of 'missed a sequence' errors\n        store.state.autosave.contentApiSocket.off('autosave.remote-update');\n\n        // send a disconnect event to the general socket, which should\n        // put the current browser tab into a read-only state until the user reloads\n        store.state.anthemSocket.emit('disconnect', 'read-only');\n      });\n    }\n\n    function leaveRoom() {\n      const room = store.state.autosave.currentDocId;\n      store.state.autosave.contentApiSocket.emit(`presence.${room}.leave`);\n      store.state.autosave.contentApiSocket.disconnect();\n      store.commit(cmd.CAPI_SOCKET, null);\n      store.state.anthemSocket.emit(`presence.${room}.leave`);\n    }\n\n    store.subscribe((mutation) => {\n      if (mutation.type === cmd.SET_DOC) {\n        createSocket();\n        connectListeners();\n      }\n      if (mutation.type === cmd.REMOVE_DOC_FROM_STATE) {\n        leaveRoom();\n      }\n    });\n  };\n}\n","<template>\n  <div class=\"m-404\">\n\n    <svg\n      id=\"Layer_1\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      x=\"0px\"\n      y=\"0px\"\n      viewBox=\"0 0 162.5 303.5\"\n      enable-background=\"new 0 0 162.5 303.5\"\n      xml:space=\"preserve\">\n      <g>\n        <path fill=\"#54C2BA\"\n              d=\"M162.5,188.5L40.3,127.3c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,23V0L31,65.9\n          C4.1,79.5,0,96.7,0,105.8s4,26.3,31,39.9l131.5,65.9V188.5z\"/>\n        <path fill=\"#E0DB24\"\n              d=\"M162.5,234.4L40.3,173.2c-12.4-6.2-19.7-14-19.7-21.5c0-7.4,7.2-15.1,19.7-21.5L162.5,69V46L31,111.9\n          C4.1,125.3,0,142.5,0,151.7c0,9,4,26.3,31,39.9l131.5,65.9V234.4z\"/>\n        <path fill=\"#C74A27\"\n              d=\"M40.3,219c-12.4-6.2-19.7-14.1-19.7-21.5s7.2-15.1,19.7-21.5l122.2-61.2V91.9L31,157.8\n          C4,171.4,0,188.6,0,197.7c0,9,4,26.3,31,39.9l131.5,65.9v-23L40.3,219z\"/>\n      </g>\n    </svg>\n\n    <h2>Page not found</h2>\n\n    <h3>Sorry, that page doesn&#8217;t exist. Want to head back to <router-link to=\"/\" @click.native=\"resetErrorBoundary\">Chorus</router-link>?</h3>\n\n    <p><strong>Need help?</strong></p>\n    <ul>\n      <li><a href=\"https://status.voxmedia.com/\">Platform status</a></li>\n      <li><a href=\"https://chorussupport.zendesk.com/hc/en-us\">Help center</a></li>\n      <li><a href=\"https://www.chorus.help/hc/en-us/requests/new\">Contact us</a></li>\n    </ul>\n\n  </div>\n</template>\n\n<script>\nimport { RESET_ERROR_BOUNDARY } from '../../store/commands';\n\nexport default {\n  methods: {\n    resetErrorBoundary() {\n      this.$store.commit(RESET_ERROR_BOUNDARY);\n    }\n  }\n};\n</script>\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"m-chorus-help\"},[_c('res-button',{staticClass:\"m-chorus-help__button\",attrs:{\"design\":\"secondary\"}},[_c('res-icon',{attrs:{\"name\":\"publish\"}}),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"https://chorussupport.zendesk.com/hc/en-us\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_vm._v(\"Open documentation\")])],1),_vm._v(\" \"),(_vm.announcementEntries.length > 0)?_c('fieldset',{staticClass:\"m-chorus-help__announcements\"},[_c('legend',[_vm._v(\"What’s new\")]),_vm._v(\" \"),_vm._l((_vm.announcementEntries),function(announcement,index){return _c('div',{key:index,staticClass:\"m-chorus-help__entry\",on:{\"click\":function($event){return _vm.openEntry(announcement)}}},[_c('p',[_c('a',[(announcement.isNew)?_c('res-badge',{attrs:{\"size\":\"smallest\",\"design\":\"grass\"}},[_vm._v(\"New\")]):_vm._e(),_vm._v(\"\\n        \"+_vm._s(announcement.title)+\"\\n      \")],1)]),_vm._v(\" \"),(announcement.blurb)?_c('p',[_vm._v(_vm._s(announcement.blurb))]):_vm._e()])})],2):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"m-chorus-help__feedback\"},[_vm._v(\"You can also \"),_c('a',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.openContactForm()}}},[_vm._v(\"contact us\")]),_vm._v(\".\")])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <message />\n</template>\n\n<script>\nimport Message from '../../../shared/vue/banner-messages/message.vue';\nimport { mapState } from 'vuex';\nexport default {\n  components: {\n    Message\n  },\n  computed: {\n    ...mapState(['messageBanner', 'message']),\n    systemMessage() {\n      return Object.assign({}, this.message);\n    }\n  },\n  mounted() {\n    this.displaySystemMessage(this.systemMessage);\n  },\n  methods: {\n    messageShown(storageKey) {\n      return window.localStorage.getItem(storageKey) === 'shown';\n    },\n    displaySystemMessage(bannerMessage={}) {\n      let storageKey;\n      if (bannerMessage.id) storageKey = `message-${bannerMessage.id}`;\n      if (bannerMessage && !this.messageShown(storageKey)) {\n        let messageType = bannerMessage.type;\n        if (messageType === 'primary') messageType = 'neutral';\n        this.$store.commit('messageBanner/PUT_NOTICE', {\n          type: messageType || 'neutral',\n          message: bannerMessage.message,\n          timeout: bannerMessage.timeout || false,\n          icon: bannerMessage.icon || null,\n        });\n        window.localStorage.setItem(storageKey, 'shown');\n      }\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.names.length > 1)?_c('div',[_vm._l((_vm.names),function(name){return _c('div',{key:name.fullOrUserName,staticClass:\"m-avatar\",attrs:{\"alt\":name.fullOrUserName,\"title\":name.fullOrUserName}},[_vm._v(\"\\n    \"+_vm._s(name.initials)+\"\\n  \")])}),_vm._v(\" \"),(_vm.hiddenNames.length > 0)?_c('div',[_c('div',{staticClass:\"m-avatar\",attrs:{\"alt\":_vm.hiddenNames.join(', '),\"title\":_vm.hiddenNames.join(', ')}},[_vm._v(\"\\n      +\"+_vm._s(_vm.hiddenNames.length)+\"\\n    \")])]):_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","module.exports = function isPackage(contents) {\n  return contents.draft.hasOwnProperty('package_toc');\n};\n","module.exports = function getEventDatetime(history, eventTypes, { latest } = { latest: true }) {\n  // Some older stories may not have a `publish_history` list\n  history = (history || []).slice();\n  // If we want the latest instance of the event, reverse the array before searching it\n  if (latest) {\n    history.reverse();\n  }\n  const event = history.find(event => eventTypes.indexOf(event.event_type) > -1);\n\n  // If the event is 'backdated' use the backdated_date\n  if (event) {\n    return event.event_type === 'backdated'\n      ? event.backdated_date\n      : event.date;\n  }\n};\n","<template>\n  <div class=\"m-nav__inner m-nav--editor__inner\">\n\n    <community-lockup :communityId=\"communityId\" />\n\n    <div class=\"m-nav__right\">\n      <div class=\"m-nav--editor__subnav\">\n        <div class=\"m-nav__top\">\n          <h1 class=\"m-nav__title\">{{ hed }}</h1>\n\n          <help-toggle />\n\n        </div>\n        <div class=\"m-nav__bottom\">\n          <nav>\n            <a v-for=\"link in navLinks\"\n               :key=\"link.label\"\n               :href=\"`/${link.label.toLowerCase()}/${currentDoc.uuid}`\"\n               :class=\"pageActive(link.name, link.label.toLowerCase())\"\n               type=\"button\">\n              {{ link.label }}\n            </a>\n          </nav>\n          <div class=\"m-nav__statuses\">\n            <div class=\"m-nav__user-status\">\n              <user-status />\n            </div>\n\n            <status-icon wrapperClass=\"m-nav__story-status\" />\n\n            <span :class=\"`m-status m-status--${currentDoc.status.toLowerCase()}`\">{{ formattedDocStatus }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport sentenceCase from '../../../shared/sentence_case';\nimport docStatuses from '../../../client/config/doc_statuses';\nimport { toPlaintext } from 'convert-rich-text';\nimport CommunityLockup from './community-lockup.vue';\nimport UserStatus from './user-status.vue';\nimport StatusIcon from './status-icon.vue';\nimport HelpToggle from './help-toggle.vue';\n\nexport default {\n  components: {\n    CommunityLockup,\n    UserStatus,\n    StatusIcon,\n    HelpToggle\n  },\n  props: {\n    navLinks: {\n      type: Array,\n      required: true\n    },\n    pageActive: {\n      type: Function,\n      required: true\n    }\n  },\n  computed: {\n    ...mapGetters(['currentDoc']),\n    communityId() {\n      return this.currentDoc && this.currentDoc.community_id;\n    },\n    hed() {\n      const hed = this.currentDoc.head.contents.draft.hed;\n      return toPlaintext(hed);\n    },\n    formattedDocStatus() {\n      const status = this.currentDoc.status;\n      return sentenceCase(docStatuses[status]);\n    }\n  }\n};\n</script>\n","export * from '../../shared/vue/store/commands';\nexport const SET_IS_MOBILE = 'setIsMobile';\nexport const SAVE_WINDOW_SIZE = 'saveWindowSize';\nexport const SET_SIDEBAR = 'setSidebar';\nexport const SET_MODAL = 'setModal';\nexport const SET_OVERLAY = 'setOverlay';\nexport const PATCH_USER = 'patchUser';\nexport const RESET_ERROR_BOUNDARY = 'resetErrorBoundary';\nexport const CUSTOM_FIELDS_ENABLED ='customFieldsEnabled';\n\n// autosave mutations\nexport const SET_DOC = 'setDoc';\nexport const SET_DIRTY = 'setDirty';\nexport const SET_CLEAN = 'setClean';\nexport const CLEAR_DIRTY = 'clearDirty';\nexport const SET_INLINE = 'setInLine';\nexport const UNSET_INLINE = 'unsetInline';\nexport const UPDATE_INLINE_DELTA = 'updateInlineDelta';\nexport const SET_INFLIGHT = 'setInFlight';\nexport const UNSET_INFLIGHT = 'unsetInFlight';\nexport const UPDATE_INFLIGHT_DELTA = 'updateInflightDelta';\nexport const SET_SENT_ID = 'setSentId';\nexport const UPDATE_SEQUENCE = 'updateSequence';\nexport const REMOVE_DOC_FROM_STATE = 'removeDocFromState';\nexport const UPDATE_LAST_MODIFIED_DATE = 'updateLastModifiedDate';\nexport const REMOVE_SENT_ID = 'removeSentId';\nexport const UPDATE_DOC = 'updateDoc';\nexport const CAPI_SOCKET = 'capiSocket';\nexport const ANTHEM_SOCKET_INIT = 'anthemSocketInit';\nexport const ANTHEM_SOCKET_ADD_USER = 'anthemSocketAddUser';\nexport const ANTHEM_SOCKET_REMOVE_USER = 'anthemSocketRemoveUser';\nexport const ANTHEM_SOCKET_CONNECTED_STATUS = 'anthemSocketConnectedStatus';\nexport const UPDATE_DOC_BY_PATH = 'updateDocByPath';\nexport const SET_FATAL_ERROR = 'setFatalError';\nexport const ADD_RECONNECTING_DOC = 'addReconnectingDoc';\nexport const REMOVE_RECONNECTING_DOC = 'removeReconnectingDoc';\nexport const SET_AUTOSAVE_READY = 'setAutosaveReady';\n\nexport const READ_ONLY = 'readOnly';\nexport const SOCKET_ERROR = 'socketError';\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./doc.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./doc.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ac352db8\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./doc.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-overlay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-overlay.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35bd8ec9\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./app-overlay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var Delta = require('rich-text').Delta;\n\nmodule.exports = function getOffset(delta, isValid) {\n  var offset = 0;\n  for (var op of delta.ops) {\n    if (isValid(op)) {\n      return offset;\n    }\n    offset += new Delta([op]).length();\n  }\n\n  // If none found, return a negative offset\n  return -1;\n};\n","export const autosaveThrottle = 2000;\nexport const rescueTimeout = 1000;\n","module.exports = function isStream(contents) {\n  return contents.draft.entry_layout === 'unison_stream';\n};\n","import { has, pick, omit } from 'lodash';\nimport { Delta } from 'rich-text';\nimport document from '../../../config/schema/rich-text.json';\nconst OBJECT_TYPES = Object.keys(document.object.properties);\n\nexport default function(contents) {\n  let changes = [];\n  let delta;\n\n  // story\n  if (has(contents, 'draft.body')) {\n    delta = convertObjects(contents.draft.body);\n    if (delta.length() > 0) {\n      changes.push({ p: ['draft', 'body'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // aside, scorecard\n  if (contents.body) {\n    delta = convertObjects(contents.body);\n    if (delta.length() > 0) {\n      changes.push({ p: ['body'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // scorecard\n  if (contents.pros) {\n    delta = convertObjects(contents.pros);\n    if (delta.length() > 0) {\n      changes.push({ p: ['pros'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // scorecard\n  if (contents.cons) {\n    delta = convertObjects(contents.cons);\n    if (delta.length() > 0) {\n      changes.push({ p: ['cons'], t: 'rich-text', o: delta });\n    }\n  }\n\n  // story (map stack)\n  if (has(contents, 'draft.map_points')) {\n    const mapPoints = contents.draft.map_points;\n    for (let [i, mapPoint] of mapPoints.entries()) {\n      delta = convertObjects(mapPoint.body);\n      if (delta.length() > 0) {\n        changes.push({ p: ['draft', 'map_points', i, 'body'], t: 'rich-text', o: delta });\n      }\n    }\n  }\n\n  return changes;\n}\n\nfunction convertObjects(delta) {\n  const fixDelta = new Delta();\n  for (let op of delta.ops) {\n    if (op.insert === 1) {\n      fixDelta.delete(1).insert(pick(op.attributes, OBJECT_TYPES), omit(op.attributes, OBJECT_TYPES));\n    } else {\n      fixDelta.retain(op.insert.length || 1);\n    }\n  }\n  return fixDelta.chop();\n}\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ab5a74e2\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-form.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-form.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4a233f0d\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search-form.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-overlay__entry\"},[_c('h1',[_c('a',{staticClass:\"m-overlay__entry__export\",attrs:{\"href\":_vm.entry.url,\"target\":\"_blank\"}},[_c('res-icon',{attrs:{\"size\":\"medium\",\"title\":\"Open externally\",\"name\":\"new-window\"}})],1),_vm._v(\"\\n    \"+_vm._s(_vm.entry.title)+\"\\n    \"),_c('a',{staticClass:\"m-overlay__entry__export--after\",attrs:{\"href\":_vm.entry.url,\"target\":\"_blank\"}},[_c('res-icon',{attrs:{\"size\":\"medium\",\"title\":\"Open externally\",\"name\":\"new-window\"}})],1)]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(_vm.entry.dek))]),_vm._v(\" \"),_c('section',{domProps:{\"innerHTML\":_vm._s(_vm.entry.body || _vm.entry.body_extended)}})])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"HeadlessConfig\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"community\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"headlessModeEnabled\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigBoolean\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"headless_mode_enabled\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalPreviewEnabled\"},\"name\":{\"kind\":\"Name\",\"value\":\"hasSiteConfig\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_preview_url\",\"block\":false}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"type\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"string\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalPreviewUrl\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigString\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_preview_url\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalLayoutEnabled\"},\"name\":{\"kind\":\"Name\",\"value\":\"hasSiteConfig\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_layout_preview_url\",\"block\":false}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"type\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"string\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalLayoutUrl\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigString\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_layout_preview_url\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalPreviewSharedSecret\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigString\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_preview_shared_secret\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"externalPreviewEnableAmp\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigBoolean\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"external_preview_enable_amp\",\"block\":false}}],\"directives\":[]}]}}]}}],\"loc\":{\"start\":0,\"end\":704}};\n    doc.loc.source = {\"body\":\"query HeadlessConfig($id: Int!) {\\n  community(id: $id) {\\n    id\\n    headlessModeEnabled:            siteConfigBoolean(key: \\\"headless_mode_enabled\\\")\\n    externalPreviewEnabled:         hasSiteConfig(key: \\\"external_preview_url\\\", type: \\\"string\\\")\\n    externalPreviewUrl:             siteConfigString(key: \\\"external_preview_url\\\")\\n    externalLayoutEnabled:          hasSiteConfig(key: \\\"external_layout_preview_url\\\", type: \\\"string\\\")\\n    externalLayoutUrl:              siteConfigString(key: \\\"external_layout_preview_url\\\")\\n    externalPreviewSharedSecret:    siteConfigString(key: \\\"external_preview_shared_secret\\\")\\n    externalPreviewEnableAmp:       siteConfigBoolean(key: \\\"external_preview_enable_amp\\\")\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n\n    module.exports = doc;\n    \n        module.exports[\"HeadlessConfig\"] = oneQuery(doc, \"HeadlessConfig\");\n        \n","var stringify = require('json-stable-stringify');\nvar md5 = require('js-md5');\n\nmodule.exports = function(contents) {\n  return md5(stringify(contents));\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-layout-mode__tools\"},[_c('form-subsection',{attrs:{\"label\":\"Stories\"}},[_c('div',{staticClass:\"m-layout-mode__group\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Card size\")]),_vm._v(\" \"),_c('autosave-radio',{key:_vm.packageStoryLayout,attrs:{\"value\":_vm.packageStoryLayout,\"options\":_vm.packageStoryLayoutOptions,\"path\":_vm.packageStoryLayoutPath,\"onResolve\":_vm.sendFetch,\"onError\":_vm.sendError}})],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['m-tooltip', _vm.className]},[_c('res-button',{attrs:{\"id\":_vm.id,\"design\":\"default\",\"paddingless\":\"\"}},[_c('res-icon',{attrs:{\"name\":\"tooltip\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"}})],1),_vm._v(\" \"),_c('res-dropdown',{attrs:{\"for\":_vm.id,\"placement\":_vm.placement,\"visible\":_vm.active,\"design\":\"dark\"}},[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./banner-message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./banner-message.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a884d84\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./banner-message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var json0 = require('ot-json0').type;\njson0.registerSubtype(require('rich-text').type);\n\nmodule.exports = json0;\n\n// USAGE:\n// var anth = require('./shared/ottypes/anthem0');\n//\n// var doc = anth.create({\n//   'body': {ops:[{insert:'hey'}]},\n//   'title': 'your ball'\n// }); // not strictly necessary, as this just clones your value, but good practice.\n\n// // o is always an array of ops\n// // you must always specify a rich-text type in the `t` attribute for body changes.\n// anth.apply(x, [\n//   {\n//     'p': ['body'],\n//     't': 'rich-text',\n//     'o': [{insert:'you fool'}]\n//   }\n// ]);\n\n// //x should yield {\"body\":{\"ops\":[{\"insert\":\"you foolhey\"}]},\"title\":\"your ball\"}\n\n// // if we don't require invertibility (since the rich-text otttype is not invertible), don't bother with providing od (object delete)\n// anth.apply(x, [\n//   {\n//     'p': ['title'],\n//     'oi': 'new title!'\n//   }\n// ]);\n\n// // more different object inserts\n// anth.apply(x, [\n//   {\n//     'p': ['dek'],\n//     'oi': 'this is a great dek'\n//   },\n//   { 'p': ['title'],\n//     'oi': 'UPDATED: Amazing New Title!'\n//   },\n//   { 'p': ['site_group_ids'],\n//     'oi': [1,2,3]\n//   }\n// ]);\n\n// // prepend to a list\n// anth.apply(x, [\n//   {\n//     'p': ['site_group_ids', 0],\n//     'li': 42\n//   }\n// ]);\n","var getOp = require('./get_op');\n\nmodule.exports = function getAttributes(delta, offset) {\n  var op = getOp(delta, offset);\n  return op && op.attributes || {};\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('error-boundary',{key:_vm.errorBoundaryKey},[_c('app-modal'),_vm._v(\" \"),_c('app-overlay'),_vm._v(\" \"),_c('app-sidebar'),_vm._v(\" \"),_c('router-view'),_vm._v(\" \"),_c('app-loader',{attrs:{\"iconName\":\"more\",\"animation\":\"static\"}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","import * as cmd from './commands';\n\nexport default {\n  [cmd.SET_CONTEXT](state, { community, user, entitlements }) {\n    // currentCommunity\n    if (community && community.id && community.network) {\n      state.currentCommunity = community;\n\n      // store network at the same level as currentCommunity to\n      // avoid deeply nested data in global state\n      if (Object.keys(community.network).length) {\n        state.network = community.network;\n      }\n    }\n\n    // currentUser\n    if (user) {\n      state.currentUser = user;\n    }\n\n    // entitlements\n    if (entitlements !== undefined) {\n      state.entitlements = entitlements;\n    }\n  }\n};\n","<template>\n  <transition name=\"vue-transition--slide\">\n    <div v-if=\"currentOverlay.component\" id=\"overlay\" :class=\"`m-overlay m-overlay--${pageType} m-overlay--orientation-${currentOverlay.orientation}`\">\n      <section :class=\"`m-overlay__content m-${componentClass}`\">\n        <res-button design=\"default\" class=\"p-modal__close\" @click=\"closeOverlay()\">\n          <res-icon name=\"x\" />\n          <button type=\"button\">Close</button>\n        </res-button>\n        <component\n          :is=\"currentOverlay.component\"\n          :childProps=\"currentOverlay.childProps\"\n          :orientation=\"currentOverlay.orientation\" />\n      </section>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { SET_OVERLAY } from './../store/commands';\nimport { getPageType } from '../lib/get_page_type';\nimport ChorusHelpAnnouncement from './overlays/chorus-help-announcement.vue';\nimport ChorusHelpContactForm from './overlays/chorus-help-contact-form.vue';\n\nexport default {\n  components: {\n    ChorusHelpAnnouncement,\n    ChorusHelpContactForm\n  },\n  computed: {\n    ...mapState(['currentOverlay']),\n    componentClass() {\n      return this.currentOverlay.component || null;\n    },\n    pageType() {\n      return getPageType(this.$route.name);\n    }\n  },\n  methods: {\n    closeOverlay() {\n      this.$store.commit(SET_OVERLAY, {\n        childProps: null,\n        component: null\n      });\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./not-found.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./not-found.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a5ab573\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./not-found.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <span class=\"m-radio-button-group\">\n    <label v-for=\"option in options\" :key=\"option.value\" :title=\"option.label\">\n      <input\n        :id=\"option.id\"\n        v-model=\"radioValue\"\n        :value=\"option.value\"\n        type=\"radio\"\n        @change=\"saveValue\"\n      />\n      <span type=\"button\" class=\"is-secondary -small\">\n        <res-icon v-if=\"option.icon\" :title=\"option.label\" :name=\"option.icon\" size=\"medium\" />\n        <span v-else>{{ option.label }}</span>\n      </span>\n    </label>\n  </span>\n</template>\n\n<script>\nimport { Delta } from 'rich-text';\nimport { get } from 'lodash';\nimport { mapGetters } from 'vuex';\n\nexport default {\n  props: {\n    options: {\n      type: Array,\n      default: () => []\n    },\n    richText: {\n      type: Boolean,\n      default: false,\n    },\n    path: {\n      type: Array,\n      default: () => []\n    },\n    value: {\n      type: String,\n      default: '',\n    },\n    onResolve: {\n      type: Function,\n    },\n    onError: {\n      type: Function\n    },\n  },\n  data() {\n    return {\n      radioValue: null,\n    };\n  },\n  computed: {\n    ...mapGetters(['currentDoc', 'contents']),\n    docId() {\n      return this.currentDoc.id;\n    }\n  },\n  mounted() {\n    this.radioValue = this.value;\n  },\n  methods: {\n    saveValue() {\n      const path = this.path;\n      const previous = get(this.contents, path);\n      const insert = this.richText ? new Delta().insert(this.radioValue) : this.radioValue;\n      const delta = [{\n        p: path,\n        od: previous,\n        oi: insert\n      }];\n      if (this.onResolve && this.onError) {\n        this.asyncSave(delta);\n      } else {\n        this.$store.dispatch('localUpdate', { docId: this.docId, delta: delta });\n      }\n    },\n    async asyncSave(delta) {\n      try {\n        await this.$store.dispatch('resolveOnLocalUpdate', { docId: this.docId, delta: delta });\n        this.onResolve();\n      } catch (error) {\n        this.onError(error);\n      }\n    }\n  },\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-43ea6f5e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard-doc-cell.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","module.exports = function(pagination) {\n  var { total, perPage } = pagination;\n  pagination.totalPages = (total === 0) ? 1 : Math.ceil(total / perPage);\n  return pagination;\n};\n","const request = require('../lib/request');\nconst docActions = require('./docs');\nconst messageActions = require('./messages');\nconst toPlaintext = require('convert-rich-text').toPlaintext;\nconst moment = require('moment-timezone');\nconst isPublished = require('../lib/is_published');\nconst isPackage = require('../../shared/is_package');\nconst getPackageStories = require('../../shared/get_package_stories');\nconst getWordCount = require('../../shared/delta/get_word_count');\nconst getEventDatetime = require('../../shared/get_event_datetime');\nconst { SEND_TO_PRINT_SUCCESS } = require('../config/messages');\nconst sentryActions = require('./sentry');\n\nexport async function publishOrSchedule(doc, params, onProgress) {\n  app.state.set(['requestInProgress'], true);\n  const contents = doc.head.contents;\n  let total = 1;\n  let loaded = 0;\n\n  if (isPackage(contents)) {\n    const toc = contents.draft.package_toc;\n    const stories = getPackageStories(toc);\n    total += stories.length;\n    onProgress({ loaded, total });\n\n    try {\n      await Promise.all(stories.reduce((promises, story) => {\n        const packageDoc = app.state.get(['packageDocs', story.uuid]);\n        if (!isPublished(packageDoc.status)) {\n          promises.push(publishOrScheduleDoc(packageDoc, params));\n        }\n        loaded += 1;\n        onProgress({ loaded, total });\n        return promises;\n      }, []));\n    } catch (err) {\n      sentryActions.reportError(err);\n    }\n  }\n\n  await publishOrScheduleDoc(doc, params);\n  if (onProgress) {\n    onProgress({ loaded: total, total });\n  }\n  app.state.set(['requestInProgress'], false);\n}\n\nasync function publishOrScheduleDoc(doc, params) {\n  if ('publishScheduledFor' in params) {\n    await scheduleDoc(doc, params.publishScheduledFor);\n  } else {\n    await publishDoc(doc, params);\n  }\n  if (params.publishScheduledFor !== null) {\n    trackPublishOrScheduleEvent(params.publishScheduledFor ? 'Scheduled' : 'Published', doc, params);\n  }\n}\n\nasync function publishDoc(doc, params) {\n  try {\n    await request(`/api/content/docs/${doc.id}/publish`, { method: 'POST', body: params });\n  } catch (err) {\n    if (isPackage(doc.head.contents)) {\n      sentryActions.reportError(err, false);\n    }\n    messageActions.showError();\n    app.state.set(['requestInProgress'], false);\n  }\n}\n\nexport async function scheduleDoc(doc, publishScheduledFor, opts = {}) {\n  const history = doc.head.contents.publish_history;\n\n  // If scheduling is being canceled, do our best to restore the doc's previous status\n  let status;\n  if (publishScheduledFor) {\n    status = 'SCHEDULED';\n  } else if (getEventDatetime(history, ['approved'])) {\n    status = 'APPROVED';\n  } else if (getEventDatetime(history, ['submitted'])) {\n    status = 'SUBMITTED';\n  } else {\n    status = 'DRAFT';\n  }\n\n  let eventType;\n  if (!publishScheduledFor) {\n    eventType = 'schedule_canceled';\n  } else if (publishScheduledFor && doc.head.contents.publish_scheduled_for) {\n    eventType = 'rescheduled';\n  } else {\n    eventType = 'scheduled';\n  }\n\n  // Update the doc status, scheduled date, and publish history\n  await docActions.updateDoc(doc.id, {\n    status,\n    delta: [\n      {\n        p: ['publish_scheduled_for'],\n        oi: publishScheduledFor,\n        od: doc.head.contents.publish_scheduled_for\n      },\n      ...pubHistoryUpdate(doc, eventType, { publishScheduledFor, ...opts })\n    ]\n  });\n}\n\nexport function unschedule(doc, onProgress) {\n  return publishOrSchedule(doc, { publishScheduledFor: null }, onProgress);\n}\n\nexport function pubHistoryUpdate(doc, type, opts = {}) {\n  const event = {\n    date: new Date().toISOString(),\n    user_id: opts.userId || app.state.get(['user', 'id']),\n    event_type: type\n  };\n  if (type === 'community_changed') {\n    event.origin_community_id = app.state.get(['community', 'id']);\n    event.destination_community_id = opts.communityId;\n  } else if (type === 'scheduled' || type === 'rescheduled') {\n    event.scheduled_date = opts.publishScheduledFor;\n  }\n  const index = doc.head.contents.publish_history.length;\n  return [{\n    p: ['publish_history', index],\n    li: event\n  }];\n}\n\nfunction trackPublishOrScheduleEvent(eventName, doc, params) {\n\n  if (window.ga) {\n    const draft = doc.head.contents.draft;\n    const history = doc.head.contents.publish_history;\n\n    const firstPublishedDate = getEventDatetime(history, ['published', 'published_via_schedule', 'backdated'], { latest: false });\n    const lastPublishedDate = getEventDatetime(history, ['published', 'published_via_schedule', 'backdated']);\n    const isRepublish = firstPublishedDate && firstPublishedDate !== lastPublishedDate;\n    const formatDate = date => {\n      return date ? moment(date).format('YYYY-MM-DD HH:mm') : '';\n    };\n    window.ga('send', {\n      hitType: 'event',\n      eventCategory: 'publish',\n      eventAction: 'publish:entry',\n      dimension1: doc.entry_id,\n      dimension4: draft.contributors[0].chorus_id,\n      dimension5: formatDate(params.publishScheduledFor || firstPublishedDate),\n      dimension8: formatDate(params.publishScheduledFor || lastPublishedDate),\n      dimension10: draft.site_groups.map(g => g.name).join(':'),\n      dimension11: app.state.get('community', 'slug'),\n      dimension12: app.state.get(['community', 'network', 'slug']),\n      dimension26: new Date(params.publishScheduledFor || lastPublishedDate).getHours(),\n      dimension35: app.state.get('user', 'fullOrUserName'),\n      dimension36: toPlaintext(draft.hed),\n      dimension37: toPlaintext(draft.internal_title),\n      dimension38: toPlaintext(draft.seo_title),\n      dimension39: toPlaintext(draft.social_title),\n      dimension40: isRepublish ? 'Yes' : 'No',\n      dimension53: getWordCount(draft.body)\n    });\n  }\n}\n\nexport async function sendToPrint(doc, deskName) {\n  app.state.set(['requestInProgress'], true);\n  try {\n    await request(`/api/content/docs/${doc.id}/dti_publish`, { method: 'POST', body: { deskName } });\n    messageActions.showMessage({\n      type: 'positive',\n      message: SEND_TO_PRINT_SUCCESS\n    });\n  } catch (err) {\n    messageActions.showError();\n  } finally {\n    app.state.set(['requestInProgress'], false);\n  }\n}\n","function GraphQLError(errors) {\n  Error.call(this);\n\n  var message = 'GraphQL errors returned. ' + errors.length + ' errors occurred';\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, GraphQLError);\n  } else {\n    this.stack = (new Error(message)).stack;\n  }\n\n  this.message = message;\n  this.data = errors;\n  this.name = this.constructor.name;\n}\n\nGraphQLError.prototype = Object.create(Error.prototype);\nGraphQLError.prototype.constructor = GraphQLError;\n\nexport default GraphQLError;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-search-panel__search\"},[_c('form',{staticClass:\"m-search-panel__form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSearchSubmit($event)}}},[_c('res-input',{staticClass:\"m-search-panel__field\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.onSearchSubmit($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keyword),expression:\"keyword\"}],ref:\"keywordInput\",attrs:{\"type\":\"search\",\"placeholder\":\"Story title or keywords\"},domProps:{\"value\":(_vm.keyword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.keyword=$event.target.value}}}),_vm._v(\" \"),_c('res-icon',{attrs:{\"slot\":\"inner-left\",\"name\":\"search\"},slot:\"inner-left\"})],1),_vm._v(\" \"),(!_vm.$route.name.includes('pages'))?_c('autocomplete-input',{staticClass:\"m-search-panel__form__field\",attrs:{\"minSearchTextLength\":2,\"queryType\":\"groups\",\"fieldLabel\":\"Group\",\"inputPlaceholder\":\"Group name\"},model:{value:(_vm.groupList),callback:function ($$v) {_vm.groupList=$$v},expression:\"groupList\"}}):_vm._e(),_vm._v(\" \"),((_vm.currentPage !== 'archive' && _vm.currentPage !== 'trash'))?_c('div',{staticClass:\"m-search-panel__field-wrapper\"},[_c('p',{staticClass:\"m-search-panel__field-label\"},[_vm._v(\"Status\")]),_vm._v(\" \"),(_vm.currentPage === 'pages')?_c('div',{staticClass:\"m-search-panel__checkbox-group\"},_vm._l((_vm.pageStatuses),function(status){return _c('res-checkbox',{key:status.name + _vm.checkboxKey},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(status.checked),expression:\"status.checked\"}],attrs:{\"name\":status.name,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(status.checked)?_vm._i(status.checked,null)>-1:(status.checked)},on:{\"change\":function($event){var $$a=status.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(status, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(status, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(status, \"checked\", $$c)}}}}),_vm._v(\" \"),_c('label',[_vm._v(_vm._s(status.label))])])}),1):_c('div',{staticClass:\"m-search-panel__checkbox-group\"},_vm._l((_vm.statuses),function(status){return _c('res-checkbox',{key:status.name + _vm.checkboxKey},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(status.checked),expression:\"status.checked\"}],attrs:{\"name\":status.name,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(status.checked)?_vm._i(status.checked,null)>-1:(status.checked)},on:{\"change\":function($event){var $$a=status.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(status, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(status, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(status, \"checked\", $$c)}}}}),_vm._v(\" \"),_c('label',[_vm._v(_vm._s(status.label))])])}),1)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"m-search-panel__field-wrapper\"},[_c('p',{staticClass:\"m-search-panel__field-label\"},[_vm._v(\"Date\")]),_vm._v(\" \"),_c('div',{staticClass:\"m-search-panel__date-operator\"},[_c('span',[_vm._v(\"Show stories\")]),_vm._v(\" \"),_c('res-radio',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dateOperator),expression:\"dateOperator\"}],ref:\"on\",attrs:{\"type\":\"radio\",\"name\":\"dateOperator\",\"value\":\"on\"},domProps:{\"checked\":_vm._q(_vm.dateOperator,\"on\")},on:{\"change\":function($event){_vm.dateOperator=\"on\"}}}),_vm._v(\" \"),_c('label',[_vm._v(\"on\")])]),_vm._v(\" \"),_c('res-radio',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dateOperator),expression:\"dateOperator\"}],ref:\"before\",attrs:{\"type\":\"radio\",\"name\":\"dateOperator\",\"value\":\"before\"},domProps:{\"checked\":_vm._q(_vm.dateOperator,\"before\")},on:{\"change\":function($event){_vm.dateOperator=\"before\"}}}),_vm._v(\" \"),_c('label',[_vm._v(\"before\")])]),_vm._v(\" \"),_c('res-radio',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dateOperator),expression:\"dateOperator\"}],ref:\"after\",attrs:{\"type\":\"radio\",\"name\":\"dateOperator\",\"value\":\"after\"},domProps:{\"checked\":_vm._q(_vm.dateOperator,\"after\")},on:{\"change\":function($event){_vm.dateOperator=\"after\"}}}),_vm._v(\" \"),_c('label',[_vm._v(\"after\")])])],1)]),_vm._v(\" \"),_c('res-datepicker',[_c('label'),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dateString),expression:\"dateString\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Date last updated\"},domProps:{\"value\":(_vm.dateString)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.dateString=$event.target.value}}})]),_vm._v(\" \"),_c('autocomplete-input',{ref:\"autocompleteContributors\",staticClass:\"m-search-panel__form__field\",attrs:{\"queryType\":\"contributors\",\"fieldLabel\":\"Byline\",\"inputPlaceholder\":\"Author byline\"},model:{value:(_vm.contributorList),callback:function ($$v) {_vm.contributorList=$$v},expression:\"contributorList\"}}),_vm._v(\" \"),(_vm.currentPage !== 'pages')?_c('div',{staticClass:\"m-search-panel__field-wrapper\"},[_c('p',{staticClass:\"m-search-panel__field-label\"},[_vm._v(\"Story type\")]),_vm._v(\" \"),_c('div',{staticClass:\"m-search-panel__checkbox-group\"},[_vm._l((_vm.storyTypes),function(storyType){return [(_vm.typeAccess.includes(storyType.name))?_c('res-checkbox',{key:storyType.name + _vm.checkboxKey},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(storyType.checked),expression:\"storyType.checked\"}],attrs:{\"name\":storyType.name,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(storyType.checked)?_vm._i(storyType.checked,null)>-1:(storyType.checked)},on:{\"change\":function($event){var $$a=storyType.checked,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(storyType, \"checked\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(storyType, \"checked\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(storyType, \"checked\", $$c)}}}}),_vm._v(\" \"),_c('label',[_vm._v(_vm._s(storyType.label))])]):_vm._e()]})],2)]):_vm._e()],1),_vm._v(\" \"),_c('footer',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isCollapsed),expression:\"!isCollapsed\"}]},[(_vm.showSaveButton)?_c('res-button',{attrs:{\"disabled\":_vm.disableSaveButton,\"res-modal-open\":_vm.disableSaveButton ? null : _vm.modalId,\"design\":\"secondary\"},on:{\"click\":function($event){$event.preventDefault();return (function () { return _vm.openCreateModal(_vm.$refs.saveButton, _vm.keyword); })($event)}}},[_c('button',{ref:\"saveButton\"},[_vm._v(\"Save search\")])]):_vm._e(),_vm._v(\" \"),_c('res-button',{attrs:{\"disabled\":_vm.disableSearchButton,\"design\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSearchSubmit($event)}}},[_c('res-icon',{attrs:{\"name\":\"search\"}}),_c('button',[_vm._v(\"Search\")])],1)],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard__modal\"},[_c('res-input',{staticClass:\"m-dashboard__modal__input\"},[_c('label',[_vm._v(\"Share link\")]),_vm._v(\" \"),(_vm.notPublished)?_c('p',[_vm._v(\"\\n      Before the story is published, this link will redirect to the homepage. Once it's published, it will redirect to the public URL.\\n    \")]):_vm._e(),_vm._v(\" \"),_c('input',{attrs:{\"readonly\":\"\",\"type\":\"text\"},domProps:{\"value\":_vm.shortlink}})]),_vm._v(\" \"),_c('div',{staticClass:\"m-dashboard__modal__actions\"},[_c('res-button',{attrs:{\"design\":\"secondary\"},on:{\"click\":_vm.copyShortlink}},[_c('button',[_vm._v(\"Copy link\")])]),_vm._v(\" \"),(_vm.copied)?_c('span',[_c('res-icon',{staticClass:\"m-dashboard__modal__icon\",attrs:{\"name\":\"check-circle\"}}),_vm._v(\"\\n      Copied!\\n    \")],1):_vm._e(),_vm._v(\" \"),_c('res-button',{attrs:{\"res-modal-close\":_vm.modalId}},[_c('res-icon',{staticClass:\"m-dashboard__modal__icon\",attrs:{\"name\":\"x\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"Cancel\")])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-mobile-subnav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-mobile-subnav.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-200aff40\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editor-mobile-subnav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var chunkBy = require('../chunk_by');\nvar groupIsComplete = require('./group_is_complete');\n\n// Loop through the provided delta and return an array of { offset, grouping }\n// line objects, grouped together into sub-arrays of adjacent lines with the\n// same grouping value.\n//\n// e.g.\n// [\n//   [{ id: '123', offset: 5, grouping: '3-up' }],\n//   [{ id: 'abc', offset: 7, grouping: '2-up' }, { id: 'def', offset: 9, grouping: '2-up' }],\n//   [{ id: 'xyz', offset: 23, grouping: '2-up' }]\n// ]\n//\n// The item is isolated to its own subgroup, since the next item has a different 'grouping' value\n// The last item is also isolated, because it is non-adjacent (i.e. diff from previous offset != 2)\nmodule.exports = function parseGroups(delta) {\n  var offset = 0;\n  var lines = [];\n\n  // Find each line with a 'grouping' attribute, and add it to the lines array\n  for (let op of delta.ops) {\n    if (op.attributes && op.attributes.grouping) {\n      lines.push({\n        id: op.attributes.id,\n        offset: offset,\n        grouping: op.attributes.grouping\n      });\n    }\n    offset += (typeof op.insert === 'string') ? op.insert.length : 1;\n  }\n\n  // Chunk up the lines into groups of consecutive lines with the same grouping\n  // value, with the corresponding max length (2-up => max length 2).\n  return chunkBy(lines, (chunk, next) => {\n    var prev = chunk[chunk.length - 1];\n    return (\n      next.grouping === prev.grouping &&\n      next.offset - prev.offset === 2 &&\n      !groupIsComplete(chunk)\n    );\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard__modal\"},[_c('p',{staticClass:\"m-dashboard__modal__text\"},[_vm._v(\"Delete this search?\")]),_vm._v(\" \"),_c('div',{staticClass:\"m-dashboard__modal__actions\"},[_c('res-button',{attrs:{\"disabled\":_vm.disableButtons,\"res-modal-close\":_vm.modalId,\"design\":\"secondary\"},on:{\"click\":_vm.deleteSearch}},[_c('button',[_vm._v(\"Delete\")])]),_vm._v(\" \"),_c('res-button',{attrs:{\"disabled\":_vm.disableButtons,\"res-modal-close\":_vm.modalId}},[_c('res-icon',{staticClass:\"m-dashboard__modal__icon\",attrs:{\"name\":\"x\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"Cancel\")])],1)],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"currentDoc && autosave.ready\" class=\"m-layout-mode\">\n    <div class=\"l-content p-flex\">\n      <div class=\"p-flex--v m-preview__wrapper\">\n        <div :style=\"bannerMessageOverride\" class=\"m-layout-mode__wrapper\">\n          <section class=\"m-layout-mode__content\">\n            <edit-block\n              v-if=\"selectedBlockIds.length\"\n              :blockIds=\"selectedBlockIds\"\n              :postMessage=\"postMessage\" />\n            <edit-package-cover\n              v-else-if=\"packageCoverIndex\"\n              :coverIndex=\"packageCoverIndex\"\n              :postMessage=\"postMessage\" />\n            <edit-layout v-else />\n          </section>\n          <div v-if=\"selectedBlockIds.length || packageCoverIndex\" class=\"m-layout-mode__navigation\">\n            <res-button design=\"default\" paddingless>\n              <button type=\"button\" @click=\"deselectBlocks\">\n                <res-icon name=\"back\" size=\"small\" />\n                Back to layout\n              </button>\n            </res-button>\n          </div>\n        </div>\n        <!-- preview below TK -->\n        <iframe\n          id=\"layout-iframe\"\n          ref=\"layoutIframe\"\n          :src=\"iframeurl\"\n          width=\"100%\"\n          height=\"500px\"\n          allowfullscreen\n          webkitallowfullscreen\n          msallowfullscreen\n          style=\"height: 500px;\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport { HeadlessConfig } from '../../queries/headlessConfig.graphql';\nimport EditLayout from './edit-layout.vue';\nimport EditBlock from './edit-block.vue';\nimport EditPackageCover from './edit-package-cover.vue';\n\nexport default {\n  components: {\n    EditLayout,\n    EditBlock,\n    EditPackageCover,\n  },\n  props: {\n    uuid: {\n      type: String,\n      required: true,\n      default: '',\n    }\n  },\n  data() {\n    return {\n      siteConfig: {},\n      selectedBlockIds: [],\n      packageCoverIndex: null,\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentCommunity',\n      'autosave',\n      'messageBanner',\n      'isMobile'\n    ]),\n    ...mapGetters([\n      'currentDoc',\n      'draftBody',\n      'contents'\n    ]),\n    communityId() {\n      return this.currentCommunity.id;\n    },\n    componentData() {\n      if (this.currentDoc) {\n        const ids = this.draftBody.ops.filter(op => op.hasOwnProperty('attributes')).map(op => op.attributes.id);\n        return ids.join(',');\n      }\n      return null;\n    },\n    packageCovers() {\n      if (this.currentDoc) {\n        return (this.contents.draft.package_cover ? this.contents.draft.package_cover.length : 0);\n      }\n      return 0;\n    },\n    iframeurl() {\n      // TODO - query params are for testing only\n      return `${this.siteConfig.externalLayoutUrl}/?&c=${this.componentData}&p=${this.packageCovers}`;\n    },\n    bannerMessageOverride() {\n      const navHeight = this.isMobile ? 45 : 72; // 72 here should match $editor-navbar-height sass variable, 45 should match the $mobile-navbar-height\n      const messageHeight = 44;\n      const numberOfMessages = this.messageBanner.notifications.length;\n      const navHeightWithMessages = (messageHeight * numberOfMessages) + navHeight;\n      return `top: ${navHeightWithMessages}px`;\n    }\n  },\n  mounted() {\n    window.addEventListener('message', this.onMessage);\n  },\n  beforeDestroy() {\n    window.removeEventListener('message', this.onMessage);\n  },\n  methods: {\n    deselectBlocks() {\n      this.postMessage({\n        event: 'setSelection',\n        blockIds: []\n      });\n    },\n    postMessage(message) {\n      // TODO replace star selector\n      this.$refs.layoutIframe.contentWindow.postMessage(message, '*');\n    },\n    onMessage(event) {\n      // TODO check this is coming from the correct iframe\n      if (event.data.event === 'selection') {\n        this.selectedBlockIds = event.data.blockIds;\n        this.packageCoverIndex = event.data.packageCoverIndex;\n      }\n    }\n  },\n  apollo: {\n    siteConfig: {\n      query: HeadlessConfig,\n      variables () {\n        return {\n          id: this.communityId\n        };\n      },\n      skip() {\n        return !this.communityId;\n      },\n      update: data => data.community,\n    }\n  },\n};\n</script>\n","module.exports = function isLinkPost(contents) {\n  return contents.draft.hasOwnProperty('redirect_url');\n};\n","<template>\n  <div class=\"m-layout-mode__tools\">\n    <form-subsection label=\"Layout\">\n      <div v-if=\"entryLayoutOptions.length\" class=\"m-field m-layout-mode__group\">\n        <label :class=\"[{ 'm-layout-mode__has-gallery': Boolean(mainGallery) }]\">\n          Template\n          <tooltip v-if=\"mainGallery\" :id=\"uuid\" placement=\"top\">\n            When the lead art is a gallery, only the standard template may be used.\n          </tooltip>\n        </label>\n        <autosave-radio\n          :value=\"entryLayout || 'unison_standard'\"\n          :options=\"entryLayoutOptions\"\n          :path=\"['draft', 'entry_layout']\" />\n      </div>\n      <div v-if=\"isPackage && packageCoverLeadStory\" class=\"m-field\">\n        <label class=\"is-fixed\">Lead story</label>\n        <autosave-radio\n          :value=\"packageCoverLeadStory.layout\"\n          :options=\"packageCoverLeadStoryLayoutOptions\"\n          :path=\"['draft', 'package_cover', 0, 'story', 'layout']\" />\n      </div>\n      <div v-if=\"isPackage && canEditPackageTOC\" class=\"m-field\">\n        <label class=\"is-fixed\">Table of contents</label>\n        <autosave-radio\n          :value=\"packageTOCLayout\"\n          :options=\"packageTOCOrientationOptions\"\n          :path=\"['draft', 'package_toc_layout']\" />\n      </div>\n    </form-subsection>\n  </div>\n</template>\n\n<script>\nimport AutosaveRadio from '../autosave-radio.vue';\nimport FormSubsection from './form-subsection.vue';\nimport Tooltip from '../tooltip.vue';\nimport { get } from 'lodash';\nimport { mapState, mapGetters } from 'vuex';\nimport {\n  featureLayoutOptions,\n  packageCoverLeadStoryLayoutOptions,\n  packageTOCOrientationOptions,\n  standardLayoutOption,\n  impactLayoutOptions,\n  videoFeatureLayoutOption\n} from '../../config/layoutOptions';\n\nexport default {\n  components: {\n    AutosaveRadio,\n    FormSubsection,\n    Tooltip,\n  },\n  data() {\n    return {\n      packageCoverLeadStoryLayoutOptions,\n      packageTOCOrientationOptions,\n    };\n  },\n  computed: {\n    ...mapState(['currentCommunity', 'entitlements']),\n    ...mapGetters(['docLabel', 'currentDoc', 'contents']),\n    entryLayoutOptions() {\n      let options = [];\n\n      if (!this.isPackage && !this.isPage) {\n        options.push(standardLayoutOption);\n\n        if (this.currentCommunity.featuresEnabled) {\n          options = options.concat(featureLayoutOptions);\n\n          if (this.entitlements.includes('use_feature_head_impact_layouts')) {\n            options = options.concat(impactLayoutOptions);\n          }\n          if (this.entitlements.includes('use_feature_video_layout')) {\n            options.push(videoFeatureLayoutOption);\n          }\n        }\n      }\n      return options;\n    },\n    isPackage() {\n      return this.docLabel === 'package';\n    },\n    isPage() {\n      return this.docLabel === 'page';\n    },\n    uuid() {\n      return this.currentDoc.uuid;\n    },\n    entryLayout() {\n      return this.contents.draft.entry_layout;\n    },\n    mainGallery() {\n      return this.contents.draft.main_gallery;\n    },\n    packageCoverLeadStory() {\n      return get(this.contents, ['draft', 'package_cover', 0, 'story']);\n    },\n    packageTOCLayout() {\n      return this.contents.draft.package_toc_layout;\n    },\n    canEditPackageTOC() {\n      const toc = this.contents.draft.package_toc;\n      const tocHidden = this.contents.draft.package_toc_hidden;\n      return !tocHidden && toc && toc.length < 7;\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"m-overlay__form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.submitFeedback()}}},[_c('res-input',{attrs:{\"block\":\"\"}},[_c('label',[_vm._v(\"Send feedback or report an issue.\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],attrs:{\"aria-label\":\"Send feedback to the product team\",\"cols\":\"30\",\"rows\":\"5\"},domProps:{\"value\":(_vm.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.message=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"p-button-row--left\"},[_vm._m(0),_vm._v(\" \"),_c('res-button',{staticClass:\"m-t-1\",attrs:{\"disabled\":!_vm.message ? true : false,\"design\":\"primary\"}},[_c('button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"Submit\")])])],1),_vm._v(\" \"),(_vm.submitted)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"more\"}}):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"By submitting this form, you agree to our \"),_c('a',{attrs:{\"href\":\"https://www.voxmedia.com/pages/community-guidelines-support-requests\"}},[_vm._v(\"community guidelines\")]),_vm._v(\".\")])}]\nexport { render, staticRenderFns }","exports.story = 'story';\nexports.gallery = 'gallery';\nexports.aside = 'sidebar';\nexports.table = 'table';\nexports.poll = 'poll';\nexports.scorecard = 'scorecard';\nexports.imageslider = 'image slider';\nexports.productcard = 'product card';\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"vue-transition--slide\"},on:{\"after-enter\":function($event){_vm.isCollapsed = false},\"after-leave\":function($event){_vm.isCollapsed = true}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isCollapsed),expression:\"!isCollapsed\"}],staticClass:\"m-search-panel\"},[_c('section',{staticClass:\"m-search-panel__content\"},[(_vm.isMobile)?_c('res-button',{key:_vm.mobileKey,staticClass:\"m-search-panel__close\",attrs:{\"paddingless\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.closeSearchPanel()}}},[_c('res-icon',{attrs:{\"name\":\"x\"}}),_c('button',[_vm._v(\"Close\")])],1):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"m-search-panel__heading\"},[_c('h2',[_vm._v(_vm._s(_vm.heading))]),_vm._v(\" \"),(_vm.searchView)?_c('res-button',{staticClass:\"m-search-panel__clear\",attrs:{\"disabled\":_vm.$refs.searchForm && _vm.$refs.searchForm.emptyForm,\"paddingless\":\"\"},on:{\"click\":_vm.clearSearch}},[_c('res-icon',{attrs:{\"size\":\"smaller\",\"name\":\"refresh\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"Clear\")])],1):_vm._e(),_vm._v(\" \"),(_vm.showSavedSearches)?_c('res-toggle-buttons',{key:_vm.toggleKey},[_c('res-button',{attrs:{\"active\":_vm.searchView,\"value\":\"1\"},on:{\"click\":function () { return _vm.setSearchView(true); }}},[_c('res-icon',{attrs:{\"name\":\"search\"}}),_c('button')],1),_vm._v(\" \"),_c('res-button',{attrs:{\"active\":!_vm.searchView,\"value\":\"2\"},on:{\"click\":function () { return _vm.setSearchView(false); }}},[_c('res-icon',{attrs:{\"name\":\"list\"}}),_c('button')],1)],1):_vm._e()],1),_vm._v(\" \"),_c('search-form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchView),expression:\"searchView\"}],ref:\"searchForm\",attrs:{\"isCollapsed\":_vm.isCollapsed,\"isSearching\":_vm.isSearching,\"updateQuery\":_vm.updateQuery,\"closeSearchPanel\":_vm.closeSearchPanel,\"defaultQuery\":_vm.defaultQuery,\"formattedQuery\":_vm.formattedQuery,\"openCreateModal\":_vm.openCreateModal,\"setSavedSearchName\":_vm.setSavedSearchName,\"currentSavedSearch\":_vm.currentSavedSearch,\"showSaveButton\":_vm.showSavedSearches}}),_vm._v(\" \"),_c('saved-search-list',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searchView && _vm.showSavedSearches),expression:\"!searchView && showSavedSearches\"}],attrs:{\"searches\":_vm.savedSearches,\"goToSearchView\":_vm.goToSearchView,\"renameSavedSearch\":_vm.renameSavedSearch,\"openDeleteModal\":_vm.openDeleteModal,\"runSavedSearch\":_vm.runSavedSearch,\"currentSavedSearch\":_vm.currentSavedSearch}})],1)])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","exports.DRAFT = 'draft';\nexports.SUBMITTED = 'submitted';\nexports.APPROVED = 'approved';\nexports.PUBLISHED = 'published';\nexports.SCHEDULED = 'scheduled';\nexports.UPDATED = 'unpublished changes';\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-layout-mode__tools\"},[_c('form-subsection',{attrs:{\"label\":\"Layout\"}},[(_vm.entryLayoutOptions.length)?_c('div',{staticClass:\"m-field m-layout-mode__group\"},[_c('label',{class:[{ 'm-layout-mode__has-gallery': Boolean(_vm.mainGallery) }]},[_vm._v(\"\\n        Template\\n        \"),(_vm.mainGallery)?_c('tooltip',{attrs:{\"id\":_vm.uuid,\"placement\":\"top\"}},[_vm._v(\"\\n          When the lead art is a gallery, only the standard template may be used.\\n        \")]):_vm._e()],1),_vm._v(\" \"),_c('autosave-radio',{attrs:{\"value\":_vm.entryLayout || 'unison_standard',\"options\":_vm.entryLayoutOptions,\"path\":['draft', 'entry_layout']}})],1):_vm._e(),_vm._v(\" \"),(_vm.isPackage && _vm.packageCoverLeadStory)?_c('div',{staticClass:\"m-field\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Lead story\")]),_vm._v(\" \"),_c('autosave-radio',{attrs:{\"value\":_vm.packageCoverLeadStory.layout,\"options\":_vm.packageCoverLeadStoryLayoutOptions,\"path\":['draft', 'package_cover', 0, 'story', 'layout']}})],1):_vm._e(),_vm._v(\" \"),(_vm.isPackage && _vm.canEditPackageTOC)?_c('div',{staticClass:\"m-field\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Table of contents\")]),_vm._v(\" \"),_c('autosave-radio',{attrs:{\"value\":_vm.packageTOCLayout,\"options\":_vm.packageTOCOrientationOptions,\"path\":['draft', 'package_toc_layout']}})],1):_vm._e()])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div :class=\"wrapperClass\">\n    <res-icon\n      :title=\"status\"\n      :class=\"`m-nav-top__status-icon m-nav-top__status-icon--${status.toLowerCase()}`\"\n      :name=\"statusIcon\"\n      :key=\"status\"\n      size=\"medium\"\n    />\n    <span>{{ status }}</span>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\n\nexport default {\n  props: {\n    wrapperClass: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      connected: false,\n      statusMap: {\n        Disconnected: 'x',\n        Error: 'x',\n        Working: 'more',\n        Saved: 'check',\n      }\n    };\n  },\n  computed: {\n    ...mapState({\n      autosaveError: state => state.autosave.error\n    }),\n    ...mapGetters([\n      'currentDoc',\n      'anthemSocketConnectedStatus',\n      'isPipelineDirty'\n    ]),\n    status() {\n      if (this.autosaveError) {\n        return 'Error';\n      } else if (this.connected) {\n        return this.isPipelineDirty ? 'Working' : 'Saved';\n      } else {\n        return 'Disconnected';\n      }\n    },\n    statusIcon() {\n      return this.statusMap[this.status];\n    }\n  },\n  watch: {\n    anthemSocketConnectedStatus() {\n      this.connected = this.anthemSocketConnectedStatus;\n    }\n  },\n  mounted() {\n    this.connected = this.anthemSocketConnectedStatus;\n  }\n};\n</script>\n","import getDocLabel from '../../../client/lib/get_doc_label';\n\nexport default {\n  currentDoc(state) {\n    return state.docsById[state.currentDocId];\n  },\n  docLabel(state, getters) {\n    const { currentDoc } = getters;\n    return getDocLabel(currentDoc);\n  },\n  contents(state, getters) {\n    const { currentDoc } = getters;\n    return currentDoc.head.contents;\n  },\n  draftBody(state, getters) {\n    const { currentDoc } = getters;\n    return currentDoc.head.contents.draft.body;\n  },\n  docIds(state) {\n    return Object.keys(state.docsById).map((docId) => parseInt(docId));\n  },\n  /**\n   * Called to get the dirty state for a specific doc by its id OR the whole\n   * pipeline\n   * @param {Number} optional docId\n   * @returns boolean\n   */\n  isPipelineDirty(state) {\n    return Object.keys(state.dirty).length > 0;\n  },\n  isCurrentDocDirty(state) {\n    return state.dirty.hasOwnProperty(state.currentDocId);\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-nav m-nav__root\"},[_c('banner-message'),_vm._v(\" \"),_c('nav',{staticClass:\"m-nav m-nav--dashboard m-nav--dashboard__vue\"},[_c('div',{staticClass:\"m-nav__inner m-nav--dashboard__inner\"},[_c('community-select',{staticClass:\"m-community-select\",attrs:{\"community\":_vm.currentCommunity,\"user\":_vm.currentUser,\"activeMemberships\":_vm.activeMemberships,\"allowedRoles\":_vm.policyRoles.app.access},model:{value:(_vm.communityId),callback:function ($$v) {_vm.communityId=$$v},expression:\"communityId\"}}),_vm._v(\" \"),_c('div',{staticClass:\"m-nav__right\"},[_c('div',{staticClass:\"m-nav--dashboard__subnav\"},[(_vm.canManagePages)?_c('span',{staticClass:\"m-nav--dashboard__links\"},[_c('res-button',{attrs:{\"id\":\"editorial-dropdown\"}},[_c('button',[_vm._v(\"Admin\")]),_c('res-icon',{attrs:{\"name\":\"down\"}})],1),_vm._v(\" \"),_c('res-dropdown',{key:_vm.$route.name,attrs:{\"for\":\"editorial-dropdown\"}},[_c('a',{attrs:{\"href\":(\"https://\" + _vm.communityDomain + \"/admin/entry_groups/list?community_id=\" + _vm.communityId + \"&type=SiteGroup\")}},[_vm._v(\"Groups\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":(\"https://\" + _vm.communityDomain + \"/admin/hub_layout/show?community_id=\" + _vm.communityId)}},[_vm._v(\"Home & Hubpages\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":(\"https://\" + _vm.communityDomain + \"/admin/link_sets?community_id=\" + _vm.communityId)}},[_vm._v(\"Link sets\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":(\"https://\" + _vm.communityDomain + \"/admin/apple_news_articles/list?community_id=\" + _vm.communityId)}},[_vm._v(\"Apple News\")]),_vm._v(\" \"),_c('router-link',{attrs:{\"to\":{ path: '/pages' }}},[_vm._v(\"Pages\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":(\"http://\" + _vm.communityDomain + \"/admin/dashboard/hub_editorial?community_id=\" + _vm.communityId)}},[_vm._v(\"Legacy Chorus\")]),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"https://www.chorus.help/hc/en-us\"}},[_vm._v(\"Help center\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.canManageAssets)?_c('span',{staticClass:\"m-nav--dashboard__links\"},[_c('res-button',[_c('a',{attrs:{\"href\":(\"/assets?community_id=\" + _vm.communityId),\"rel\":\"external\"}},[_vm._v(\"Assets\")])])],1):_vm._e(),_vm._v(\" \"),_c('new-story-button',{attrs:{\"isMobile\":_vm.isMobile,\"communityId\":_vm.communityId}}),_vm._v(\" \"),_c('help-toggle')],1)])],1)])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-search-panel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-search-panel.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-240b9fd2\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard-search-panel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div :style=\"fullHeight\" class=\"m-community-select__menu-wrap\">\n    <ul v-if=\"networks\" class=\"m-community-select__list\">\n      <template v-for=\"network in networks\">\n        <community-cell\n          v-if=\"network.communities.length === 1\"\n          :community=\"network.communities[0]\"\n          :defaultLogoUrl=\"defaultLogoUrl\"\n          :selectionId=\"selectionId\"\n          :key=\"network.name\"\n          @communityId=\"selectCommunity($event)\"\n        />\n        <ul v-else :key=\"network.name\" class=\"m-community-select__list\">\n          <li :class=\"expandedNetworks[network.id] ? 'is-expanded' : 'is-collapsed'\" class=\"m-community-select__network\">\n            <div class=\"m-community-select__item\" @click.prevent=\"expandNetwork(network.id)\">\n              <div class=\"m-community-select__avatar\">\n                <div v-if=\"network.logo\" v-html=\"network.logo\"/>\n                <img v-else :src=\"defaultLogoUrl\" class=\"m-community-select__icon\" style=\"height:20px\" />\n              </div>\n              <span class=\"m-community-select__name\">{{ network.name }}</span>\n              <res-icon size=\"medium\" name=\"add-circle\"/>\n              <res-icon size=\"medium\" name=\"minus-circle\"/>\n            </div>\n            <ul class=\"m-community-select__sub-list\">\n              <community-cell\n                v-for=\"community in network.communities\"\n                :key=\"community.id\"\n                :community=\"community\"\n                :defaultLogoUrl=\"defaultLogoUrl\"\n                :selectionId=\"selectionId\"\n                @communityId=\"selectCommunity($event)\"\n              />\n            </ul>\n          </li>\n        </ul>\n      </template>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport CommunityCell from './community-cell.vue';\n\nexport default {\n  components: {\n    CommunityCell\n  },\n  props: {\n    allowedRoles: {\n      type: Object,\n      required: true\n    },\n    activeMemberships: {\n      type: Array,\n      default: () => ([])\n    },\n    defaultLogoUrl: {\n      type: String,\n      required: true,\n    },\n    networks: {\n      type: Array,\n      default: null\n    },\n    menuOpen: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data() {\n    return {\n      selectionId: null,\n      expandedNetworks: {},\n      fullHeight: null\n    };\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  mounted() {\n    this.setHeight();\n    window.addEventListener('click', this.closeMenu, true);\n    window.addEventListener('resize', this.setHeight);\n  },\n  beforeDestroy() {\n    window.removeEventListener('click', this.closeMenu, true);\n    window.removeEventListener('resize', this.setHeight);\n  },\n  methods: {\n    closeMenu(e) {\n      if (!e) return;\n      const communityMenu = document.querySelector('.m-community-select__list');\n      const communityMenuTrigger = document.querySelector('.m-community-select__menu-trigger');\n      if (this.menuOpen && !communityMenu.contains(e.target) && !communityMenuTrigger.contains(e.target)) {\n        this.$emit('closeMenu');\n      }\n    },\n    setHeight() {\n      this.fullHeight = `height: ${window.innerHeight}px`;\n    },\n    expandNetwork(id) {\n      this.expandedNetworks[id] = !this.expandedNetworks[id];\n      this.expandedNetworks = Object.assign({}, this.expandedNetworks);\n    },\n    isAuthorized(id) {\n      return this.currentUser.networkRoles.some(r => r in this.allowedRoles)\n        || this.activeMemberships.some(m => m.community.id === id);\n    },\n    async selectCommunity(id) {\n      if (!id) return;\n      if (id && id === this.selectionId) return;\n      if (this.activeMemberships.length === 0 && this.currentUser.networkRoles.length === 0) return;\n      if (!this.isAuthorized(id)) id = this.activeMemberships[0].community.id;\n\n      this.selectionId = id;\n      localStorage.setItem('dashboardCommunityId', id);\n      this.$router.push({ query: { community_id: id } });\n      this.$emit('closeMenu');\n    }\n  }\n};\n</script>\n","import * as cmd from '../commands';\nimport messages from '../../../client/config/messages.js';\nimport io from 'socket.io-client';\n\nexport default function anthemSocket() {\n  let unloading = false;\n  let user;\n  let promptReload;\n  let room;\n\n  return function(store) {\n\n    function createSocket() {\n      const socketUrl = `${(store.state.ssl ? 'wss' : 'ws')}://${window.location.host}/`;\n      const socket = io(socketUrl, {\n        transports: ['websocket'],\n        reconnection: true,\n        reconnectionAttempts: store.state.sockets.reconnectAttempts\n      });\n      store.commit(cmd.ANTHEM_SOCKET_INIT, socket);\n    }\n\n    function connectListeners() {\n\n      store.state.anthemSocket.on('flash-message', params => {\n        if (!params.type) params.type = 'neutral';\n        if (params.type === 'cautionary') params.type = 'neutral';\n        if (params.type === 'primary') params.type = 'positive';\n        store.commit('messageBanner/PUT_NOTICE', {\n          type: params.type,\n          message: params.message,\n          persistent: params.forceRefresh,\n          icon: params.icon\n        });\n\n        if (params.forceRefresh) {\n          // Disconnect socket when we want to force a refresh.\n          store.state.anthemSocket.disconnect();\n        }\n      });\n\n      // Socket disconnect/reonnect bindings...\n      store.state.anthemSocket.on('connect', () => {\n        // 'connect' is a socket.io reserved event\n        // anytime a successful connection emits, delete any error banners in the message store\n        clearErrorBanners();\n        promptReload = startTimer();\n        if (store.state.autosave.currentDocId) {\n          room = store.state.autosave.currentDocId;\n          user = store.state.currentUser;\n          initAnthemServerPresence(room, user);\n        }\n      });\n\n      store.state.anthemSocket.on('reconnect', () => {\n        // reconnection has been established, reset stale-tab timer.\n        resetTimer();\n        clearErrorBanners();\n        // reconnection has been established, display the \"Reconnected.\" banner, which has a 5-second timeout to remove itself.\n        displayBanner('reconnected');\n        if (store.state.autosave.currentDocId) {\n          room = store.state.autosave.currentDocId;\n          user = store.state.currentUser;\n          store.state.anthemSocket.emit('presence.join', room, true, user, addUser);\n        }\n      });\n\n      store.state.anthemSocket.on('connect_error', (error) => {\n        // 'connect_error' is a socket.io reserved event\n        handleDisconnect(error);\n      });\n\n      store.state.anthemSocket.on('disconnect', (reason) => {\n        // 'disconnect' is a socket.io reserved event\n        if (store.state.autosave.currentDocId) {\n          room = store.state.autosave.currentDocId;\n          store.state.anthemSocket.emit('presence.leave', room);\n        }\n        handleDisconnect(reason);\n      });\n\n      store.state.anthemSocket.on('reconnect_attempt', () => {\n        // This event happens when socket is trying to reconnect.\n        // The socket will automatically make a limited number of attempts to reconnect,\n        // but we should only show one banner.\n        displayOnce('reconnecting', 'reconnecting-banner');\n      });\n\n      store.state.anthemSocket.on('reconnect_failed', () => {\n        // after the limited number of attempts to reconnect have failed,\n        // the socket will recieve a failure event.\n        handleDisconnect('reconnect_failed');\n      });\n\n      store.state.anthemSocket.on('autosave.local-update', resetTimer);\n\n      store.state.anthemSocket.on('autosave.remote-update', resetTimer);\n\n    }\n\n    function initAnthemServerPresence(room, user) {\n      // emit the presence of the current user\n      store.state.anthemSocket.emit('presence.join', room, true, user, addUser);\n\n      // add user to other socket users' states\n      store.state.anthemSocket.on(`presence.${room}.greet`, addUser);\n\n      store.state.anthemSocket.on(`presence.${room}.left`, (oldUser) => {\n        store.commit(cmd.ANTHEM_SOCKET_REMOVE_USER, { oldUser: oldUser });\n      });\n\n      // listen for the joining of other users in the same room\n      store.state.anthemSocket.on(`presence.${room}.joined`, (newUser) => {\n        addUser(newUser);\n        store.state.anthemSocket.emit(`presence.${room}.greet`, newUser.socketId);\n      });\n    }\n\n    function addUser(newUser) {\n      if (!store.state.autosave.connectedUsers.find(user => user.id === newUser.id)) {\n        store.commit(cmd.ANTHEM_SOCKET_ADD_USER, { newUser: newUser });\n      }\n    }\n\n    function startTimer() {\n      // When a tab becomes stale, trigger a socket disconnect\n      return setTimeout(() => {\n        store.state.anthemSocket.emit('disconnect', 'stale-tab');\n      }, store.state.sockets.inactivePeriod);\n    }\n\n    function resetTimer() {\n      clearTimeout(promptReload);\n      promptReload = startTimer();\n    }\n\n    function bindActiveTabEventListeners() {\n      window.addEventListener('keypress', resetTimer, false);\n      window.addEventListener('click', resetTimer, false);\n      window.addEventListener('beforeunload', () => {\n        // prevent firefox from showing error banner messages when navigating away\n        unloading = true;\n        removeActiveTabEventListeners();\n      });\n    }\n\n    function removeActiveTabEventListeners() {\n      window.removeEventListener('keypress', resetTimer);\n      window.removeEventListener('click', resetTimer);\n    }\n\n    function displayOnce(bannerType, bannerId) {\n      const bannerFound = store.state.messageBanner.notifications.find(banner => banner.id === bannerId);\n      if (!bannerFound) {\n        displayBanner(bannerType);\n      } else { return; }\n    }\n\n    function displayBanner(type) {\n      switch(type) {\n\n      case 'reload-stale-tab':\n        store.commit('messageBanner/PUT_NOTICE', {\n          id: 'stale-tab-banner',\n          type: 'negative',\n          persistent: true,\n          message: messages.RELOAD_STALE_TAB\n        });\n        break;\n\n      case 'reconnecting':\n        store.commit('messageBanner/PUT_NOTICE', {\n          id: 'reconnecting-banner',\n          type: 'neutral',\n          persistent: true,\n          message: messages.RECONNECTING\n        });\n        break;\n\n      case 'reconnected':\n        store.commit('messageBanner/PUT_NOTICE', {\n          type: 'positive',\n          persistent: false,\n          timeout: true,\n          message: 'Reconnected'\n        });\n        break;\n\n      case 'reconnect-error':\n        store.commit(cmd.SOCKET_ERROR, true);\n        store.commit('messageBanner/PUT_NOTICE', {\n          id: 'reconnect-error-banner',\n          type: 'negative',\n          persistent: true,\n          message: messages.RECONNECT_ERROR\n        });\n        break;\n\n      case 'unexpected-error':\n        store.commit(cmd.SOCKET_ERROR, true);\n        store.commit('messageBanner/PUT_NOTICE', {\n          id: 'error-banner',\n          type: 'negative',\n          persistent: true,\n          message: messages.UNEXPECTED\n        });\n        break;\n\n      case 'request-reload':\n        store.commit('messageBanner/PUT_NOTICE', {\n          id: 'reload-banner',\n          type: 'neutral',\n          persistent: true,\n          message: messages.RELOAD_REQUIRED\n        });\n        break;\n      }\n    }\n\n    function clearErrorBanners() {\n      store.commit('messageBanner/DELETE_NOTICE', 'error-banner');\n      store.commit('messageBanner/DELETE_NOTICE', 'reconnecting-banner');\n      store.commit('messageBanner/DELETE_NOTICE', 'reconnect-error-banner');\n    }\n\n    function handleDisconnect(reason=null) {\n      switch (reason) {\n\n      case 'io client disconnect':\n        // manually disconnected, editor should go into read-only mode\n        store.commit(cmd.SOCKET_ERROR, true);\n        // assume maintenance mode or other deploy has caused this,\n        // if we don't already have a persistent message showing, show this one:\n        if (!this.messageBanner.notifications.some(m => m.persistent)) {\n          this.displayOnce('request-reload', 'reload-banner');\n        }\n        break;\n\n      case 'read-only':\n        // put the editor into read-only state\n        store.commit(cmd.SOCKET_ERROR, true);\n        break;\n\n      case 'stale-tab':\n        // stale-tab timer has hit its limit, ask the user to manually reload.\n        displayOnce('reload-stale-tab', 'stale-tab-banner');\n        break;\n\n      case 'reconnect_failed':\n        // put the editor into read-only state\n        store.commit(cmd.SOCKET_ERROR, true);\n        // remove the 'Reconnecting...' banner\n        store.commit('messageBanner/DELETE_NOTICE', 'reconnecting-banner');\n        // display the banner that tells the user to manually reload (but only show it once).\n        displayOnce('reconnect-error', 'error-banner');\n        break;\n\n      default:\n        // socket connection is lost, ask the user to manually reload.\n        // disconnect reason could be 'transport close', 'ping timeout', or something else.\n        // don't show this banner if the websocket disconnects because the user is navigating away or manually reloading the page (as seen in Firefox)\n        if (!unloading) displayOnce('unexpected-error', 'error-banner');\n      }\n    }\n\n    const unsubscribe = store.subscribe((mutation) => {\n      // run these functions when SET_CONTEXT runs,\n      // but SET_CONTEXT runs three times per interface load,\n      // so `unsubscribe` from SET_CONTEXT after all the connection functions run.\n      if (mutation.type === cmd.SET_CONTEXT && store.state.currentUser.fullOrUserName) {\n        // make sure the SET_CONTEXT mutation that ran was the * user * context\n        createSocket();\n        connectListeners();\n        bindActiveTabEventListeners();\n        unsubscribe();\n      }\n    });\n  };\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.blockIds.length > 0)?_c('div',{staticClass:\"m-layout-mode__tools\"},[_c('form-subsection',{attrs:{\"label\":_vm.formattedLabel}},[(_vm.displayParagraphOptions)?_c('div',{key:_vm.blockIds.join('-'),staticClass:\"m-layout-mode__group\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Styles\")]),_vm._v(\" \"),_c('res-checkbox',{staticClass:\"m-layout-mode__checkbox\",attrs:{\"checked\":_vm.currentDropcap},on:{\"change\":function($event){return _vm.saveField('dropcap', !_vm.currentDropcap || null)}}},[_c('input',{attrs:{\"id\":\"dropcap\",\"disabled\":_vm.readOnly,\"type\":\"checkbox\",\"name\":\"dropcap\"}}),_vm._v(\" \"),_c('label',[_vm._v(\"Add drop cap\")])]),_vm._v(\" \"),_c('res-checkbox',{staticClass:\"m-layout-mode__checkbox\",attrs:{\"checked\":_vm.currentLeadgraf},on:{\"change\":function($event){return _vm.saveField('leadgraf', !_vm.currentLeadgraf || null)}}},[_c('input',{attrs:{\"id\":\"leadgraf\",\"disabled\":_vm.readOnly,\"type\":\"checkbox\",\"name\":\"leadgraf\"}}),_vm._v(\" \"),_c('label',[_vm._v(\"Make text large\")])]),_vm._v(\" \"),_c('res-checkbox',{staticClass:\"m-layout-mode__checkbox\",attrs:{\"checked\":_vm.currentEndMark},on:{\"change\":function($event){return _vm.saveField('endmark', !_vm.currentEndMark || null)}}},[_c('input',{attrs:{\"id\":\"endMark\",\"disabled\":_vm.readOnly,\"type\":\"checkbox\",\"name\":\"endMark\"}}),_vm._v(\" \"),_c('label',[_vm._v(\"Add end mark\")])])],1):_vm._e(),_vm._v(\" \"),(_vm.displayAlignmentOptions)?_c('div',{staticClass:\"m-field m-layout-mode__group\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Alignment\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-radio-button-group\"},_vm._l((_vm.positionOptions),function(option){return _c('label',{key:option.value,attrs:{\"title\":option.label}},[_c('input',{attrs:{\"type\":\"radio\"},domProps:{\"checked\":_vm.currentPosition === option.value,\"value\":option.value},on:{\"change\":function($event){return _vm.saveField('position', option.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"is-secondary -small\",attrs:{\"type\":\"button\"}},[_c('res-icon',{attrs:{\"title\":option.label,\"name\":option.icon,\"size\":\"medium\"}})],1)])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.displayGroupingOptions)?_c('div',{staticClass:\"m-field m-layout-mode__group\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Grouping\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-radio-button-group\"},_vm._l((_vm.groupingOptions),function(option){return _c('label',{key:option.value,attrs:{\"title\":option.label}},[_c('input',{attrs:{\"type\":\"radio\"},domProps:{\"checked\":_vm.currentGrouping === option.value,\"value\":option.value},on:{\"change\":function($event){return _vm.saveField('grouping', option.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"is-secondary -small\",attrs:{\"type\":\"button\"}},[_c('res-icon',{attrs:{\"title\":option.label,\"name\":option.icon,\"size\":\"medium\"}})],1)])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.displayGroupingMessage)?_c('div',{staticClass:\"m-layout-mode__grouping-message\"},[_c('span',[_vm._v(\"This \"+_vm._s(_vm.objectLabel)+\" is part of a group.\")]),_vm._v(\" \"),_c('res-button',{attrs:{\"design\":\"default\",\"paddingless\":\"\"}},[_c('res-icon',{attrs:{\"name\":\"grid\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":_vm.selectAllInGroup}},[_vm._v(\"Select all \"+_vm._s(_vm.pluralize(_vm.objectLabel))+\" in group\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.displayLayoutOptions)?_c('div',{staticClass:\"m-field\"},[_c('label',{staticClass:\"is-fixed\"},[_vm._v(\"Layout\")]),_vm._v(\" \"),_c('span',{staticClass:\"m-radio-button-group\"},_vm._l((_vm.productCardLayoutOptions),function(option){return _c('label',{key:option.value,attrs:{\"title\":option.label}},[_c('input',{attrs:{\"type\":\"radio\"},domProps:{\"checked\":_vm.currentLayout === option.value,\"value\":option.value},on:{\"change\":function($event){return _vm.saveSubdocLayout(option.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"is-secondary -small\",attrs:{\"type\":\"button\"}},[_c('res-icon',{attrs:{\"title\":option.label,\"name\":option.icon,\"size\":\"medium\"}})],1)])}),0)]):_vm._e()])],1):_vm._e()}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","// **** Page level layout options ****\n\nexport const featureLayoutOptions = [\n  { icon: 'image-above', label: 'Headline below', value: 'unison_default' },\n  { icon: 'full-width-story', label: 'Headline above', value: 'unison_above' },\n  { icon: 'hed-overlay', label: 'Overlay', value: 'unison_overlay' },\n  { icon: 'short-image', label: 'Short', value: 'unison_short' },\n  { icon: 'split-left', label: 'Split left', value: 'unison_split_left' },\n  { icon: 'split-right', label: 'Split right', value: 'unison_split_right' }\n];\n\nexport const packageCoverLeadStoryLayoutOptions = [\n  { icon: 'vertical-story', label: 'Vertical', value: 'vertical' },\n  { icon: 'horizontal-story', label: 'Horizontal', value: 'horizontal' },\n  { icon: 'full-width-story', label: 'Full width', value: 'fullwidth' }\n];\n\nexport const packageTOCOrientationOptions = [\n  { icon: 'horizontal-toc', label: 'Horizontal', value: 'horizontal' },\n  { icon: 'vertical-toc', label: 'Vertical', value: 'vertical' }\n];\n\nexport const standardLayoutOption = { icon: 'standard-layout', label: 'Standard', value: 'unison_standard' };\n\nexport const impactLayoutOptions = [\n  { icon: 'full-width-impact', label: 'Headline above, with impact', value: 'unison_above_impact' },\n  { icon: 'hed-overlay-impact', label: 'Overlay, with impact', value: 'unison_overlay_impact' }\n];\n\nexport const videoFeatureLayoutOption = { icon: 'video-story', label: 'Video', value: 'unison_video' };\n\n// **** Block level layout options *****\n\nexport const productCardLayoutOptions = [\n  { icon: 'layout-product-card-full-width-image', label: 'Full with landscape image', value: 'full_layout' },\n  { icon: 'layout-product-card-portrait', label: 'Full with portrait image', value: 'full_with_portrait_img' },\n  { icon: 'layout-product-card-square', label: 'Full with square image', value: 'full_with_square_img' },\n  { icon: 'layout-product-card-description', label: 'Description', value: 'description_layout' },\n  { icon: 'layout-product-card-brief', label: 'Brief', value: 'brief_layout' },\n  { icon: 'layout-product-card-buttons', label: 'Buttons only', value: 'buttons_only' }\n];\n\nexport const alignmentOptions = {\n  center: { icon: 'center-align', label: 'Default', value: 'default' },\n  alignLeft: { icon: 'left-align', label: 'Left', value: 'float-left' },\n  hangLeft: { icon: 'left-hang', label: 'Hang Left', value: 'hang-left' },\n  wide: { icon: 'wide-block', label: 'Wide Block', value: 'wide-block' },\n  full: { icon: 'full-bleed', label: 'Full Bleed', value: 'full-bleed' },\n  hangRight: { icon: 'right-hang', label: 'Hang Right', value: 'hang-right' },\n  alignRight: { icon: 'right-align', label: 'Right', value: 'float-right' }\n};\n\nexport const groupOptions = {\n  none: { icon: 'none', label: 'No Group', value: null },\n  twoUp: { icon: '2-up', label: '2-Up', value: '2-up' },\n  threeUpTop: { icon: '3-up-top', label: '3-Up Top', value: '3-up-top' },\n  threeUpBottom: { icon: '3-up-down', label: '3-Up Bottom', value: '3-up-bottom' },\n  fourUp: { icon: '4-up', label: '4-Up', value: '4-up' }\n};\n\nexport const groupPositions = [null, 'wide-block', 'full-bleed'];\n\nexport const packageStoryLayoutOptions = [\n  { icon: '1-col',  label: 'Vertical',    value: '1col' },\n  { icon: '2-col',  label: 'Horizontal',  value: '2col' }\n];\n\n// Block layout settings\n\nexport const nonWideSubdocs = ['table', 'aside', 'scorecard'];\nexport const nonFullBleedSubdocs = ['table', 'aside', 'scorecard'];\nexport const nonAlignedSubdocs = ['productcard'];\n\nexport const nonWideBlocks = ['pullquote', 'ratingcard', 'newsletter'];\n","<template>\n  <div class=\"m-layout-mode__tools\">\n    <form-subsection label=\"Stories\">\n      <div class=\"m-layout-mode__group\">\n        <label class=\"is-fixed\">Card size</label>\n        <autosave-radio\n          :value=\"packageStoryLayout\"\n          :options=\"packageStoryLayoutOptions\"\n          :path=\"packageStoryLayoutPath\"\n          :key=\"packageStoryLayout\"\n          :onResolve=\"sendFetch\"\n          :onError=\"sendError\"\n        />\n        <!-- stuck a key on there so it will re-render ... it only updates the checked value on mounted -->\n      </div>\n    </form-subsection>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport AutosaveRadio from '../autosave-radio.vue';\nimport FormSubsection from './form-subsection.vue';\nimport { get } from 'lodash';\nimport { packageStoryLayoutOptions } from '../../config/layoutOptions';\n\nexport default {\n  components: {\n    AutosaveRadio,\n    FormSubsection,\n  },\n  props: {\n    coverIndex: {\n      type: Number,\n      required: true\n    },\n    postMessage: {\n      type: Function,\n      required: true\n    },\n  },\n  data() {\n    return {\n      packageStoryLayoutOptions,\n    };\n  },\n  computed: {\n    ...mapGetters([\n      'currentDoc',\n    ]),\n    packageStoryLayoutPath() {\n      return ['draft', 'package_cover', this.coverIndex, 'story', 'layout'];\n    },\n    packageStoryLayout() {\n      return get(this.currentDoc.head.contents, this.packageStoryLayoutPath);\n    },\n  },\n  methods: {\n    sendFetch() {\n      this.postMessage({\n        event: 'refetch'\n      });\n    },\n    sendError(error) {\n      this.postMessage({\n        event: 'error',\n        message: error\n      });\n    }\n  }\n};\n\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell-actions.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell-actions.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-517cfc76\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard-doc-cell-actions.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var Delta = require('rich-text').Delta;\n\nmodule.exports = function getOp(delta, offset) {\n  return new Delta(delta).slice(offset).ops[0];\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',{ref:\"row\",staticClass:\"m-dashboard__table__row\",class:[_vm.isLeaving ? 'is-leaving' : '']},[_c('td',{staticClass:\"m-dashboard__table__icon\"},[(_vm.isPackage)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"package\",\"title\":\"Package\"}}):_vm._e(),_vm._v(\" \"),(_vm.isMapstack)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"mapstacks\",\"title\":\"Mapstack\"}}):_vm._e(),_vm._v(\" \"),(_vm.isStream)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"storystream\",\"title\":\"Stream\"}}):_vm._e(),_vm._v(\" \"),(_vm.isLinkPost)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"linkpost\",\"title\":\"Link post\"}}):_vm._e(),_vm._v(\" \"),(_vm.isCustomstory)?_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"grid\",\"title\":\"Custom story\"}}):_vm._e()],1),_vm._v(\" \"),_c('td',{staticClass:\"m-dashboard__table__title\",attrs:{\"data-heading\":\"Title\"}},[_c('a',{attrs:{\"href\":_vm.docUrl,\"rel\":\"external\"}},[_c('span',[_vm._v(_vm._s(_vm.title))])])]),_vm._v(\" \"),_c('td',{staticClass:\"m-dashboard__table__byline\",attrs:{\"data-heading\":\"Byline\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.contributorsForDoc)+\"\\n  \")]),_vm._v(\" \"),(_vm.community.printSlugEnabled)?_c('td',{staticClass:\"m-dashboard__table__print-slug\",attrs:{\"data-heading\":\"Print slug\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.printSlug)+\"\\n  \")]):_vm._e(),_vm._v(\" \"),(_vm.entitlements && _vm.entitlements.includes('use_send_to_print'))?_c('td',{staticClass:\"m-dashboard__table__print\",class:[_vm.lastSentToPrintAt ? 'is-active' : '', 'is-disabled'],attrs:{\"data-heading\":\"Sent to print\"}},[(_vm.lastSentToPrintAt)?_c('res-icon',{attrs:{\"title\":'Sent to print on ' + _vm.lastSentToPrintAt,\"name\":\"check-circle\",\"size\":\"large\"}}):_c('res-icon',{attrs:{\"name\":\"check-circle\",\"size\":\"large\",\"title\":\"Not sent to print\"}})],1):_vm._e(),_vm._v(\" \"),_c('td',{staticClass:\"m-dashboard__table__activity\",staticStyle:{\"text-align\":\"left\"},attrs:{\"data-heading\":_vm.tableActivityHeading}},[_c('doc-cell-activity',{attrs:{\"doc\":_vm.doc,\"filter\":_vm.filter}})],1),_vm._v(\" \"),(_vm.displayActions)?_c('td',{staticClass:\"m-dashboard__table__actions\"},[_c('doc-cell-actions',{ref:\"docActions\",attrs:{\"doc\":_vm.doc,\"filter\":_vm.filter,\"onMoveCompleted\":_vm.onMoveCompleted,\"canArchiveOrTrashStories\":_vm.canArchiveOrTrashStories}})],1):_vm._e()])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-subnav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-subnav.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-63c66730\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editor-subnav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-dashboard__modal\"},[_c('res-input',{staticClass:\"m-dashboard__modal__input\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.handleCreate($event)}}},[_c('label',[_vm._v(\"Saved search title\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.title),expression:\"title\",modifiers:{\"trim\":true}}],attrs:{\"placeholder\":_vm.placeholder,\"autofocus\":\"\",\"type\":\"text\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('div',{staticClass:\"m-dashboard__modal__actions\"},[_c('res-button',{attrs:{\"disabled\":_vm.disableButtons,\"design\":\"primary\"},on:{\"click\":function($event){$event.preventDefault();return _vm.handleCreate($event)}}},[_c('button',[_vm._v(\"Save search\")])]),_vm._v(\" \"),_c('res-button',{attrs:{\"disabled\":_vm.disableButtons},on:{\"click\":function($event){$event.preventDefault();return _vm.clearModal($event)}}},[_c('res-icon',{staticClass:\"m-dashboard__modal__icon\",attrs:{\"name\":\"x\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"Cancel\")])],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-menu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-menu.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d9ee641\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./community-menu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div>\n    <div :class=\"`m-nav-mobile ${activeMobileNavClass}`\">\n      <button type=\"button\" @click=\"toggleMobileNav()\">\n        <div class=\"bar\" />\n        <div class=\"bar\" />\n        <div class=\"bar\" />\n      </button>\n    </div>\n\n    <div :class=\"`m-nav-mobile--menu ${activeMobileNavClass}`\" :style=\"activeMobileNavHeightStyle\">\n      <div class=\"m-nav-mobile--menu__top\">\n        <h1>{{ currentDoc.title }}</h1>\n        <help-toggle :isMobile=\"isMobile\" />\n      </div>\n      <div class=\"m-nav-mobile--menu__community\">\n        <community-lockup :communityId=\"communityId\" :isMobile=\"isMobile\" />\n      </div>\n      <nav style=\"background: white;\">\n        <a v-for=\"link in navLinks\"\n           :key=\"link.label\"\n           :href=\"`/${link.label.toLowerCase()}/${currentDoc.uuid}`\"\n           :class=\"pageActive(link.name, link.label.toLowerCase())\"\n           type=\"button\">\n          {{ link.label }}\n        </a>\n      </nav>\n      <div :class=\"`m-nav-mobile--menu__status ${connectedUsers.length > 1 ? 'm-nav-mobile--menu__status--active' : ''}`\">\n        <div class=\"m-nav-mobile__user-status\">\n          <user-status />\n        </div>\n        <div class=\"m-nav-mobile__icon-cont\">\n          <status-icon />\n          <span :class=\"`m-status m-status--${currentDoc.status.toLowerCase()}`\">{{ formattedDocStatus }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\nimport sentenceCase from '../../../shared/sentence_case';\nimport docStatuses from '../../../client/config/doc_statuses';\nimport CommunityLockup from './community-lockup.vue';\nimport HelpToggle from './help-toggle.vue';\nimport UserStatus from './user-status.vue';\nimport StatusIcon from './status-icon.vue';\n\nexport default {\n  components: {\n    CommunityLockup,\n    HelpToggle,\n    UserStatus,\n    StatusIcon\n  },\n  props: {\n    navLinks: {\n      type: Array,\n      required: true\n    },\n    isMobile: {\n      type: Boolean,\n      default: true\n    },\n    pageActive: {\n      type: Function,\n      required: true\n    }\n  },\n  data() {\n    return {\n      activeMobileNav: false\n    };\n  },\n  computed: {\n    ...mapState({\n      windowSize: state => state.windowSize,\n      connectedUsers: state => state.autosave.connectedUsers\n    }),\n    ...mapGetters([\n      'currentDoc'\n    ]),\n    communityId() {\n      return this.currentDoc && this.currentDoc.community_id;\n    },\n    activeMobileNavClass() {\n      return this.activeMobileNav ? 'is-active' : '';\n    },\n    activeMobileNavHeightStyle() {\n      if (!this.activeMobileNav) return;\n      const windowHeight = this.windowSize.height;\n      return `height: ${windowHeight}px`;\n    },\n    formattedDocStatus() {\n      const status = this.currentDoc.status;\n      if (status === 'UPDATED') {\n        return 'Changes';\n      } else {\n        return sentenceCase(docStatuses[status]);\n      }\n    }\n  },\n  methods: {\n    toggleMobileNav() {\n      this.activeMobileNav = !this.activeMobileNav;\n    }\n  }\n};\n</script>\n","const configEl = document.querySelector('script[type=\"config\"]');\nconst config = JSON.parse(configEl.textContent);\n\nmodule.exports = config;\n","import { get as getPath, compact, cloneDeep } from 'lodash';\nimport moment from 'moment-timezone';\nimport request from '../lib/request';\nimport parsePagination from '../lib/parse_pagination';\nimport isPublished from '../lib/is_published';\nimport stripProtocol from '../lib/strip_protocol';\nimport getObjects from '../../shared/delta/get_objects';\nimport getSubdocIds from '../../shared/subdoc_ids';\nimport * as entryActions from './entry';\nimport * as messageActions from './messages';\nimport * as publishActions from './publish';\nimport * as communityActions from './communities';\nimport * as userActions from './users';\nimport { isValidUrlWithSlash } from '../lib/is_valid_url';\n\nexport function createDoc(schemaName, params={}) {\n  app.state.set(['requestInProgress'], true);\n  return request('/new' + schemaName, {\n    method: 'POST',\n    query: {\n      community_id: app.state.get('community', 'id')\n    },\n    body: params\n  }).then((doc) => {\n    app.state.set(['requestInProgress'], false);\n    return doc;\n  });\n}\n\nexport function createDocAndRedirect(schemaName, params={}) {\n  return createDoc(schemaName, params).then(doc => {\n    var page = 'compose';\n    if (params.entry_type === 'LandingPage') {\n      page = 'package';\n    } else if (params.entry_type === 'CustomStory') {\n      page = 'customstory';\n    }\n    document.location.href = `/${page}/${doc.uuid}`;\n  });\n}\n\n// The many steps necessary to move a doc from one community to another\nexport async function changeDocCommunityAndRedirect(communityId) {\n  app.state.set(['requestInProgress'], true);\n  const doc = app.state.get(['doc']);\n\n  if (doc.status === 'SCHEDULED') {\n    await publishActions.unschedule(doc);\n  }\n\n  const delta = publishActions.pubHistoryUpdate(doc, 'community_changed', { communityId });\n\n  // Update the community twitter handle\n  const newCommunity = await communityActions.getCommunity(communityId, 'Basic');\n  const newCommunityHandle = newCommunity.twitterScreenName || null;\n  const currentCommunityHandle = getPath(doc.head.contents, ['draft', 'autotweets', 0, 'handle']) || null;\n  if (newCommunityHandle !== currentCommunityHandle && !isPublished(doc.status)) {\n    delta.push({\n      p: ['draft', 'autotweets', 0, 'handle'],\n      od: currentCommunityHandle,\n      oi: newCommunityHandle\n    });\n  }\n\n  await updateDoc(doc.id, { community_id: communityId, delta });\n\n  if (isPublished(doc.status)) {\n    await publishActions.publishOrSchedule(doc, { republishPublished: true });\n  } else {\n    await entryActions.updateEntry(doc, { community_id: communityId });\n  }\n\n  document.location.href = `/preflight/${doc.uuid}?communityChanged=true`;\n}\n\nexport function getDoc(id) {\n  return request('/api/content/docs/' + id, {\n    query: { includes: 'owner,updateUser,community,external_ids' },\n    opts: { cache: true, force: true }\n  });\n}\n\nexport function validateDoc(id) {\n  return request(`/api/content/docs/${id}/validate`, { query: {\n    returnErrors: true,\n    returnWarnings: true,\n    returnValid: true\n  } });\n}\n\nexport function getEntryParams(id) {\n  return request(`/api/content/docs/${id}/entry_params`);\n}\n\nfunction parseUrlsFromQuery(query) {\n  const newQuery = cloneDeep(query);\n  let searchText = newQuery.q || '';\n  const terms = searchText.split(' ').reduce((memo, term) => {\n    if (isValidUrlWithSlash(term)) {\n      memo.url = stripProtocol(term);\n    } else if (term) {\n      memo.q.push(term);\n    }\n\n    return memo;\n  }, { url: undefined, q: [] });\n\n  if (terms.q.length > 0) {\n    newQuery.q = terms.q.join(' ');\n  } else {\n    delete newQuery.q;\n  }\n\n  if (terms.url) {\n    newQuery.url = terms.url;\n  }\n\n  return newQuery;\n}\n\nexport async function searchDocs(query, opts = null) {\n  const searchText = query.q || '';\n  const queryWithUrlParsedOut = parseUrlsFromQuery(query);\n\n  let { docs, pagination, parsedQuery } = await request('/api/content/docs', { query: queryWithUrlParsedOut, opts });\n\n  if (query.schema_name === 'story') {\n    let userIds = [];\n    for (let doc of docs) {\n      let contributors = getPath(doc, ['head', 'contents', 'draft', 'contributors'], []);\n      userIds = userIds.concat(contributors.map(c => c.chorus_id));\n    }\n\n    let users = await userActions.getUsers(userIds);\n    for (let doc of docs) {\n      let contributors = getPath(doc, ['head', 'contents', 'draft', 'contributors'], []);\n      doc.contributors = compact(contributors.map(c => users.find(u => u && u.id === c.chorus_id)));\n    }\n  }\n\n  return {\n    docs,\n    formattedQuery: formatParsedQuery(parsedQuery, searchText),\n    pagination: parsePagination(pagination),\n  };\n}\n\nfunction formatParsedQuery(parsedQuery, searchText) {\n  if (!parsedQuery || !searchText) {\n    return [];\n  }\n\n  let { keywordQueries, phrases, tokens } = parsedQuery;\n\n  let keywords = keywordQueries.reduce((formatted, { keyword, type, value }) => {\n    let isPagesQuery = (\n      keyword === 'type' &&\n      value === 'page' &&\n      window.location.pathname.includes('pages')\n    );\n    // Remove `type:page` implicitly added in searchParams if on pages dashboard\n    if (isPagesQuery) {\n      return formatted;\n    }\n\n    if (type === 'phrase') {\n      value = `\"${value}\"`;\n    } else if (type === 'date') {\n      value = value.original;\n    }\n\n    formatted.push(`${keyword}:${value}`);\n    return formatted;\n  }, []);\n\n  return keywords.map(value => ({ type: 'keyword', value }))\n    .concat((phrases || []).map(value => ({ type: 'phrase', value: `\"${value}\"` })))\n    .concat([{ type: 'tokens', value: tokens }])\n    .filter(({ value }) => value !== '');\n}\n\nexport function updateDoc(id, params) {\n  return request('/api/content/docs/' + id, {\n    method: 'PUT',\n    body: params\n  }, { handleError: false });\n}\n\nexport function subdocsForDoc(doc) {\n  var subdocIds = getSubdocIds(doc.head.contents);\n  return app.state.get(['subdocs']).filter(doc => subdocIds.includes(doc.id));\n}\n\nexport function getAllDocObjects(doc, types) {\n  var contents = doc.head.contents;\n  var subdocs = subdocsForDoc(doc);\n\n  // objects from doc body\n  var objects = getObjects(contents.draft.body, types);\n\n  // objects from all aside and scorecard subdocs\n  for (let subdoc of subdocs) {\n    if ((subdoc.schema_name === 'aside' || subdoc.schema_name === 'scorecard') && subdoc.head.contents.hasOwnProperty('body')) {\n      objects = objects.concat(getObjects(subdoc.head.contents.body, types));\n    }\n  }\n\n  // if oembed is in the given types, add the object from main_oembed\n  const mainOembed = contents.draft.main_oembed;\n  if (types.includes('oembed') && mainOembed) {\n    objects.push({ oembed: mainOembed });\n  }\n\n  return objects;\n}\n\nexport function setArchived(doc) {\n  var archived = !doc.archived;\n  return updateDoc(doc.id, { archived }).then(() => {\n    return archived;\n  });\n}\n\n// Within this action, both the unscheduling logic + the logic to update trashed_at\n// in Anthem use server-side autosave via a `delta` param. This is because `setTrashed`\n// can be called from the dashboard, where client-side autosave isn't instantiated.\nexport function setTrashed(doc) {\n  var prevTrashedAt = getPath(doc, ['head', 'contents', 'trashed_at']);\n  var nextTrashedAt = prevTrashedAt ? null : moment().toISOString();\n\n  // If the user is moving a scheduled story to the trash, ensure we unschedule\n  // the story first\n  var promise = Promise.resolve();\n  if (nextTrashedAt && doc.status === 'SCHEDULED') {\n    promise = publishActions.unschedule(doc);\n  }\n\n  return promise\n    .then(() => updateDoc(doc.id, {\n      delta: [{\n        p: ['trashed_at'],\n        od: prevTrashedAt,\n        oi: nextTrashedAt\n      }]\n    }))\n    .then(() => entryActions.updateEntryFlags(doc, { trashed_at: nextTrashedAt }))\n    .then(() => {\n      return nextTrashedAt;\n    })\n    .catch(() => messageActions.showError());\n}\n\nexport async function setStatus(doc, status, publishHistoryType) {\n  try {\n    app.state.set(['requestInProgress'], true);\n    await updateDoc(doc.id, { status, delta: publishActions.pubHistoryUpdate(doc, publishHistoryType || status.toLowerCase()) });\n    app.state.set(['requestInProgress'], false);\n  } catch (err) {\n    messageActions.showError();\n  }\n}\n","import getPackageStories from '../../shared/get_package_stories';\nimport isPackage from '../../shared/is_package';\nimport isPublished from '../../client/lib/is_published';\nimport { scheduleDoc } from '../../client/actions/publish';\nimport { searchDocs } from '../../client/actions/docs';\n\n// Adapted from client/actions/publish.js > publishOrSchedule\nexport async function unscheduleDoc(doc, userId) {\n  const publishScheduledFor = null;\n  const contents = doc.head.contents;\n\n  // If it's a package, unschedule its unpublished member docs first\n  if (isPackage(contents)) {\n    const toc = contents.draft.package_toc;\n    const uuids = getPackageStories(toc).map(story => story.uuid).join(',');\n    const { docs: memberDocs } = await searchDocs({ uuids });\n    const unpublished = memberDocs.filter(memberDoc => !isPublished(memberDoc.status));\n    const requests = unpublished.map(memberDoc => scheduleDoc(memberDoc, publishScheduledFor, { userId }));\n\n    await Promise.all(requests);\n  }\n\n  const updatedDoc = await scheduleDoc(doc, publishScheduledFor, { userId });\n  return updatedDoc;\n}\n","// Returns an array-of-arrays, where each sub-array is a run of elements from\n// the collection for which the callback function returns true.\n//\n// @param collection: An array.\n// @param predicate:\n//    A function called with the current chunk, and the next element of the\n//    collection. Return a boolean indicating if the item should be added to the\n//    current chunk (true), or should become the first element of a new chunk (false).\nmodule.exports = function chunkBy(collection, predicate) {\n  if (collection.length < 2) {\n    return [collection];\n  }\n  var chunks = [];\n  var chunk = [collection[0]];\n  for (let next of collection.slice(1)) {\n    if (predicate(chunk, next)) {\n      chunk.push(next);\n    } else {\n      chunks.push(chunk);\n      chunk = [next];\n    }\n  }\n  // Push hanging values\n  chunks.push(chunk);\n  return chunks;\n};\n","import { throttle } from 'lodash';\nimport request from '../../../client/lib/request';\nimport OT from '../../../client/lib/anthem0';\nimport uuid from 'uuid';\nimport hash from '../../../shared/content-hash';\nimport messages from '../../../client/config/messages';\nimport { autosaveThrottle, rescueTimeout } from '../../config/timings';\nimport contentsDefaults from '../../lib/initialize/contents_defaults';\nimport convertObjectFormat from '../../lib/initialize/convert_object_format';\nimport {\n  SET_CLEAN,\n  SET_DIRTY,\n  SET_INFLIGHT,\n  UPDATE_INFLIGHT_DELTA,\n  SET_SENT_ID,\n  UPDATE_SEQUENCE,\n  SET_DOC,\n  UNSET_INLINE,\n  UNSET_INFLIGHT,\n  SET_AUTOSAVE_READY,\n} from '../commands';\n\n// let initializingIds = {}; // TODO - state\nconst MESSAGE_RESCUE_VERSION = ['story'];\n\nexport default function autosavePipeline() {\n  return function(store) {\n\n    // ##### Helper Methods #####\n    function rescueKey(docId) {\n      return `rescue:${docId}`;\n    }\n    function messageKey(docId) {\n      return `message:${docId}`;\n    }\n\n    async function initDoc({ doc, path }) {\n      try {\n        await checkForRescue(doc.id);\n        await setBaseContents(doc.id);\n        if (path === 'doc') {\n          // initSubdocs(doc.id); TODO\n          store.commit(SET_AUTOSAVE_READY, true);\n        }\n      } catch (error) {\n        store.dispatch('markError', { error });\n      }\n    }\n\n    function setBaseContents(docId) {\n      const doc = store.getters.currentDoc;\n      const contents = store.getters.contents;\n      const defaults = contentsDefaults(doc, store.state.currentUser);\n      let delta = [];\n      for (let [key, value] of Object.entries(defaults)) {\n        if (contents[key] == null && value != null) {\n          delta.push({ p: [key], oi: value });\n        }\n      }\n      // Set defaults on nested draft object\n      if (defaults.draft) {\n        if (contents.draft) {\n          for (let [key, value] of Object.entries(defaults.draft)) {\n            if (contents.draft[key] == null && value != null) {\n              delta.push({ p: ['draft', key], oi: value });\n            }\n          }\n        } else {\n          delta.push({ p: ['draft'], oi: defaults.draft });\n        }\n      }\n      delta = delta.concat(convertObjectFormat(contents));\n      return delta.length > 0 ? store.dispatch('resolveOnLocalUpdate', { docId, delta, userId: -1 }) : Promise.resolve();\n    }\n\n    // ##### Request Logic #####\n    // Sends autosave requests, handles initial error parsing (including retry flow)\n\n    // Throttled function that, when executed, sends updates for all inline docs\n    var sendIfReady = throttle(function sendIfReady() {\n      for (let docId of store.getters.docIds) {\n        if (!store.state.autosave.inFlight.hasOwnProperty(docId) && store.state.autosave.inLine.hasOwnProperty(docId)\n          && !store.state.autosave.error) {\n          store.commit(SET_INFLIGHT, docId);\n          store.commit(UNSET_INLINE, docId);\n          storeRescueVersion(docId);\n          sendUpdate(docId);\n        }\n      }\n    }, autosaveThrottle, { leading: false, trailing: true });\n\n    // Called by `sendIfReady` to actually send inLine data as a single packet\n    function sendUpdate(docId) {\n      // If an error has occurred prior, don't send\n      if (store.state.autosave.error) {\n        return;\n      }\n\n      // If we have anything else waiting, need to send that too\n      // in order for contentHash to be accurate\n      if (store.state.autosave.inLine.hasOwnProperty(docId)) {\n        try {\n          const composed = OT.compose(store.state.autosave.inFlight[docId].delta, store.state.autosave.inLine[docId].delta);\n          store.commit(UPDATE_INFLIGHT_DELTA, { docId, delta: composed });\n          store.commit(UNSET_INLINE, docId);\n          storeRescueVersion(docId);\n        } catch (error) {\n          store.dispatch('markError', { error: error });\n          return;\n        }\n      }\n\n      const docCursor = store.state.autosave.docsById[docId];\n      const sequenceCursor = docCursor.head.end_sequence;\n      const contentsCursor = docCursor.head.contents;\n      const delta = store.state.autosave.inFlight[docId].delta;\n      const packetUuid = uuid.v4();\n      const sequence = sequenceCursor + 1;\n\n      store.commit(SET_SENT_ID, packetUuid);\n      return request('/api/content/docs/' + docCursor.id + '/contents', {\n        method: 'PATCH',\n        body: {\n          user_id: store.state.autosave.inFlight[docId].userId,\n          delta,\n          sequence,\n          uuid: packetUuid,\n          content_hash: hash(contentsCursor),\n          schema_version: docCursor.schema_version,\n        },\n        opts: {\n          handleError: false,\n          retry: {\n            delay: 0,\n            maxDelay: 20000\n          }\n        }\n      }).then(() => {\n        window.localStorage.removeItem(rescueKey(docId));\n        store.commit(UNSET_INFLIGHT, docId);\n        store.commit(UPDATE_SEQUENCE, { docId, sequence });\n        if (store.state.autosave.inLine.hasOwnProperty(docId)) {\n          store.commit(SET_DIRTY, docId);\n        } else {\n          store.commit(SET_CLEAN, docId);\n        }\n        sendIfReady();\n      }).catch(err => {\n        const status = err.response && err.response.status;\n        if (status === 409) {\n          // the rebase case, call remoteUpdate on all the packets to catch up then try again\n          return retryAfterRebase(docId, err);\n        } else {\n          // reject to let the next catch block handle the error\n          return Promise.reject(err);\n        }\n      }).catch(err => {\n        // some other status code or non-network error happened, shut down the\n        // editor and save the latest rescue version\n        store.dispatch('markError', { error: err, sendToSentry: false });\n        // removed 5s delay on saving the rescue version < unsure its purpose\n        saveRescueVersion(docId, false);\n      });\n    }\n\n    // If we get a 409 conflict error, do:\n    // A) Rebase and retry if we've missed data\n    // B) Shut it down if it's any other kind of conflict error (i.e. too far ahead)\n    function retryAfterRebase(docId, err) {\n      // must clone the response so that reportError can also read the body,\n      // should this fail\n      var response = err.response.clone();\n      return response.json().then(function(data) {\n        if (/too low/.test(data.message) && data.packets) {\n          for (let packet of data.packets) {\n            store.dispatch('remoteUpdate', { docId, packet });\n          }\n          return sendUpdate(docId);\n        } else {\n          return Promise.reject(err);\n        }\n      });\n    }\n\n    // ##### Rescue Logic #####\n    function storeRescueVersion(docId) {\n      var delta = [];\n      var contents = store.state.autosave.docsById[docId].head.contents;\n\n      try {\n        if (store.state.autosave.inFlight.hasOwnProperty(docId)) {\n          delta = OT.compose(delta, store.state.autosave.inFlight[docId].delta);\n        }\n        if (store.state.autosave.inLine.hasOwnProperty(docId)) {\n          delta = OT.compose(delta, store.state.autosave.inLine[docId].delta);\n        }\n        // TODO:\n        // if (window.quills[docId]) {\n        //   var quill = window.quills[docId];\n        //   var path = quillContentPaths.get([docId, 'path']);\n        //   if (quill && path) {\n        //     setPath(contents, path, quill.getContents());\n        //   }\n        // }\n      } catch (error) {\n        store.dispatch('markError', { error: error });\n        return;\n      }\n      var docCursor = store.state.autosave.docsById[docId];\n      const json = {\n        doc_id: docCursor.id,\n        user_id: store.state.currentUser.id,\n        schema_version: docCursor.schema_version,\n        schema_name: docCursor.schema_name,\n        end_sequence: null,\n        contents: contents,\n        delta: delta\n      };\n      window.localStorage.setItem(rescueKey(docId), JSON.stringify(json));\n    }\n\n    // On a true error, try to save a rescue version server-side\n    function saveRescueVersion(docId, flashNow) {\n      // Don't save a rescue version if one doesn't exist (i.e. due to a local error)\n      const version = window.localStorage.getItem(rescueKey(docId));\n      if (!version) {\n        return;\n      }\n      return request('/api/content/versions', {\n        method: 'POST',\n        body: JSON.parse(version),\n        opts: { handleError: false }\n      }).then(resp => {\n        const isPackageDashboard = window.location.pathname.indexOf('package') > -1;\n        if (!isPackageDashboard && MESSAGE_RESCUE_VERSION.indexOf(resp.schema_name) > -1) {\n          var docUuid = store.state.autosave.docsById[docId].uuid;\n          var message =\n            messages.RESCUE_SAVED_REASSURE.replace(\n              '{url}',\n              `/compose/${docUuid}/version/${resp.id}`\n            );\n\n          // If we are saving this rescue version on a page reload, flash a message\n          // and report to Sentry. Otherwise don't, as it's already been handled.\n          if (flashNow) {\n            store.commit('messageBanner/PUT_NOTICE', {\n              message: message\n            });\n          } else {\n            setNextFlash(docId, message);\n          }\n        }\n        window.localStorage.removeItem(rescueKey(docId));\n      }).catch(err => {\n        store.dispatch('markError', { error: err, sendToSentry: false });\n      });\n    }\n\n    // When called, checks to see if a rescue version is saved in storage for the\n    // given doc and saves it to the server if it exists\n    function checkForRescue(docId) {\n      setTimeout(() => getNextFlash(docId), rescueTimeout);\n      if (window.localStorage.hasOwnProperty(rescueKey(docId))) {\n        // Allow error handler to be registered before emitting\n        setTimeout(() => {\n          return saveRescueVersion(docId, false);\n        }, rescueTimeout/2);\n      } else {\n        return Promise.resolve();\n      }\n    }\n\n    function setNextFlash(docId, message) {\n      window.localStorage.setItem(messageKey(docId), JSON.stringify(message));\n    }\n\n    function getNextFlash(docId) {\n      var key = messageKey(docId);\n      if (window.localStorage.hasOwnProperty(key)) {\n        var message = JSON.parse(window.localStorage.getItem(key));\n        window.localStorage.removeItem(key);\n        store.commit('messageBanner/PUT_NOTICE', {\n          message: message\n        });\n      }\n    }\n\n    store.subscribe((mutation, state) => {\n      switch (mutation.type) {\n      case SET_DIRTY:\n        sendIfReady();\n        break;\n      case SET_DOC:\n        initDoc(mutation.payload);\n        break;\n      }\n    });\n\n  };\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('dashboard-nav'),_vm._v(\" \"),_c('div',{staticClass:\"m-dashboard m-dashboard--has-search-panel\"},[_c('div',{staticClass:\"l-content p-flex is-compose\",style:(_vm.contentStyles)},[_c('div',{staticClass:\"l-content__inner m-dashboard__inner\"},[_c('search-panel',{key:_vm.mobileKey,ref:\"searchPanel\",class:_vm.searchPanelClass,attrs:{\"isCollapsed\":_vm.searchPanelCollapsed,\"updateQuery\":_vm.updateQuery,\"formattedQuery\":_vm.formattedQuery,\"isSearching\":_vm.isSearching,\"defaultQuery\":_vm.baseQuery,\"setSavedSearchName\":_vm.setSavedSearchName},on:{\"collapse\":function($event){return _vm.toggleSearchPanel()}}}),_vm._v(\" \"),(!_vm.isMobile)?_c('div',{class:(\"m-dashboard__search-panel \" + _vm.searchPanelClass),on:{\"click\":function($event){return _vm.toggleSearchPanel(!_vm.searchPanelCollapsed)}}},[_c('div',{staticClass:\"m-dashboard__search-panel-actions\"},[_c('span',{staticClass:\"m-dashboard__search-panel-icons\"},[_c('res-icon',{attrs:{\"name\":\"search\",\"size\":\"small\"}}),_vm._v(\" \"),(!_vm.searchPanelCollapsed)?_c('res-icon',{attrs:{\"name\":\"left\",\"size\":\"small\"}}):_c('res-icon',{attrs:{\"name\":\"right\",\"size\":\"small\"}})],1)])]):_vm._e(),_vm._v(\" \"),_c('main',{staticClass:\"m-dashboard__content m-dashboard__content--has-search-panel\"},[(_vm.isMobile)?_c('res-button',{key:_vm.mobileKey,staticClass:\"m-dashboard__mobile-search-toggle\",attrs:{\"design\":\"secondary\"},on:{\"click\":function($event){return _vm.toggleSearchPanel()}}},[_c('res-icon',{attrs:{\"name\":\"search\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"Open search\")])],1):_vm._e(),_vm._v(\" \"),_c('header',{staticClass:\"m-dashboard__header\"},[(_vm.filter || _vm.isPagesViewMode)?_c('div',{staticClass:\"m-dashboard__sub-head\"},[_c('div',{staticClass:\"m-dashboard__sub-head__title\"},[_c('h1',[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('res-button',{staticClass:\"m-l-1\",attrs:{\"design\":\"default\",\"paddingless\":\"\"},on:{\"click\":_vm.back}},[_c('res-icon',{attrs:{\"name\":\"back\"}}),_vm._v(\" \"),_c('button',[_vm._v(\"\\n                    \"+_vm._s(_vm.titleButtonText)+\"\\n                  \")])],1)],1),_vm._v(\" \"),(_vm.filter === 'trash')?_c('p',[_vm._v(\"\\n                Items in the trash are automatically deleted after 30 days.\\n              \")]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.savedSearchName)?_c('res-badge',{staticClass:\"m-dashboard__sub-head__saved-search\",attrs:{\"size\":\"smaller\"}},[_vm._v(\"\\n              Saved search: \"+_vm._s(_vm.savedSearchName)+\"\\n            \")]):_vm._e(),_vm._v(\" \"),(_vm.displayResultsInfo)?_c('div',{staticClass:\"m-dashboard__sub-head m-dashboard__sub-head__summary\"},[_c('span',{staticClass:\"m-dashboard__sub-head--bold\"},[_vm._v(\"\\n                \"+_vm._s(_vm.resultsCount)+\"\\n              \")]),_vm._v(\"\\n              \"+_vm._s(_vm.resultsFor)+\"\\n              \"),_c('span',{staticClass:\"m-dashboard__sub-head--bold\"},[_vm._v(\"\\n                \"+_vm._s(_vm.searchPhrase)+\"\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"m-chip__container\"},_vm._l((_vm.chipGroups),function(group,name){return _c('div',{key:name},[_c('span',{staticClass:\"m-chip__label\"},[_vm._v(_vm._s(name)+\":\")]),_vm._v(\" \"),_vm._l((group),function(searchItem,index){return _c('chip',{key:(index + \"-\" + searchItem),attrs:{\"chipId\":(name + \":\" + searchItem),\"chipLabel\":searchItem},on:{\"removeSelection\":_vm.removeChipFromQuery}})})],2)}),0)]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"m-dashboard__header__table-filters\"},[(_vm.canListAllStories)?_c('res-switch',{staticClass:\"m-dashboard__header__my-stories\",attrs:{\"checked\":_vm.myDocs},on:{\"change\":_vm.onMyDocsChange}},[_c('input',{attrs:{\"type\":\"checkbox\",\"name\":\"myDocs\"}}),_vm._v(\" \"),_c('label',[_vm._v(\"Show my \"+_vm._s(_vm.storyLabel))])]):_vm._e(),_vm._v(\" \"),_c('res-select',{attrs:{\"size\":\"small\"}},[_c('label',[_vm._v(\"Sort by:\")]),_vm._v(\" \"),_c('select',{attrs:{\"name\":\"order\"},domProps:{\"value\":_vm.sortBy},on:{\"change\":_vm.onOrderChange}},[(_vm.canSortByScore)?_c('option',{attrs:{\"value\":\"score\",\"role\":\"option\",\"aria-selected\":\"true\"}},[_vm._v(\"\\n                    Relevance\\n                  \")]):_vm._e(),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"date\",\"role\":\"option\",\"aria-selected\":\"true\"}},[_vm._v(\"\\n                    Last modified\\n                  \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"last_published\",\"role\":\"option\"}},[_vm._v(\"\\n                    Last published\\n                  \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"first_published\",\"role\":\"option\"}},[_vm._v(\"\\n                    Original publish date\\n                  \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"updated\",\"role\":\"option\"}},[_vm._v(\"Latest activity\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"title\",\"role\":\"option\"}},[_vm._v(\"Title\")])])])],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canArchiveOrTrashStories && _vm.selectedIndices.length > 0),expression:\"canArchiveOrTrashStories && selectedIndices.length > 0\"}],staticClass:\"m-dashboard__table-actions\"},[_c('res-button',{ref:\"actionsBtn\",attrs:{\"id\":\"dashboard-actions-btn\",\"design\":\"secondary\"}},[_c('button',[_vm._v(\"Actions\")])]),_vm._v(\" \"),_c('res-dropdown',{attrs:{\"for\":\"dashboard-actions-btn\"}},[(!_vm.filter)?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateArchived', 'archive')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"versions\",\"title\":\"Archive\"}}),_vm._v(\"\\n                Archive\\n              \")],1):_vm._e(),_vm._v(\" \"),(!_vm.filter)?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateTrashedAt', 'trash')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"trash\",\"title\":\"Move to trash\"}}),_vm._v(\"\\n                Move to trash\\n              \")],1):_vm._e(),_vm._v(\" \"),(_vm.filter === 'archive')?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateArchived', 'dashboard')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"refresh\",\"title\":\"Restore\"}}),_vm._v(\"\\n                Restore\\n              \")],1):_vm._e(),_vm._v(\" \"),(_vm.filter === 'archive')?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateArchivedAndTrashed', 'trash')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"trash\",\"title\":\"Move to trash\"}}),_vm._v(\"\\n                Move to trash\\n              \")],1):_vm._e(),_vm._v(\" \"),(_vm.filter === 'trash')?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateTrashedAt', 'dashboard')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"refresh\",\"title\":\"Restore\"}}),_vm._v(\"\\n                Restore\\n              \")],1):_vm._e(),_vm._v(\" \"),(_vm.filter === 'trash')?_c('button',{on:{\"click\":function($event){return _vm.setDocAction('updateArchivedAndTrashed', 'archive')}}},[_c('res-icon',{attrs:{\"size\":\"small\",\"name\":\"versions\",\"title\":\"Move to archive\"}}),_vm._v(\"\\n                Move to archive\\n              \")],1):_vm._e()])],1),_vm._v(\" \"),_c('res-table',{ref:\"table\",staticClass:\"m-dashboard__table\",attrs:{\"mobile\":_vm.isMobile,\"zebra\":\"\",\"selectable\":\"\"}},[_c('table',[_c('thead',[_c('tr',[_c('th',{staticClass:\"m-dashboard__table__icon\"}),_vm._v(\" \"),_c('th',[_vm._v(\"Title\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Byline\")]),_vm._v(\" \"),(_vm.currentCommunity.printSlugEnabled)?_c('th',[_vm._v(\"Print slug\")]):_vm._e(),_vm._v(\" \"),(_vm.entitlements && _vm.entitlements.includes('use_send_to_print'))?_c('th',{attrs:{\"align\":\"center\"}},[_vm._v(\"\\n                    Print\\n                  \")]):_vm._e(),_vm._v(\" \"),_c('th',[_vm._v(_vm._s(_vm.lastActivityLabel))]),_vm._v(\" \"),(_vm.displayActions)?_c('th',{attrs:{\"align\":\"center\"}}):_vm._e()])]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.docs),function(doc,index){return _c('doc-cell',{key:doc.uuid,ref:(index + \"DocCell\"),refInFor:true,attrs:{\"doc\":doc,\"filter\":_vm.filter,\"canArchiveOrTrashStories\":_vm.canArchiveOrTrashStories,\"displayActions\":_vm.displayActions,\"updateTernaryCheckbox\":_vm.updateTernaryCheckbox}})}),1)])]),_vm._v(\" \"),_c('footer',{staticClass:\"m-dashboard__footer\"},[(!_vm.filter)?_c('div',{staticClass:\"m-dashboard__footer__view-mode-buttons\"},[(_vm.canArchiveOrTrashStories)?_c('res-button',{attrs:{\"design\":\"secondary\"},on:{\"click\":function($event){return _vm.setFilter('archive')}}},[_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"Show archived \"+_vm._s(_vm.storyLabel))])]):_vm._e(),_vm._v(\" \"),(_vm.canArchiveOrTrashStories)?_c('res-button',{attrs:{\"design\":\"secondary\"},on:{\"click\":function($event){return _vm.setFilter('trash')}}},[_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"Show trash\")])]):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.pagination)?_c('div',{staticClass:\"m-dashboard__footer__pagination\"},[_c('res-pagination',{attrs:{\"count\":_vm.pagination.total,\"disabled\":_vm.isSearching,\"display\":_vm.pagination.perPage,\"page\":_vm.pagination.page,\"pagination\":_vm.isMobile ? 'nav-only-toggle' : 'text-only',\"indicator\":\"page\",\"navigation\":\"text\"},on:{\"change\":_vm.paginate}})],1):_vm._e()])],1)],1)]),_vm._v(\" \"),(!_vm.searchPanelCollapsed)?_c('scroll-lock'):_vm._e()],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","export default function isPublished(status) {\n  return ['PUBLISHED', 'UPDATED'].includes(status);\n}\n","module.exports = function getObjects(delta, types) {\n  return delta.ops.reduce((objects, op) => {\n    var type = types.find(type => op.insert.hasOwnProperty(type));\n    if (type) {\n      objects.push({ [type]: op.insert[type] });\n    }\n    return objects;\n  }, []);\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-chip\",attrs:{\"id\":_vm.chipId,\"title\":_vm.chipLabel}},[_c('res-badge',{staticClass:\"m-chip__selection\",attrs:{\"size\":\"medium\"}},[_c('span',[_vm._v(_vm._s(_vm.truncateString(_vm.chipLabel)))]),_c('res-icon',{attrs:{\"name\":\"x\",\"title\":\"remove selection\"},on:{\"click\":function($event){return _vm.removeChip(_vm.chipId)}}})],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<script>\nimport NotFound from './not-found.vue';\nimport NotFoundError from '../../../shared/errors/not_found';\n\nexport default {\n  name: 'ErrorBoundary',\n  components: {\n    NotFound,\n  },\n  data() {\n    return {\n      error: {},\n    };\n  },\n  errorCaptured(error) {\n    // Log the error but don't clutter test logs\n    if (process.env.NODE_ENV !== 'test') {\n      console.error('Error captured by ErrorBoundary', error);\n    }\n    // Handle API 404 responses\n    if (error.response && error.response.status === 404) {\n      this.error = new NotFoundError(error.message);\n    } else {\n      this.error = error;\n    }\n    return false;\n  },\n  render(createElement) {\n    switch (this.error.name) {\n    case 'CommunityMismatchError':\n    case 'NotFoundError':\n      return createElement(NotFound);\n    default:\n      return createElement('div', this.$slots.default);\n    }\n  },\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-layout.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-layout.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e675909\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit-layout.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","export const EditorCommunity = `\n  query EditorCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      slug\n      domain\n      schemaDomain\n      commentArchiveAgeInDays\n      faviconUrl\n      placeFirstAvailableDefault\n      timeZone\n      placeholderImageUrl\n      twitterScreenName\n      twitterSendDefault\n      defaultImageSearchParams\n      featuresEnabled:                siteConfigBoolean(key: \"features_enabled\")\n      adsEnabled:                     siteConfigBoolean(key: \"ads_enabled\")\n      paywallEnabled:                 siteConfigBoolean(key: \"paywall_enabled\")\n      tweetWithImageByDefault:        siteConfigBoolean(key: \"tweet_with_image_by_default\")\n      entryDisclaimerEnabled:         siteConfigBoolean(key: \"entry_disclaimer_enabled\")\n      commentsEnabled:                siteConfigBoolean(key: \"comments_enabled\")\n      coralCommentsEnabled:           siteConfigBoolean(key: \"coral_enabled\")\n      commentsClosedDefault:          siteConfigBoolean(key: \"comments_closed_on_editorial_posts_by_default\")\n      publishForGoogleAmp:            siteConfigBoolean(key: \"publish_for_google_amp\")\n      bylineShowTitle:                siteConfigBoolean(key: \"byline_show_title\")\n      printSlugEnabled:               siteConfigBoolean(key: \"print_slug_enabled\")\n      printDeskHidden:                siteConfigBoolean(key: \"print_desk_hidden\")\n      ratingCardMaxStars:             siteConfigInt(key: \"rating_card_max_stars\")\n      useProjectDetails:              siteConfigBoolean(key: \"project_details_enabled\")\n      useToolsAndMaterials:           siteConfigBoolean(key: \"tools_and_materials_enabled\")\n      projectDetailsSkillLevels:      siteConfigJson(key: \"project_details_skill_levels\")\n      hasGettyApi:                    hasSiteConfig(key: \"getty_api_config\", type: \"json\")\n      hasUsatodayApi:                 hasSiteConfig(key: \"usatoday_api_config\", type: \"json\")\n      hasPlagscan:                    hasSiteConfig(key: \"plagscan_api_config\", type: \"json\")\n      hasMerlinApi:                   hasSiteConfig(key: \"merlin_api_config\", type: \"json\")\n      entrySlugIsEvergreenDefault:    siteConfigBoolean(key: \"entry_slug_is_evergreen_default\")\n      showEntryEvergreenUrlToggle:    siteConfigBoolean(key: \"show_entry_evergreen_url_toggle\")\n      defaultGroupSlug:               siteConfigString(key: \"default_story_group_slug\")\n      headlessModeEnabled:            siteConfigBoolean(key: \"headless_mode_enabled\")\n      externalPreviewEnabled:         hasSiteConfig(key: \"external_preview_url\", type: \"string\")\n      externalPreviewUrl:             siteConfigString(key: \"external_preview_url\")\n      externalPreviewMode:            siteConfigString(key: \"external_preview_mode\")\n      externalPreviewSharedSecret:    siteConfigString(key: \"external_preview_shared_secret\")\n      externalPreviewRequestMethod:   siteConfigString(key: \"external_preview_request_method\")\n      externalPreviewApiHeaders:      siteConfigJson(key: \"external_preview_api_headers\")\n      externalPreviewEnableAmp:       siteConfigBoolean(key: \"external_preview_enable_amp\")\n      publishForAppleNews:            siteConfigBoolean(key: \"publish_for_apple_news\")\n      useAffiliateLinks:              siteConfigBoolean(key: \"use_affiliate_links\")\n      allowDisablingOfAffiliateLinks: siteConfigBoolean(key: \"allow_disabling_of_affiliate_links_in_stories\")\n      network {\n        id\n        name\n        schemaDomain\n        slug\n        autoplayDefault:      siteConfigBoolean(key: \"autoplay_videos_on_entry_pages\")\n        usesSuperGroups:      siteConfigBoolean(key: \"uses_super_groups\")\n        usesCampaignGroups:   networkConfigBoolean(key: \"uses_campaign_groups?\")\n        usesAutotags:         siteConfigBoolean(key: \"uses_autotagger\")\n        excludesFromRssFeeds: networkConfigBoolean(key: \"excludes_from_rss_feeds?\")\n\n        organization {\n          id\n          slug\n        }\n      }\n      locale {\n        lat\n        lng\n      }\n      newsletters {\n        name\n        slug\n      }\n      googleAmpLogo {\n        url\n      }\n      autoTagging {\n        leagueRequired\n        leagueId\n        teamId\n        autolinkTagTypes\n        autotagTagTypes: manualTagTypes\n      }\n    }\n  }\n`;\n\nexport const DashboardCommunity = `\n  query DashboardCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      faviconUrl\n      timeZone\n      printSlugEnabled: siteConfigBoolean(key: \"print_slug_enabled\")\n      network {\n        id\n        name\n        schemaDomain\n      }\n    }\n  }\n`;\n\nexport const BasicCommunity = `\n  query BasicCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      twitterScreenName\n    }\n  }\n`;\n","import * as cmd from '../commands';\nimport OT from '../../../client/lib/anthem0';\nimport * as sentryActions from '../../../client/actions/sentry';\nimport messages from '../../../client/config/messages';\nimport request from '../../../client/lib/request';\n\nexport default {\n  reconnectDocs({ state, commit, dispatch }) {\n    for (let docId of state.docIds) {\n      if (state.inFlight.hasOwnProperty(docId) || state.reconnectingIds.hasOwnProperty(docId)) {\n        // if there is an autosave in progress for this doc,\n        // we will get any ops we missed as part of a 409 response (if applicable)\n        continue;\n      }\n\n      commit(cmd.ADD_RECONNECTING_DOC, docId);\n      const sequence = state.docsById[docId].head.end_sequence;\n\n      request(`/api/content/docs/${docId}/ops?sequence__gt=${sequence}`, {\n        opts: {\n          retry: {\n            delay: 0,\n            maxDelay: 20000\n          }\n        }\n      }).then(function(ops) {\n        for (let op of ops) {\n          dispatch('remoteUpdate', { 'docId': docId, 'packet': op });\n        }\n        commit(cmd.REMOVE_RECONNECTING_DOC, docId);\n      }).catch(err => {\n        dispatch('markError', { error: err, sendToSentry: false });\n      });\n    }\n  },\n\n  localUpdate({ state, commit, rootState, dispatch }, { docId, delta, userId }) {\n    userId = userId || rootState.currentUser.id;\n\n    const doc = state.docsById[docId];\n    if (!doc) {\n      const error = new Error('An invalid docId was supplied to autosave.');\n      error.name = 'AutosaveReferenceError';\n      error.doc_id = docId;\n      dispatch('markError', { error });\n      return;\n    }\n    commit(cmd.UPDATE_LAST_MODIFIED_DATE, { docId, date: new Date().toISOString() });\n\n    if (!state.inLine.hasOwnProperty(docId)) {\n      // if there's not already a delta in line for this doc, add it\n      commit(cmd.SET_INLINE, { docId, delta: [], userId });\n    } else {\n      // if there is, ensure we are using the last used userID\n      commit(cmd.SET_INLINE, { docId, userId });\n    }\n\n    // Remove now obsolete `legacy_updated_at` publish history event if the first\n    // local update is being made for a synced legacy story\n    const publishHistory = doc.head.contents.publish_history;\n    if (publishHistory && publishHistory.length > 0) {\n      var legacyPubEventIndex = publishHistory.findIndex(e => e.event_type === 'legacy_updated_at');\n      if (legacyPubEventIndex > -1) {\n        var legacyPubEvent = publishHistory[legacyPubEventIndex];\n        delta.push({\n          p: ['publish_history', legacyPubEventIndex],\n          ld: legacyPubEvent\n        });\n      }\n    }\n\n    try {\n      const oldDelta = state.inLine[docId].delta;\n      commit(cmd.SET_INLINE, { docId, delta: OT.compose(oldDelta, delta) });\n      commit(cmd.UPDATE_DOC, { docId, delta });\n      // setDirty kicks off pipeline\n      commit(cmd.SET_DIRTY, docId);\n    } catch (error) {\n      dispatch('markError', { error });\n    }\n  },\n\n  /**\n   * Called to parse a remote update from the server. Hooked up to an event listener\n   * in client/initializers/editor/autosave\n   * @param {Number} docId A valid docId for which the update applies\n   * @param {Object} packet The server side packet\n   * @param {Delta} packet.delta The update itself\n   */\n\n  remoteUpdate({ state, commit, dispatch }, { docId, packet }) {\n    // If the docId is invalid, simply don't apply the update\n    if (state.error || !state.docsById.hasOwnProperty(docId)) {\n      return;\n    }\n\n    // Ignore packets that we sent\n    if (state.sentIds.hasOwnProperty(packet.uuid)) {\n      commit(cmd.REMOVE_SENT_ID, packet.uuid);\n      return;\n    }\n\n    const sequenceCursor = state.docsById[docId].head.end_sequence;\n\n    // Ignore packets we've already applied\n    if (packet.sequence <= sequenceCursor) {\n      return;\n    }\n\n    // If we missed a sequence, throw an error to lock down the editor\n    if (packet.sequence > sequenceCursor + 1) {\n      dispatch('markError', { error: new Error('Missed a sequence'), sendToSentry: false });\n      return;\n    }\n\n    // Make sure we have the latest contents recorded for all active docs\n    // this.$root.$emit('autosave.check-update', docId); // for Quill\n\n    try {\n      let left;\n      let right;\n\n      if (state.inFlight.hasOwnProperty(docId)) {\n        left = OT.transform(packet.delta, state.inFlight[docId].delta, 'left');\n        right = OT.transform(state.inFlight[docId].delta, packet.delta, 'right');\n        packet.delta = left;\n        commit(cmd.UPDATE_INFLIGHT_DELTA, { docId, delta: right });\n      }\n\n      if (state.inLine.hasOwnProperty(docId)) {\n        left = OT.transform(packet.delta, state.inLine[docId].delta, 'left');\n        right = OT.transform(state.inLine[docId].delta, packet.delta, 'right');\n        packet.delta = left;\n        commit(cmd.UPDATE_INLINE_DELTA, { docId, delta: right });\n      }\n\n      commit(cmd.UPDATE_SEQUENCE, { docId, sequence: packet.sequence });\n      commit(cmd.UPDATE_DOC, { docId, delta: packet.delta });\n    } catch (err) {\n      dispatch('markError', { error: err });\n    }\n\n    state.contentApiSocket.emit('autosave.remote-update', docId, packet);\n  },\n\n  resolveOnLocalUpdate({ dispatch, getters, state }, { docId, delta, userId }) {\n    dispatch('localUpdate', { docId, delta, userId });\n    return new Promise((resolve, reject) => {\n      if (!getters.isPipelineDirty) {\n        return resolve();\n      }\n      const unsubscribe = this.subscribe((mutation) => {\n        if (mutation.type === cmd.SET_CLEAN || mutation.type === cmd.CLEAR_DIRTY) {\n          unsubscribe();\n          if (!getters.isPipelineDirty && !state.error) {\n            return resolve();\n          } else {\n            return reject();\n          }\n        }\n      });\n    });\n  },\n\n  resolveOnAutosaveReady({ commit }, { doc, path }) {\n    commit(cmd.SET_DOC, { doc, path });\n    return new Promise((resolve, reject) => {\n      const unsubscribe = this.subscribe((mutation) => {\n        if (mutation.type === cmd.SET_AUTOSAVE_READY) {\n          unsubscribe();\n          return resolve();\n        }\n        if (mutation.type === cmd.SET_FATAL_ERROR) {\n          unsubscribe();\n          return reject();\n        }\n      });\n    });\n  },\n\n  /**\n   * Creates a Promise that resolves when the current pipeline is marked clean\n   */\n  resolveOnClean({ state }, docId) {\n    return new Promise((resolve, reject) => {\n      if (Object.keys(state.dirty).length < 1) {\n        return resolve();\n      }\n      const unsubscribe = this.subscribe((mutation) => {\n        if (mutation.type === cmd.SET_FATAL_ERROR) {\n          unsubscribe();\n          return reject();\n        }\n        if (mutation.type === cmd.SET_CLEAN) {\n          unsubscribe();\n          return resolve();\n        }\n      });\n    });\n  },\n\n  /**\n   * Updates top-level doc values as they are emitted from the server. Currently used\n   * for status and trashed_at updates. Hooked up to an event listener in the capiSocket.js store plugin\n   * @param {Number} docId A valid docId for which the update applies\n   * @param {Array} path A path for the value\n   * @param {Any} value The value to be set\n   */\n  updateDocFlag({ state, commit }, { docId, path, value }) {\n    // If the docId is invalid, don't apply the update\n    if (state.error || !state.docsById.hasOwnProperty(docId)) {\n      return;\n    }\n    commit(cmd.UPDATE_DOC_BY_PATH, { docId, path, value });\n  },\n\n  /**\n   * Called to remove a doc from state for autosave tracking\n   * @param {Number} docId A valid docId to remove from state\n   */\n  teardownDoc({ commit, state, dispatch }, docId) {\n    if (!state.docsById.hasOwnProperty(docId)) {\n      return Promise.resolve();\n    }\n\n    return dispatch('resolveOnClean', docId).then(() => {\n      commit(cmd.REMOVE_DOC_FROM_STATE, docId);\n\n      // if the doc was initialized with greetUsers set to false,\n      // this presence.leave just tears down the socket.io room for\n      // receiving remote updates\n\n      // app.socket.emit(`presence.${docId}.leave`);\n    });\n  },\n\n  markError({ commit, state }, { error, reportToSentry = true }) {\n    if (!state.error) {\n      // only do the below one time ...\n      commit('messageBanner/PUT_NOTICE', {\n        message: messages.REALTIME_ERROR,\n        type: 'negative',\n      });\n      // unsubscribe from remote updates\n      // contentApiSocket.off('autosave.remote-update', this.remoteUpdate);\n    }\n    commit(cmd.SET_FATAL_ERROR);\n    commit(cmd.CLEAR_DIRTY);\n    if (reportToSentry) {\n      error.from = 'autosave';\n      sentryActions.reportError(error, false);\n    }\n  }\n\n};\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chip.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chip.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-efd7f0a4\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./chip.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div>\n    <div class=\"m-community-select__menu-trigger\" @click.prevent=\"toggleMenu\">\n      <div :class=\"{ 'is-open': menuOpen && hasMenu, 'm-community-select__lockup--openable': hasMenu }\" class=\"m-community-select__lockup\">\n        <div class=\"m-community-select__avatar\">\n          <img :src=\"community.faviconUrl || defaultLogoUrl\" class=\"m-community-select__icon\" />\n        </div>\n        <span class=\"m-community-select__name\">{{ community.name }}</span>\n      </div>\n    </div>\n    <community-menu\n      v-if=\"networks && networks.length\"\n      ref=\"communityMenu\"\n      :allowedRoles=\"allowedRoles\"\n      :activeMemberships=\"activeMemberships\"\n      :defaultLogoUrl=\"defaultLogoUrl\"\n      :networks=\"networks\"\n      :menuOpen=\"menuOpen\"\n      :class=\"{ 'is-active': menuOpen }\"\n      class=\"m-community-select__menu\"\n      @closeMenu=\"closeMenu\"\n    />\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport groupSortNetworkMemberships from '../../group_sort_network_memberships';\nimport CommunityMenu from './components/community-menu.vue';\n\nexport default {\n  components: {\n    CommunityMenu\n  },\n  props: {\n    value: {\n      type: Number,\n    },\n    community: {\n      type: Object,\n      required: true\n    },\n    user: {\n      type: Object,\n      required: true\n    },\n    allowedRoles: {\n      type: Object,\n      required: true\n    },\n    activeMemberships: {\n      type: Array,\n      default: () => ([])\n    },\n  },\n  data() {\n    return {\n      menuOpen: false,\n    };\n  },\n  computed: {\n    ...mapState(['defaultLogoUrl']),\n    networks() {\n      return groupSortNetworkMemberships(this.activeMemberships);\n    },\n    hasMenu() {\n      // only allow community menu to open when user is a member\n      // of > 1 network OR > 1 communities within a network\n      return this.networks.length > 1 || this.networks.some(n => n.communities.length > 1);\n    },\n  },\n  watch: {\n    // External value changes internal selection state.\n    value() {\n      if (this.$refs.communityMenu) this.$refs.communityMenu.selectCommunity(this.value);\n    }\n  },\n  methods: {\n    closeMenu() {\n      this.menuOpen = false;\n    },\n    toggleMenu() {\n      this.menuOpen = !this.menuOpen;\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./error-boundary.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./error-boundary.vue\"\n/* template */\nvar __vue_render__, __vue_static_render_fns__\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import request from '../../client/lib/request';\n\n/**\n * Fetches searches by a user on a community;\n * returns newest first\n * @param params {object}\n * @param params.communityId {string}\n * @returns {array} of searches\n */\nexport async function getSearches(params) {\n  return await request('/api/saved_search', {\n    method: 'GET',\n    query: params,\n    opts: { handleError: false }\n  });\n}\n\n/**\n * Adds a saved search\n * @param params {object}\n * @param params.communityId {string}\n * @param params.name {string} display name of search\n * @param params.query {string} query string which appears in route (q)\n * @returns {string} searchId\n */\nexport async function addSearch(params) {\n  return await request('/api/saved_search', {\n    method: 'POST',\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\n/**\n * Deletes a single search\n * @param params {object}\n * @param params.communityId {string}\n * @param params.searchId {string}\n */\nexport async function deleteSearch(params) {\n  return await request('/api/saved_search', {\n    method: 'DELETE',\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\n/**\n * Edit the name of a saved search\n * @param params {object}\n * @param params.communityId {string}\n * @param params.searchId {string}\n * @param params.name {string} new name for search\n */\nexport async function renameSearch(params) {\n  return await request('/api/saved_search', {\n    method: 'PUT',\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\n/**\n * Increments search count and last searched date;\n * should be called every time user runs the search from saved panel\n * @param params {object}\n * @param params.communityId {string}\n * @param params.searchId {string}\n */\nexport async function runSearch(params) {\n  return await request('/api/saved_search/touch/', {\n    method: 'PUT',\n    body: params,\n    opts: { handleError: false }\n  });\n}\n\n/**\n * Deletes all searches for the user on this community\n * @param params {object}\n * @param params.communityId {string}\n */\nexport async function deleteAll(params) {\n  return await request('/api/saved_search/deleteAll', {\n    method: 'PUT',\n    body: params,\n    opts: { handleError: false }\n  });\n}\n","module.exports = function isCustomstory(contents) {\n  return contents.draft && contents.draft.hasOwnProperty('customstory_pages');\n};\n","<template>\n  <div v-if=\"names.length > 1\">\n    <div v-for=\"name in names\"\n         :key=\"name.fullOrUserName\"\n         :alt=\"name.fullOrUserName\"\n         :title=\"name.fullOrUserName\"\n         class=\"m-avatar\">\n      {{ name.initials }}\n    </div>\n\n    <div v-if=\"hiddenNames.length > 0\">\n      <div :alt=\"hiddenNames.join(', ')\" :title=\"hiddenNames.join(', ')\" class=\"m-avatar\">\n        +{{ hiddenNames.length }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport initials from '../../../client/lib/initials';\n\nexport default {\n  computed: {\n    ...mapState({\n      connectedUsers: state => state.autosave.connectedUsers\n    }),\n    maxVisible() {\n      // Ensure we always display a maximum of 4 icons, either:\n      // A) Up to 4 initials avatars\n      // B) 3 initials avatars and one +N avatar\n      return this.connectedUsers.length > 4 ? 3 : 4;\n    },\n    names() {\n      const users = this.connectedUsers;\n      const maxVisible = this.maxVisible;\n\n      return users.slice(0, maxVisible).map(user => {\n        return {\n          fullOrUserName: user.fullOrUserName,\n          initials: initials(user.fullOrUserName)\n        };\n      });\n    },\n    hiddenNames() {\n      const users = this.connectedUsers;\n      const maxVisible = this.maxVisible;\n\n      // Will be an empty array when there are less than 4 active users\n      return users.slice(maxVisible).map(user => user.fullOrUserName);\n    }\n  }\n};\n</script>\n","<template>\n  <div>\n    <editor-nav v-if=\"currentDoc\" />\n    <component :is=\"action\" :uuid=\"uuid\" />\n  </div>\n</template>\n\n<script>\nimport Layout from '../../components/layout-mode/layout.vue';\nimport EditorNav from '../../components/header/editor-nav.vue';\nimport CommunityMismatchError from '../../../shared/errors/community_mismatch';\nimport NotFoundError from '../../../shared/errors/not_found';\nimport { COMMUNITY_CHANGED, UNSAVED_WARNING } from '../../../client/config/messages';\nimport moment from 'moment';\nimport request from '../../../client/lib/request';\nimport { SET_DOC } from '../../store/commands';\nimport { getEntryById } from '../../../client/actions/entry';\nimport { mapState, mapGetters } from 'vuex';\n\nexport default {\n  components: {\n    Layout,\n    EditorNav\n  },\n  props: {\n    // action and uuid props are passed from the router\n    action: {\n      type: String,\n      required: true,\n      default: '',\n    },\n    uuid: {\n      type: String,\n      required: true,\n      default: '',\n    }\n  },\n  data() {\n    return {\n      fatalError: false,\n      MESSAGE_RESCUE_VERSION: ['story'],\n      beforeUnload: () => {}\n    };\n  },\n  computed: {\n    ...mapState(['appName', 'autosave']),\n    ...mapGetters(['currentDoc', 'docLabel', 'isPipelineDirty']),\n    communityId() {\n      return this.currentDoc && this.currentDoc.community_id;\n    },\n    docIds() {\n      return Object.keys(this.autosave.docsById).map((docId) => parseInt(docId));\n    },\n  },\n  watch: {\n    ['currentDoc.title']() {\n      if (this.currentDoc && this.currentDoc.title) {\n        document.title = `${this.currentDoc.title} | ${this.appName}`;\n      }\n    }\n  },\n  async created() {\n    if (this.uuid) {\n      const doc = await this.getDoc(this.uuid);\n      await this.haltIfTrashed(doc);\n      this.$store.commit(SET_DOC, { doc, path: 'doc' });\n      await this.checkCommunityContexts(doc); // makes API request; unlikely to be an error, so dont hold up render for this\n    }\n  },\n  mounted() {\n    this.initUnsavedWarning();\n    this.initCommunityChangedNotice();\n  },\n  beforeDestroy() {\n    window.removeEventListener('beforeunload', this.beforeUnload);\n  },\n  methods: {\n    async getDoc(uuid) {\n      const doc = await request('/api/content/docs/' + uuid, {\n        query: { includes: 'owner,updateUser,community,external_ids' },\n        opts: { cache: true, force: true, handleError: false }\n      });\n      return doc;\n    },\n    // If the doc is marked as trashed over 30 days ago, simply render not found\n    haltIfTrashed(doc) {\n      var trashedAt = doc.head.contents.trashed_at;\n      var threshold = moment().subtract(30, 'days');\n      if (trashedAt && moment(trashedAt) < threshold) {\n        // Trigger ErrorBoundary to render NotFound\n        throw new NotFoundError('Doc was trashed over 30 days ago');\n      }\n      return Promise.resolve();\n    },\n    // There's a chance that a doc community change action will fail half way thru,\n    // leading to a community mismatch b/t the SBN entry and the Content API doc. If\n    // that's the case we should throw a fatal error, prompting us to triage manually.\n    async checkCommunityContexts(doc) {\n      const entry = await getEntryById(doc.entry_id);\n\n      if (entry && entry.community_id && doc.community_id !== entry.community_id) {\n        // Trigger ErrorBoundary to render NotFound\n        throw new CommunityMismatchError(doc);\n      }\n      return Promise.resolve();\n    },\n    initUnsavedWarning() {\n      window.addEventListener('beforeunload', this.beforeUnload = (event) => {\n        if (this.isPipelineDirty) {\n          event.preventDefault();\n          event.returnValue = UNSAVED_WARNING;\n          return UNSAVED_WARNING;\n        }\n      });\n    },\n    initCommunityChangedNotice() {\n      // see changeDocCommunityAndRedirect for how this query param appears\n      const params = this.$route.query;\n      if (params.communityChanged) {\n        this.$store.commit('messageBanner/PUT_NOTICE', {\n          type: 'positive',\n          message: COMMUNITY_CHANGED.replace('{docLabel}', this.docLabel)\n        });\n      }\n    }\n  },\n};\n</script>\n","function HttpStatusError(message, response) {\n  Error.call(this);\n  if (typeof Error.captureStackTrace === 'function') {\n    Error.captureStackTrace(this, HttpStatusError);\n  } else {\n    this.stack = (new Error(message)).stack;\n  }\n\n  this.message = message;\n  this.response = response;\n  this.name = this.constructor.name;\n}\n\nHttpStatusError.prototype = Object.create(Error.prototype);\nHttpStatusError.prototype.constructor = HttpStatusError;\n\nexport default HttpStatusError;\n","var request = require('./request');\nvar GraphQLError = require('./errors/graphql_error');\n\nexport default async function graphqlRequest(path, body, opts = {}) {\n  var { data, errors } = await request(path, {\n    method: 'POST',\n    body,\n    opts: { cache: true, ...opts }\n  });\n\n  // Error out if the service returns no data and also includes errors\n  if (!data && errors) {\n    throw new GraphQLError(errors);\n  }\n\n  return data;\n}\n","<template>\n  <res-modal\n    v-if=\"currentModal.component\"\n    :id=\"modalId\"\n    :key=\"modalKey\"\n    background=\"darken\"\n    bgclose>\n    <component\n      :is=\"currentModal.component\"\n      :childProps=\"currentModal.childProps\" />\n  </res-modal>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport ShortlinkModal from './modals/shortlink-modal.vue';\nimport SavedSearchCreateModal from './modals/saved-search-create-modal.vue';\nimport SavedSearchDeleteModal from './modals/saved-search-delete-modal.vue';\n\nexport default {\n  components: {\n    ShortlinkModal,\n    SavedSearchCreateModal,\n    SavedSearchDeleteModal,\n  },\n  computed: {\n    ...mapState(['currentModal', 'modalKey', 'modalId']),\n  },\n};\n</script>\n","<template>\n  <div v-show=\"loading\" :class=\"`m-app-loader m-app-loader__${animation}`\">\n    <res-icon :name=\"iconName\" size=\"large\"/>\n  </div>\n</template>\n\n<script>\nimport store from './store.js';\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'AppLoader',\n  props: {\n    iconName: {\n      type: String,\n      default: 'loading'\n    },\n    animation: {\n      type: String,\n      default: 'spin'\n    }\n  },\n  computed: {\n    ...mapState('appLoader', ['loading'])\n  },\n  created() {\n    // check to see if module is already registered before registering again\n    // because HMR re-registers this during development\n    if (!this.$store.state.appLoader) this.$store.registerModule('appLoader', store);\n  }\n};\n</script>\n","import Vue from 'vue';\nimport VueApollo from 'vue-apollo';\nimport { ApolloClient } from 'apollo-client';\nimport { HttpLink } from 'apollo-link-http';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\n\nlet tower = new URL(window.location);\ntower.pathname = '/api/tower/graphql';\ntower.search = '';\n\nconst httpLink = new HttpLink({\n  uri: tower.toString(),\n  credentials: 'include'\n});\n\nexport const towerClient = new ApolloClient({\n  link: httpLink,\n  cache: new InMemoryCache(),\n  connectToDevTools: true,\n  shouldBatch: true,\n});\n\nVue.use(VueApollo);\n\nexport const apolloProvider = new VueApollo({\n  defaultClient: towerClient,\n});\n\nlet importer = new URL(window.location);\nimporter.pathname = '/api/chorus-import-manager/graphql';\nimporter.search = '';\n\nexport const importerClient = new ApolloClient({\n  link: new HttpLink({\n    uri: importer.toString(),\n    credentials: 'include'\n  }),\n  cache: new InMemoryCache(),\n  connectToDevTools: true,\n  defaultOptions: {\n    watchQuery: { fetchPolicy: 'network-only' },\n    query: { fetchPolicy: 'network-only' },\n  }\n});\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6b328d22\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chorus-help.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var getDocLabel = require('./get_doc_label');\n\nexport default function canCopyOrMove(doc) {\n  var docLabel = getDocLabel(doc);\n  return !['link', 'stream', 'package', 'page'].includes(docLabel);\n}\n","<template>\n  <error-boundary :key=\"errorBoundaryKey\">\n    <app-modal />\n    <app-overlay />\n    <app-sidebar />\n    <router-view />\n    <app-loader iconName=\"more\" animation=\"static\" />\n  </error-boundary>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\nimport { debounce } from 'lodash';\nimport * as cmd from './store/commands';\nimport messages from '../client/config/messages';\nimport moment from 'moment-timezone';\nimport request from '../client/lib/request';\nimport AppSidebar from './components/app-sidebar.vue';\nimport AppModal from './components/app-modal.vue';\nimport AppOverlay from './components/app-overlay.vue';\nimport AppLoader from '../shared/vue/app-loader/app-loader.vue';\nimport ErrorBoundary from './components/errors/error-boundary.vue';\nimport { updateAnthemUser } from '../client/actions/users';\nimport { CurrentUser } from '../shared/vue/queries/currentUser.graphql';\nimport { CurrentCommunity } from '../shared/vue/queries/currentCommunity.graphql';\n\nexport default {\n  components: {\n    AppSidebar,\n    AppModal,\n    AppOverlay,\n    AppLoader,\n    ErrorBoundary,\n  },\n  data() {\n    return {\n      debouncedComputeSizes: null,\n      entitlements: [],\n    };\n  },\n  computed: {\n    ...mapState(['user', 'isMobile', 'errorBoundaryKey', 'appName']),\n    ...mapGetters(['activeMemberships', 'currentDoc']),\n    communityId() {\n      if (this.loadDoc) {\n        return this.currentDoc && this.currentDoc.community_id;\n      } else if (this.$route.query.community_id) {\n        return parseInt(this.$route.query.community_id);\n      } else {\n        return this.getExternalCommunityId();\n      }\n    },\n  },\n  beforeMount() {\n    this.computeSizes();\n    this.debouncedComputeSizes = debounce(this.computeSizes, 500);\n    window.addEventListener('resize', this.debouncedComputeSizes);\n  },\n  mounted() {\n    window.addEventListener('keyup', this.overlayEscapeHandler);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.debouncedComputeSizes);\n    window.removeEventListener('keyup', this.overlayEscapeHandler);\n  },\n  apollo: {\n    currentUser: {\n      query: CurrentUser,\n      result({ data }) {\n        this.$store.commit(cmd.SET_CONTEXT, { user: data.currentUser });\n        this.newUserWelcome();\n      }\n    },\n    community: {\n      query() {\n        return CurrentCommunity;\n      },\n      result({ data }) {\n        this.$store.commit(cmd.SET_CONTEXT, { community: data.community });\n        this.getEntitlements();\n      },\n      skip() {\n        return !this.communityId;\n      },\n      variables() {\n        return { id: this.communityId };\n      }\n    }\n  },\n  methods: {\n    computeSizes() {\n      // get the browser-settings font size in pixel measure\n      const fontSizePx = window.getComputedStyle(document.documentElement).getPropertyValue('font-size');\n      // remove the pixel unit, return just the number\n      const fontSize = +(fontSizePx.substring(0, fontSizePx.indexOf('px')));\n      // multiply this fontSize by 40, which is equal to 40em, which is our $break-mobile size from _settings.scss\n      const MOBILE_WIDTH = fontSize * 40;\n      this.$store.commit(cmd.SET_IS_MOBILE, window.innerWidth <= MOBILE_WIDTH);\n\n      this.$store.commit(cmd.SAVE_WINDOW_SIZE, {\n        fontSize,\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    },\n    getExternalCommunityId() {\n      // check in URL\n      const url = location.search.match(/(?:\\?|&)community_id=(\\d+)/);\n      if (url) return parseInt(url[1]);\n\n      // check in localStorage\n      const storage = localStorage.getItem('dashboardCommunityId');\n      if (storage) return parseInt(storage);\n\n      // check user memberships\n      if (this.activeMemberships.length) {\n        return parseInt(this.activeMemberships[0].community.id);\n      }\n\n      return null;\n    },\n    async getEntitlements() {\n      this.entitlements = await request(`/api/entitlements?communityId=${this.communityId}`);\n      this.$store.commit(cmd.SET_CONTEXT, { entitlements: this.entitlements });\n    },\n    newUserWelcome() {\n      const NEW_USER_MARK = moment('2018-03-29', 'YYYY-MM-DD').utc();\n      const isNewUser = Boolean(!this.user.hasLoggedIn && moment(this.currentUser.createdOn).utc().isAfter(NEW_USER_MARK));\n      if (isNewUser) {\n        this.$store.commit('messageBanner/PUT_NOTICE', {\n          type: 'positive',\n          message: messages.NEW_USER_MESSAGE.replace(\n            '{url}',\n            'https://www.chorus.help/hc/en-us/articles/360009073453-Getting-started-with-the-story-editor'\n          )\n        });\n        // Flag this user as having logged on if they haven't been loggedIn before\n        updateAnthemUser({ hasLoggedIn: true });\n      }\n    },\n    overlayEscapeHandler(event) {\n      if (event.key === 'Escape' && !this.isMobile) {\n        this.$store.commit(cmd.SET_OVERLAY, {\n          childProps: null,\n          component: null,\n        });\n        this.$store.commit(cmd.SET_SIDEBAR, null);\n      }\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"m-chorus-help__icon \" + _vm.announcementClass),style:(_vm.isMobile ? 'position: absolute; right: 0;' : '')},[_c('res-button',{attrs:{\"design\":\"default\",\"paddingless\":\"\"},on:{\"click\":function($event){return _vm.toggleHelp()}}},[_c('res-icon',{attrs:{\"size\":\"medium\",\"title\":\"Help\",\"name\":\"help\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"}})],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-list.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09728de8\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./saved-search-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import * as cmd from './commands';\nimport sharedMutations from '../../shared/vue/store/mutations';\n\nexport default {\n  ...sharedMutations,\n\n  [cmd.SET_IS_MOBILE](state, isMobile) {\n    state.isMobile = isMobile;\n  },\n\n  [cmd.SAVE_WINDOW_SIZE](state, { width = null, height = null }) {\n    if (width !== null) {\n      state.windowSize.width = width;\n    }\n\n    if (height !== null) {\n      state.windowSize.height = height;\n    }\n  },\n\n  /**\n   * Adds chorus-help announcement-specific fields to the currentUser state\n   */\n  [cmd.PATCH_USER](state, patch = {}) {\n    if (Object.keys(patch).length) {\n      state.currentUser = Object.assign({}, state.currentUser, patch);\n    }\n  },\n\n  /**\n  * Sets the currently active sidebar type.\n  */\n  [cmd.SET_SIDEBAR](state, options) {\n    // Mutation may specify a \"when\" type criteria,\n    // at which time we'll only make changes when in the checked type state.\n    if (options && options.when && !options.when.test(state.currentSidebar.type)) {\n      return;\n    }\n\n    const type = options ? options.to : null;\n    const sidebarComponents = [\n      'chorus-help'\n    ];\n    // make sure the options.to value is a valid sidebar component name\n    const valid = sidebarComponents.includes(type);\n\n    state.currentSidebar = {\n      type: valid ? type : null,\n      title: valid ? (options.title || null) : null,\n      id: valid ? (options.id || null) : null,\n      childProps: valid ? (options.childProps || null) : null,\n      orientation: valid ? (options.orientation) : 'right',\n      pushContent: valid ? (options.pushContent) : false\n    };\n  },\n\n  /**\n   * Sets the currently active modal\n   */\n  [cmd.SET_MODAL](state, options) {\n    if (!options) {\n      state.currentModal = null;\n      return;\n    }\n\n    const { childProps, component } = options;\n    const modalComponents = [\n      'shortlink-modal',\n      'saved-search-delete-modal',\n      'saved-search-create-modal',\n    ];\n    const valid = modalComponents.includes(component);\n    const shouldReRender = valid && component !== state.currentModal.component;\n\n    state.currentModal = {\n      childProps: childProps || null,\n      component: valid ? component : null,\n    };\n\n    // If the child modal component is changing, increment the\n    // AppModal's key to avoid rendering issues\n    if (shouldReRender) {\n      state.modalKey++;\n    }\n  },\n\n  /**\n   * Sets the currently active overlay\n   */\n  [cmd.SET_OVERLAY](state, options) {\n    if (!options) {\n      state.currentOverlay = null;\n      return;\n    }\n\n    const { childProps, component, orientation } = options;\n    const overlayComponents = [\n      'chorus-help-announcement',\n      'chorus-help-contact-form'\n    ];\n    const valid = overlayComponents.includes(component);\n\n    state.currentOverlay = {\n      childProps: childProps || null,\n      component: valid ? component : null,\n      orientation: orientation || 'left',\n    };\n  },\n\n  /**\n   * inits the Anthem Socket\n   */\n  [cmd.ANTHEM_SOCKET_INIT](state, socket) {\n    state.anthemSocket = socket;\n  },\n\n  /**\n   * add a websocket user to the autosave state\n   */\n  [cmd.ANTHEM_SOCKET_ADD_USER](state, { newUser }) {\n    state.autosave.connectedUsers.push(newUser);\n  },\n\n  /**\n   * remove a websocket user from the autosave state\n   */\n  [cmd.ANTHEM_SOCKET_REMOVE_USER](state, { oldUser }) {\n    state.autosave.connectedUsers.splice(state.autosave.connectedUsers.indexOf(oldUser), 1);\n  },\n\n  /**\n   * set socketError status, if true, this will put the editor into a read-only state\n   */\n  [cmd.SOCKET_ERROR](state, status) {\n    state.socketError = status;\n  },\n  /**\n   * Recovers app from error state rendered by Error Boundary\n   */\n  [cmd.RESET_ERROR_BOUNDARY](state) {\n    state.errorBoundaryKey++;\n  }\n\n};\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user-status.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user-status.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cd968162\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./user-status.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var getStoryType = require('../../shared/get_story_type');\nvar DOC_LABELS = require('../config/doc_labels');\n\nexport default function getDocLabel(doc) {\n  if (doc.schema_name === 'story') {\n    return getStoryType(doc.head.contents);\n  } else {\n    return DOC_LABELS[doc.schema_name];\n  }\n}\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help-contact-form.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help-contact-form.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-78f18f94\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chorus-help-contact-form.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import * as cmd from '../commands';\nimport Vue from 'vue';\nimport OT from '../../../client/lib/anthem0';\nimport { set } from 'lodash';\n\nexport default {\n  // SET_DOC kicks of init process for autosave plugin\n  [cmd.SET_DOC](state, { doc, path }) {\n    Vue.set(state.docsById, doc.id, doc);\n    if (path === 'doc') {\n      state.ready = false;\n      state.currentDocId = doc.id;\n    } else if (path === 'subdoc') {\n      state.subdocs.push(doc.id);\n    }\n  },\n  [cmd.REMOVE_DOC_FROM_STATE](state, docId) {\n    if (state.currentDocId === docId) state.currentDocId = {};\n    if (state.subdocs.includes(docId)) state.subdocs.splice(state.subdocs.indexOf(docId), 1);\n    Vue.delete(state.docsById, docId);\n  },\n  // PIPELINE DONE // TODO\n  [cmd.CLEAR_DIRTY](state) {\n    state.dirty = {};\n  },\n  [cmd.SET_DIRTY](state, docId) {\n    Vue.set(state.dirty, docId, true);\n  },\n  [cmd.SET_CLEAN](state, docId) {\n    Vue.delete(state.dirty, docId);\n  },\n  [cmd.SET_INLINE](state, { docId, userId, delta }) {\n    if (!state.inLine.hasOwnProperty(docId)) {\n      state.inLine[docId] = {};\n    }\n    if (userId) {\n      Vue.set(state.inLine[docId], 'userId', userId);\n    }\n    if (delta) {\n      Vue.set(state.inLine[docId], 'delta', delta);\n    }\n  },\n  [cmd.UNSET_INLINE](state, docId) {\n    Vue.delete(state.inLine, docId);\n  },\n  [cmd.SET_INFLIGHT](state, docId) {\n    Vue.set(state.inFlight, docId, state.inLine[docId]);\n  },\n  [cmd.UPDATE_INLINE_DELTA](state, { docId, delta }) {\n    state.inLine[docId].delta = delta;\n  },\n  [cmd.UNSET_INFLIGHT](state, docId) {\n    Vue.delete(state.inFlight, docId);\n  },\n  [cmd.UPDATE_INFLIGHT_DELTA](state, { docId, delta }) {\n    state.inFlight[docId].delta = delta;\n  },\n  [cmd.SET_SENT_ID](state, packetUuid) {\n    Vue.set(state.sentIds, packetUuid, true);\n  },\n  [cmd.REMOVE_SENT_ID](state, packetUuid) {\n    Vue.delete(state.sentIds, packetUuid);\n  },\n  [cmd.UPDATE_SEQUENCE](state, { docId, sequence }) {\n    state.docsById[docId].head.end_sequence = sequence;\n  },\n  [cmd.UPDATE_LAST_MODIFIED_DATE](state, { docId, date }) {\n    state.docsById[docId].updated_at = date;\n  },\n  [cmd.UPDATE_DOC](state, { docId, delta }) {\n    state.docsById[docId].head.delta = OT.compose(state.docsById[docId].head.delta, delta);\n    state.docsById[docId].head.contents = OT.apply(state.docsById[docId].head.contents, delta);\n  },\n  [cmd.UPDATE_DOC_BY_PATH](state, { docId, path, value }) {\n    set(state.docsById[docId], path, value);\n  },\n  [cmd.SET_FATAL_ERROR](state) {\n    state.error = true;\n  },\n  [cmd.ADD_RECONNECTING_DOC](state, docId) {\n    state.reconnectingIds.push(docId);\n  },\n  [cmd.REMOVE_RECONNECTING_DOC](state, docId) {\n    state.reconnectingIds.splice(state.reconnectingIds.indexOf(docId), 1);\n  },\n  [cmd.CAPI_SOCKET](state, socket) {\n    state.contentApiSocket = socket;\n  },\n  [cmd.SET_AUTOSAVE_READY](state, isReady) {\n    // the currentDoc (schema = story) has loaded, autosave is ready to save things\n    state.ready = isReady;\n  }\n};\n","module.exports = function isMapstack(contents) {\n  return contents.draft.hasOwnProperty('map_points');\n};\n","export const SET_CONTEXT = 'setContext';\nexport const ACTIVE_MEMBERSHIPS = 'activeMemberships';\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{class:_vm.className},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editing),expression:\"editing\"}],staticClass:\"m-editable-list-item__content\"},[_c('res-input',{on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.save($event)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.name),expression:\"name\",modifiers:{\"trim\":true}}],ref:\"input\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_vm._v(\" \"),_c('res-button',{staticClass:\"m-editable-list-item__save\",attrs:{\"design\":\"primary\"},on:{\"click\":_vm.save}},[_c('res-icon',{attrs:{\"name\":\"check\"}}),_vm._v(\" \"),_c('button')],1),_vm._v(\" \"),_c('res-button',{staticClass:\"m-editable-list-item__cancel\",attrs:{\"design\":\"secondary\"},on:{\"click\":_vm.cancel}},[_c('res-icon',{attrs:{\"name\":\"x\"}}),_vm._v(\" \"),_c('button')],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.editing),expression:\"!editing\"}],staticClass:\"m-editable-list-item__content\"},[_c('res-button',{staticClass:\"m-editable-list-item__name\",attrs:{\"disabled\":_vm.disabled,\"paddingless\":\"\"},on:{\"click\":function($event){!_vm.disabled && _vm.onNameClick()}}},[_c('button',[_vm._v(_vm._s(_vm.name))])]),_vm._v(\" \"),_c('res-button',{staticClass:\"m-editable-list-item__edit\",attrs:{\"disabled\":_vm.disabled,\"title\":\"Edit\"},on:{\"click\":function($event){!_vm.disabled && _vm.edit()}}},[_c('res-icon',{attrs:{\"name\":\"edit\"}}),_vm._v(\" \"),_c('button')],1),_vm._v(\" \"),_c('res-button',{staticClass:\"m-editable-list-item__delete\",attrs:{\"res-modal-open\":_vm.modalId,\"disabled\":_vm.disabled,\"title\":\"Delete\",\"negative\":\"\"},on:{\"click\":function($event){!_vm.disabled && _vm.onDeleteClick()}}},[_c('res-icon',{attrs:{\"name\":\"trash\"}}),_vm._v(\" \"),_c('button')],1)],1)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div class=\"m-nav m-nav__root\">\n    <banner-message />\n    <nav class=\"m-nav m-nav--editor m-nav--editor__vue\">\n      <editor-mobile-subnav\n        v-if=\"isMobile\"\n        :navLinks=\"navLinks\"\n        :pageActive=\"pageActive\"\n      />\n      <editor-subnav\n        v-else\n        :navLinks=\"navLinks\"\n        :pageActive=\"pageActive\"\n      />\n    </nav>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\nimport BannerMessage from './banner-message.vue';\nimport EditorSubnav from './editor-subnav.vue';\nimport EditorMobileSubnav from './editor-mobile-subnav.vue';\n\nexport default {\n  components: {\n    BannerMessage,\n    EditorSubnav,\n    EditorMobileSubnav\n  },\n  computed: {\n    ...mapState(['isMobile']),\n    ...mapGetters(['currentDoc', 'customFieldsEnabled']),\n    navLinks() {\n      const docLabel = this.docLabel;\n\n      // commenting this configure link option out temporarily as we regroup on how to store siteConfig data\n      // we won't need this link for the Duet Layout project as it currently only serves STrib\n      // const configurationLink = { name: 'configure', label: 'Configure' };\n\n      let links = [];\n      if (docLabel === 'package') {\n        links = [\n          { name: 'package', label: 'Package' },\n          { name: 'compose', label: 'Compose' },\n          { name: 'docs', label: 'Layout', params: { action: 'layout' } },\n          { name: 'preview', label: 'Preview' },\n          { name: 'preflight', label: 'Finalize' }\n        ];\n      } else if (docLabel === 'link') {\n        links = [\n          { name: 'compose', label: 'Compose' },\n          { name: 'preflight', label: 'Finalize' }\n        ];\n      } else if (docLabel === 'custom story') {\n        links =  [\n          { name: 'customstory', label: 'Project' },\n          { name: 'compose', label: 'Compose' },\n          { name: 'preview', label: 'Preview' },\n          { name: 'preflight', label: 'Finalize' }\n        ];\n      } else if (docLabel === 'mapstack' || docLabel === 'stream') { // no layout option\n        links = [\n          { name: 'compose', label: 'Compose' },\n          { name: 'preview', label: 'Preview' },\n          { name: 'preflight', label: 'Finalize' }\n        ];\n      } else {\n        links = [\n          { name: 'compose', label: 'Compose' },\n          { name: 'docs', label: 'Layout', params: { action: 'layout' } },\n          { name: 'preview', label: 'Preview' },\n          { name: 'preflight', label: 'Finalize' }\n        ];\n      }\n\n      // @TODO: re-enable this when siteConfig data is available\n      // if (this.siteConfig.headlessModeEnabled && !this.siteConfig.externalLayoutEnabled) {\n      //   links = links.filter(link => link.name !== 'preview');\n      //   links = links.filter(link => link.name !== 'layout');\n      // }\n      // if (this.customFieldsEnabled) {\n      //   links.splice(1, 0, configurationLink);\n      // }\n      return links;\n    }\n  },\n  methods: {\n    pageActive(tabName, tabLabel) {\n      if (tabName !== 'docs') {\n        return this.$route.name === tabName ? 'is-active' : '';\n      } else {\n        return this.$route.params.action === tabLabel ? 'is-active' : '';\n      }\n    }\n  }\n};\n</script>\n","import Vue from 'vue';\nimport config from '../config';\nimport * as Sentry from '@sentry/browser';\nimport * as Integrations from '@sentry/integrations';\n\nif (config.sentry) {\n  Sentry.init({\n    dsn: config.sentry.dsn,\n    release: config.release,\n    environment: config.env,\n    integrations: [new Integrations.Vue({ Vue })]\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.currentDoc)?_c('editor-nav'):_vm._e(),_vm._v(\" \"),_c(_vm.action,{tag:\"component\",attrs:{\"uuid\":_vm.uuid}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.currentModal.component)?_c('res-modal',{key:_vm.modalKey,attrs:{\"id\":_vm.modalId,\"background\":\"darken\",\"bgclose\":\"\"}},[_c(_vm.currentModal.component,{tag:\"component\",attrs:{\"childProps\":_vm.currentModal.childProps}})],1):_vm._e()}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div class=\"m-nav--dashboard__new-story\">\n    <span v-if=\"storyTypes.length === 1\">\n      <res-button\n        v-if=\"isMobile\"\n        :disabled=\"loadingNewDoc || readOnly\"\n        :key=\"mobileKey\"\n        design=\"primary\"\n      >\n        <res-icon name=\"add\" size=\"medium\" />\n        <button @click=\"newDoc(storyTypes[0].type, storyTypes[0].defaults)\" />\n      </res-button>\n\n      <res-button\n        v-else\n        :disabled=\"loadingNewDoc || readOnly\"\n        :key=\"mobileKey\"\n        design=\"primary\"\n      >\n        <button @click=\"newDoc(storyTypes[0].type, storyTypes[0].defaults)\">New {{ storyTypes[0].type }}</button>\n      </res-button>\n    </span>\n    <res-split-button\n      v-else\n      :key=\"mobileKey\"\n      :mobile=\"isMobile\"\n      :disabled=\"loadingNewDoc || readOnly\"\n      icon=\"add\"\n    >\n      <ul>\n        <li v-for=\"(story, index) in storyTypes\" :key=\"index\" :active=\"index === 0\">\n          <a @click=\"newDoc(story.type, story.defaults)\">\n            <span>New {{ story.type }}</span>\n            <res-badge v-if=\"story.status\" size=\"smallest\" design=\"rose\">{{ story.status }}</res-badge>\n          </a>\n        </li>\n      </ul>\n    </res-split-button>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport { hasPolicyRole } from '../../lib/authorization';\nimport request from '../../../client/lib/request';\n\nexport default {\n  props: {\n    communityId: {\n      type: Number,\n      required: true\n    },\n    isMobile: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      loadingNewDoc: false,\n      mobileKey: 1\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentUser',\n      'entitlements',\n      'policyRoles'\n    ]),\n    ...mapGetters([\n      'readOnly'\n    ]),\n    isPagesViewMode() {\n      return this.$route.name.includes('pages');\n    },\n    storyTypes() {\n      if (this.isPagesViewMode) {\n        return [{ type: 'page', defaults: { entry_type: 'Page' } }];\n      }\n\n      let opts = [{ type: 'story', defaults: {} }];\n      if (hasPolicyRole(this.currentUser, this.communityId, this.policyRoles.editor.accessStoryTypes)) {\n        opts.push(\n          { type: 'stream', defaults: { entry_type: 'Stream' } },\n          { type: 'link', defaults: { entry_type: 'LinkPost' } }\n        );\n      }\n      if (this.entitlements && this.entitlements.includes('use_packages')) {\n        opts.push({ type: 'package', defaults: { entry_type: 'LandingPage' } });\n      }\n      if (this.entitlements && this.entitlements.includes('use_mapstacks')) {\n        opts.push({ type: 'mapstack', defaults: { entry_type: 'MapStack' } });\n      }\n      if (this.entitlements && this.entitlements.includes('use_customstories')) {\n        opts.push({ type: 'custom story', defaults: { entry_type: 'CustomStory' }, status: 'beta' });\n      }\n      return opts;\n    }\n  },\n  watch: {\n    isMobile() {\n      this.mobileKey++;\n    },\n    loadingNewDoc() {\n      if (this.loadingNewDoc) {\n        this.$store.commit('appLoader/SET_LOADING', true);\n      } else {\n        this.$store.commit('appLoader/SET_LOADING', false);\n      }\n    }\n  },\n  methods: {\n    newDoc(type, params = {}) {\n      this.loadingNewDoc = true;\n      params.community_id = this.communityId;\n      this.createDoc(type, params);\n    },\n    async createDoc(type, params) {\n      let docPath = 'compose';\n      if (type === 'package') docPath = 'package';\n      if (type === 'custom story') docPath = 'customstory';\n      try {\n        const doc = await request('/newstory', {\n          method: 'POST',\n          body: params,\n          opts: { handleError: false } // stop error handling from bubbling up to Ractive state\n        });\n        window.location.assign(`/${docPath}/${doc.uuid}`);\n      } catch (error) {\n        console.log('error', error);\n        this.$store.commit('messageBanner/PUT_NOTICE', {\n          type: 'negative',\n          message: error.message\n        });\n      }\n    }\n  }\n};\n</script>\n","module.exports = function isPage(contents) {\n  return contents.draft.entry_layout === 'unison_page';\n};\n","<template>\n  <div class=\"m-overlay__entry\">\n    <h1>\n      <a :href=\"entry.url\" class=\"m-overlay__entry__export\" target=\"_blank\">\n        <res-icon size=\"medium\" title=\"Open externally\" name=\"new-window\" />\n      </a>\n      {{ entry.title }}\n      <a :href=\"entry.url\" class=\"m-overlay__entry__export--after\" target=\"_blank\">\n        <res-icon size=\"medium\" title=\"Open externally\" name=\"new-window\" />\n      </a>\n    </h1>\n    <p>{{ entry.dek }}</p>\n    <section v-html=\"entry.body || entry.body_extended\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    childProps: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    entry() {\n      return this.childProps;\n    }\n  }\n};\n</script>\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\nimport autosaveStore from './autosave/index';\nimport autosavePipeline from './autosave/plugin';\nimport capiSocket from './plugins/capiSocket';\nimport antSocket from './plugins/anthemSocket';\nimport messageBanner from '../../shared/vue/banner-messages/store';\n\nconst autosave = autosavePipeline();\nconst contentApiSocket = capiSocket();\nconst anthemSocket = antSocket();\n\nVue.use(Vuex);\n\nconst store = (seed = {}) => new Vuex.Store({\n  state: Object.assign({\n    anthemSocket: null,\n    currentSidebar: {\n      type: null,\n      id: null,\n      childProps: null,\n      orientation: 'right',\n      pushContent: false\n    },\n    currentModal: {},\n    modalKey: 1,\n    errorBoundaryKey: 1,\n    modalId: 'storyEditorModal',\n    currentOverlay: {\n      childProps: null,\n      component: null,\n      orientation: 'left'\n    },\n    currentUser: {\n      id: null,\n      createdOn: null,\n      fullOrUserName: null,\n      email: null,\n      timeZone: null,\n      networkRoles: [],\n      memberships: [],\n    },\n    currentCommunity: {\n      id: 0,\n      name: null,\n    },\n    network: {\n      id: null,\n      name: null,\n      schemaDomain: null\n    },\n    entitlements: [],\n    isMobile: false,\n    socketError: false,\n    windowSize: {\n      width: null,\n      height: null,\n    },\n  }, seed),\n  actions,\n  mutations,\n  getters,\n  modules: {\n    autosave: autosaveStore,\n    messageBanner,\n  },\n  plugins: [\n    autosave,\n    contentApiSocket,\n    anthemSocket\n  ]\n});\n\nexport default store;\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-block.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit-block.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08c44225\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit-block.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div>\n    <p v-if=\"!searches.length\" class=\"m-search-panel__no-searches\">\n      No saved searches. Try creating a saved search.\n    </p>\n    <ul class=\"m-search-panel__saved-searches\">\n      <editable-list-item\n        v-for=\"search in searches\"\n        :key=\"search.searchId\"\n        :itemName=\"search.name\"\n        :onNameClick=\"() => runSavedSearch(search)\"\n        :onDeleteClick=\"() => openDeleteModal(search.searchId)\"\n        :onSaveClick=\"(name) => renameSavedSearch(search, name)\"\n        :active=\"search.searchId === currentSavedSearch.searchId\"\n        :disabled=\"readOnly\" />\n    </ul>\n  </div>\n</template>\n\n<script>\nimport EditableListItem from './editable-list-item.vue';\nimport { mapGetters, mapState } from 'vuex';\n\nexport default {\n  components: {\n    EditableListItem,\n  },\n  props: {\n    searches: {\n      type: Array,\n      default: () => ([]),\n      required: true,\n    },\n    goToSearchView: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    renameSavedSearch: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    openDeleteModal: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    runSavedSearch: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    currentSavedSearch: {\n      type: Object,\n      default: () => ({}),\n      required: true,\n    },\n  },\n  computed: {\n    ...mapState(['currentCommunity']),\n    ...mapGetters(['readOnly']),\n  },\n};\n</script>\n","module.exports = function wait(howLong) {\n  return new Promise(function(resolve) {\n    setTimeout(resolve, howLong);\n  });\n};\n","<template>\n  <div :class=\"['m-tooltip', className]\">\n    <res-button :id=\"id\" design=\"default\" paddingless>\n      <res-icon name=\"tooltip\"/>\n      <button type=\"button\"/>\n    </res-button>\n    <res-dropdown\n      :for=\"id\"\n      :placement=\"placement\"\n      :visible=\"active\"\n      design=\"dark\">\n      <slot />\n    </res-dropdown>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    className: {\n      type: String,\n      default: '',\n    },\n    placement: {\n      type: String,\n      default: 'bottom-end',\n    },\n    id: {\n      type: String,\n      default: null,\n    },\n    active: {\n      type: Boolean,\n      default: false,\n    }\n  },\n};\n</script>\n","import Vue from 'vue';\nimport VueRouter from 'vue-router';\nimport Dashboard from './views/dashboard.vue';\nimport Doc from './views/doc.vue';\n\nVue.use(VueRouter);\n\nconst rootUrl = window.location.origin;\n\nconst beforeEnter = (to, from, next) => {\n  // if /layout/ route is being accessed...\n  // check for the lack of presence of ?testing=true in the URL\n  if (!to.query.testing) {\n    if (from.name) {\n      // if the user navigated to here from a previous Vue route, send them back\n      next({ name: from.name });\n    } else {\n      // otherwise send them to the domain root\n      window.location = rootUrl;\n    }\n  } else {\n    // ?testing=true IS in the URL, so let the user through\n    next();\n  }\n};\n\nconst router = new VueRouter({\n  base: '/',\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'dashboard',\n      component: Dashboard,\n    },\n    {\n      path: '/pages',\n      name: 'pages',\n      component: Dashboard,\n    },\n    {\n      path: '/pages/:filter',\n      name: 'pages-filtered',\n      component: Dashboard,\n    },\n    {\n      path: '/:filter',\n      name: 'dashboard-filtered',\n      component: Dashboard,\n    },\n    // wrapper for all doc management routes (currently only layout,\n    // but eventually will include compose, finalize, etc)\n    {\n      path: '/:action(layout)/:uuid',\n      name: 'doc',\n      component: Doc,\n      props: true,\n      beforeEnter\n    },\n  ]\n});\nexport default router;\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell-activity.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-doc-cell-activity.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7317f664\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard-doc-cell-activity.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./autosave-radio.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./autosave-radio.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c39e4dca\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./autosave-radio.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./autocomplete-input.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./autocomplete-input.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7f209a55\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./autocomplete-input.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-delete-modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-delete-modal.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11381312\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./saved-search-delete-modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import * as cmd from './commands';\nimport sharedGetters from '../../shared/vue/store/getters';\n\nexport default {\n  ...sharedGetters,\n\n  [cmd.READ_ONLY](state) {\n    const autosaveError = state.autosave.error;\n    const socketError = state.socketError;\n    const maintenanceMode = (state.messageBanner.notifications.some(m => m.persistent)); // any persistent banner (not just one for maintenance mode) will indicate read-only state\n    // const docMissingEntry = state.docMissingEntry; @TODO: hook this up\n    // const trashedAt = state.trashedAt; @TODO: hook this up\n    return autosaveError || socketError || maintenanceMode;\n  },\n\n  [cmd.CUSTOM_FIELDS_ENABLED](state) {\n    const ENABLED_ORGANIZATIONS = ['startribune'];\n    let organizationEnabled = false;\n    if (state.currentCommunity && state.currentCommunity.network && state.currentCommunity.network.organization && state.currentCommunity.network.organization.slug) {\n      organizationEnabled = ENABLED_ORGANIZATIONS.includes(state.currentCommunity.network.organization.slug);\n    }\n\n    const ENABLED_NETWORKS = [];\n    let networkEnabled = false;\n    if (state.currentCommunity && state.currentCommunity.network && state.currentCommunity.network.slug) {\n      networkEnabled = ENABLED_NETWORKS.includes(state.currentCommunity.network.slug);\n    }\n\n    const ENABLED_COMMUNITIES = ['startribune', 'citypages', 'anthem-test-blog-sbnprivate', 'crimsontesting'];\n    let communityEnabled = false;\n    if (state.currentCommunity && state.currentCommunity.slug) {\n      communityEnabled = ENABLED_COMMUNITIES.includes(state.currentCommunity.slug);\n    }\n\n    return organizationEnabled || networkEnabled || communityEnabled;\n  },\n\n  [cmd.ANTHEM_SOCKET_CONNECTED_STATUS](state) {\n    if (state.anthemSocket) {\n      return state.anthemSocket.connected;\n    } else {\n      return false;\n    }\n  },\n};\n","<template>\n  <div>\n    <dashboard-nav />\n    <div class=\"m-dashboard m-dashboard--has-search-panel\">\n      <div :style=\"contentStyles\" class=\"l-content p-flex is-compose\">\n        <div class=\"l-content__inner m-dashboard__inner\">\n          <search-panel\n            ref=\"searchPanel\"\n            :class=\"searchPanelClass\"\n            :isCollapsed=\"searchPanelCollapsed\"\n            :key=\"mobileKey\"\n            :updateQuery=\"updateQuery\"\n            :formattedQuery=\"formattedQuery\"\n            :isSearching=\"isSearching\"\n            :defaultQuery=\"baseQuery\"\n            :setSavedSearchName=\"setSavedSearchName\"\n            @collapse=\"toggleSearchPanel()\" />\n          <div\n            v-if=\"!isMobile\"\n            :class=\"`m-dashboard__search-panel ${searchPanelClass}`\"\n            @click=\"toggleSearchPanel(!searchPanelCollapsed)\">\n            <div class=\"m-dashboard__search-panel-actions\">\n              <span class=\"m-dashboard__search-panel-icons\">\n                <res-icon name=\"search\" size=\"small\" />\n                <res-icon v-if=\"!searchPanelCollapsed\" name=\"left\" size=\"small\" />\n                <res-icon v-else name=\"right\" size=\"small\" />\n              </span>\n            </div>\n          </div>\n          <main class=\"m-dashboard__content m-dashboard__content--has-search-panel\">\n            <res-button\n              v-if=\"isMobile\"\n              :key=\"mobileKey\"\n              class=\"m-dashboard__mobile-search-toggle\"\n              design=\"secondary\"\n              @click=\"toggleSearchPanel()\">\n              <res-icon name=\"search\" />\n              <button>Open search</button>\n            </res-button>\n\n            <header class=\"m-dashboard__header\">\n              <div\n                v-if=\"filter || isPagesViewMode\"\n                class=\"m-dashboard__sub-head\">\n                <div class=\"m-dashboard__sub-head__title\">\n                  <h1>{{ title }}</h1>\n                  <res-button design=\"default\" paddingless class=\"m-l-1\" @click=\"back\">\n                    <res-icon name=\"back\"/>\n                    <button>\n                      {{ titleButtonText }}\n                    </button>\n                  </res-button>\n                </div>\n                <p v-if=\"filter === 'trash'\">\n                  Items in the trash are automatically deleted after 30 days.\n                </p>\n              </div>\n              <res-badge v-if=\"savedSearchName\" size=\"smaller\" class=\"m-dashboard__sub-head__saved-search\">\n                Saved search: {{ savedSearchName }}\n              </res-badge>\n              <div\n                v-if=\"displayResultsInfo\"\n                class=\"m-dashboard__sub-head m-dashboard__sub-head__summary\">\n                <span class=\"m-dashboard__sub-head--bold\">\n                  {{ resultsCount }}\n                </span>\n                {{ resultsFor }}\n                <span class=\"m-dashboard__sub-head--bold\">\n                  {{ searchPhrase }}\n                </span>\n                <div class=\"m-chip__container\">\n                  <div v-for=\"(group, name) in chipGroups\" :key=\"name\">\n                    <span class=\"m-chip__label\">{{ name }}:</span>\n                    <chip v-for=\"(searchItem, index) in group\"\n                          :key=\"`${index}-${searchItem}`\"\n                          :chipId=\"`${name}:${searchItem}`\"\n                          :chipLabel=\"searchItem\"\n                          @removeSelection=\"removeChipFromQuery\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <div class=\"m-dashboard__header__table-filters\">\n                <res-switch\n                  v-if=\"canListAllStories\"\n                  :checked=\"myDocs\"\n                  class=\"m-dashboard__header__my-stories\"\n                  @change=\"onMyDocsChange\">\n                  <input\n                    type=\"checkbox\"\n                    name=\"myDocs\" />\n                  <label>Show my {{ storyLabel }}</label>\n                </res-switch>\n                <res-select size=\"small\">\n                  <label>Sort by:</label>\n                  <select\n                    :value=\"sortBy\"\n                    name=\"order\"\n                    @change=\"onOrderChange\">\n                    <option v-if=\"canSortByScore\" value=\"score\" role=\"option\" aria-selected=\"true\">\n                      Relevance\n                    </option>\n                    <option value=\"date\" role=\"option\" aria-selected=\"true\">\n                      Last modified\n                    </option>\n                    <option value=\"last_published\" role=\"option\">\n                      Last published\n                    </option>\n                    <option value=\"first_published\" role=\"option\">\n                      Original publish date\n                    </option>\n                    <option value=\"updated\" role=\"option\">Latest activity</option>\n                    <option value=\"title\" role=\"option\">Title</option>\n                  </select>\n                </res-select>\n              </div>\n            </header>\n\n            <div\n              v-show=\"canArchiveOrTrashStories && selectedIndices.length > 0\"\n              class=\"m-dashboard__table-actions\">\n              <res-button\n                id=\"dashboard-actions-btn\"\n                ref=\"actionsBtn\"\n                design=\"secondary\">\n                <button>Actions</button>\n              </res-button>\n              <res-dropdown for=\"dashboard-actions-btn\">\n                <!-- Filter is empty -->\n                <button\n                  v-if=\"!filter\"\n                  @click=\"setDocAction('updateArchived', 'archive')\">\n                  <res-icon size=\"small\" name=\"versions\" title=\"Archive\"/>\n                  Archive\n                </button>\n                <button\n                  v-if=\"!filter\"\n                  @click=\"setDocAction('updateTrashedAt', 'trash')\">\n                  <res-icon size=\"small\" name=\"trash\" title=\"Move to trash\"/>\n                  Move to trash\n                </button>\n                <!-- Archive view -->\n                <button\n                  v-if=\"filter === 'archive'\"\n                  @click=\"setDocAction('updateArchived', 'dashboard')\">\n                  <res-icon size=\"small\" name=\"refresh\" title=\"Restore\"/>\n                  Restore\n                </button>\n                <button\n                  v-if=\"filter === 'archive'\"\n                  @click=\"setDocAction('updateArchivedAndTrashed', 'trash')\">\n                  <res-icon size=\"small\" name=\"trash\" title=\"Move to trash\"/>\n                  Move to trash\n                </button>\n                <!-- Trash view -->\n                <button\n                  v-if=\"filter === 'trash'\"\n                  @click=\"setDocAction('updateTrashedAt', 'dashboard')\">\n                  <res-icon size=\"small\" name=\"refresh\" title=\"Restore\"/>\n                  Restore\n                </button>\n                <button\n                  v-if=\"filter === 'trash'\"\n                  @click=\"setDocAction('updateArchivedAndTrashed', 'archive')\">\n                  <res-icon size=\"small\" name=\"versions\" title=\"Move to archive\"/>\n                  Move to archive\n                </button>\n              </res-dropdown>\n            </div>\n\n            <res-table\n              ref=\"table\"\n              :mobile=\"isMobile\"\n              class=\"m-dashboard__table\"\n              zebra\n              selectable>\n              <table>\n                <thead>\n                  <tr>\n                    <th class=\"m-dashboard__table__icon\" />\n                    <th>Title</th>\n                    <th>Byline</th>\n                    <th v-if=\"currentCommunity.printSlugEnabled\">Print slug</th>\n                    <th v-if=\"entitlements && entitlements.includes('use_send_to_print')\" align=\"center\">\n                      Print\n                    </th>\n                    <th>{{ lastActivityLabel }}</th>\n                    <th v-if=\"displayActions\" align=\"center\"/>\n                  </tr>\n                </thead>\n                <tbody>\n                  <doc-cell\n                    v-for=\"(doc, index) in docs\"\n                    :ref=\"`${index}DocCell`\"\n                    :key=\"doc.uuid\"\n                    :doc=\"doc\"\n                    :filter=\"filter\"\n                    :canArchiveOrTrashStories=\"canArchiveOrTrashStories\"\n                    :displayActions=\"displayActions\"\n                    :updateTernaryCheckbox=\"updateTernaryCheckbox\" />\n                </tbody>\n              </table>\n            </res-table>\n\n            <footer class=\"m-dashboard__footer\">\n              <div v-if=\"!filter\" class=\"m-dashboard__footer__view-mode-buttons\">\n                <res-button\n                  v-if=\"canArchiveOrTrashStories\"\n                  design=\"secondary\"\n                  @click=\"setFilter('archive')\">\n                  <button type=\"button\">Show archived {{ storyLabel }}</button>\n                </res-button>\n                <res-button\n                  v-if=\"canArchiveOrTrashStories\"\n                  design=\"secondary\"\n                  @click=\"setFilter('trash')\">\n                  <button type=\"button\">Show trash</button>\n                </res-button>\n              </div>\n              <div v-if=\"pagination\" class=\"m-dashboard__footer__pagination\">\n                <res-pagination\n                  :count=\"pagination.total\"\n                  :disabled=\"isSearching\"\n                  :display=\"pagination.perPage\"\n                  :page=\"pagination.page\"\n                  :pagination=\"isMobile ? 'nav-only-toggle' : 'text-only'\"\n                  indicator=\"page\"\n                  navigation=\"text\"\n                  @change=\"paginate\" />\n              </div>\n            </footer>\n          </main>\n        </div>\n      </div>\n\n      <scroll-lock v-if=\"!searchPanelCollapsed\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport DashboardNav from '../../components/header/dashboard-nav.vue';\nimport DocCell from '../../components/dashboard-doc-cell.vue';\nimport SearchPanel from '../../components/search-panel/dashboard-search-panel.vue';\nimport ScrollLock from '../../components/utils/scroll-lock.vue';\nimport Chip from '../../components/chip.vue';\nimport messages from '../../../client/config/messages';\nimport { hasPolicyRole } from '../../lib/authorization';\nimport { isEqual, compact, capitalize } from 'lodash';\nimport { mapState } from 'vuex';\nimport { reportError } from '../../../client/actions/sentry';\nimport { searchDocs } from '../../../client/actions/docs';\n\nexport default {\n  components: {\n    DashboardNav,\n    DocCell,\n    SearchPanel,\n    ScrollLock,\n    Chip,\n  },\n  data() {\n    return {\n      docs: [],\n      formattedQuery: [],\n      isSearching: false,\n      myDocs: false,\n      pagination: null,\n      selectedIndices: [],\n      searchPanelCollapsed: false,\n      mobileKey: 1,\n      defaultOrder: 'date',\n      savedSearchName: '',\n    };\n  },\n  computed: {\n    ...mapState([\n      'appName',\n      'currentCommunity',\n      'currentUser',\n      'entitlements',\n      'isMobile',\n      'windowSize',\n      'messageBanner',\n      'policyRoles',\n    ]),\n    communityId() {\n      return parseInt(this.currentCommunity.id);\n    },\n    bannerMessageOverride() {\n      const messageHeight = 44;\n      const numberOfMessages = this.messageBanner.notifications.length;\n      const navHeightWithMessages = (messageHeight * numberOfMessages) + 49; // 49 here should match $dash-navbar-height sass variable\n      return navHeightWithMessages;\n    },\n    contentStyles() {\n      const marginTop = this.bannerMessageOverride;\n\n      const height = this.isMobile && !this.searchPanelCollapsed\n        ? `${this.windowSize.height - marginTop}px` : 'auto';\n\n      return {\n        'margin-top': `${marginTop}px`,\n        height: height\n      };\n    },\n    canListAllStories() {\n      return hasPolicyRole(this.currentUser, this.currentCommunity.id, this.policyRoles.doc.accessAny);\n    },\n    canArchiveOrTrashStories() {\n      return hasPolicyRole(this.currentUser, this.currentCommunity.id, this.policyRoles.doc.archiveOrTrash);\n    },\n    filter() {\n      return this.$route.params.filter || '';\n    },\n    isPagesViewMode() {\n      return this.$route.name.includes('pages');\n    },\n    displayActions() {\n      return this.filter !== 'trash' || this.canArchiveOrTrashStories;\n    },\n    sortBy() {\n      return this.$route.query.order || this.defaultQuery.order;\n    },\n    canSortByScore() {\n      return Boolean(this.$route.query.q);\n    },\n    lastActivityLabel() {\n      switch (this.filter) {\n      case '':\n        return 'Status';\n      case 'archive':\n        return 'Last Activity';\n      case 'trash':\n        return 'Added to Trash';\n      }\n    },\n    title() {\n      const title = compact([this.storyLabel, this.filter]).join(' ');\n      return capitalize(title);\n    },\n    storyLabel() {\n      return this.isPagesViewMode ? 'pages' : 'stories';\n    },\n    titleButtonText() {\n      let text = 'Back';\n      if (this.isPagesViewMode && !this.filter) {\n        text += ' to dashboard';\n      }\n      return text;\n    },\n    displayResultsInfo() {\n      return Boolean(this.$route.query.q) && this.formattedQuery.length > 0;\n    },\n    resultsCount() {\n      return this.docs.length === 0 ? 'No results' : this.pagination.total;\n    },\n    resultsFor() {\n      if (this.pagination.total === 0) {\n        return ' for';\n      }\n      return `${this.pagination.total > 1 ? ' results' : ' result'} for`;\n    },\n    baseQuery() {\n      return {\n        page: 1,\n        order: this.defaultOrder,\n        community_id: this.currentCommunity.id,\n        q: '',\n      };\n    },\n    defaultQuery() {\n      return {\n        page: this.$route.query.page || 1,\n        order: this.$route.query.order || this.defaultOrder,\n        community_id: this.currentCommunity.id || this.$route.query.community_id,\n        q: this.$route.query.q || '',\n      };\n    },\n    missingQueryParams() {\n      // is missing some of the default params\n      return Object.keys(this.defaultQuery).some(key => !this.$route.query.hasOwnProperty(key));\n    },\n    searchPanelClass() {\n      let className = 'm-dashboard__search-panel';\n      let modifier = this.searchPanelCollapsed ? '--is-collapsed' : '--is-open';\n      return `${className}${modifier}`;\n    },\n    searchPhrase() {\n      const phrase = [];\n      this.formattedQuery.forEach(item => {\n        if (item.type === 'tokens' || item.type === 'phrase') phrase.push(item.value);\n      });\n      return phrase.join(' ');\n    },\n    chipGroups() {\n      // update \"resultsFor\" to include search string (tokens,phrase)\n      let chipGroups = {};\n      this.formattedQuery.forEach(item => {\n        if (item.type === 'tokens' || item.type === 'phrase') return;\n        const [field, value] = item.value.split(':');\n        if (chipGroups[field]) {\n          chipGroups[field].push(value);\n        } else {\n          chipGroups[field] = [value];\n        }\n      });\n      return chipGroups;\n    }\n  },\n  watch: {\n    currentCommunity() {\n      // set default url params and trigger search when community is loaded in Vuex\n      this.updateQuery(this.defaultQuery);\n    },\n    $route(to, from) {\n      // run a new search anytime route changes\n      if (!isEqual(to, from)) {\n        this.checkParamsAndSearch(to, from);\n      }\n    },\n    isMobile() {\n      this.mobileKey++;\n      if (this.isMobile) {\n        this.searchPanelCollapsed = true;\n      }\n    },\n    isSearching() {\n      if (this.isSearching) {\n        this.$store.commit('appLoader/SET_LOADING', true);\n      } else {\n        this.$store.commit('appLoader/SET_LOADING', false);\n      }\n    }\n  },\n  created() {\n    document.title = `Dashboard | ${this.appName}`;\n  },\n  beforeMount() {\n    if (this.isMobile) {\n      this.searchPanelCollapsed = true;\n    }\n    if (!this.isMobile && localStorage.getItem('preferredCollapse')) {\n      // Storage converts the true/false Boolean value to a string when it is stored, so we need to convert it back to Boolean here\n      const preference = JSON.parse(localStorage.getItem('preferredCollapse'));\n      this.searchPanelCollapsed = preference;\n    }\n  },\n  mounted() {\n    this.$store.commit('appLoader/SET_LOADING', true);\n    this.checkParamsAndSearch(this.$route);\n\n    // Keep track of table `selectedIndices` (checkboxes) with a MutationObserver\n    // because it cannot be tracked with watchers or computed properties\n    // (`refs` are non-reactive)\n    const observer = new MutationObserver(() => {\n      this.selectedIndices = this.$refs.table && this.$refs.table.selectedIndices || [];\n    });\n    observer.observe(this.$refs.table, {\n      attributes: true,\n      childList: true,\n      subtree: true\n    });\n    if (this.isMobile) {\n      this.searchPanelCollapsed = true;\n    }\n    window.addEventListener('keypress', this.keyHandler);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keypress', this.keyHandler);\n  },\n  methods: {\n    handleError(error) {\n      reportError(error, false);\n      this.$store.commit('messageBanner/PUT_NOTICE', {\n        type: 'negative',\n        message: messages.UNEXPECTED\n      });\n    },\n    resetOrder(toRoute, fromRoute) {\n      // if there was a query and now there's not, and the order isn't the default, reset it\n      if (fromRoute && fromRoute.query.q && !toRoute.query.q && toRoute.query.order !== this.defaultOrder) {\n        return { ...toRoute.query, order: this.defaultOrder };\n      }\n      // if there's no search q and order is set to relevance, reset it\n      if (!toRoute.query.q && toRoute.query.order === 'score') {\n        return { ...toRoute.query, order: this.defaultOrder };\n      }\n      return null;\n    },\n    checkParamsAndSearch(toRoute, fromRoute) {\n      let updatedQuery;\n\n      updatedQuery = this.resetOrder(toRoute, fromRoute);\n      // set missing url params\n      if (this.missingQueryParams) {\n        updatedQuery = { ...this.defaultQuery, ...toRoute.query, ...updatedQuery };\n      }\n      if (updatedQuery) {\n        this.updateQuery(updatedQuery);\n      } else {\n        // trigger search if all url params are there\n        this.search();\n      }\n      // reset controlled inputs\n      this.myDocs = Boolean(toRoute.query.q) &&\n        (toRoute.query.q.includes('by:me') || toRoute.query.q.includes('by:\"me\"'));\n    },\n    async search() {\n      const searchParams = this.getSearchParams();\n      // don't search if community hasn't been loaded in Vuex\n      // watcher will run search when community is loaded\n      if (!searchParams.community_id) {\n        return;\n      }\n\n      this.isSearching = true;\n      try {\n        const {\n          docs,\n          pagination,\n          formattedQuery,\n        } = await searchDocs(searchParams, { handleError: false });\n        this.docs = docs;\n        this.pagination = pagination;\n        this.formattedQuery = formattedQuery;\n\n        // rebuild res-table checkboxes when docs change\n        await this.$nextTick();\n        this.$refs.table && this.$refs.table.rebuildCheckboxes();\n        this.isSearching = false;\n      } catch (error) {\n        this.handleError(error);\n        this.isSearching = false;\n      }\n    },\n    getSearchParams() {\n      // eslint-disable-next-line\n      const { q, order, page, community_id } = this.$route.query;\n      const searchParams = {\n        q: this.isPagesViewMode ? `${q} type:page` : q,\n        order: order || this.defaultOrder,\n        page: page || 1,\n        schema_name: 'story',\n        community_id,\n        per_page: 36,\n        archived: this.filter === 'archive',\n        trashed: this.filter === 'trash',\n        story_type_blocklist: this.isPagesViewMode ? [] : ['page'],\n      };\n\n      return searchParams;\n    },\n    paginate(e) {\n      const query = { ...this.$route.query, page: e.detail.page };\n      // use $router.push for pagination\n      return this.updateQuery(query, true);\n    },\n    onOrderChange(e) {\n      const query = { ...this.$route.query, order: e.target.value, page: 1 };\n      this.updateQuery(query);\n    },\n    async removeChipFromQuery(chip) {\n      // by:person\n      let q;\n      q = this.$route.query.q.replace(chip, '').trim();\n      const query = { ...this.$route.query, q, page: 1 };\n      await this.updateQuery(query);\n      if (this.$refs.searchPanel) {\n        this.$refs.searchPanel.clearSavedSearch();\n        this.$refs.searchPanel.goToSearchView();\n      }\n    },\n    async onMyDocsChange(e) {\n      let q, query;\n      if (e.target.checked) {\n        this.myDocs = true;\n        q = `by:me ${this.$route.query.q}`.trim();\n        query = { ...this.$route.query, q, order: 'score', page: 1 };\n      } else {\n        this.myDocs = false;\n        q = this.$route.query.q.replace(/by:\"?me\"?\\s*/, '').trim();\n        query = { ...this.$route.query, q, page: 1 };\n      }\n      await this.updateQuery(query);\n    },\n    async updateQuery(query, usePush = false) {\n      const path = this.$route.path || '/';\n      try {\n        // Updating the query params triggers a new search, per watch method above\n        if (usePush) {\n          await this.$router.push({ path, query });\n        } else {\n          await this.$router.replace({ path, query });\n        }\n      } catch (error) {\n        // Swallow the Vue router redundant navigation error\n        // https://github.com/vuejs/vue-router/issues/2872#issuecomment-519073998\n      }\n    },\n    async setDocAction(method, destination) {\n      this.$refs.actionsBtn.toggleDropdown();\n      const promises = this.selectedIndices.map(index => {\n        const docCell = this.$refs[`${index}DocCell`][0];\n        const action = docCell.$refs.docActions[method];\n        return action(destination);\n      });\n      await Promise.all(promises);\n    },\n    updateTernaryCheckbox() {\n      const checkbox = this.$refs.table.querySelector('.res-checkbox[ternary]');\n      checkbox.setupTernaryFollowers();\n    },\n    setFilter(filter) {\n      const path = this.isPagesViewMode ? `/pages/${filter}` : filter;\n      const query = { ...this.defaultQuery, page: 1 };\n      this.$router.push({ path, query });\n      document.body.scrollTo(0, 0);\n    },\n    back() {\n      const path = this.isPagesViewMode && this.filter ? '/pages' : '/';\n      this.$router.push({ path, query: this.defaultQuery });\n      document.body.scrollTo(0, 0);\n    },\n    toggleSearchPanel(manualClick=null) {\n      if (manualClick !== null) { // check for not-null because we want to capture this value whether its true or false\n        localStorage.setItem('preferredCollapse', manualClick);\n      }\n      this.searchPanelCollapsed = !this.searchPanelCollapsed;\n    },\n    keyHandler(evt) {\n      switch (evt.key) {\n      case '/':\n        if (this.searchPanelCollapsed) {\n          this.searchPanelCollapsed = false;\n          evt.preventDefault();\n        } else if (document.activeElement.tagName !== 'INPUT') {\n          this.$refs.searchPanel.focusKeywordInput();\n          evt.preventDefault();\n        }\n        break;\n      }\n    },\n    setSavedSearchName(name) {\n      this.savedSearchName = name;\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7e514640\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"autocompleteInputWrap\",staticClass:\"m-autocomplete\"},[_c('res-input',[_c('label',{attrs:{\"for\":_vm.trimString(_vm.fieldLabel)}},[_vm._v(_vm._s(_vm.fieldLabel))]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.currentInput),expression:\"currentInput\",modifiers:{\"trim\":true}}],ref:\"autocompleteInput\",attrs:{\"placeholder\":_vm.inputPlaceholder || _vm.fieldLabel,\"id\":_vm.trimString(_vm.fieldLabel),\"type\":\"text\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.currentInput)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.currentInput=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(\" \"),(_vm.searching)?_c('res-icon',{attrs:{\"name\":\"more\",\"size\":\"small\"}}):_vm._e()],1),_vm._v(\" \"),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mappedResults.length),expression:\"mappedResults.length\"}],ref:\"autocompleteInputResults\",staticClass:\"m-autocomplete__input__menu\",attrs:{\"role\":\"listbox\"}},_vm._l((_vm.mappedResults),function(option,i){return _c('li',{key:(i + \"-\" + (option.id)),class:_vm.focusIndex === i ? 'm-autocomplete__result--focused' : '',attrs:{\"id\":option.id,\"disabled\":option.id === 0,\"title\":option.name,\"tabindex\":_vm.focusIndex === i ? 0 : -1,\"role\":\"option\"},on:{\"click\":function($event){return _vm.addOpt(option)}}},[_vm._v(\"\\n      \"+_vm._s(option.name)+_vm._s(option.type === 'SUPER_GROUP' ? ' (Super group)' : '')+\"\\n    \")])}),0),_vm._v(\" \"),(_vm.currentSelections.length)?_c('div',{staticClass:\"m-chip__container\"},_vm._l((_vm.currentSelections),function(selection,index){return _c('chip',{key:(index + \"-\" + (_vm.trimString(selection.name))),attrs:{\"chipId\":selection.id,\"chipLabel\":selection.name},on:{\"removeSelection\":_vm.removeSelection}})}),1):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <div ref=\"autocompleteInputWrap\" class=\"m-autocomplete\">\n    <res-input>\n      <label :for=\"trimString(fieldLabel)\">{{ fieldLabel }}</label>\n      <input\n        ref=\"autocompleteInput\"\n        v-model.trim=\"currentInput\"\n        :placeholder=\"inputPlaceholder || fieldLabel\"\n        :id=\"trimString(fieldLabel)\"\n        type=\"text\"\n        autocomplete=\"off\"\n      />\n      <res-icon v-if=\"searching\" name=\"more\" size=\"small\" />\n    </res-input>\n    <ul v-show=\"mappedResults.length\" ref=\"autocompleteInputResults\" role=\"listbox\" class=\"m-autocomplete__input__menu\">\n      <!-- use a title attribute here because of long contributor groups' names that will likely be cutoff in the general UI -->\n      <li v-for=\"(option, i) in mappedResults\"\n          :key=\"`${i}-${option.id}`\"\n          :id=\"option.id\"\n          :disabled=\"option.id === 0\"\n          :class=\"focusIndex === i ? 'm-autocomplete__result--focused' : ''\"\n          :title=\"option.name\"\n          :tabindex=\"focusIndex === i ? 0 : -1\"\n          role=\"option\"\n          @click=\"addOpt(option)\"\n      >\n        {{ option.name }}{{ option.type === 'SUPER_GROUP' ? ' (Super group)' : '' }}\n      </li>\n    </ul>\n    <div v-if=\"currentSelections.length\" class=\"m-chip__container\">\n      <chip v-for=\"(selection, index) in currentSelections\"\n            :key=\"`${index}-${trimString(selection.name)}`\"\n            :chipId=\"selection.id\"\n            :chipLabel=\"selection.name\"\n            @removeSelection=\"removeSelection\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from 'graphql-tag';\nimport { SearchContributors } from '../queries/searchContributors.graphql';\nimport { SearchGroups } from '../queries/searchGroups.graphql';\nimport { mapState } from 'vuex';\nimport Chip from './chip.vue';\n\nexport default {\n  components: {\n    Chip\n  },\n  props: {\n    fieldLabel: {\n      type: String,\n      required: true\n    },\n    inputPlaceholder: {\n      type: String,\n      default: null\n    },\n    queryType: {\n      type: String,\n      required: true\n    },\n    value: {\n      type: Array,\n      default: () => []\n    },\n    minSearchTextLength: {\n      type: Number,\n      default: 3\n    }\n  },\n  data() {\n    return {\n      mappedResults: [],\n      currentInput: '',\n      searchInput: '',\n      currentSelections: [],\n      searching: false,\n      focusIndex: -1\n    };\n  },\n  computed: {\n    ...mapState(['currentCommunity']),\n    communityId() {\n      return this.currentCommunity.id;\n    }\n  },\n  apollo: {\n    currentOptions: {\n      query() {\n        switch (this.queryType) {\n        case 'contributors':\n          return gql`${SearchContributors}`;\n          // leaving the switch case here for historical purpose.\n          // When other search endpoints are ready to be used, this logic is available\n        case 'groups':\n          return gql`${SearchGroups}`;\n        case 'packages':\n          return;\n        }\n      },\n      variables () {\n        switch (this.queryType) {\n        case 'contributors':\n        case 'groups':\n          return {\n            text: this.searchInput,\n            communityId: this.communityId\n          };\n          // leaving the switch case here for historical purpose.\n          // When other search endpoints are ready to be used, this logic is available\n        case 'packages':\n          return;\n        }\n      },\n      skip() {\n        return !this.searchInput;\n      },\n      debounce: 500,\n    }\n  },\n  watch: {\n    currentOptions() {\n      if (this.currentOptions.results) {\n        this.mapResults();\n      }\n    },\n    currentInput() {\n      if (!this.currentInput) {\n        this.searching = false;\n        this.clearInput();\n      } else if (this.currentInput.length < this.minSearchTextLength) {\n        if (this.currentInput === 'me' || this.currentInput === 'Me') {\n          this.mappedResults = [{ id: 'me', name: 'me' }];\n        }\n        this.searching = false;\n      } else {\n        this.searching = true;\n        this.searchInput = this.currentInput;\n      }\n    },\n    mappedResults() {\n      if (this.mappedResults.length) {\n        this.searching = false;\n        setTimeout(this.addClickListeners(), 200);\n      } else {\n        this.removeClickListeners();\n      }\n    },\n    value() {\n      this.currentSelections = this.value.map(this.formatOption);\n    }\n  },\n  beforeDestroy() {\n    this.removeClickListeners();\n  },\n  methods: {\n    // because of 2 way data-binding, we must call the update when\n    // a user interacts; if we use a watcher we get an infinite loop\n    updateValue() {\n      var contribs = this.currentSelections.map(selection => {\n        return selection.name;\n      });\n      this.$emit('input', contribs);\n    },\n    trimString(stringItem) {\n      // remove special characters & whitespace from different field strings to use as for/id attributes\n      const trimmedString = stringItem.replace(/[^\\w\\s]/gi, '').replace(/\\s+/g, '');\n      return trimmedString.toLowerCase();\n    },\n    clearInput() {\n      this.currentInput = '';\n      this.currentOptions = {};\n      this.searchInput = '';\n      this.mappedResults = [];\n      this.focusIndex = -1;\n      this.removeClickListeners();\n    },\n    addClickListeners() {\n      window.addEventListener('click', this.onClickOut);\n      this.$refs.autocompleteInputWrap.addEventListener('keydown', this.handleKeydown);\n    },\n    removeClickListeners() {\n      window.removeEventListener('click', this.onClickOut);\n      this.$refs.autocompleteInputWrap.removeEventListener('keydown', this.handleKeydown);\n    },\n    addOpt(option) {\n      if (option.id === 0) return;\n\n      const newSelection = !this.currentSelections.find(item => item.id === option.id);\n\n      if (newSelection) {\n        this.currentSelections.push(option);\n        this.updateValue();\n      }\n\n      this.clearInput();\n    },\n    removeSelection(id) {\n      let arr = this.currentSelections;\n      let i;\n      for (i = 0; i < arr.length; i++) {\n        if (arr[i].id === id) {\n          arr.splice(i, 1);\n          i--;\n        }\n      }\n      this.updateValue();\n    },\n    onClickOut(evt) {\n      if (!this.$refs.autocompleteInput.contains(evt.target) && !this.$refs.autocompleteInputResults.contains(evt.target)) {\n        this.searching = false;\n        this.clearInput();\n      }\n    },\n    mapResults() {\n      if (this.currentOptions.results && this.currentOptions.results.length) {\n        this.mappedResults = this.currentOptions.results.map(this.formatOption);\n      } else {\n        this.mappedResults = [{ id: 0, name: 'No results found' }];\n      }\n    },\n    formatOption(item) {\n      let option;\n\n      if (typeof item === 'string') {\n        // If the item is populated from the URL\n        option = { name: item.replaceAll('\"', '') };\n      } else {\n        // If the item is populated from autocomplete search results\n        option = { ...item };\n      }\n\n      option.id = this.trimString(option.name);\n      return option;\n    },\n    handleKeydown(evt) {\n      const halt = () => evt.preventDefault();\n      switch (evt.which) {\n      case 9: // TAB\n        halt();\n        this.searching = false;\n        this.clearInput();\n        break;\n      case 13: // ENTER\n        halt();\n        this.selectItemByIndex(this.focusIndex);\n        break;\n      case 27: // ESC\n        halt();\n        this.searching = false;\n        this.clearInput();\n        break;\n      case 38: // UP\n        halt();\n        this.setFocus(this.focusIndex - 1);\n        break;\n      case 40: // DOWN\n        halt();\n        this.setFocus(this.focusIndex + 1);\n        break;\n      }\n    },\n    selectItemByIndex(index) {\n      // if the user presses ENTER while the search input is focused, we expect the focusIndex value to be -1,\n      // so reset the index here  to `0` such that the first option in the list is selected on ENTER\n      if (index === -1) index = 0;\n      const option = this.mappedResults[index];\n      if (option) {\n        this.addOpt(option);\n        this.$refs.autocompleteInput.focus();\n      }\n    },\n    setFocus(index) {\n      // set focus on the appropriate list item as the list is traversed via keydown\n      if (this.mappedResults.length) {\n        this.focusIndex = Math.max(0, Math.min(index, this.mappedResults.length-1));\n        const listItems = Array.from(this.$refs.autocompleteInputResults.children);\n        listItems[this.focusIndex].focus();\n      } else {\n        this.focusIndex = -1;\n      }\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editable-list-item.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editable-list-item.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0a4cdf68\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editable-list-item.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tooltip.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tooltip.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bef4f128\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tooltip.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"CurrentCommunity\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"community\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"url\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"domain\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"schemaDomain\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"faviconUrl\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"timeZone\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"featuresEnabled\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigBoolean\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"features_enabled\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"printSlugEnabled\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigBoolean\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"print_slug_enabled\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"svgLogo\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigString\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"svg_small_mark_full_color\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"hasImagePlaceholder\"},\"name\":{\"kind\":\"Name\",\"value\":\"hasSiteConfig\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"replacement_image_url\",\"block\":false}},{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"type\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"string\",\"block\":false}}],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"network\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"schemaDomain\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"organization\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"slug\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":557}};\n    doc.loc.source = {\"body\":\"query CurrentCommunity($id: Int!) {\\n  community(id: $id) {\\n    id\\n    name\\n    slug\\n    url\\n    domain\\n    schemaDomain\\n    faviconUrl\\n    timeZone\\n    featuresEnabled: siteConfigBoolean(key: \\\"features_enabled\\\")\\n    printSlugEnabled: siteConfigBoolean(key: \\\"print_slug_enabled\\\")\\n    svgLogo: siteConfigString(key: \\\"svg_small_mark_full_color\\\")\\n    hasImagePlaceholder: hasSiteConfig(key: \\\"replacement_image_url\\\", type: \\\"string\\\")\\n    network {\\n      id\\n      name\\n      slug\\n      schemaDomain\\n      organization {\\n        id\\n        slug\\n      }\\n    }\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n\n    module.exports = doc;\n    \n        module.exports[\"CurrentCommunity\"] = oneQuery(doc, \"CurrentCommunity\");\n        \n","const { sortBy } = require('lodash');\n\n// Takes a list of user community memberships and returns a list grouped by\n// network and sorted alphabetically by network name. This transformation is used\n// by both the Editorial and Asset dashboard community pickers.\nmodule.exports = function groupSortNetworkMemberships(memberships = []) {\n  let grouped = memberships.reduce((grouped, membership) => {\n    let community = membership.community;\n    let network = community.network;\n\n    // if the network grouping exists in the result, add the membership community\n    // otherwise, create a new network grouping with the current membership community\n    let networkIndex = grouped.findIndex(({ id }) => id === network.id);\n    if (networkIndex > -1) {\n      grouped[networkIndex].communities.push(community);\n    } else {\n      grouped.push({\n        id: network.id,\n        name: network.name,\n        logo: network.svgLogo,\n        communities: [community]\n      });\n    }\n\n    return grouped;\n  }, []);\n\n  // sort alphabetically by network name and return\n  return sortBy(grouped, 'name');\n};\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help-announcement.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./chorus-help-announcement.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b8d29dd0\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./chorus-help-announcement.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:(\"m-nav-mobile \" + _vm.activeMobileNavClass)},[_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleMobileNav()}}},[_c('div',{staticClass:\"bar\"}),_vm._v(\" \"),_c('div',{staticClass:\"bar\"}),_vm._v(\" \"),_c('div',{staticClass:\"bar\"})])]),_vm._v(\" \"),_c('div',{class:(\"m-nav-mobile--menu \" + _vm.activeMobileNavClass),style:(_vm.activeMobileNavHeightStyle)},[_c('div',{staticClass:\"m-nav-mobile--menu__top\"},[_c('h1',[_vm._v(_vm._s(_vm.currentDoc.title))]),_vm._v(\" \"),_c('help-toggle',{attrs:{\"isMobile\":_vm.isMobile}})],1),_vm._v(\" \"),_c('div',{staticClass:\"m-nav-mobile--menu__community\"},[_c('community-lockup',{attrs:{\"communityId\":_vm.communityId,\"isMobile\":_vm.isMobile}})],1),_vm._v(\" \"),_c('nav',{staticStyle:{\"background\":\"white\"}},_vm._l((_vm.navLinks),function(link){return _c('a',{key:link.label,class:_vm.pageActive(link.name, link.label.toLowerCase()),attrs:{\"href\":(\"/\" + (link.label.toLowerCase()) + \"/\" + (_vm.currentDoc.uuid)),\"type\":\"button\"}},[_vm._v(\"\\n        \"+_vm._s(link.label)+\"\\n      \")])}),0),_vm._v(\" \"),_c('div',{class:(\"m-nav-mobile--menu__status \" + (_vm.connectedUsers.length > 1 ? 'm-nav-mobile--menu__status--active' : ''))},[_c('div',{staticClass:\"m-nav-mobile__user-status\"},[_c('user-status')],1),_vm._v(\" \"),_c('div',{staticClass:\"m-nav-mobile__icon-cont\"},[_c('status-icon'),_vm._v(\" \"),_c('span',{class:(\"m-status m-status--\" + (_vm.currentDoc.status.toLowerCase()))},[_vm._v(_vm._s(_vm.formattedDocStatus))])],1)])])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","<template>\n  <tr\n    ref=\"row\"\n    :class=\"[isLeaving ? 'is-leaving' : '']\"\n    class=\"m-dashboard__table__row\">\n    <td class=\"m-dashboard__table__icon\">\n      <res-icon v-if=\"isPackage\" size=\"small\" name=\"package\" title=\"Package\" />\n      <res-icon v-if=\"isMapstack\" size=\"small\" name=\"mapstacks\" title=\"Mapstack\" />\n      <res-icon v-if=\"isStream\" size=\"small\" name=\"storystream\" title=\"Stream\" />\n      <res-icon v-if=\"isLinkPost\" size=\"small\" name=\"linkpost\" title=\"Link post\" />\n      <res-icon v-if=\"isCustomstory\" size=\"small\" name=\"grid\" title=\"Custom story\" />\n    </td>\n\n    <td class=\"m-dashboard__table__title\" data-heading=\"Title\">\n      <a :href=\"docUrl\" rel=\"external\">\n        <span>{{ title }}</span>\n      </a>\n    </td>\n\n    <td class=\"m-dashboard__table__byline\" data-heading=\"Byline\">\n      {{ contributorsForDoc }}\n    </td>\n\n    <td\n      v-if=\"community.printSlugEnabled\"\n      class=\"m-dashboard__table__print-slug\"\n      data-heading=\"Print slug\"\n    >\n      {{ printSlug }}\n    </td>\n\n    <td\n      v-if=\"entitlements && entitlements.includes('use_send_to_print')\"\n      :class=\"[lastSentToPrintAt ? 'is-active' : '', 'is-disabled']\"\n      class=\"m-dashboard__table__print\"\n      data-heading=\"Sent to print\"\n    >\n      <res-icon\n        v-if=\"lastSentToPrintAt\"\n        :title=\"'Sent to print on ' + lastSentToPrintAt\"\n        name=\"check-circle\"\n        size=\"large\"\n      />\n      <res-icon\n        v-else\n        name=\"check-circle\"\n        size=\"large\"\n        title=\"Not sent to print\"\n      />\n    </td>\n\n    <td\n      :data-heading=\"tableActivityHeading\"\n      class=\"m-dashboard__table__activity\"\n      style=\"text-align: left\"\n    >\n      <doc-cell-activity :doc=\"doc\" :filter=\"filter\" />\n    </td>\n\n    <!--\n      the `--align-center` class comes from resonance. adding here manually since resonance only\n      adds it on render, but not when new rows are injects (which happens in ractive)\n    -->\n    <td v-if=\"displayActions\" class=\"m-dashboard__table__actions\">\n      <doc-cell-actions\n        ref=\"docActions\"\n        :doc=\"doc\"\n        :filter=\"filter\"\n        :onMoveCompleted=\"onMoveCompleted\"\n        :canArchiveOrTrashStories=\"canArchiveOrTrashStories\" />\n    </td>\n  </tr>\n</template>\n\n<script>\nimport DocCellActions from './dashboard-doc-cell-actions.vue';\nimport DocCellActivity from './dashboard-doc-cell-activity.vue';\nimport getEventDatetime from '../../shared/get_event_datetime';\nimport isCustomstory from '../../shared/is_customstory';\nimport isLinkPost from '../../shared/is_link_post';\nimport isMapstack from '../../shared/is_mapstack';\nimport isPackage from '../../shared/is_package';\nimport isStream from '../../shared/is_stream';\nimport moment from 'moment-timezone';\nimport { mapState } from 'vuex';\nimport { toPlaintext } from 'convert-rich-text';\n\nexport default {\n  components: {\n    DocCellActivity,\n    DocCellActions,\n  },\n  props: {\n    doc: {\n      type: Object,\n      required: true,\n      default: () => ({}),\n    },\n    filter: {\n      type: String,\n      default: '',\n    },\n    displayActions: {\n      type: Boolean,\n      default: false,\n    },\n    canArchiveOrTrashStories: {\n      type: Boolean,\n      default: false,\n    },\n    updateTernaryCheckbox: {\n      type: Function,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      isPackage: isPackage(this.doc.head.contents),\n      isMapstack: isMapstack(this.doc.head.contents),\n      isStream: isStream(this.doc.head.contents),\n      isLinkPost: isLinkPost(this.doc.head.contents),\n      isCustomstory: isCustomstory(this.doc.head.contents),\n      title: this.doc.title,\n      tableActivityHeading: 'Actions',\n      isLeaving: false,\n    };\n  },\n  computed: {\n    ...mapState({\n      user: (state) => state.currentUser,\n      community: (state) => state.currentCommunity,\n      network: (state) => state.network,\n      entitlements: (state) => state.entitlements,\n      dateFormat: (state) => state.dateFormat,\n    }),\n    docUrl() {\n      return this.isCustomstory ? `/customstory/${this.doc.uuid}` : `/compose/${this.doc.uuid}`;\n    },\n    contributorsForDoc() {\n      // Logic adapted from client/actions/contributors -> contributorsForDoc\n      if (this.isPackage) {\n        return `${this.network.name} staff`;\n      }\n\n      const contributors = this.doc.contributors || [];\n      if (!contributors.length) {\n        return this.doc.owner.fullName;\n      }\n      // We only want to display the names of the first two contributors. If there are\n      // any extra, display `+N` where N is the number of extra contributors.\n      const head = contributors.slice(0, 2);\n      const tail = contributors.slice(2);\n      let result = head.map((c) => c.fullOrUserName).join(', ');\n      if (tail.length > 0) {\n        result = `${result} +${tail.length}`;\n      }\n\n      return result;\n    },\n    printSlug() {\n      return toPlaintext(this.doc.head.contents.print_slug);\n    },\n    lastSentToPrintAt() {\n      const date = getEventDatetime(this.doc.head.contents.publish_history, 'sent_to_print');\n      if (date) {\n        const timezone = this.user.timeZone || this.community.timeZone;\n        return moment.tz(date, timezone).format(`${this.dateFormat}[ at ]h:mma`);\n      }\n      return null;\n    },\n  },\n  watch: {\n    filter() {\n      this.isLeaving = false;\n    },\n  },\n  methods: {\n    onMoveCompleted(isLeaving) {\n      this.isLeaving = isLeaving;\n      const checkbox = this.$refs.row.querySelector('res-checkbox');\n      if (this.isLeaving) {\n        checkbox.checked = false;\n        checkbox.style.display = 'none';\n      } else {\n        checkbox.style.display = '';\n      }\n      this.updateTernaryCheckbox();\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-83f5444c\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./app.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import { updateDoc } from '../../client/actions/docs';\nimport { updateEntryFlags } from '../../client/actions/entry';\nimport { unscheduleDoc } from './publish';\n\nexport async function toggleArchived(doc) {\n  const archived = !doc.archived;\n  const updatedDoc = await updateDoc(doc.id, { archived });\n  return updatedDoc;\n}\n\n// Adapted from client/actions/docs.js > setTrashed\nexport async function updateTrashedAt(doc, userId) {\n  const prevTrashedAt = doc.head.contents.trashed_at;\n  const nextTrashedAt = prevTrashedAt ? null : new Date().toISOString();\n\n  if (nextTrashedAt && doc.status === 'SCHEDULED') {\n    await unscheduleDoc(doc, userId);\n  }\n\n  const updatedDoc = await updateDoc(doc.id, {\n    delta: [{\n      p: ['trashed_at'],\n      od: prevTrashedAt,\n      oi: nextTrashedAt\n    }]\n  });\n  await updateEntryFlags(doc, { trashed_at: nextTrashedAt }, false);\n  return updatedDoc;\n}\n","<template>\n  <div class=\"m-search-panel__search\">\n    <form class=\"m-search-panel__form\" @submit.prevent=\"onSearchSubmit\">\n      <res-input class=\"m-search-panel__field\" @keyup.enter.prevent=\"onSearchSubmit\">\n        <input\n          ref=\"keywordInput\"\n          v-model=\"keyword\"\n          type=\"search\"\n          placeholder=\"Story title or keywords\" />\n        <res-icon\n          slot=\"inner-left\"\n          name=\"search\" />\n      </res-input>\n\n      <autocomplete-input\n        v-if=\"!$route.name.includes('pages')\"\n        v-model=\"groupList\"\n        :minSearchTextLength=\"2\"\n        queryType=\"groups\"\n        class=\"m-search-panel__form__field\"\n        fieldLabel=\"Group\"\n        inputPlaceholder=\"Group name\"\n      />\n\n      <div v-if=\"(currentPage !== 'archive' && currentPage !== 'trash')\" class=\"m-search-panel__field-wrapper\">\n        <p class=\"m-search-panel__field-label\">Status</p>\n        <div v-if=\"currentPage === 'pages'\" class=\"m-search-panel__checkbox-group\">\n          <res-checkbox v-for=\"status in pageStatuses\" :key=\"status.name + checkboxKey\" >\n            <input v-model=\"status.checked\" :name=\"status.name\" type=\"checkbox\" />\n            <label>{{ status.label }}</label>\n          </res-checkbox>\n        </div>\n        <div v-else class=\"m-search-panel__checkbox-group\">\n          <res-checkbox v-for=\"status in statuses\" :key=\"status.name + checkboxKey\" >\n            <input v-model=\"status.checked\" :name=\"status.name\" type=\"checkbox\" />\n            <label>{{ status.label }}</label>\n          </res-checkbox>\n        </div>\n      </div>\n\n      <div class=\"m-search-panel__field-wrapper\">\n        <p class=\"m-search-panel__field-label\">Date</p>\n        <div class=\"m-search-panel__date-operator\">\n          <span>Show stories</span>\n          <res-radio>\n            <input ref=\"on\"\n                   v-model=\"dateOperator\"\n                   type=\"radio\"\n                   name=\"dateOperator\"\n                   value=\"on\" />\n            <label>on</label>\n          </res-radio>\n          <res-radio>\n            <input ref=\"before\"\n                   v-model=\"dateOperator\"\n                   type=\"radio\"\n                   name=\"dateOperator\"\n                   value=\"before\" />\n            <label>before</label>\n          </res-radio>\n          <res-radio>\n            <input ref=\"after\"\n                   v-model=\"dateOperator\"\n                   type=\"radio\"\n                   name=\"dateOperator\"\n                   value=\"after\" />\n            <label>after</label>\n          </res-radio>\n        </div>\n      </div>\n\n      <res-datepicker>\n        <label />\n        <input v-model=\"dateString\" type=\"text\" placeholder=\"Date last updated\" />\n      </res-datepicker>\n\n      <autocomplete-input\n        ref=\"autocompleteContributors\"\n        v-model=\"contributorList\"\n        queryType=\"contributors\"\n        class=\"m-search-panel__form__field\"\n        fieldLabel=\"Byline\"\n        inputPlaceholder=\"Author byline\"\n      />\n\n      <div v-if=\"currentPage !== 'pages'\" class=\"m-search-panel__field-wrapper\">\n        <p class=\"m-search-panel__field-label\">Story type</p>\n        <div class=\"m-search-panel__checkbox-group\">\n          <template v-for=\"storyType in storyTypes\">\n            <res-checkbox v-if=\"typeAccess.includes(storyType.name)\" :key=\"storyType.name + checkboxKey\">\n              <input v-model=\"storyType.checked\" :name=\"storyType.name\" type=\"checkbox\" />\n              <label>{{ storyType.label }}</label>\n            </res-checkbox>\n          </template>\n        </div>\n      </div>\n    </form>\n\n    <footer v-show=\"!isCollapsed\">\n      <res-button\n        v-if=\"showSaveButton\"\n        :disabled=\"disableSaveButton\"\n        :res-modal-open=\"disableSaveButton ? null : modalId\"\n        design=\"secondary\"\n        @click.prevent=\"() => openCreateModal($refs.saveButton, keyword)\">\n        <button ref=\"saveButton\">Save search</button>\n      </res-button>\n      <res-button :disabled=\"disableSearchButton\" design=\"primary\" @click.prevent=\"onSearchSubmit\">\n        <res-icon name=\"search\" /><button>Search</button>\n      </res-button>\n    </footer>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport AutocompleteInput from '../autocomplete-input.vue';\nimport { isEqual, isEmpty } from 'lodash';\n\nexport default {\n  components: {\n    AutocompleteInput\n  },\n  props: {\n    isCollapsed : {\n      type: Boolean,\n      default: false,\n      required: true\n    },\n    isSearching : {\n      type: Boolean,\n      default: false,\n      required: true\n    },\n    updateQuery: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    closeSearchPanel: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    defaultQuery: {\n      type: Object,\n      default: () => ({}),\n      required: true,\n    },\n    formattedQuery: {\n      type: Array,\n      default: () => []\n    },\n    openCreateModal: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    setSavedSearchName: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    currentSavedSearch: {\n      type: Object,\n      default: () => ({}),\n      required: true,\n    },\n    showSaveButton: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  data() {\n    return {\n      checkboxKey: 1,\n      keyword: '',\n      groupList: [],\n      statuses: [\n        { name: 'draft', label: 'Draft', checked: false },\n        { name: 'submitted', label: 'Submitted', checked: false },\n        { name: 'approved', label: 'Approved', checked: false },\n        { name: 'embargoed', label: 'Embargoed', checked: false },\n        { name: 'scheduled', label: 'Scheduled', checked: false },\n        { name: 'published', label: 'Published', checked: false },\n        { name: 'updated', label: 'Unpublished changes', checked: false },\n      ],\n      pageStatuses: [\n        { name: 'draft', label: 'Draft', checked: false },\n        { name: 'scheduled', label: 'Scheduled', checked: false },\n        { name: 'published', label: 'Published', checked: false },\n        { name: 'updated', label: 'Unpublished changes', checked: false },\n      ],\n      dateOperator: 'on',\n      dateString: '',\n      storyTypes: [\n        { name: 'story', label: 'Story', checked: false },\n        { name: 'stream', label: 'Stream', checked: false },\n        { name: 'link', label: 'Link', checked: false },\n        { name: 'feature', label: 'Feature', checked: false },\n        { name: 'package', label: 'Package', checked: false },\n        { name: 'mapstack', label: 'Mapstack', checked: false },\n        { name: 'customstory', label: 'Custom story', checked: false }\n      ],\n      // Field list for easy access in computed and methods\n      fields: [\n        'keyword',\n        'group',\n        'status',\n        'date',\n        'contributors',\n        'type'\n      ],\n      contributorList: [],\n      lastSearchedFormValues: {},\n    };\n  },\n  computed: {\n    ...mapState([\n      'entitlements',\n      'isMobile',\n      'modalId',\n      'currentCommunity'\n    ]),\n    ...mapGetters([\n      'readOnly'\n    ]),\n    emptyForm() {\n      return this.fields.every(value => !this[value]);\n    },\n    group() {\n      const groups = this.groupList.map(groupName => `group:\"${groupName}\"`);\n      return groups.join(' ');\n    },\n    status() {\n      const statuses = this.currentPage === 'pages' ? this.pageStatuses : this.statuses;\n      return statuses.reduce((acc, el) => {\n        el.checked && acc.push(`status:${el.name}`);\n        return acc;\n      }, []).join(' ');\n    },\n    type() {\n      return this.storyTypes.reduce((acc, el) => {\n        el.checked && acc.push(`type:${el.name}`);\n        return acc;\n      }, []).join(' ');\n    },\n    date() {\n      if (this.dateString) {\n        const formattedDate = new Date(this.dateString).toLocaleDateString('en-US');\n        return `${this.dateOperator}:${formattedDate}`;\n      }\n      return null;\n    },\n    typeAccess() {\n      const opts = ['story', 'stream', 'link'];\n      if (!this.currentCommunity.headlessModeEnabled) opts.push('feature');\n      if (this.entitlements) {\n        if (this.entitlements.includes('use_packages')) opts.push('package');\n        if (this.entitlements.includes('use_mapstacks')) opts.push('mapstack');\n        if (this.entitlements.includes('use_customstories')) opts.push('customstory');\n      }\n      return opts;\n    },\n    contributors() {\n      if (this.contributorList.length < 1) return '';\n      let names = [];\n      this.contributorList.forEach((contrib) => {\n        names.push(`by:\"${contrib}\"`);\n      });\n      return names.join(' ');\n    },\n    currentPage() {\n      return this.$route.path.slice(1);\n    },\n    currentFormValues() {\n      return this.getFormValues();\n    },\n    // Whether form state has changed from the last time a search was executed\n    formStateChanged() {\n      return !isEqual(this.lastSearchedFormValues, this.currentFormValues);\n    },\n    disableSearchButton() {\n      return this.emptyForm || this.isSearching || !this.formStateChanged;\n    },\n    disableSaveButton() {\n      return this.emptyForm || this.isSearching || !this.allowSaving || this.formStateChanged || this.readOnly;\n    },\n    allowSaving() {\n      return !Object.keys(this.lastSearchedFormValues).every(key =>\n        isEmpty(this.lastSearchedFormValues[key]));\n    }\n  },\n  watch: {\n    emptyForm() {\n      if (this.emptyForm && this.formattedQuery.length > 0) {\n        this.updateQuery(this.defaultQuery);\n      }\n    },\n    formattedQuery() {\n      this.populateFields(this.formattedQuery);\n    },\n    isCollapsed() {\n      if (!this.isCollapsed) {\n        this.$nextTick(() => this.$refs.keywordInput.focus());\n      }\n    },\n    formStateChanged(changed) {\n      if (changed && this.currentSavedSearch.searchId) {\n        this.setSavedSearchName('');\n      }\n    }\n  },\n  methods: {\n    onSearchSubmit() {\n      // Workaround for the fact that the child button of the res-button\n      // does not inherit the disabled attribute\n      if (this.disableSearchButton) {\n        return;\n      }\n      const query = {\n        ...this.$route.query,\n        q: this.buildSearchQuery(),\n        order: 'score',\n        page: 1,\n      };\n      this.updateQuery(query);\n      if (this.isMobile) {\n        this.closeSearchPanel();\n      }\n    },\n    buildSearchQuery() {\n      return this.fields.reduce((q, field) => {\n        this[field] && q.push(this[field]);\n        return q;\n      }, []).join(' ');\n    },\n    clearSearch() {\n      this.clearSearchFields();\n      if (this.isMobile) {\n        this.closeSearchPanel();\n      }\n      this.updateQuery(this.defaultQuery);\n      this.updateLastSearchedFormValues();\n    },\n    clearSearchFields() {\n      const pageStatuses = this.pageStatuses.map(el => ({ name: el.name, label: el.label, checked: false }));\n      const statuses = this.statuses.map(el => ({ name: el.name, label: el.label, checked: false }));\n      const storyTypes = this.storyTypes.map(el => ({ name: el.name, label: el.label, checked: false }));\n      this.pageStatuses = pageStatuses;\n      this.statuses = statuses;\n      this.storyTypes = storyTypes;\n      this.checkboxKey++;\n      this.keyword = '';\n      this.groupList = [];\n      this.updateDateOperator('on');\n      this.dateString = '';\n      this.contributorList = [];\n    },\n    populateFields(query) {\n      const searchBoxQuery = [];\n      this.clearSearchFields();\n      query.forEach(item => {\n        if (item.type === 'tokens' || item.type === 'phrase') {\n          searchBoxQuery.push(item.value);\n        } else { // 'keywordQueries'\n          const [field, value] = item.value.split(':');\n          switch (field) {\n          case 'status':\n            if (this.currentPage === 'pages') {\n              this.pageStatuses.forEach((el, i) => {\n                if (el.name === value) this.$set(this.pageStatuses[i], 'checked', true);\n              });\n            } else {\n              this.statuses.forEach((el, i) => {\n                if (el.name === value) this.$set(this.statuses[i], 'checked', true);\n              });\n            }\n            this.checkboxKey++;\n            break;\n          case 'type':\n            this.storyTypes.forEach((el, i) => {\n              if (el.name === value) this.$set(this.storyTypes[i], 'checked', true);\n            });\n            this.checkboxKey++;\n            break;\n          case 'on':\n          case 'before':\n          case 'after':\n            this.updateDateOperator(field);\n            this.dateString = value;\n            break;\n          case 'by':\n            this.contributorList.push(value.replace(/\"/gi, ''));\n            break;\n          case 'group':\n            this.groupList.push(value.replace(/\"/gi, ''));\n            break;\n          default:\n            // search keywords that have no UI (yet)\n            searchBoxQuery.push(item.value);\n          }\n        }\n      });\n      this.keyword = searchBoxQuery.join(' ');\n      this.updateLastSearchedFormValues();\n    },\n    // Vue doesn't trigger DOM change events on inputs when updated via data :-)\n    updateDateOperator(ref) {\n      this.dateOperator = ref;\n      this.$refs[ref].dispatchEvent(new Event('change'));\n    },\n    getFormValues() {\n      return this.fields.reduce((acc, el) => {\n        acc[el] = this[el];\n        return acc;\n      }, {});\n    },\n    updateLastSearchedFormValues() {\n      this.lastSearchedFormValues = this.getFormValues();\n    },\n  }\n};\n</script>\n","const util = require('util');\n\nfunction CommunityMismatchError(doc) {\n  Error.call(this);\n  Error.captureStackTrace(this, CommunityMismatchError);\n  this.docId = doc.id;\n  this.entryId = doc.entry_id;\n  this.message = 'Community mismatch between Content API doc and SBN entry';\n}\n\nutil.inherits(CommunityMismatchError, Error);\n\nCommunityMismatchError.prototype.name = 'CommunityMismatchError';\nCommunityMismatchError.prototype.status = 500;\n\nmodule.exports = CommunityMismatchError;\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fc8deb62\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","const hasStarted = ({ now, start }) => now > start;\nconst hasEnded = ({ now, end }) => end && now > end;\n\nmodule.exports = function isLivePost(contents) {\n  let now = Date.now();\n  let start = Date.parse(contents.draft.coverage_start_time);\n  let end = Date.parse(contents.draft.coverage_end_time);\n  return hasStarted({ now, start }) && !hasEnded({ now, end });\n};\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"SearchGroups\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}}},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"communityId\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"currentOptions\"},\"name\":{\"kind\":\"Name\",\"value\":\"searchEntryGroups\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"query\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"}}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"communityId\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"communityId\"}}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"results\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"type\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":204}};\n    doc.loc.source = {\"body\":\"query SearchGroups($text: String!, $communityId: Int!) {\\n  currentOptions: searchEntryGroups(query: {\\n    text: $text,\\n    communityId: $communityId\\n  }) {\\n    results {\\n      type\\n      name\\n    }\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n\n    module.exports = doc;\n    \n        module.exports[\"SearchGroups\"] = oneQuery(doc, \"SearchGroups\");\n        \n","const { merge, omit } = require('lodash');\nconst qs = require('qs');\nconst wait = require('./wait');\nconst HttpStatusError = require('./errors/http_status_error');\nconst messageActions = require('../actions/messages');\nconst { reportError } = require('../actions/sentry');\nconst hash = require('../../shared/content-hash');\n\nconst STORAGE = {};\n\nfunction checkStatus(response) {\n  if (response.ok) {\n    return response;\n  } else {\n    var error = new HttpStatusError(`Response status not within range: ${response.status}`, response);\n    return Promise.reject(error);\n  }\n}\n\nfunction parseBody(response, accepts, withHeaders) {\n  if (response.status === 204) {\n    return Promise.resolve();\n  }\n  if (accepts === 'text/html') {\n    return response.text().then(data => returnWithHeaders(response, data, withHeaders));\n  }\n  return response.json().then(data => returnWithHeaders(response, data, withHeaders));\n}\n\nfunction returnWithHeaders(response, data, withHeaders) {\n  if (withHeaders) {\n    return {\n      data,\n      headers: response.headers\n    };\n  }\n  return data;\n}\n\n// Handles error based on supplied options\nfunction handleError(error, url, reqOpts, opts) {\n  var status = error.response && error.response.status;\n  if (\n    opts.retry &&\n    opts.retry.delay < opts.retry.maxDelay &&\n    (!status || status === 502 || status === 503)\n  ) {\n    var { retry } = opts;\n    var delay = Math.min(retry.delay + 1000, retry.maxDelay);\n    retry.delay = delay;\n    return wait(delay).then(() => request(url, reqOpts, opts));\n  } else {\n    if (opts.handleError) {\n      if (window.app && window.app.state) {\n        // Show a flash message, but don't send to sentry. Uses `window.top` so\n        // that app is accessible by requests from within object iframes\n        messageActions.showError();\n      } else {\n        console.warn('An unexpected error occurred while making a request, but the app is not able to display it');\n        reportError(error, false);\n      }\n    }\n    return Promise.reject(error);\n  }\n}\n\nfunction request(url, reqOpts, opts) {\n  let cacheKey = getCacheKey(url, reqOpts);\n  if (opts.cache && !opts.force && cacheKey in STORAGE) {\n    return Promise.resolve(STORAGE[cacheKey]);\n  }\n\n  return fetch(url, reqOpts)\n    .then(checkStatus)\n    .then(res => parseBody(res, reqOpts.headers.Accept, opts.withHeaders))\n    .then(body => {\n      if (opts.cache) {\n        STORAGE[cacheKey] = body;\n      }\n      return body;\n    })\n    .catch(err => handleError(err, url, reqOpts, opts));\n}\n\n// For GET requests, all the unique request data should be in the URL\n// For non-GET requests with body, also hash that to get a unique cache key\nfunction getCacheKey(url, { method, body }) {\n  let cacheKey = url;\n  if (method && method !== 'GET' && body) {\n    cacheKey += hash(body);\n  }\n\n  return cacheKey;\n}\n\nfunction loadOpts(url, reqOpts) {\n  // Defaults\n  var defaultReqOpts = {\n    credentials: 'include',\n    headers: { Accept: 'application/json' }\n  };\n  var defaultOpts = {\n    handleError: true,\n    cache: false,\n    retry: { delay: 0, maxDelay: 3000 }\n  };\n\n  // Pull out non-request options, if any\n  var opts = reqOpts.opts || {};\n  var requestOpts = omit(reqOpts, 'opts');\n\n  // Parse the request options\n  if (requestOpts.method && requestOpts.method.toUpperCase() !== 'GET') {\n    defaultReqOpts.headers['Content-Type'] = 'application/json';\n  }\n  if (requestOpts.query) {\n    url = url + '?' + qs.stringify(requestOpts.query);\n    delete requestOpts.query;\n  }\n  if (requestOpts.body && typeof requestOpts.body !== 'string') {\n    requestOpts.body = JSON.stringify(requestOpts.body);\n  }\n  if (requestOpts.credentials === false) {\n    delete defaultReqOpts.credentials;\n    delete requestOpts.credentials;\n  }\n\n  // Parse additional options\n  if (!opts.retry) {\n    defaultOpts.retry = false;\n  }\n  if (typeof opts.retry === 'boolean') { delete opts.retry; }\n\n  return {\n    url,\n    opts: merge(defaultOpts, opts),\n    reqOpts: merge(defaultReqOpts, requestOpts)\n  };\n}\n\n/**\n * Makes AJAX requests and handles errors based on supplied options\n *\n * @param {string} url\n * @param {object} reqOpts: fetch request object\n * @param {object} opts: handler options, with the shape:\n *   {\n *    {boolean} handleError: defaults to true\n *    {boolean} cache: defaults to false\n *    {boolean} withHeaders: optional\n *    {boolean} retry: optional\n *    {object} retry: optional, custom retry params of `delay` and `maxDelay`\n *   }\n */\nexport default function(url, reqOpts = {}) {\n  var parsed = loadOpts(url, reqOpts);\n  return request(parsed.url, parsed.reqOpts, parsed.opts);\n}\n","export default class NotFoundError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'NotFoundError';\n  }\n}\n","<template>\n  <span class=\"m-dashboard__table__activity__text\">\n    <span v-if=\"!filter\">\n      <span :class=\"activityIconClass\" />\n      {{ docStatus }}\n      <span\n        v-if=\"doc.status === 'PUBLISHED' || doc.status === 'UPDATED'\"\n        class=\"m-dashboard__table__activity__link\"\n      >\n        <a :href=\"`https://${network.schemaDomain}/e/${doc.entry_id}`\" target=\"_blank\">\n          <res-icon size=\"smaller\" name=\"publish\" />\n        </a>\n      </span>\n\n      {{ datePrefix }}\n      {{ statusDate ? (['SCHEDULED', 'PUBLISHED'].includes(doc.status) ? fullDate : timeAgo()) : '' }}\n      <res-badge\n        v-if=\"doc.head.contents.embargoed\"\n        :size=\"'smaller'\"\n        :design=\"'rose'\" >\n        <span>Embargoed</span>\n      </res-badge>\n      <res-badge\n        v-if=\"isLivePost\"\n        :size=\"'smaller'\"\n        :design=\"'apple'\"\n        class=\"res-badge-light-apple\">\n        <span>Live</span>\n      </res-badge>\n      <res-badge\n        v-if=\"showHiddenBadge\"\n        :size=\"'smaller'\"\n        :design=\"'gray'\">\n        <span>Hidden</span>\n      </res-badge>\n      <res-badge\n        v-if=\"showExpirationBadge\"\n        :size=\"'smaller'\"\n        :design=\"'gold'\">\n        <res-icon name=\"clock\"/>\n        <span>{{ hideScheduledMessage }}</span>\n      </res-badge>\n    </span>\n    <span v-else>\n      {{ timeAgo(doc.updated_at) }}\n      {{ doc.updateUser.id ? `by ${doc.updateUser.fullName}` : '' }}\n    </span>\n  </span>\n</template>\n\n<script>\nimport sentenceCase from '../../shared/sentence_case';\nimport docStatuses from '../../client/config/doc_statuses';\nimport isLivePost from '../../shared/is_live_post';\nimport { mapState } from 'vuex';\nimport moment from 'moment-timezone';\nimport getEventDatetime from '../../shared/get_event_datetime';\n\nexport default {\n  props: {\n    doc: {\n      type: Object,\n      required: true,\n      default: () => ({}),\n    },\n    filter: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      activityIconClass: `m-dashboard__table__activity__icon ${this.doc.status.toLowerCase()}`,\n      docStatus: sentenceCase(docStatuses[this.doc.status]),\n      isPublishedOrScheduled: ['PUBLISHED', 'UPDATED', 'SCHEDULED'].includes(this.doc.status),\n      isLivePost: isLivePost(this.doc.head.contents),\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentUser',\n      'currentCommunity',\n      'dateFormat',\n      'network'\n    ]),\n    showHiddenBadge() {\n      return this.doc.head.contents.hidden && this.isPublishedOrScheduled;\n    },\n    showExpirationBadge() {\n      return this.doc.head.contents.expiration_scheduled_for\n        && !this.doc.head.contents.hidden\n        && this.isPublishedOrScheduled;\n    },\n    userTimezone() {\n      return this.currentUser.timeZone || this.currentCommunity.timeZone;\n    },\n    statusDateTime() {\n      return moment.tz(this.statusDate, this.userTimezone);\n    },\n    fullDate() {\n      const dateFormat = `${this.dateFormat}[ at ]h:mma z`;\n      return this.statusDateTime.format(dateFormat);\n    },\n    now() {\n      return moment.tz(moment(), this.userTimezone);\n    },\n    datePrefix() {\n      const status = this.doc.status;\n      const diff = this.now.diff(this.statusDateTime, 'days');\n\n      if (!this.statusDate) {\n        return '';\n      } else if (status === 'SCHEDULED') {\n        return 'for';\n      } else if (status === 'UPDATED') {\n        return 'from';\n      } else if (status === 'DRAFT') {\n        return diff < 8 ? 'modified' : 'modified on';\n      } else if (status === 'PUBLISHED' || diff > 8) {\n        return 'on';\n      }\n\n      return '';\n    },\n    statusDate() {\n      const history = this.doc.head.contents.publish_history;\n\n      switch (this.doc.status) {\n      case 'DRAFT':\n      case 'UPDATED':\n        return getEventDatetime(history, ['legacy_updated_at']) ||\n              this.doc.updated_at;\n      case 'APPROVED':\n        return getEventDatetime(history, ['approved']);\n      case 'SCHEDULED':\n        return this.doc.head.contents.publish_scheduled_for;\n      case 'SUBMITTED':\n        return getEventDatetime(history, ['submitted']);\n      case 'PUBLISHED':\n        return getEventDatetime(history, [\n          'published',\n          'published_via_schedule',\n          'backdated',\n        ]);\n      }\n    },\n    hideScheduledMessage() {\n      const hidingDate = this.doc.head.contents.expiration_scheduled_for;\n      const now = moment.tz(moment(), this.userTimezone);\n      const diffMinutes = (now.diff(hidingDate, 'minutes')) * -1;\n      const diffHours = (now.diff(hidingDate, 'hours')) * -1;\n      const diffDays = (now.diff(hidingDate, 'days')) * -1;\n      const diffYears = (now.diff(hidingDate, 'years')) * -1;\n      if (diffYears >= 1) {\n        const year = diffYears === 1 ? 'year' : 'years';\n        return `Hide in ${diffYears} ${year}`;\n      } else if (diffDays >= 1) {\n        const day = diffDays === 1 ? 'day' : 'days';\n        return `Hide in ${diffDays} ${day}`;\n      } else if (diffHours >= 1) {\n        const hour = diffHours === 1 ? 'hour' : 'hours';\n        return `Hide in ${diffHours} ${hour}`;\n      } else {\n        const minute = diffMinutes === 1 ? 'minute' : 'minutes';\n        return `Hide in ${diffMinutes} ${minute}`;\n      }\n    }\n  },\n  methods: {\n    timeAgo(time = null) {\n      const datetime = time ? moment.tz(time, this.userTimezone) : this.statusDateTime;\n\n      if (this.displayRelative(datetime)) {\n        let diffUnit = this.getDiffUnit(datetime);\n        if (diffUnit === 'now') {\n          return 'just now';\n        } else {\n          const diff = this.now.diff(datetime, diffUnit);\n          // Ensure we don't show a plural unit for a singular count\n          diffUnit = diff === 1 ? diffUnit.substring(0, diffUnit.length - 1) : diffUnit;\n          return `${diff} ${diffUnit} ago`;\n        }\n      }\n\n      return datetime.format(`${this.dateFormat}[ at ]h:mma z`);\n    },\n    displayRelative(datetime) {\n      const forceRelative = Boolean(this.filter);\n      const diff = this.now.diff(datetime, 'days');\n      return forceRelative || diff < 8;\n    },\n    getDiffUnit(datetime) {\n      if (this.now.diff(datetime, 'minutes') === 0) {\n        return 'now';\n      } else if (this.now.diff(datetime, 'minutes') < 60) {\n        return 'minutes';\n      } else if (this.now.diff(datetime, 'hours') < 24) {\n        return 'hours';\n      }\n\n      return 'days';\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-nav m-nav__root\"},[_c('banner-message'),_vm._v(\" \"),_c('nav',{staticClass:\"m-nav m-nav--editor m-nav--editor__vue\"},[(_vm.isMobile)?_c('editor-mobile-subnav',{attrs:{\"navLinks\":_vm.navLinks,\"pageActive\":_vm.pageActive}}):_c('editor-subnav',{attrs:{\"navLinks\":_vm.navLinks,\"pageActive\":_vm.pageActive}})],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var { defaults } = require('lodash');\nvar hash = require('../../shared/content-hash');\nvar messages = require('../config/messages');\n\nconst DEFAULTS = {\n  dismissible: true,\n  type: 'negative'\n};\n\nexport function showMessage(data) {\n  var id = hash(data.message);\n  if (findMessageIndex(id) === -1 && validatePersistence(data)) {\n    data.id = id;\n    data = defaults(data, DEFAULTS);\n    app.state.select(['messages']).push(data);\n  }\n\n  return id;\n}\n\nfunction validatePersistence(data) {\n  // Non-persistent messages don't already have a `id` attr, we should display\n  if (!data.id) {\n    return true;\n  }\n\n  // This is a persistent message that the user has seen before, don't display\n  var storageKey = `message-${data.id}`;\n  if (window.localStorage.getItem(storageKey) === 'shown') {\n    return false;\n  }\n\n  // This is a new persistent message, record + display\n  window.localStorage.setItem(storageKey, 'shown');\n  return true;\n}\n\nexport function removeMessage(id) {\n  var index = findMessageIndex(id);\n  app.state.select(['messages']).splice([index, 1]);\n}\n\nfunction findMessageIndex(id) {\n  return app.state.get(['messages']).findIndex(message => message.id === id);\n}\n\nexport function showError(error = messages.UNEXPECTED) {\n  var hasError = app.state.get(['messages']).some(message => message.isError);\n  if (!hasError) {\n    showMessage({\n      message: error,\n      type: 'negative',\n      isError: true\n    });\n  }\n}\n","const LOOKS_LIKE_URL = /\\w\\.[^\\s]+/;\n\nexport default function isValidUrl(url) {\n  var host = url.replace(/^(https?:\\/\\/|mailto:)/, '').split('/')[0];\n  var containsComma = /,/.test(host);\n  var containsSpaceEncoding = /(%20)/.test(host);\n  var isLocalFile = /^file:\\/\\//.test(url);\n  var looksValid = LOOKS_LIKE_URL.test(url) && !/\\s/g.test(url);\n\n  return looksValid && !containsComma && !containsSpaceEncoding && !isLocalFile;\n}\n\n// checks for period and backslash-- example.com/\nexport function isValidUrlWithSlash(url) {\n  return /\\w\\.[^\\s]+\\//.test(url);\n}\n","var { get: getPath } = require('lodash');\n\nmodule.exports = function getWordCount(delta) {\n  var text = delta.ops.reduce(function(text, op) {\n    if (typeof op.insert === 'string' && !getPath(op, ['attributes', 'mark'])) {\n      return text + op.insert;\n    } else {\n      return text;\n    }\n  }, '');\n  var words = text.trim().match(/\\S+/g);\n  return words ? words.length : 0;\n};\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"CurrentUser\"},\"variableDefinitions\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"currentUser\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"createdOn\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"fullOrUserName\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"email\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"timeZone\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"networkRoles\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"memberships\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"roles\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"status\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"community\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"faviconUrl\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"network\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"id\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"name\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"svgLogo\"},\"name\":{\"kind\":\"Name\",\"value\":\"siteConfigString\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"key\"},\"value\":{\"kind\":\"StringValue\",\"value\":\"svg_small_mark_full_color\",\"block\":false}}],\"directives\":[]}]}}]}}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":366}};\n    doc.loc.source = {\"body\":\"query CurrentUser {\\n  currentUser {\\n    id\\n    createdOn\\n    fullOrUserName\\n    email\\n    timeZone\\n    networkRoles\\n    memberships {\\n      roles\\n      status\\n      community {\\n        id\\n        name\\n        faviconUrl\\n        network {\\n          id\\n          name\\n          svgLogo: siteConfigString(key: \\\"svg_small_mark_full_color\\\")\\n        }\\n      }\\n    }\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n\n    module.exports = doc;\n    \n        module.exports[\"CurrentUser\"] = oneQuery(doc, \"CurrentUser\");\n        \n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./layout.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./layout.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54ebac00\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./layout.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./status-icon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./status-icon.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e69ef666\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./status-icon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import moment from 'moment-timezone';\nimport uuid from 'uuid';\nimport toRichText from '../../../shared/to_rich_text';\nimport { isCommunityPostAuthor } from '../authorization';\nimport isCustomstory from '../../../shared/is_customstory';\n\nexport default function(doc, user) {\n  switch (doc.schema_name) {\n  case 'story':\n    if (isCustomstory(doc.head.contents)) {\n      return customstoryContents();\n    }\n    return storyContents(user, doc.community);\n  case 'gallery':\n    return galleryContents();\n  case 'aside':\n    return asideContents();\n  case 'table':\n    return tableContents();\n  case 'poll':\n    return pollContents();\n  case 'scorecard':\n    return scorecardContents(doc);\n  case 'imageslider':\n    return imagesliderContents();\n  case 'productcard':\n    return productcardContents();\n  default:\n    return {};\n  }\n}\n\nfunction storyContents(user, community) {\n  return {\n    draft: {\n      hed: toRichText('Untitled'),\n      dek: toRichText(''),\n      slug: toRichText(''),\n      body: toRichText(''),\n      teaser: toRichText(''),\n      entry_password: toRichText(''),\n      autotweets: [\n        { body: toRichText('') },\n        { body: toRichText('') }\n      ],\n      disable_ads: false,\n      do_not_distribute: isCommunityPostAuthor(user, parseInt(community.id)),\n      hide_from_amp: false,\n      is_restricted_in_privacy_consent_region: false,\n      noindex: false,\n      nofollow: false,\n      paywalled: false,\n      affiliate_link_rewriting_disabled: false,\n      styles: '',\n      site_groups: [],\n      super_groups: [],\n      campaign_groups: [],\n      whitelisted_network_ids: [],\n      contributors: [],\n      additional_byline: toRichText(''),\n      internal_title: toRichText(''),\n      internal_description: toRichText(''),\n      social_title: toRichText(''),\n      social_description: toRichText(''),\n      seo_title: toRichText(''),\n      seo_description: toRichText(''),\n      canonical_url_override: toRichText(''),\n      structured_tags: {}\n    },\n    embargoed: false,\n    hidden: false,\n    publish_history: [],\n    image_history: [],\n\n    ...(community.printSlugEnabled ? {\n      print_slug: toRichText('')\n    } : {})\n  };\n}\n\nfunction customstoryContents() {\n  const contents = storyContents();\n  contents.draft.hide_from_amp = true;\n\n  return contents;\n}\n\nfunction galleryContents() {\n  return {\n    title: toRichText('Untitled'),\n    images: [],\n    image_history: []\n  };\n}\n\nfunction asideContents() {\n  return {\n    title: toRichText('Untitled'),\n    body: toRichText('')\n  };\n}\n\nfunction tableContents() {\n  return {\n    title: toRichText('Untitled'),\n    credit: toRichText(''),\n    caption: toRichText(''),\n    columns: [],\n    rows: [],\n    sort_column: 0,\n    sort_descending: false,\n    searchable: false,\n    sortable: false,\n    per_page: 0,\n    google_spreadsheet_url: '',\n    upload_filename: '',\n    style: 'table'\n  };\n}\n\nfunction pollContents() {\n  return {\n    title: toRichText(''),\n    options: [{\n      uuid: uuid.v4(),\n      value: toRichText('')\n    }],\n    close_date: moment().add(2, 'weeks').toISOString()\n  };\n}\n\nfunction scorecardContents(doc) {\n  var contents = {\n    title: toRichText('Untitled')\n  };\n\n  var type = doc.head.contents.type;\n  switch (type) {\n  case 'product':\n    contents.pros = toRichText('');\n    contents.cons = toRichText('');\n    break;\n  case 'venue':\n    contents.google_critic_snippet = toRichText('');\n    contents.body = toRichText('');\n    break;\n  case 'game':\n    contents.platform_scores = [];\n    contents.body = toRichText('');\n    break;\n  }\n\n  return contents;\n}\n\nfunction imagesliderContents() {\n  return {\n    caption: toRichText('')\n  };\n}\n\nfunction productcardContents() {\n  return {\n    title:        toRichText('Untitled'),\n    description:  toRichText(''),\n    retailers:    []\n  };\n}\n","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./app-modal.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5cc4d2c1\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./app-modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var Delta = require('rich-text').Delta;\n\nmodule.exports = function toRichText(string) {\n  var text = string.replace(/\\r/g, '');\n  text = /\\n$/.test(text) ? text : `${text}\\n`;\n  return new Delta().insert(text);\n};\n","module.exports = function sentenceCase(str) {\n  return str ? str[0].toUpperCase() + str.substring(1).toLowerCase() : str;\n};\n","\n    var doc = {\"kind\":\"Document\",\"definitions\":[{\"kind\":\"OperationDefinition\",\"operation\":\"query\",\"name\":{\"kind\":\"Name\",\"value\":\"SearchContributors\"},\"variableDefinitions\":[{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"String\"}}}},{\"kind\":\"VariableDefinition\",\"variable\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"communityId\"}},\"type\":{\"kind\":\"NonNullType\",\"type\":{\"kind\":\"NamedType\",\"name\":{\"kind\":\"Name\",\"value\":\"Int\"}}}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"currentOptions\"},\"name\":{\"kind\":\"Name\",\"value\":\"searchUsers\"},\"arguments\":[{\"kind\":\"Argument\",\"name\":{\"kind\":\"Name\",\"value\":\"query\"},\"value\":{\"kind\":\"ObjectValue\",\"fields\":[{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"},\"value\":{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"text\"}}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"prefix\"},\"value\":{\"kind\":\"BooleanValue\",\"value\":true}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"communityIds\"},\"value\":{\"kind\":\"ListValue\",\"values\":[{\"kind\":\"Variable\",\"name\":{\"kind\":\"Name\",\"value\":\"communityId\"}}]}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"roles\"},\"value\":{\"kind\":\"ListValue\",\"values\":[{\"kind\":\"EnumValue\",\"value\":\"FREELANCE\"},{\"kind\":\"EnumValue\",\"value\":\"AUTHOR\"},{\"kind\":\"EnumValue\",\"value\":\"TRUSTED_AUTHOR\"},{\"kind\":\"EnumValue\",\"value\":\"EDITOR\"},{\"kind\":\"EnumValue\",\"value\":\"MANAGER\"}]}},{\"kind\":\"ObjectField\",\"name\":{\"kind\":\"Name\",\"value\":\"fallbackNetworkRoles\"},\"value\":{\"kind\":\"ListValue\",\"values\":[]}}]}}],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"results\"},\"arguments\":[],\"directives\":[],\"selectionSet\":{\"kind\":\"SelectionSet\",\"selections\":[{\"kind\":\"Field\",\"alias\":{\"kind\":\"Name\",\"value\":\"name\"},\"name\":{\"kind\":\"Name\",\"value\":\"fullOrUserName\"},\"arguments\":[],\"directives\":[]},{\"kind\":\"Field\",\"name\":{\"kind\":\"Name\",\"value\":\"username\"},\"arguments\":[],\"directives\":[]}]}}]}}]}}],\"loc\":{\"start\":0,\"end\":341}};\n    doc.loc.source = {\"body\":\"query SearchContributors($text: String!, $communityId: Int!) {\\n  currentOptions: searchUsers(query: {\\n    text: $text,\\n    prefix: true,\\n    communityIds: [$communityId],\\n    roles: [FREELANCE, AUTHOR, TRUSTED_AUTHOR, EDITOR, MANAGER],\\n    fallbackNetworkRoles: [],\\n  }) {\\n    results {\\n      name: fullOrUserName\\n      username\\n    }\\n  }\\n}\\n\",\"name\":\"GraphQL request\",\"locationOffset\":{\"line\":1,\"column\":1}};\n  \n\n    var names = {};\n    function unique(defs) {\n      return defs.filter(\n        function(def) {\n          if (def.kind !== 'FragmentDefinition') return true;\n          var name = def.name.value\n          if (names[name]) {\n            return false;\n          } else {\n            names[name] = true;\n            return true;\n          }\n        }\n      )\n    }\n  \n\n    // Collect any fragment/type references from a node, adding them to the refs Set\n    function collectFragmentReferences(node, refs) {\n      if (node.kind === \"FragmentSpread\") {\n        refs.add(node.name.value);\n      } else if (node.kind === \"VariableDefinition\") {\n        var type = node.type;\n        if (type.kind === \"NamedType\") {\n          refs.add(type.name.value);\n        }\n      }\n\n      if (node.selectionSet) {\n        node.selectionSet.selections.forEach(function(selection) {\n          collectFragmentReferences(selection, refs);\n        });\n      }\n\n      if (node.variableDefinitions) {\n        node.variableDefinitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n\n      if (node.definitions) {\n        node.definitions.forEach(function(def) {\n          collectFragmentReferences(def, refs);\n        });\n      }\n    }\n\n    var definitionRefs = {};\n    (function extractReferences() {\n      doc.definitions.forEach(function(def) {\n        if (def.name) {\n          var refs = new Set();\n          collectFragmentReferences(def, refs);\n          definitionRefs[def.name.value] = refs;\n        }\n      });\n    })();\n\n    function findOperation(doc, name) {\n      for (var i = 0; i < doc.definitions.length; i++) {\n        var element = doc.definitions[i];\n        if (element.name && element.name.value == name) {\n          return element;\n        }\n      }\n    }\n\n    function oneQuery(doc, operationName) {\n      // Copy the DocumentNode, but clear out the definitions\n      var newDoc = {\n        kind: doc.kind,\n        definitions: [findOperation(doc, operationName)]\n      };\n      if (doc.hasOwnProperty(\"loc\")) {\n        newDoc.loc = doc.loc;\n      }\n\n      // Now, for the operation we're running, find any fragments referenced by\n      // it or the fragments it references\n      var opRefs = definitionRefs[operationName] || new Set();\n      var allRefs = new Set();\n      var newRefs = new Set();\n\n      // IE 11 doesn't support \"new Set(iterable)\", so we add the members of opRefs to newRefs one by one\n      opRefs.forEach(function(refName) {\n        newRefs.add(refName);\n      });\n\n      while (newRefs.size > 0) {\n        var prevRefs = newRefs;\n        newRefs = new Set();\n\n        prevRefs.forEach(function(refName) {\n          if (!allRefs.has(refName)) {\n            allRefs.add(refName);\n            var childRefs = definitionRefs[refName] || new Set();\n            childRefs.forEach(function(childRef) {\n              newRefs.add(childRef);\n            });\n          }\n        });\n      }\n\n      allRefs.forEach(function(refName) {\n        var op = findOperation(doc, refName);\n        if (op) {\n          newDoc.definitions.push(op);\n        }\n      });\n\n      return newDoc;\n    }\n\n    module.exports = doc;\n    \n        module.exports[\"SearchContributors\"] = oneQuery(doc, \"SearchContributors\");\n        \n","<template>\n  <div class=\"m-dashboard__modal\">\n    <res-input class=\"m-dashboard__modal__input\">\n      <label>Share link</label>\n      <p v-if=\"notPublished\">\n        Before the story is published, this link will redirect to the homepage. Once it's published, it will redirect to the public URL.\n      </p>\n      <input :value=\"shortlink\" readonly type=\"text\" />\n    </res-input>\n    <div class=\"m-dashboard__modal__actions\">\n      <res-button design=\"secondary\" @click=\"copyShortlink\">\n        <button>Copy link</button>\n      </res-button>\n      <span v-if=\"copied\">\n        <res-icon class=\"m-dashboard__modal__icon\" name=\"check-circle\" />\n        Copied!\n      </span>\n      <res-button :res-modal-close=\"modalId\">\n        <res-icon class=\"m-dashboard__modal__icon\" name=\"x\" />\n        <button>Cancel</button>\n      </res-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport isPublished from '../../../client/lib/is_published';\n\nexport default {\n  props: {\n    childProps: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      copied: false,\n    };\n  },\n  computed: {\n    ...mapState(['network', 'modalId']),\n    shortlink() {\n      const domain = this.network.schemaDomain;\n      const entryId = this.doc.entry_id;\n      return `https://${domain}/e/${entryId}`;\n    },\n    notPublished() {\n      return !isPublished(this.doc.status);\n    },\n    doc() {\n      return this.childProps.doc;\n    }\n  },\n  watch: {\n    doc(newDoc, prevDoc) {\n      if (newDoc !== prevDoc) {\n        this.copied = false;\n      }\n    }\n  },\n  methods: {\n    async copyShortlink() {\n      await navigator.clipboard.writeText(this.shortlink);\n      this.copied = true;\n    }\n  }\n};\n</script>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-nav__inner m-nav--editor__inner\"},[_c('community-lockup',{attrs:{\"communityId\":_vm.communityId}}),_vm._v(\" \"),_c('div',{staticClass:\"m-nav__right\"},[_c('div',{staticClass:\"m-nav--editor__subnav\"},[_c('div',{staticClass:\"m-nav__top\"},[_c('h1',{staticClass:\"m-nav__title\"},[_vm._v(_vm._s(_vm.hed))]),_vm._v(\" \"),_c('help-toggle')],1),_vm._v(\" \"),_c('div',{staticClass:\"m-nav__bottom\"},[_c('nav',_vm._l((_vm.navLinks),function(link){return _c('a',{key:link.label,class:_vm.pageActive(link.name, link.label.toLowerCase()),attrs:{\"href\":(\"/\" + (link.label.toLowerCase()) + \"/\" + (_vm.currentDoc.uuid)),\"type\":\"button\"}},[_vm._v(\"\\n            \"+_vm._s(link.label)+\"\\n          \")])}),0),_vm._v(\" \"),_c('div',{staticClass:\"m-nav__statuses\"},[_c('div',{staticClass:\"m-nav__user-status\"},[_c('user-status')],1),_vm._v(\" \"),_c('status-icon',{attrs:{\"wrapperClass\":\"m-nav__story-status\"}}),_vm._v(\" \"),_c('span',{class:(\"m-status m-status--\" + (_vm.currentDoc.status.toLowerCase()))},[_vm._v(_vm._s(_vm.formattedDocStatus))])],1)])])])],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('res-dropdown',{ref:\"dropdown\",attrs:{\"for\":_vm.doc.uuid,\"placement\":\"left\"}},[(_vm.canCopyOrMoveDoc)?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":_vm.copyDoc}},[_vm._v(\"\\n      Copy\\n    \")]):_vm._e(),_vm._v(\" \"),(!_vm.filter && _vm.canArchiveOrTrashStories)?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateArchived('archive')}}},[_vm._v(\"\\n      Archive\\n    \")]):_vm._e(),_vm._v(\" \"),(!_vm.filter && _vm.canArchiveOrTrashStories)?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateTrashedAt('trash')}}},[_vm._v(\"\\n      Move to trash\\n    \")]):_vm._e(),_vm._v(\" \"),(!_vm.filter)?_c('button',{attrs:{\"disabled\":_vm.readOnly,\"res-modal-open\":_vm.modalId,\"type\":\"button\"},on:{\"click\":_vm.setShortlinkModal}},[_vm._v(\"\\n      Share\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.filter === 'archive' && _vm.canArchiveOrTrashStories)?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateArchived('dashboard')}}},[_vm._v(\"\\n      Restore\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.filter === 'archive' && _vm.canArchiveOrTrashStories)?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateArchivedAndTrashed('trash')}}},[_vm._v(\"\\n      Move to trash\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.filter === 'trash')?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateTrashedAt('dashboard')}}},[_vm._v(\"\\n      Restore\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.filter === 'trash')?_c('button',{attrs:{\"disabled\":_vm.readOnly},on:{\"click\":function($event){return _vm.updateArchivedAndTrashed('archive')}}},[_vm._v(\"\\n      Move to archive\\n    \")]):_vm._e()]),_vm._v(\" \"),(_vm.isMobile)?_c('res-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showActionsButton),expression:\"showActionsButton\"}],key:_vm.mobileKey,attrs:{\"id\":_vm.doc.uuid,\"design\":\"secondary\"}},[_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"Actions\")])]):_vm._e(),_vm._v(\" \"),(!_vm.isMobile)?_c('res-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showActionsButton),expression:\"showActionsButton\"}],key:_vm.mobileKey,attrs:{\"id\":_vm.doc.uuid,\"design\":\"default\"}},[_c('res-icon',{attrs:{\"size\":\"medium\",\"title\":\"Menu\",\"name\":\"more\",\"animated\":\"false\"}}),_vm._v(\" \"),_c('button',{attrs:{\"type\":\"button\"}})],1):_vm._e(),_vm._v(\"\\n\\n  \"+_vm._s(_vm.actionStatus)+\"\\n\\n  \"),(_vm.moveCompleted)?_c('res-button',{staticClass:\"m-dashboard__table__actions__restore\",attrs:{\"design\":_vm.isMobile ? 'secondary' : ''},on:{\"click\":_vm.restoreDoc}},[_c('button',{attrs:{\"type\":\"button\"}},[_vm._v(\"Restore\")])]):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var { omit } = require('lodash');\nvar Sentry = require('@sentry/browser');\nvar messageActions = require('./messages');\nvar HttpStatusError = require('../lib/errors/http_status_error');\n\nexport function handleError(err, emit = true) {\n  reportError(err, emit);\n  return Promise.reject(err);\n}\n\nexport function reportError(err, emit = true) {\n  // Log out stack for debugging, but not in test mode to stop polluting the\n  // test output\n  let env;\n  try {\n    env = app.env; // get from app for Ractive pages\n  } catch (error) {\n    env = process.env.NODE_ENV; // get from node for Vue pages\n  }\n\n  if (env !== 'test') {\n    console.error(err);\n    console.error(err.stack || err.message);\n  }\n\n  if (!(err instanceof HttpStatusError)) {\n    Sentry.captureException(err, {\n      tags: {\n        error_name: err.name,\n        from: err.from\n      },\n      extra: omit(err, 'name', 'message', 'stack', 'from')\n    });\n  }\n\n  if (emit) {\n    messageActions.showError();\n  }\n}\n\nexport function reportMessage(message, opts) {\n  if (app.env !== 'test') {\n    console.warn(message, opts);\n  }\n\n  Sentry.captureMessage(message, opts);\n}\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./form-subsection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./form-subsection.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-278e62da\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./form-subsection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","\n<template>\n  <transition name=\"vue-transition--slide\">\n    <div v-if=\"currentSidebarTag\" :class=\"`m-sidebar m-sidebar--${pageType} ${orientationClass} ${pushContentClass}`\">\n      <header :class=\"`m-${currentSidebarTag}`\">\n        <h2 v-if=\"currentSidebar.title\">{{ currentSidebar.title }}</h2>\n        <res-button class=\"m-sidebar__close\" @click.prevent=\"closeSidebar()\">\n          <res-icon name=\"x\"/><button>Close</button>\n        </res-button>\n      </header>\n      <div class=\"m-sidebar__content\">\n        <component :is=\"currentSidebarTag\" :id=\"currentSidebar.id\" :childProps=\"currentSidebar.childProps\" />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { SET_SIDEBAR, SET_OVERLAY } from '../store/commands';\nimport { mapState } from 'vuex';\nimport { getPageType } from '../lib/get_page_type';\n\nimport ChorusHelp from './sidebars/chorus-help.vue';\n\nexport default {\n  components: {\n    ChorusHelp\n  },\n  computed: {\n    ...mapState([\n      'currentSidebar',\n      'currentOverlay'\n    ]),\n    currentSidebarTag() {\n      return this.currentSidebar.type || null;\n    },\n    orientationClass() {\n      return this.currentSidebar.orientation === 'left' ? 'm-sidebar--orientation-left' : 'm-sidebar--orientation-right';\n    },\n    pushContentClass() {\n      return this.currentSidebar.pushContent ? 'm-sidebar--push-content' : '';\n    },\n    pageType() {\n      return getPageType(this.$route.name);\n    }\n  },\n  watch: {\n    currentSidebarTag() {\n      if (!this.currentSidebarTag) {\n        this.$store.commit(SET_SIDEBAR, null);\n      }\n    }\n  },\n  methods: {\n    closeSidebar() {\n      if (this.currentSidebarTag === 'chorus-help' && (this.currentOverlay.component === 'chorus-help-announcement' || this.currentOverlay.component === 'chorus-help-contact-form')) {\n        this.$store.commit(SET_OVERLAY, {\n          childProps: null,\n          component: null\n        });\n      }\n      this.$store.commit(SET_SIDEBAR, null);\n    }\n  }\n};\n</script>\n","export default function isShortlink(url) {\n  const domain = app.state.get(['community', 'network', 'schemaDomain']);\n  const pattern = `(http|https)(://${domain}/e/)([0-9]+)`;\n  return new RegExp(pattern, 'g').test(url);\n}\n","<template>\n  <form class=\"m-overlay__form\" @submit.prevent=\"submitFeedback()\">\n    <res-input block>\n      <label>Send feedback or report an issue.</label>\n      <textarea v-model=\"message\" aria-label=\"Send feedback to the product team\" cols=\"30\" rows=\"5\" />\n    </res-input>\n    <div class=\"p-button-row--left\">\n      <p>By submitting this form, you agree to our <a href=\"https://www.voxmedia.com/pages/community-guidelines-support-requests\">community guidelines</a>.</p>\n      <res-button :disabled=\"!message ? true : false\" design=\"primary\" class=\"m-t-1\">\n        <button type=\"submit\">Submit</button>\n      </res-button>\n    </div>\n    <res-icon v-if=\"submitted\" size=\"small\" name=\"more\" />\n  </form>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { SET_SIDEBAR, SET_OVERLAY } from './../../store/commands';\nimport request from '../../../client/lib/request';\nimport messages from '../../../client/config/messages';\n\nexport default {\n  data() {\n    return {\n      message: '',\n      submitted: false\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentUser',\n      'currentCommunity'\n    ]),\n  },\n  methods: {\n    handleError() {\n      this.$store.commit('messageBanner/PUT_NOTICE', {\n        type: 'negative',\n        message: messages.UNEXPECTED\n      });\n    },\n    async submitFeedback() {\n      const feedback = {\n        author: this.currentUser,\n        schemaDomain: this.currentCommunity.network.schemaDomain,\n        url: window.location.href,\n        text: this.message,\n        userAgent: navigator.userAgent\n      };\n      try {\n        await request('/feedback', {\n          method: 'POST',\n          body: feedback\n        });\n        // ga.sendEvent('support', 'sendFeedback');\n        this.$store.commit('messageBanner/PUT_NOTICE', {\n          type: 'positive',\n          message: messages.FEEDBACK_SENT,\n          timeout: false,\n          icon: 'check'\n        });\n        this.closeOverlay();\n      } catch(error) {\n        this.handleError();\n      }\n    },\n    closeOverlay() {\n      this.$store.commit(SET_SIDEBAR, null);\n      this.$store.commit(SET_OVERLAY, {\n        childProps: null,\n        component: null\n      });\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./help-toggle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./help-toggle.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-17049e04\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./help-toggle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","import actions from './actions';\nimport mutations from './mutations';\nimport getters from './getters';\n\nconst autosaveStore = {\n  state: () => ({\n    contentApiSocket: null,\n    // keys are IDs\n    dirty: {},\n    inFlight: {},\n    inLine: {},\n    docsById: {}, // the full doc object(s)\n    sentIds: {}, // keys are uuids for packets\n    currentDocId: null, // main doc in state, tied to url uuid\n    ready: false, // currentDoc has loaded and autosave initialized\n    subdocs: [], // loaded subdocs\n    error: false, // fatal error state, shut it down\n    reconnectingIds: [],\n    connectedUsers: []\n  }),\n  actions: actions,\n  mutations: mutations,\n  getters: getters,\n};\n\nexport default autosaveStore;\n","var querystring = require('querystring');\nvar request = require('../lib/request');\nvar graphqlRequest = require('../lib/graphql_request');\nvar communityQueries = require('../graphql/queries/communities');\nvar { getChorusVideoAccess } = require('./users');\n\nexport function loadCommunity(communityId, context) {\n  return Promise.all([\n    getCommunity(communityId, context),\n    getEntitlements(communityId),\n    getChorusVideoAccess(communityId)\n  ]).then(([community, entitlements, canAccessChorusVideo]) => {\n    if (community.autoTagging && entitlements.includes('use_no_geo_tags')) {\n      community.autoTagging.autotagTagTypes = community.autoTagging.autotagTagTypes.filter(t => !t.includes('geo'));\n    }\n    app.state.set(['community'], community);\n    app.state.set(['entitlements'], entitlements);\n    app.state.set(['user', 'canAccessChorusVideo'], canAccessChorusVideo || false);\n  });\n}\n\nexport async function getCommunity(communityId, context) {\n  var { community } = await graphqlRequest('/api/tower/graphql', {\n    query: communityQueries[`${context}Community`],\n    variables: { communityId }\n  });\n  if (!community) {\n    throw new Error('Community not found.');\n  }\n\n  // Convert CONSTANT_CASE enums to expected case\n  if (context === 'Editor') {\n    community.autoTagging.autolinkTagTypes = community.autoTagging.autolinkTagTypes.map(tagType => tagType.toLowerCase());\n    community.autoTagging.autotagTagTypes = community.autoTagging.autotagTagTypes.map(tagType => tagType.toLowerCase());\n  }\n\n  return community;\n}\n\nexport async function getPrintOptions(communityId) {\n  var { community } = await graphqlRequest('/api/tower/graphql', {\n    query: `query PrintOptions($communityId: Int!) {\n      community(id: $communityId) {\n        desk: siteConfigString(key: \"print_desks\")\n        category: siteConfigString(key: \"print_categories\")\n        article_type: siteConfigString(key: \"print_article_types\")\n        placement: siteConfigString(key: \"print_placements\")\n      }\n    }`,\n    variables: { communityId }\n  });\n  if (!community) {\n    throw new Error('Community not found.');\n  }\n\n  return Object.keys(community).reduce((acc, key) => {\n    if (!community[key]) {\n      return acc;\n    }\n\n    return {\n      ...acc,\n      // split on new lines and clean up\n      [key]: (community[key] ? community[key].split('\\n') : [])\n        .map(item => item.trim())\n        .filter(Boolean),\n    };\n  }, {});\n}\n\nexport function getEntitlements(communityId) {\n  // .slice(1) removes the leading ? from the first query item\n  var query = querystring.parse(window.location.search.slice(1));\n  return request('/api/entitlements', {\n    query: {\n      userId: app.state.get(['user', 'id']),\n      communityId: communityId,\n      entitlements: query.entitlements ? query.entitlements.split(',') : []\n    }\n  });\n}\n","<template>\n  <div :class=\"['m-field-group__subsection', className]\">\n    <h3 v-if=\"label\">{{ label }}</h3>\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    label: {\n      type: String,\n      default: '',\n    },\n    className: {\n      type: String,\n      default: '',\n    },\n  },\n};\n</script>\n","import * as cmd from './commands';\n\nexport default {\n  [cmd.ACTIVE_MEMBERSHIPS](state) {\n    const memberships = state.currentUser.memberships;\n    const policyRoles = state.policyRoles.app.access;\n    const networkRoles = state.currentUser.networkRoles;\n    const activeMemberships = memberships.filter(({ status, roles }) => {\n      return status === 'ACTIVE'\n        && (networkRoles.some(r => r in policyRoles)\n        || roles.some(role => role in policyRoles));\n    });\n    return activeMemberships;\n  }\n};\n","<template>\n  <li :class=\"className\" >\n    <div v-show=\"editing\" class=\"m-editable-list-item__content\">\n      <res-input @keyup.enter.prevent=\"save\">\n        <input ref=\"input\" v-model.trim=\"name\" type=\"text\" />\n      </res-input>\n      <res-button\n        class=\"m-editable-list-item__save\"\n        design=\"primary\"\n        @click=\"save\">\n        <res-icon name=\"check\" />\n        <button/>\n      </res-button>\n      <res-button\n        class=\"m-editable-list-item__cancel\"\n        design=\"secondary\"\n        @click=\"cancel\">\n        <res-icon name=\"x\"/>\n        <button />\n      </res-button>\n    </div>\n    <div v-show=\"!editing\" class=\"m-editable-list-item__content\">\n      <res-button\n        :disabled=\"disabled\"\n        class=\"m-editable-list-item__name\"\n        paddingless\n        @click=\"!disabled && onNameClick()\">\n        <button>{{ name }}</button>\n      </res-button>\n      <res-button\n        :disabled=\"disabled\"\n        class=\"m-editable-list-item__edit\"\n        title=\"Edit\"\n        @click=\"!disabled && edit()\">\n        <res-icon name=\"edit\"/>\n        <button/>\n      </res-button>\n      <res-button\n        :res-modal-open=\"modalId\"\n        :disabled=\"disabled\"\n        title=\"Delete\"\n        class=\"m-editable-list-item__delete\"\n        negative\n        @click=\"!disabled && onDeleteClick()\">\n        <res-icon name=\"trash\" />\n        <button />\n      </res-button>\n    </div>\n  </li>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n  props: {\n    itemName: {\n      type: String,\n      default: '',\n      required: true,\n    },\n    onNameClick: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    onDeleteClick: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    onSaveClick: {\n      type: Function,\n      default: () => {},\n      required: true,\n    },\n    active: {\n      type: Boolean,\n      default: false,\n      required: true,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      editing: false,\n      name: '',\n    };\n  },\n  computed: {\n    ...mapState(['modalId']),\n    className() {\n      let className = 'm-editable-list-item';\n      if (this.active) {\n        className += ' m-editable-list-item--active';\n      }\n      return className;\n    }\n  },\n  mounted() {\n    this.name = this.itemName;\n  },\n  methods: {\n    async edit() {\n      this.editing = true;\n      await this.$nextTick();\n      this.$refs.input.focus();\n    },\n    save() {\n      if (this.name !== this.itemName) {\n        this.onSaveClick(this.name);\n      }\n      this.editing = false;\n    },\n    cancel() {\n      this.name = this.itemName;\n      this.editing = false;\n    }\n  }\n};\n</script>\n","<template>\n  <router-link :to=\"{ path: '/', query: { community_id: communityId } }\" :class=\"lockupClass\">\n    <div :class=\"avatarWrapClass\">\n      <img :src=\"faviconUrl || defaultLogoUrl\" class=\"m-community-select__icon\" />\n    </div>\n    <span v-if=\"firstLine && !isMobile\">\n      <span :class=\"`m-community-select__name m-community-select__name--first ${firstLineTruncatedClass} ${hasSecondLineClass}`\">{{ firstLine }}</span>\n      <span v-if=\"secondLine\" class=\"m-community-select__name m-community-select__name--second m-community-select__name--truncated\">{{ secondLine }}</span>\n    </span>\n    <span v-else :class=\"`m-community-select__name ${mobileTruncatedClass}`\">{{ communityName }}</span>\n  </router-link>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nexport default {\n  props: {\n    communityId: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      small: false,\n      firstLine: '',\n      secondLine: '',\n      firstLineTruncated: false\n    };\n  },\n  computed: {\n    ...mapState([\n      'currentCommunity',\n      'defaultLogoUrl',\n      'isMobile'\n    ]),\n    communityName() {\n      return this.currentCommunity.name;\n    },\n    faviconUrl() {\n      return this.currentCommunity.faviconUrl;\n    },\n    lockupClass() {\n      // I don't love this, but I'm following class names and markup from the ractive version -- M.C.\n      return this.isMobile ? 'm-community-select__lockup' : 'm-nav__lockup';\n    },\n    avatarWrapClass() {\n      let className;\n      if (this.isMobile) {\n        className = 'm-community-select__avatar is-mobile';\n        if (this.communityName === 'Vox') {\n          className += ' m-community-select__avatar--vox';\n        }\n      } else {\n        className = 'm-nav__icon';\n        if (this.communityName === 'Vox') {\n          className += ' m-nav__icon--vox';\n        }\n      }\n      return className;\n    },\n    mobileTruncatedClass() {\n      return this.isMobile ? 'm-community-select__name--truncated' : '';\n    },\n    firstLineTruncatedClass() {\n      return this.firstLineTruncated ? 'm-community-select__name--firstLineTruncated' : '';\n    },\n    hasSecondLineClass() {\n      return this.secondLine ? 'm-community-select__name--has-second' : '';\n    }\n  },\n  mounted() {\n    this.fitCommunityName();\n  },\n  updated() {\n    // this supports some weird state where the `fitCommunityName` thing\n    // would not persist when a page was reloaded\n    this.fitCommunityName();\n  },\n  methods: {\n    fitCommunityName() { // @TODO: discuss a redesign of this component so that we can use CSS to manage fitting the communityName\n      if (this.isMobile) return;\n      const CONTAINER_WIDTH = 108;\n      const offscreen = document.createElement('div');\n      offscreen.setAttribute('style', 'width: 20rem; height: 10rem; position: absolute; left: -9999px; top: 0;');\n\n      const container = document.createElement('div');\n      container.setAttribute('style', 'width: 7rem; text-align: center;');\n\n      const el = document.createElement('span');\n      el.setAttribute('style', 'font-size: 0.889rem; display: inline-block;');\n      el.innerText = this.communityName;\n\n      container.appendChild(el);\n\n      offscreen.appendChild(container);\n      document.body.appendChild(offscreen);\n\n      const nameWidth = el.clientWidth;\n\n      if (nameWidth > CONTAINER_WIDTH) {\n        this.small = true;\n\n        // Mimic actual styles\n        el.setAttribute('style', 'font-size: .79rem; display: inline-block; padding: 0 4px;');\n\n        const name = this.communityName;\n        const wordsInName = name.split(' ');\n\n        // Actual letter is irrelevant, just need a base one-line height\n        el.innerText = 'a';\n        const originalHeight = el.clientHeight;\n        // See if entire name can now fit on one line\n        el.innerText = name;\n        if (el.clientHeight === originalHeight) {\n          this.firstLine = name;\n        } else {\n          // If we can't fit the entire community name on one line,\n          // We'll display the first line as-is and use CSS to truncate the second line (if need be)\n          let firstLine = '';\n          el.innerText = '';\n          // Loop through the words in the name; at each word,\n          // stop to see if we've increased the height. If we have, we're done.\n          for (let [i, currentWord] of wordsInName.entries()) {\n            if (i === 0) {\n              el.innerText = currentWord;\n            } else {\n              el.innerText += ' ' + currentWord;\n            }\n            if (el.clientHeight === originalHeight) {\n              firstLine = el.innerText;\n            } else {\n              break;\n            }\n          }\n          this.firstLine = firstLine;\n          this.secondLine = name.split(firstLine + ' ')[1];\n        }\n        // If the first word is extremely long we will use CSS to truncate the first line\n        el.innerText = wordsInName[0];\n        if (el.clientWidth > CONTAINER_WIDTH) {\n          this.firstLineTruncated = true;\n        }\n      }\n      document.body.removeChild(offscreen);\n    }\n  }\n};\n</script>\n","/**\n * Removes `http[s]://` from a url before using to query for a doc. Elasticsearch\n * indices of docs have a public_url that does not contain a protocol therefore\n * we can't query those docs with the URL protocol\n * @param {String} url a valid URL\n * @return {String} The URL without the protocol\n */\nexport default function stripProtocol(url) {\n  return url.replace(/http[s]?:\\/\\//, '');\n}\n","<template>\n  <div :class=\"`m-chorus-help__icon ${announcementClass}`\" :style=\"isMobile ? 'position: absolute; right: 0;' : ''\">\n    <res-button design=\"default\" paddingless @click=\"toggleHelp()\">\n      <res-icon size=\"medium\" title=\"Help\" name=\"help\" />\n      <button type=\"button\" />\n    </res-button>\n  </div>\n</template>\n\n<script>\nimport * as cmd from '../../store/commands';\nimport moment from 'moment-timezone';\nimport { mapState } from 'vuex';\n\nexport default {\n  props: {\n    isMobile: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      announcementClass: 'is-unseen'\n    };\n  },\n  computed: {\n    ...mapState([\n      'announcements',\n      'currentUser',\n      'currentSidebar',\n      'currentOverlay',\n      'user'\n    ]),\n  },\n  mounted() {\n    if (!this.currentUser.hasOwnProperty('lastAnnouncementSeenAt')) this.setAnnouncementState();\n  },\n  methods: {\n    closeSidebar() {\n      this.$store.commit(cmd.SET_SIDEBAR, null);\n    },\n    closeOverlay() {\n      this.$store.commit(cmd.SET_OVERLAY, {\n        childProps: null,\n        component: null\n      });\n    },\n    openChorusHelpSidebar() {\n      this.$store.commit(cmd.SET_SIDEBAR, {\n        to: 'chorus-help',\n        id: 'chorus-help',\n        title: 'Chorus help',\n        childProps: {},\n        orientation: 'right',\n        pushContent: false\n      });\n      this.viewAnnouncements();\n    },\n    toggleHelp() {\n      if (this.currentSidebar.id === 'chorus-help' && (this.currentOverlay.component === 'chorus-help-announcement' || this.currentOverlay.component === 'chorus-help-contact-form')) {\n        // the sidebar is open, displaying the chorus-help child component\n        // AND the overlay is open, displaying the chorus-help-announcement or chorus-help-contact-form child component\n        // so close both of these when the toggle button is clicked\n        this.closeSidebar();\n        this.closeOverlay();\n      } else if (this.currentSidebar.id === 'chorus-help') {\n        this.closeSidebar();\n      } else if (this.currentSidebar.id && this.currentSidebar.id !== 'chorus-help') {\n        this.closeSidebar();\n        setTimeout(() => { this.openChorusHelpSidebar(); }, 300);\n      } else {\n        this.openChorusHelpSidebar();\n      }\n    },\n    viewAnnouncements() {\n      // the chorus-help sidebar was toggled-open\n      // so set the `lastSeen` var to today/now\n      const lastSeen = new Date().toISOString(); // today/now\n      // store today/now as the data in the user state\n      this.user.lastAnnouncementSeenAt = lastSeen;\n      // store the `lastSeen` date in the session\n      sessionStorage.setItem('lastAnnouncementSeenAt', lastSeen);\n      // make sure there is a session item for the last time an announcement was read,\n      // though this data will be properly set from within the chorus-help sidebar when the\n      // user opens an announcement\n      const lastRead = this.user.lastAnnouncementReadAt;\n      sessionStorage.setItem('lastAnnouncementReadAt', lastRead);\n      // update the class on the toggle button\n      this.announcementClass = this.setAnnouncementClass(lastSeen, lastRead);\n    },\n    setAnnouncementState() {\n      // check the current session for announcements data relative to the user...\n      const lastSeenSession = sessionStorage.getItem('lastAnnouncementSeenAt') || this.user.lastAnnouncementSeenAt || '';\n      const lastReadSession = sessionStorage.getItem('lastAnnouncementReadAt') || this.user.lastAnnouncementReadAt || '';\n      // prep objects to be added to user state\n      const announcementStats = {\n        'lastAnnouncementSeenAt': lastSeenSession,\n        'lastAnnouncementReadAt': lastReadSession\n      };\n      // PATCH_USER / add objects to the currentUser state\n      this.$store.commit(cmd.PATCH_USER, announcementStats);\n      this.announcementClass = this.setAnnouncementClass();\n    },\n    setAnnouncementClass(lastSeen, lastRead) {\n      lastSeen = lastSeen || this.currentUser.lastAnnouncementSeenAt || this.user.lastAnnouncementSeenAt;\n      lastRead = lastRead || this.currentUser.lastAnnouncementReadAt || this.user.lastAnnouncementReadAt;\n      const lastPosted = this.announcements.last_announcement_posted_at;\n      if (!lastSeen || moment(lastSeen).isBefore(lastPosted)) {\n        return 'is-unseen';\n      } else if (!lastRead || moment(lastRead).isBefore(lastPosted)) {\n        return 'is-unread';\n      } else {\n        return '';\n      }\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-lockup.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./community-lockup.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29b93876\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./community-lockup.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"m-radio-button-group\"},_vm._l((_vm.options),function(option){return _c('label',{key:option.value,attrs:{\"title\":option.label}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.radioValue),expression:\"radioValue\"}],attrs:{\"id\":option.id,\"type\":\"radio\"},domProps:{\"value\":option.value,\"checked\":_vm._q(_vm.radioValue,option.value)},on:{\"change\":[function($event){_vm.radioValue=option.value},_vm.saveValue]}}),_vm._v(\" \"),_c('span',{staticClass:\"is-secondary -small\",attrs:{\"type\":\"button\"}},[(option.icon)?_c('res-icon',{attrs:{\"title\":option.label,\"name\":option.icon,\"size\":\"medium\"}}):_c('span',[_vm._v(_vm._s(option.label))])],1)])}),0)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],class:(\"m-app-loader m-app-loader__\" + _vm.animation)},[_c('res-icon',{attrs:{\"name\":_vm.iconName,\"size\":\"large\"}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-create-modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./saved-search-create-modal.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9ce9d7a8\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./saved-search-create-modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","function hasPolicyRole(user, communityId, policyRoles) {\n  return hasRoleOnCommunity(user, communityId, policyRoles);\n}\n\nfunction hasRoleOnCommunity(user, communityId, roles) {\n  return (\n    user.networkRoles.some(r => roles[r]) ||\n    user.memberships.some(m => (\n      membershipAuthorized(m, roles) &&\n      communityId === m.community.id\n    ))\n  );\n}\n\nfunction membershipAuthorized(membership, roles) {\n  return membership.status === 'ACTIVE' && membership.roles.some(r => roles[r]);\n}\n\nfunction isCommunityPostAuthor(user, communityId) {\n  return hasRoleOnCommunity(user, communityId, { 'COMMUNITY_POST_AUTHOR': true });\n}\n\nmodule.exports = {\n  hasPolicyRole,\n  isCommunityPostAuthor\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.notifications),function(notice){return _c('res-banner',{key:notice.id,attrs:{\"id\":notice.id,\"design\":_vm.designForNotice(notice),\"persistent\":notice.persistent || false,\"timeout\":notice.timeout || false,\"inert\":\"\"},on:{\"close\":function($event){return _vm.deleteNotice(notice)}}},[(notice.icon)?_c('res-icon',{attrs:{\"name\":notice.icon}}):_vm._e(),_c('span',{domProps:{\"innerHTML\":_vm._s(notice.message)}})],1)}),1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"m-dashboard__table__activity__text\"},[(!_vm.filter)?_c('span',[_c('span',{class:_vm.activityIconClass}),_vm._v(\"\\n    \"+_vm._s(_vm.docStatus)+\"\\n    \"),(_vm.doc.status === 'PUBLISHED' || _vm.doc.status === 'UPDATED')?_c('span',{staticClass:\"m-dashboard__table__activity__link\"},[_c('a',{attrs:{\"href\":(\"https://\" + (_vm.network.schemaDomain) + \"/e/\" + (_vm.doc.entry_id)),\"target\":\"_blank\"}},[_c('res-icon',{attrs:{\"size\":\"smaller\",\"name\":\"publish\"}})],1)]):_vm._e(),_vm._v(\"\\n\\n    \"+_vm._s(_vm.datePrefix)+\"\\n    \"+_vm._s(_vm.statusDate ? (['SCHEDULED', 'PUBLISHED'].includes(_vm.doc.status) ? _vm.fullDate : _vm.timeAgo()) : '')+\"\\n    \"),(_vm.doc.head.contents.embargoed)?_c('res-badge',{attrs:{\"size\":'smaller',\"design\":'rose'}},[_c('span',[_vm._v(\"Embargoed\")])]):_vm._e(),_vm._v(\" \"),(_vm.isLivePost)?_c('res-badge',{staticClass:\"res-badge-light-apple\",attrs:{\"size\":'smaller',\"design\":'apple'}},[_c('span',[_vm._v(\"Live\")])]):_vm._e(),_vm._v(\" \"),(_vm.showHiddenBadge)?_c('res-badge',{attrs:{\"size\":'smaller',\"design\":'gray'}},[_c('span',[_vm._v(\"Hidden\")])]):_vm._e(),_vm._v(\" \"),(_vm.showExpirationBadge)?_c('res-badge',{attrs:{\"size\":'smaller',\"design\":'gold'}},[_c('res-icon',{attrs:{\"name\":\"clock\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.hideScheduledMessage))])],1):_vm._e()],1):_c('span',[_vm._v(\"\\n    \"+_vm._s(_vm.timeAgo(_vm.doc.updated_at))+\"\\n    \"+_vm._s(_vm.doc.updateUser.id ? (\"by \" + (_vm.doc.updateUser.fullName)) : '')+\"\\n  \")])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","export default function pluralize(string) {\n  if (/y$/.test(string) && !/ey$/.test(string)) {\n    return string.replace(/y$/, 'ies');\n  } else if (/s$/.test(string)) {\n    return string + 'es';\n  }\n\n  return string + 's';\n}\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-nav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./dashboard-nav.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9f491280\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./dashboard-nav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['m-field-group__subsection', _vm.className]},[(_vm.label)?_c('h3',[_vm._v(_vm._s(_vm.label))]):_vm._e(),_vm._v(\" \"),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-nav.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editor-nav.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0437ca6b\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editor-nav.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","<template>\n  <div class=\"m-nav m-nav__root\">\n\n    <banner-message />\n\n    <nav class=\"m-nav m-nav--dashboard m-nav--dashboard__vue\">\n      <div class=\"m-nav__inner m-nav--dashboard__inner\">\n\n        <community-select\n          v-model=\"communityId\"\n          :community=\"currentCommunity\"\n          :user=\"currentUser\"\n          :activeMemberships=\"activeMemberships\"\n          :allowedRoles=\"policyRoles.app.access\"\n          class=\"m-community-select\"\n        />\n\n        <div class=\"m-nav__right\">\n          <div class=\"m-nav--dashboard__subnav\">\n            <span v-if=\"canManagePages\" class=\"m-nav--dashboard__links\">\n              <res-button id=\"editorial-dropdown\">\n                <button>Admin</button><res-icon name=\"down\" />\n              </res-button>\n              <res-dropdown :key=\"$route.name\" for=\"editorial-dropdown\">\n                <a :href=\"`https://${communityDomain}/admin/entry_groups/list?community_id=${communityId}&type=SiteGroup`\">Groups</a>\n                <a :href=\"`https://${communityDomain}/admin/hub_layout/show?community_id=${communityId}`\">Home &amp; Hubpages</a>\n                <a :href=\"`https://${communityDomain}/admin/link_sets?community_id=${communityId}`\">Link sets</a>\n                <a :href=\"`https://${communityDomain}/admin/apple_news_articles/list?community_id=${communityId}`\">Apple News</a>\n                <router-link :to=\"{ path: '/pages' }\">Pages</router-link>\n                <a :href=\"`http://${communityDomain}/admin/dashboard/hub_editorial?community_id=${communityId}`\">Legacy Chorus</a>\n                <a href=\"https://www.chorus.help/hc/en-us\">Help center</a>\n              </res-dropdown>\n            </span>\n            <span v-if=\"canManageAssets\" class=\"m-nav--dashboard__links\">\n              <res-button>\n                <a :href=\"`/assets?community_id=${communityId}`\" rel=\"external\">Assets</a>\n              </res-button>\n            </span>\n\n            <new-story-button :isMobile=\"isMobile\" :communityId=\"communityId\" />\n\n            <help-toggle />\n          </div>\n        </div>\n      </div>\n    </nav>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex';\nimport { hasPolicyRole } from '../../lib/authorization';\nimport BannerMessage from './banner-message.vue';\nimport CommunitySelect from '../../../shared/vue/community-select/index.vue';\nimport NewStoryButton from './new-story-button.vue';\nimport HelpToggle from './help-toggle.vue';\n\nexport default {\n  components: {\n    BannerMessage,\n    CommunitySelect,\n    NewStoryButton,\n    HelpToggle\n  },\n  computed: {\n    ...mapState([\n      'currentCommunity',\n      'currentUser',\n      'isMobile',\n      'network',\n      'policyRoles'\n    ]),\n    ...mapGetters(['activeMemberships']),\n    communityId() {\n      return parseInt(this.currentCommunity.id);\n    },\n    canManagePages() {\n      return hasPolicyRole(this.currentUser, this.communityId, this.policyRoles.doc.managePages);\n    },\n    canManageAssets() {\n      return hasPolicyRole(this.currentUser, this.communityId, this.policyRoles.editor.accessAssets);\n    },\n    communityDomain() {\n      return this.network.schemaDomain;\n    }\n  }\n};\n</script>\n","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortlink-modal.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./shortlink-modal.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-deab31de\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./shortlink-modal.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n","function isDashboard(routeName) {\n  const routes = ['dashboard', 'dashboard-filtered', 'pages', 'pages-filtered'];\n  return routes.includes(routeName);\n}\n\nexport function getPageType(routeName) {\n  return isDashboard(routeName) ? 'dashboard' : 'editor';\n}\n","<script>\nfunction getHtmlElement() {\n  return document.documentElement;\n}\n\nexport default {\n  props: {\n    lockClass: {\n      type: String,\n      default: 'scroll-lock',\n    },\n    targetQuery: {\n      type: Function,\n      default: getHtmlElement,\n    }\n  },\n  mounted() {\n    this.targetQuery().classList.add(this.lockClass);\n  },\n  beforeDestroy() {\n    this.targetQuery().classList.remove(this.lockClass);\n  },\n  render() {\n    return null;\n  }\n};\n</script>\n","function secureRandomHex(size=32) {\n  const crypto = window.crypto || window.msCrypto;\n  let str = '';\n\n  if (crypto) {\n    let arr = new Uint8Array(Math.ceil(size / 2));\n    crypto.getRandomValues(arr);\n    str = [].map.call(arr, (b) => ('0'+b.toString(16)).slice(-2)).join('');\n  } else {\n    for (let i=Math.ceil(size / 11); i > 0; i-=1) {\n      str += Math.random().toString(36).substr(2);\n    }\n  }\n  return str.substr(0, size);\n}\n\nexport default {\n  namespaced: true,\n  state: {\n    notifications: []\n  },\n  mutations: {\n    DELETE_NOTICE(state, payload) {\n      state.notifications = state.notifications.filter(notice => notice.id !== payload);\n    },\n    PUT_NOTICE(state, notices ) {\n      if (!Array.isArray(notices)) notices = [notices];\n      notices.forEach(notice => {\n        if (notice && notice.message) {\n          state.notifications.push({\n            id: notice.id || secureRandomHex(8),\n            // remove any graphQL message headers added by apollo...\n            message: notice.message.replace(/GraphQL error:\\s*/g, ''),\n            type: (notice.graphQLErrors ? 'error' : notice.type) || 'neutral',\n            timeout: notice.timeout || null,\n            persistent: notice.persistent || false,\n            icon: notice.icon || null\n          });\n        }\n      });\n    }\n  }\n};\n","export default function initials(name) {\n  var names = name.split(/\\.\\s|\\.|\\s|-/);\n  return names.reduce((initials, namePart) => {\n    return initials + namePart.charAt(0);\n  }, '');\n}\n","var OT = require('../../shared/ottypes/anthem0');\nvar sentryActions = require('../actions/sentry');\n\n// This library warps the three OT methods we use in the client in try/catch\n// guards. We assume all OT errors are \"fatal\" in that they probably break\n// autosave, so we log & emit an error prompting to refresh. Still, we pass\n// the error back up the stack as well to be handled where the OT method was\n// called (e.g. autosave)\n\nexport default {\n  compose(op1, op2) {\n    try {\n      return OT.compose(op1, op2);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  },\n  apply(snapshot, op) {\n    try {\n      return OT.apply(snapshot, op);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  },\n  transform(op1, op2, side) {\n    try {\n      return OT.transform(op1, op2, side);\n    } catch (error) {\n      sentryActions.reportError(error, false);\n      throw error;\n    }\n  }\n};\n"],"sourceRoot":""}