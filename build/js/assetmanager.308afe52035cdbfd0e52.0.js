(window.webpackJsonp=window.webpackJsonp||[]).push([["assetmanager"],{"+Q8c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Xv6j"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("vuKY");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"+dt3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={name:"AssetEdit",mixins:[r("eUKB").utilities],data:()=>({body:{}}),computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,n.mapState)({asset:e=>e.editAsset,image:e=>e.editImage})),mounted(){this.body=Object.assign({},this.image)},methods:{async updateAsset(){await this.$store.dispatch("updateAsset",this.body)}}};t.default=s,e.exports=t.default},"+dw7":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{community:{type:Object,required:!0},defaultLogoUrl:{type:String,required:!0},selectionId:{type:Number,default:null}},computed:{href:()=>"#"}};t.default=n,e.exports=t.default},"+w+W":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("+dw7"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("1pgo");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},1:function(e,t){},10:function(e,t){},11:function(e,t){},14:function(e,t,r){r("j36g"),e.exports=r("4IoL")},"1pgo":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{attrs:{href:e.href},on:{click:function(t){return t.preventDefault(),e.$emit("communityId",e.community.id)}}},[r("li",{staticClass:"m-community-select__item",class:{"is-active":e.selectionId===e.community.id}},[r("div",{staticClass:"m-community-select__avatar"},[r("img",{staticClass:"m-community-select__icon",attrs:{src:e.community.faviconUrl||e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(e.community.name))]),e._v(" "),e.selectionId===e.community.id?r("res-icon",{attrs:{name:"check-circle",size:"medium"}}):e._e()],1)])},a=[]},"1yNl":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showMetadata?e._e():r("div",[r("div",{staticClass:"m-assets__drawer-title"},[e._v("Upload")]),e._v(" "),r("input",{ref:"fileSelect",staticClass:"m-assets__drawer-file-upload",attrs:{type:"file",multiple:""},on:{change:e.previewFiles}}),e._v(" "),r("res-button",{attrs:{design:"primary"},on:{click:function(t){return t.preventDefault(),e.$refs.fileSelect.click()}}},[r("res-icon",{attrs:{name:"desktop"}}),e._v(" "),r("button",[e._v("From your device")])],1),e._v(" "),r("div",{staticClass:"m-assets__drawer-helper-text"},[e._v("For batch upload you may select multiple files at a time.")]),e._v(" "),r("div",{staticClass:"m-assets__drawer-option"},[e._v("or")]),e._v(" "),r("res-input",{attrs:{block:""}},[r("label",{attrs:{for:"remote-url"}},[e._v("Remote file URL")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.remoteFileUrl,expression:"remoteFileUrl"}],attrs:{id:"remote-url",type:"text"},domProps:{value:e.remoteFileUrl},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setShowMetadata(!0)},input:function(t){t.target.composing||(e.remoteFileUrl=t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"p-flex p-flex--justify-between p-flex--wrap",attrs:{id:"preview"}}),e._v(" "),e.showMetadata?r("div",[r("div",{staticClass:"m-add-image__edit"},[r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{count:"500",block:""}},[r("label",{attrs:{for:"alt-text"}},[e._v("Alt text\n            "),r("div",{staticClass:"m-tooltip"},[r("res-button",{attrs:{id:"alt-text-button",paddingless:""}},[r("res-icon",{attrs:{name:"tooltip"}}),e._v(" "),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{placement:"bottom-start",for:"alt-text-button",design:"dark"}},[e._v("\n                Describe the important elements in the image for people who use assistive technology.\n                "),r("a",{attrs:{href:"https://chorussupport.zendesk.com/hc/en-us/articles/360026524334",target:"_blank",rel:"noopener noreferrer"}},[e._v("Learn more")])])],1)]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.title,expression:"body.title"}],attrs:{id:"alt-text"},domProps:{value:e.body.title},on:{input:function(t){t.target.composing||e.$set(e.body,"title",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",{attrs:{for:"credit"}},[e._v("Credit")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.credit,expression:"body.credit"}],attrs:{id:"credit",rows:"1"},domProps:{value:e.body.credit},on:{input:function(t){t.target.composing||e.$set(e.body,"credit",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",{attrs:{for:"search_text"}},[e._v("Tags")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.search_text,expression:"body.search_text"}],attrs:{id:"search_text",rows:"1"},domProps:{value:e.body.search_text},on:{input:function(t){t.target.composing||e.$set(e.body,"search_text",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",{attrs:{for:"source_caption"}},[e._v("Background\n            "),r("div",{staticClass:"m-tooltip"},[r("res-button",{attrs:{id:"edit-background-button",paddingless:""}},[r("res-icon",{attrs:{name:"tooltip"}}),e._v(" "),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{placement:"bottom-start",for:"edit-background-button",design:"dark"}},[e._v("\n                Use this for context about the image. This text will not be visible to audiences.\n              ")])],1)]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.source_caption,expression:"body.source_caption"}],attrs:{id:"source_caption"},domProps:{value:e.body.source_caption},on:{input:function(t){t.target.composing||e.$set(e.body,"source_caption",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",{attrs:{for:"usage_rights"}},[e._v("Image rights")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.body.usage_rights,expression:"body.usage_rights"}],attrs:{id:"usage_rights",type:"text"},domProps:{value:e.body.usage_rights},on:{input:function(t){t.target.composing||e.$set(e.body,"usage_rights",t.target.value)}}})])],1),e._v(" "),r("res-button",{staticClass:"m-assets__drawer--submit-button",attrs:{design:"primary"},on:{click:function(t){return e.uploadAsset()}}},[r("res-icon",{attrs:{name:"upload"}}),e._v(" "),r("button",[e._v("Upload")])],1)],1)]):e._e()])},a=[]},2:function(e,t){},3:function(e,t){},"3Kdi":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("TDoK")),a=p(r("kh36")),i=r("L2JU"),s=p(r("DraD")),o=p(r("8NA3")),l=p(r("8pkX")),u=p(r("+Q8c")),d=p(r("k+GJ")),c=p(r("fsDA")),m=r("maTt"),f=r("hb94");function p(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g={components:{CommunitySelect:s.default,Dashboard:o.default,ConfirmDeleteAsset:l.default,Message:c.default,AppLoader:u.default,AppDrawer:d.default},data:()=>({entitlements:[]}),computed:y(y(y({},(0,i.mapState)(["currentSidebar"])),(0,i.mapGetters)(["activeMemberships"])),{},{communityId(){return this.$route.query.community_id?parseInt(this.$route.query.community_id):this.getExternalCommunityId()},allowedRoles(){return this.$root.config.policyRoles.app.access}}),created(){document.title="Assets | "+this.$root.config.appName},apollo:{currentUser:{query:m.CurrentUser,result(e){let{data:t}=e;this.$store.commit(n.SET_CONTEXT,{user:t.currentUser})}},community:{query:()=>f.CurrentCommunity,result(e){let{data:t}=e;this.$store.commit(n.SET_CONTEXT,{community:t.community}),this.getEntitlements()},skip(){return!this.communityId},variables(){return{id:this.communityId}}}},methods:{async getEntitlements(){this.entitlements=await(0,a.default)("/api/entitlements?communityId="+this.communityId),this.$store.commit(n.SET_CONTEXT,{entitlements:this.entitlements})}}};t.default=g,e.exports=t.default},4:function(e,t){},"4IoL":function(e,t,r){"use strict";var n=u(r("Kw5r")),a=u(r("Hhwo")),i=u(r("ozxN")),s=u(r("FIZE")),o=u(r("SdQN"));r("bREV");var l=r("YbFx");function u(e){return e&&e.__esModule?e:{default:e}}new n.default({router:i.default,store:(0,s.default)(o.default),el:"#app",apolloProvider:l.apolloProvider,ignoredElements:res.manifest.tags.all,data:()=>({config:o.default}),render:e=>e(a.default)})},"4khC":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-community-select__menu-wrap",style:e.fullHeight},[e.networks?r("ul",{staticClass:"m-community-select__list"},[e._l(e.networks,(function(t){return[1===t.communities.length?r("community-cell",{key:t.name,attrs:{community:t.communities[0],defaultLogoUrl:e.defaultLogoUrl,selectionId:e.selectionId},on:{communityId:function(t){return e.selectCommunity(t)}}}):r("ul",{key:t.name,staticClass:"m-community-select__list"},[r("li",{staticClass:"m-community-select__network",class:e.expandedNetworks[t.id]?"is-expanded":"is-collapsed"},[r("div",{staticClass:"m-community-select__item",on:{click:function(r){return r.preventDefault(),e.expandNetwork(t.id)}}},[r("div",{staticClass:"m-community-select__avatar"},[t.logo?r("div",{domProps:{innerHTML:e._s(t.logo)}}):r("img",{staticClass:"m-community-select__icon",staticStyle:{height:"20px"},attrs:{src:e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(t.name))]),e._v(" "),r("res-icon",{attrs:{size:"medium",name:"add-circle"}}),e._v(" "),r("res-icon",{attrs:{size:"medium",name:"minus-circle"}})],1),e._v(" "),r("ul",{staticClass:"m-community-select__sub-list"},e._l(t.communities,(function(t){return r("community-cell",{key:t.id,attrs:{community:t,defaultLogoUrl:e.defaultLogoUrl,selectionId:e.selectionId},on:{communityId:function(t){return e.selectCommunity(t)}}})})),1)])])]}))],2):e._e()])},a=[]},5:function(e,t){},"5eCQ":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"m-community-select__menu-trigger",on:{click:function(t){return t.preventDefault(),e.toggleMenu(t)}}},[r("div",{staticClass:"m-community-select__lockup",class:{"is-open":e.menuOpen&&e.hasMenu,"m-community-select__lockup--openable":e.hasMenu}},[r("div",{staticClass:"m-community-select__avatar"},[r("img",{staticClass:"m-community-select__icon",attrs:{src:e.community.faviconUrl||e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(e.community.name))])])]),e._v(" "),e.networks&&e.networks.length?r("community-menu",{ref:"communityMenu",staticClass:"m-community-select__menu",class:{"is-active":e.menuOpen},attrs:{allowedRoles:e.allowedRoles,activeMemberships:e.activeMemberships,defaultLogoUrl:e.defaultLogoUrl,networks:e.networks,menuOpen:e.menuOpen},on:{closeMenu:e.closeMenu}}):e._e()],1)},a=[]},6:function(e,t){},"6fkZ":function(e,t,r){"use strict";t.ALT_TEXT_OVER_LIMIT="Alt text is currently limited to {alt_text_limit} characters. Please try again.",t.APPLE_NEWS_MEMBERS_ONLY_WARNING="This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.",t.COMMUNITY_CHANGED="This {docLabel} has been moved!",t.CSV_TOO_LARGE="This CSV is too large. Please upload a file under 1 MB.",t.DATA_LINKS_ERROR="Suggestions timed out. Try again or add links manually.",t.DRAFT_HERMANO_RECORD="This {record} is a draft; it will be published automatically when this {docLabel} is published.",t.EMBARGOED="This story is embargoed.",t.HIDDEN="This story is hidden.",t.FEEDBACK_SENT="Message sent!",t.FILE_TOO_LARGE="Files must be under 100 MB.",t.GETTY_API_DOWN="Getty image search is unavailable. Please try again later.",t.GIF_IN_IMAGE_CARD="GIFs cannot be published with {type} cards. Choose another?",t.GIF_TOO_LARGE="This GIF is over {size} MB and will block this story from publishing to {platforms}.",t.IMAGE_IN_GALLERY="This image is already included in the gallery. Choose another?",t.IMAGE_TOO_LARGE="Images must be under 10,000 x 10,000 pixels.",t.INVALID_LINK_MESSAGE="Please enter a valid URL.",t.INVALID_SPREADSHEET_URL="Please add a valid public Google Sheet URL and try again.",t.INVALID_STREAM_MEMBERSHIP="This type of story cannot be added.",t.MERLIN_API_DOWN="Merlin image search is unavailable. Please try again later.",t.MISSING_LEGACY_ENTRY='Editing is disabled because a more recent version of this story may exist. &nbsp;<a href="https://www.chorus.help/hc/en-us/requests/new">Contact us for help.</a>',t.NETWORK_ASSETS_ACCESS_DENIED="You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.",t.NEW_USER_MESSAGE='Welcome to Chorus! &nbsp;<a href="{url}">Check out our getting started guide.</a>',t.OEMBED_GENERIC_ERROR="Something went wrong. Make sure this embed is shareable and try again.",t.OEMBED_INSECURE_ERROR="This embed URL is insecure. Only HTTPS embeds are supported.",t.OEMBED_SUPPORT_ERROR="Embeds from this source are not supported at this time.",t.OEMBED_PDF_SUPPORT_ERROR="PDFs must be under 10 MB.",t.OEMBED_YOUTUBE_SUPPORT_ERROR="Embeds are disabled for this video by the YouTube account owner.",t.PLAGSCAN_ERROR="An error occurred. Please try scanning the story again.",t.PLAGSCAN_LOW_WORD_COUNT="You can scan this story once it's over 50 words.",t.PLAGSCAN_OUT_OF_DATE="The latest version of this story has not been scanned.",t.PLAGSCAN_RETRIEVED="A report has been generated for this story.",t.PLAGSCAN_SUBMITTED="A report is being generated.",t.PLAGSCAN_UNSCANNED="Submit the story for approval to generate a report.",t.PUBLISH_PACKAGE_ACTIVE_MESSAGE="Your stories are being {action}...",t.PUBLISH_PACKAGE_WARNING_MESSAGE="{gerund} this landing page will {verb} all drafts in this package.",t.PYM_EMBED_GENERIC_ERROR="Something went wrong. Make sure this Pym.js embed is shareable and try again.",t.PYM_EMBED_INSECURE_ERROR="This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.",t.PYM_EMBED_SUPPORT_ERROR="Pym.js embeds from this source are not supported at this time.",t.REALTIME_ERROR="Autosave failed. Please reload your browser.",t.RECONNECT_ERROR="Something went wrong reconnecting. Please reload your browser.",t.RECONNECTING="Reconnecting...",t.RELOAD_REQUIRED="Please reload to get the latest updates.",t.RELOAD_STALE_TAB="You've been away for a while, please reload.",t.REQUIRED_FIELD="This field is required.",t.RESCUE_SAVED_REASSURE='Your work has been saved in &nbsp;<a href="{url}">this version.</a>',t.SEND_TO_PRINT_SUCCESS="Sent to print!",t.SHEET_PERMISSIONS="Please make the Google Sheet public to continue.",t.STRUCTURED_TAGS_ERROR="Suggestions timed out. Try again or add tags manually.",t.TOO_MANY_EDITORS="More than 10 editors at a time is not recommended.",t.UNEXPECTED="An error occurred. Try again or reload your browser.",t.UNSAVED_WARNING="Your changes are still being saved; leaving now could cause data loss!",t.UNSUPPORTED_ASSET_TYPE='This format is not supported. <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">Learn more about supported file formats.</a>',t.UPLOAD_INVALID_FILE='At least one of the uploaded files is not supported. Please review supported <a href="https://www.chorus.help/hc/en-us/articles/360010240753">image</a> and <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">file</a> formats and try again.',t.UPLOAD_TOO_MANY_FILES="One file at a time, please."},7:function(e,t){},"7GCv":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("+dt3"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("vR7T");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"7HDv":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("zBkF"))&&n.__esModule?n:{default:n};function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={name:"Message",computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,r("L2JU").mapState)("messageBanner",["notifications"])),created(){this.$store.state.messageBanner||this.$store.registerModule("messageBanner",a.default)},methods:{designForNotice:e=>e.type||"neutral",deleteNotice(e){this.$store.commit("messageBanner/DELETE_NOTICE",e.id)}}};t.default=o,e.exports=t.default},"7evd":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("poHX"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("LrdS");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},8:function(e,t){},"8NA3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("tqrT"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("Ifta");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"8pkX":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("CAOY"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("RFcH");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},9:function(e,t){},"9dd1":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={namespaced:!0,state:{loading:!1},mutations:{SET_LOADING(e,t){e.loading=Boolean(t)}}};t.default=n,e.exports=t.default},CAOY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{networkName:{type:String,required:!0}},data:()=>({text:""}),methods:{confirmDeleteAsset(){this.resetAndClose(),this.$store.commit("SET_DELETE_PENDING",!0),this.$store.dispatch("confirmDeleteAsset")},cancelDeleteAsset(){this.resetAndClose(),this.$store.dispatch("cancelDeleteAsset")},resetAndClose(){this.text="",this.$refs.confirmDeleteAssetResModal.open=!1}}};t.default=n,e.exports=t.default},"DM+t":function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"Cards",components:{Card:((n=r("7evd"))&&n.__esModule?n:{default:n}).default},props:{assets:{type:Array,default:function(){return[]}},isMobile:{type:Boolean,default:!1},currentUserId:{type:Number,required:!0},canDeleteAssets:{type:Boolean,default:!1},hasImagePlaceholder:{type:Boolean,default:!1}}};t.default=a,e.exports=t.default},DraD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Wdcv"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("5eCQ");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},E3JT:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("res-table",{staticClass:"m-dashboard__table m-assets__table",attrs:{mobile:e.isMobile,zebra:""}},[r("table",[r("thead",[r("tr",[r("th",{staticClass:"m-assets__table__header-image"}),e._v(" "),r("th",{staticClass:"m-assets__table__header-updated-at",attrs:{int:""}},[e._v("Date modified")]),e._v(" "),r("th",{staticClass:"m-assets__table__header-filename"},[e._v("Filename")]),e._v(" "),r("th",{staticClass:"m-assets__table__header-credit"},[e._v("Credit")]),e._v(" "),r("th",{staticClass:"m-assets__table__header-tags"},[e._v("Tags")]),e._v(" "),r("th",{staticClass:"m-assets__table__header-copy-url"},[e._v("URL")]),e._v(" "),e.canDeleteAssets?r("th",{staticClass:"m-assets__table__header-action",attrs:{align:"center"}}):e._e()])]),e._v(" "),r("tbody",e._l(e.assets,(function(t,n){return r("asset",{key:t.id,attrs:{asset:t,index:n,isMobile:e.isMobile,currentUserId:e.currentUserId,canDeleteAssets:e.canDeleteAssets,hasImagePlaceholder:e.hasImagePlaceholder}})})),1)])])},a=[]},FIZE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r("Kw5r")),a=l(r("L2JU")),i=l(r("eoKz")),s=l(r("YM4q")),o=l(r("rbvQ"));function l(e){return e&&e.__esModule?e:{default:e}}n.default.use(a.default);t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new a.default.Store({state:Object.assign({allowFileUploads:!1,loading:!1,deletePending:!1,deleteInProgress:!1,deleteCompleted:!1,assetToDelete:{},currentUser:{id:null,networkRoles:[],memberships:[],roles:[]},currentCommunity:{id:null,name:null},entitlements:null,message:{type:null,text:null},assets:[],editAsset:{},editImage:{},isEditing:!1,currentSidebar:{type:null,id:null,childProps:null},index:null,editingList:[],show_metadata:!1,showHighlight:!1},e),actions:i.default,getters:o.default,mutations:s.default,modules:{}})},e.exports=t.default},Fw7v:function(e,t,r){"use strict";var n=r("rE/H"),a=r("gjeX");e.exports=function(e){return a(n(e))}},H71G:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-assets__cards"},[e._l(e.assets,(function(t,n){return r("card",{key:t.id,attrs:{asset:t,index:n,currentUserId:e.currentUserId,canDeleteAssets:e.canDeleteAssets,hasImagePlaceholder:e.hasImagePlaceholder}})})),e._v(" "),r("i",{staticClass:"m-assets__cards__card",staticStyle:{border:"none"},attrs:{"aria-hidden":"true"}}),e._v(" "),r("i",{staticClass:"m-assets__cards__card",staticStyle:{border:"none"},attrs:{"aria-hidden":"true"}}),e._v(" "),r("i",{staticClass:"m-assets__cards__card",staticStyle:{border:"none"},attrs:{"aria-hidden":"true"}}),e._v(" "),r("i",{staticClass:"m-assets__cards__card",staticStyle:{border:"none"},attrs:{"aria-hidden":"true"}}),e._v(" "),r("i",{staticClass:"m-assets__cards__card",staticStyle:{border:"none"},attrs:{"aria-hidden":"true"}})],2)},a=[]},HfYJ:function(e,t,r){"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={[function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r("aZOI")).SET_CONTEXT](e,t){let{community:r,user:n,entitlements:a}=t;r&&r.id&&r.network&&(e.currentCommunity=r,Object.keys(r.network).length&&(e.network=r.network)),n&&(e.currentUser=n),void 0!==a&&(e.entitlements=a)}};t.default=a,e.exports=t.default},Hhwo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("3Kdi"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("xeP5");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},Ifta:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"m-assets"},[r("header",{staticClass:"m-assets__header"},[r("div",{staticClass:"m-assets__header-search"},[r("res-input",{attrs:{block:""}},[r("label",[e._v("Search")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.query,expression:"query",modifiers:{lazy:!0}}],attrs:{type:"search",name:"q",placeholder:"Title, Tags, Type, Background, Updated by..."},domProps:{value:e.query},on:{input:function(t){return e.clearSearchQuery(t.target.value)},change:function(t){e.query=t.target.value}}}),e._v(" "),r("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1)],1),e._v(" "),r("div",{staticClass:"m-assets__header__buttons"},[r("res-switch",{staticClass:"m-assets__header-uploads"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ownUploads,expression:"ownUploads"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ownUploads)?e._i(e.ownUploads,null)>-1:e.ownUploads},on:{change:[function(t){var r=e.ownUploads,n=t.target,a=!!n.checked;if(Array.isArray(r)){var i=e._i(r,null);n.checked?i<0&&(e.ownUploads=r.concat([null])):i>-1&&(e.ownUploads=r.slice(0,i).concat(r.slice(i+1)))}else e.ownUploads=a},e.showMyUploads]}}),e._v(" "),r("label",[e._v("Only show my uploads")])]),e._v(" "),r("res-select",{staticClass:"m-assets__header-select"},[r("label",[e._v("Filter by:")]),e._v(" "),r("select",{attrs:{name:"category"},domProps:{value:e.category},on:{change:function(t){return e.onCategoryChange(t.target.value)}}},e._l(e.availableCategories,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v("\n            "+e._s(t.title)+"\n          ")])})),0)]),e._v(" "),r("res-toggle-buttons",{staticClass:"m-assets__header-toggle-button"},[r("res-button",{attrs:{active:e.displayGrid,value:"1"},on:{click:function(t){return e.toggleGrid(!0)}}},[r("res-icon",{attrs:{name:"list"}}),r("button")],1),e._v(" "),r("res-button",{attrs:{active:!e.displayGrid,value:"2"},on:{click:function(t){return e.toggleGrid(!1)}}},[r("res-icon",{attrs:{name:"grid"}}),r("button")],1)],1)],1)]),e._v(" "),r("div",{staticClass:"m-assets__sub-head"},[r("div",{staticClass:"m-dashboard__sub-head__title"},[r("h1",[e._v("Assets")]),e._v(" "),r("res-button",{staticClass:"m-l-1",attrs:{type:"default",paddingless:""}},[r("res-icon",{attrs:{size:"small",name:"back"}}),e._v(" "),r("a",{attrs:{href:"/?community_id="+e.currentCommunity.id,rel:"external"}},[e._v("\n          Back to dashboard\n        ")])],1)],1),e._v(" "),r("res-button",{attrs:{design:"primary"},on:{click:function(t){return t.preventDefault(),e.uploadAsset()}}},[r("res-icon",{attrs:{name:"upload"}}),e._v(" "),r("button",[e._v("Upload asset")])],1)],1),e._v(" "),e.displayResultsInfo?r("div",{staticClass:"m-dashboard__sub-head__summary"},[0===e.assets.length?r("span",[r("span",{staticClass:"m-dashboard__sub-head--bold"},[e._v("No results")]),e._v(" for\n    ")]):r("span",[r("span",{staticClass:"m-dashboard__sub-head--bold"},[e._v(e._s(e.pagination.totalCount))]),e._v(" "+e._s(e.pagination.totalCount>1?"results":"result")+" for\n    ")]),e._v("\n    "+e._s(e.query)+"\n  ")]):e._e(),e._v(" "),e.currentUserId&&e.currentComponent?r(e.currentComponent,{tag:"component",attrs:{assets:e.assets,isMobile:e.isMobile,currentUserId:e.currentUserId,canDeleteAssets:e.canDeleteAssets,hasImagePlaceholder:e.currentCommunity.hasImagePlaceholder}}):e._e(),e._v(" "),r("footer",{staticClass:"m-dashboard__footer"},[e.pagination?r("div",{staticClass:"m-dashboard__footer__pagination m-assets__footer__pagination"},[r("res-pagination",{attrs:{id:"assets-pagination",count:e.pagination.totalCount,display:e.perPage,ticks:e.ticks,page:e.page,indicator:"page",navigation:"text"},on:{click:function(t){return e.paginate()}}})],1):e._e()])],1)},a=[]},J3nE:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AssetsByCommunityId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"communityId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"perPage"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deleted"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sources"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AssetSource"}}}},defaultValue:{kind:"ListValue",values:[{kind:"EnumValue",value:"URL"},{kind:"EnumValue",value:"UPLOAD"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"chorusAssetsPage"},name:{kind:"Name",value:"searchAssets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"communityId"},value:{kind:"Variable",name:{kind:"Name",value:"communityId"}}},{kind:"ObjectField",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"ObjectField",name:{kind:"Name",value:"pageNumber"},value:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}}},{kind:"ObjectField",name:{kind:"Name",value:"perPage"},value:{kind:"Variable",name:{kind:"Name",value:"perPage"}}},{kind:"ObjectField",name:{kind:"Name",value:"deleted"},value:{kind:"Variable",name:{kind:"Name",value:"deleted"}}},{kind:"ObjectField",name:{kind:"Name",value:"sources"},value:{kind:"Variable",name:{kind:"Name",value:"sources"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"LATEST"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fileName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"credit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"searchText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contentType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullOrUserName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"communityId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AssetsByNetworkId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"networkId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"perPage"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deleted"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sources"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AssetSource"}}}},defaultValue:{kind:"ListValue",values:[{kind:"EnumValue",value:"URL"},{kind:"EnumValue",value:"UPLOAD"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"chorusAssetsPage"},name:{kind:"Name",value:"searchAssets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"networkId"},value:{kind:"Variable",name:{kind:"Name",value:"networkId"}}},{kind:"ObjectField",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}},{kind:"ObjectField",name:{kind:"Name",value:"pageNumber"},value:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}}},{kind:"ObjectField",name:{kind:"Name",value:"perPage"},value:{kind:"Variable",name:{kind:"Name",value:"perPage"}}},{kind:"ObjectField",name:{kind:"Name",value:"deleted"},value:{kind:"Variable",name:{kind:"Name",value:"deleted"}}},{kind:"ObjectField",name:{kind:"Name",value:"sources"},value:{kind:"Variable",name:{kind:"Name",value:"sources"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"LATEST"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fileName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"credit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"searchText"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contentType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullOrUserName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"communityId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"networkId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1410}};r.loc.source={body:"query AssetsByCommunityId($communityId: Int!, $query: String, $pageNumber: Int, $perPage: Int, $deleted: Boolean, $sources: [AssetSource!] = [URL, UPLOAD]) {\n  chorusAssetsPage: searchAssets(query: {\n    communityId: $communityId,\n    query: $query,\n    pageNumber: $pageNumber,\n    perPage: $perPage,\n    deleted: $deleted\n    sources: $sources,\n    sort: LATEST\n  }) {\n    results {\n      id\n      updatedAt\n      url\n      thumbnailUrl\n      title\n      fileName\n      caption {\n        html\n      }\n      credit {\n        html\n      }\n      searchText\n      contentType\n      type\n      user {\n        id\n        fullOrUserName\n      }\n      communityId\n    }\n    pageNumber\n    totalCount\n  }\n}\n\nquery AssetsByNetworkId($networkId: Int!, $query: String, $pageNumber: Int, $perPage: Int, $deleted: Boolean, $sources: [AssetSource!] = [URL, UPLOAD]) {\n  chorusAssetsPage: searchAssets(query: {\n    networkId: $networkId,\n    query: $query,\n    pageNumber: $pageNumber,\n    perPage: $perPage,\n    deleted: $deleted,\n    sources: $sources,\n    sort: LATEST\n  }) {\n    results {\n      id\n      updatedAt\n      url\n      thumbnailUrl\n      title\n      fileName\n      caption {\n        html\n      }\n      credit {\n        html\n      }\n      searchText\n      contentType\n      type\n      user {\n        id\n        fullOrUserName\n      }\n      communityId\n      networkId\n    }\n    pageNumber\n    totalCount\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}function i(e,t){var r={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var i=n[t]||new Set,s=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(t){var n=a(e,t);n&&r.definitions.push(n)})),r}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,r)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,r)})),t.definitions&&t.definitions.forEach((function(t){e(t,r)}))}(e,t),n[e.name.value]=t}})),e.exports=r,e.exports.AssetsByCommunityId=i(r,"AssetsByCommunityId"),e.exports.AssetsByNetworkId=i(r,"AssetsByNetworkId")},JmtY:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentSidebarTag?r("div",{staticClass:"p-modal",attrs:{id:"modal"}},[r("section",{staticClass:"p-modal__content"},[e.currentSidebar.title?r("div",{staticClass:"m-field-group__subsection"},[r("div",{staticClass:"title"},[e._v(e._s(e.currentSidebar.title))])]):e._e(),e._v(" "),r(e.currentSidebarTag,{tag:"component",attrs:{id:e.currentSidebar.id,childProps:e.currentSidebar.childProps}})],1),e._v(" "),r("res-button",{staticClass:"p-modal__close",attrs:{design:"default"}},[r("res-icon",{attrs:{name:"x"}}),e._v(" "),r("button",{attrs:{type:"button"},on:{click:e.closeModal}},[e._v("Close")])],1),e._v(" "),"asset-upload"===e.currentSidebar.type&&e.show_metadata?r("res-button",{staticClass:"p-modal__back",attrs:{design:"default"}},[r("res-icon",{attrs:{name:"left"}}),e._v(" "),r("button",{on:{click:e.goBack}},[e._v("Back")])],1):e._e()],1):e._e()},a=[]},"K+3G":function(e,t,r){"use strict";function n(e){Error.call(this);var t="GraphQL errors returned. "+e.length+" errors occurred";"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=new Error(t).stack,this.message=t,this.data=e,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n;var a=n;t.default=a,e.exports=t.default},LrdS:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-assets__cards__card",class:[{"is-leaving":e.deleteCompleted&&e.assetToDelete.id===e.asset.id},{"m-assets__assets-edited":e.editingAsset.id===e.asset.id},{"m-assets__assets-edited":e.asset.hasOwnProperty("search_text")&&e.showHighlight}]},[r("a",{attrs:{href:e.asset.url,rel:"external",target:"_blank"}},["image"===e.asset.type.toLowerCase()?r("div",{staticClass:"m-assets__cards__card-image",style:e.setBackgroundImage()}):"file"===e.asset.type.toLowerCase()?r("div",[r("div",{staticClass:"m-assets__cards__card-image p-flex p-flex--justify-center p-flex--align-center"},[r("res-icon",{attrs:{name:"text-block",size:"large"}})],1)]):"audio"===e.asset.type.toLowerCase()?r("div",[r("div",{staticClass:"m-assets__cards__card-image p-flex p-flex--justify-center p-flex--align-center"},[r("res-icon",{attrs:{name:"volume-high",size:"large"}})],1)]):e._e()]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-info"},[r("div",{staticClass:"m-assets__cards__card-label"},[e._v("Date modified")]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-text"},[e._v(e._s(e.formatDate(e.asset.updatedAt)))]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-label"},[e._v("Filename")]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-text m-assets__cards__card-filename",attrs:{role:"button"},on:{click:function(t){return t.preventDefault(),e.editAsset(t,e.asset.type)}}},[e._v(e._s(e.assetName))]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-label"},[e._v("Credit")]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-text"},[e._v(e._s(e.asset.credit))]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-label"},[e._v("Tags")]),e._v(" "),r("div",{staticClass:"m-assets__cards__card-text"},[e._v(e._s(e.asset.searchText))]),e._v(" "),e.canDeleteAssets?r("div",{staticClass:"m-assets__cards__card-action"},[e.deleteInProgress&&!e.deleteCompleted&&e.assetToDelete.id==e.asset.id?r("div",[e._v("\n        Deleting\n      ")]):r("div",[e.canDeleteAsset?r("div",[r("button",{staticClass:"m-assets__pointer",attrs:{id:"button-"+e.index,disabled:e.deleteCompleted&&e.assetToDelete.id===e.asset.id}},[r("res-icon",{attrs:{size:"medium",title:"Menu",name:"more",animated:"false"}})],1),e._v(" "),r("res-dropdown",{attrs:{for:"button-"+e.index,placement:"left"}},["image"===e.asset.type.toLowerCase()?r("button",{on:{click:function(t){return t.preventDefault(),e.editAsset(t,e.asset.type)}}},[r("res-icon",{attrs:{name:"edit",size:"small"}}),e._v("\n              Edit\n            ")],1):e._e(),e._v(" "),r("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.copyImageUrl(t,e.asset.url)}}},[r("res-icon",{attrs:{name:"copy",size:"small"}}),e._v("\n              Copy URL\n            ")],1),e._v(" "),r("button",{attrs:{"res-modal-open":"confirmDeleteAssetResModal"},on:{click:function(t){return e.prepDelete()}}},[r("res-icon",{attrs:{name:"trash",size:"small"}}),e._v("\n              Delete\n            ")],1)])],1):e._e()])]):e._e()])])},a=[]},OCVP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("dJXR"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("1yNl");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},PdIs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={components:{CommunityCell:((n=r("+w+W"))&&n.__esModule?n:{default:n}).default},props:{allowedRoles:{type:Object,required:!0},activeMemberships:{type:Array,default:()=>[]},defaultLogoUrl:{type:String,required:!0},networks:{type:Array,default:null},menuOpen:{type:Boolean,required:!0}},data:()=>({selectionId:null,expandedNetworks:{},fullHeight:null}),computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapState)(["currentUser"])),mounted(){this.setHeight(),window.addEventListener("click",this.closeMenu,!0),window.addEventListener("resize",this.setHeight)},beforeDestroy(){window.removeEventListener("click",this.closeMenu,!0),window.removeEventListener("resize",this.setHeight)},methods:{closeMenu(e){if(!e)return;const t=document.querySelector(".m-community-select__list"),r=document.querySelector(".m-community-select__menu-trigger");!this.menuOpen||t.contains(e.target)||r.contains(e.target)||this.$emit("closeMenu")},setHeight(){this.fullHeight=`height: ${window.innerHeight}px`},expandNetwork(e){this.expandedNetworks[e]=!this.expandedNetworks[e],this.expandedNetworks=Object.assign({},this.expandedNetworks)},isAuthorized(e){return this.currentUser.networkRoles.some(e=>e in this.allowedRoles)||this.activeMemberships.some(t=>t.community.id===e)},async selectCommunity(e){e&&(e&&e===this.selectionId||0===this.activeMemberships.length&&0===this.currentUser.networkRoles.length||(this.isAuthorized(e)||(e=this.activeMemberships[0].community.id),this.selectionId=e,localStorage.setItem("dashboardCommunityId",e),this.$router.push({query:{community_id:e}}),this.$emit("closeMenu")))}}};t.default=o,e.exports=t.default},RFcH:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("res-modal",{ref:"confirmDeleteAssetResModal",attrs:{id:"confirmDeleteAssetResModal",background:"darken"}},[r("div",[r("p",[e._v("Are you sure you want to delete this asset?")]),e._v(" "),r("p",[e._v("This will permanently delete the file from the "+e._s(e.networkName)+" network and remove it from any related stories.")]),e._v(" "),r("p",[e._v("This action can’t be undone. Please type “DELETE” to confirm.")]),e._v(" "),r("form",{on:{submit:function(t){return e.confirmDeleteAsset()}}},[r("res-input",{staticClass:"m-b-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],attrs:{type:"text"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}})])],1),e._v(" "),r("res-button",{attrs:{disabled:"DELETE"!==e.text,design:"primary"}},[r("button",{staticClass:"is-primary",attrs:{type:"button"},on:{click:function(t){return e.confirmDeleteAsset()}}},[e._v("Delete")])]),e._v(" "),r("res-button",[r("button",{staticClass:"is-secondary",attrs:{type:"button"},on:{click:function(t){return e.cancelDeleteAsset()}}},[e._v("Cancel")])])],1)])},a=[]},RzfP:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",{class:["m-dashboard__table__row",{"is-leaving":e.deleteCompleted&&e.assetToDelete.id===e.asset.id},{"m-assets__assets-edited":e.editingAsset.id===e.asset.id},{"m-assets__assets-edited":e.asset.hasOwnProperty("search_text")&&e.showHighlight}]},[r("td",{staticClass:"m-assets__table__image"},[r("a",{attrs:{href:e.asset.url,rel:"external",target:"_blank"}},["image"===e.asset.type.toLowerCase()?r("div",{staticClass:"m-assets__table__table-image",style:e.setBackgroundImage()}):"file"===e.asset.type.toLowerCase()?r("div",{staticClass:"m-assets__table__table-file"},[r("res-icon",{attrs:{name:"text-block",size:"large"}})],1):"audio"===e.asset.type.toLowerCase()?r("div",{staticClass:"m-assets__table__table-file"},[r("res-icon",{attrs:{name:"volume-high",size:"large"}})],1):e._e()])]),e._v(" "),e.isMobile?r("td",{staticClass:"m-assets__table__updated-at",attrs:{"data-heading":"Date modified"}},[e._v("\n    "+e._s(e.formatDateAndTime(e.asset.updatedAt))+"\n  ")]):r("td",[e._v(e._s(e.formatDate(e.asset.updatedAt))),r("br"),e._v(e._s(e.formatTime(e.asset.updatedAt)))]),e._v(" "),r("td",{staticClass:"m-assets__table__filename",attrs:{role:"button","data-heading":"Filename"},on:{click:function(t){return t.preventDefault(),e.editAsset(t,e.asset.type)}}},[e._v("\n    "+e._s(e.assetName)+"\n  ")]),e._v(" "),r("td",{staticClass:"m-assets__table__credit",attrs:{"data-heading":"Credit"}},[e._v("\n    "+e._s(e.asset.credit)+"\n  ")]),e._v(" "),r("td",{staticClass:"m-assets__table__tags",attrs:{"data-heading":"Tags"}},[r("div",[e._v("\n      "+e._s(e.asset.searchText)+"\n    ")])]),e._v(" "),r("td",{staticClass:"m-assets__table__copy-url"},[r("res-button",{on:{click:function(t){return t.preventDefault(),e.copyImageUrl(t,e.asset.url)}}},[r("res-icon",{attrs:{name:"copy",size:"large"}}),e._v(" "),r("button")],1)],1),e._v(" "),e.canDeleteAssets?r("td",{staticClass:"m-assets__table__action"},[e.deleteInProgress&&!e.deleteCompleted&&e.assetToDelete.id==e.asset.id?r("div",[e._v("\n      Deleting\n    ")]):r("div",[e.canDeleteAsset?r("div",[r("button",{staticClass:"m-assets__pointer",attrs:{id:"button-"+e.index,disabled:e.deleteCompleted&&e.assetToDelete.id===e.asset.id}},[r("res-icon",{attrs:{size:"medium",title:"Menu",name:"more",animated:"false"}})],1),e._v(" "),r("res-dropdown",{staticStyle:{"z-index":"2"},attrs:{for:"button-"+e.index,placement:"left"}},["image"===e.asset.type.toLowerCase()?r("button",{on:{click:function(t){return t.preventDefault(),e.editAsset(t,e.asset.type)}}},[r("res-icon",{attrs:{name:"edit",size:"small"}}),e._v("\n            Edit\n          ")],1):e._e(),e._v(" "),r("button",{attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.copyImageUrl(t,e.asset.url)}}},[r("res-icon",{attrs:{name:"copy",size:"small"}}),e._v("\n            Copy URL\n          ")],1),e._v(" "),r("button",{attrs:{"res-modal-open":"confirmDeleteAssetResModal"},on:{click:function(t){return e.prepDelete()}}},[r("res-icon",{attrs:{name:"trash",size:"small"}}),e._v("\n            Delete\n          ")],1)])],1):e._e()])]):e._e()])},a=[]},SNZc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("PdIs"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("4khC");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},SdQN:function(e,t,r){"use strict";const n=document.querySelector('script[type="config"]'),a=JSON.parse(n.textContent);e.exports=a},TDoK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("aZOI");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},V8PI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return["PUBLISHED","UPDATED"].includes(e)},e.exports=t.default},WNsF:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={components:{Asset:((n=r("uKLD"))&&n.__esModule?n:{default:n}).default},props:{assets:{type:Array,default:function(){return[]}},isMobile:{type:Boolean,default:!1},currentUserId:{type:Number,required:!0},canDeleteAssets:{type:Boolean,default:!1},hasImagePlaceholder:{type:Boolean,default:!1}}};t.default=a,e.exports=t.default},Wdcv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=i(r("iUff"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={components:{CommunityMenu:i(r("SNZc")).default},props:{value:{type:Number},community:{type:Object,required:!0},user:{type:Object,required:!0},allowedRoles:{type:Object,required:!0},activeMemberships:{type:Array,default:()=>[]}},data:()=>({menuOpen:!1}),computed:o(o({},(0,n.mapState)(["defaultLogoUrl"])),{},{networks(){return(0,a.default)(this.activeMemberships)},hasMenu(){return this.networks.length>1||this.networks.some(e=>e.communities.length>1)}}),watch:{value(){this.$refs.communityMenu&&this.$refs.communityMenu.selectCommunity(this.value)}},methods:{closeMenu(){this.menuOpen=!1},toggleMenu(){this.menuOpen=!this.menuOpen}}};t.default=u,e.exports=t.default},Xbgq:function(e,t,r){"use strict";function n(e,t){Error.call(this),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=new Error(e).stack,this.message=e,this.response=t,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n;var a=n;t.default=a,e.exports=t.default},Xful:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("WNsF"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("E3JT");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"XhB+":function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var{data:n,errors:i}=await s(e,{method:"POST",body:t,opts:a({cache:!0},r)});if(!n&&i)throw new o(i);return n};var s=r("kh36"),o=r("K+3G");e.exports=t.default},Xv6j:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("9dd1"))&&n.__esModule?n:{default:n},i=r("L2JU");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"AppLoader",props:{iconName:{type:String,default:"loading"},animation:{type:String,default:"spin"}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,i.mapState)("appLoader",["loading"])),created(){this.$store.state.appLoader||this.$store.registerModule("appLoader",a.default)}};t.default=l,e.exports=t.default},YCks:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("7GCv")),a=s(r("OCVP")),i=r("L2JU");function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={name:"AppSidebar",components:{AssetEdit:n.default,AssetUpload:a.default},computed:l(l({},(0,i.mapState)(["currentSidebar","show_metadata"])),{},{currentSidebarTag(){return this.currentSidebar.type||null}}),watch:{currentSidebarTag(){this.currentSidebarTag||this.$store.commit("SET_SIDEBAR",null)}},methods:{closeModal(){"asset-edit"===this.currentSidebar.type&&(this.$store.commit("SET_EDITING_LIST",[]),setTimeout(()=>{this.$store.dispatch("handleEditingStyle")},5e3)),this.$store.commit("SET_SIDEBAR",null)},goBack(){this.$store.dispatch("goBack")}}};t.default=d,e.exports=t.default},YM4q:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("Kw5r"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=s(s({},a(r("HfYJ")).default),{},{SET_DELETE_PENDING(e,t){e.deletePending=t},SET_DELETE_IN_PROGRESS(e,t){e.deleteInProgress=t},SET_DELETE_COMPLETED(e,t){e.deleteCompleted=t},SET_ASSET_TO_DELETE(e,t){e.assetToDelete=t},SET_EDIT_ASSET(e,t){e.editAsset=t},SET_EDIT_IMAGE(e,t){e.editImage=t},SET_ASSETS(e,t){e.assets=t},ADD_ASSETS(e,t){t.forEach(t=>{e.assets.unshift(t)})},SET_SIDEBAR(e,t){if(t&&t.when&&!t.when.test(e.currentSidebar.type))return;const r=t?t.to:null,n=["asset-edit","asset-upload"].includes(r);e.currentSidebar={type:n?r:null,title:n&&t.title||null,id:n&&t.id||null,childProps:n&&t.childProps||null}},SET_EDIT_INDEX(e,t){e.index=t},UPDATE_ASSETS(e,t){t.search_text&&(t.searchText=t.search_text);let r=Object.assign({},e.assets[e.index],t);n.default.set(e.assets,e.index,r)},SET_EDITING_LIST(e,t){e.editingList=t},SET_SHOW_METADATA(e,t){e.show_metadata=t},SET_HIGHLIGHT(e,t){e.showHighlight=t}});t.default=l,e.exports=t.default},YbFx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.towerClient=t.importerClient=t.apolloProvider=void 0,r("Kz25");var n=l(r("Kw5r")),a=l(r("Ui0k")),i=r("dMq0"),s=r("R44f"),o=r("K/JX");function l(e){return e&&e.__esModule?e:{default:e}}let u=new URL(window.location);u.pathname="/api/tower/graphql",u.search="";const d=new s.HttpLink({uri:u.toString(),credentials:"include"}),c=new i.ApolloClient({link:d,cache:new o.InMemoryCache,connectToDevTools:!0,shouldBatch:!0});t.towerClient=c,n.default.use(a.default);const m=new a.default({defaultClient:c});t.apolloProvider=m;let f=new URL(window.location);f.pathname="/api/chorus-import-manager/graphql",f.search="";const p=new i.ApolloClient({link:new s.HttpLink({uri:f.toString(),credentials:"include"}),cache:new o.InMemoryCache,connectToDevTools:!0,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}});t.importerClient=p},aZOI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_CONTEXT=t.ACTIVE_MEMBERSHIPS=void 0;t.SET_CONTEXT="setContext";t.ACTIVE_MEMBERSHIPS="activeMemberships"},bREV:function(e,t,r){"use strict";var n=u(r("Kw5r")),a=u(r("SdQN")),i=l(r("WSEr")),s=l(r("TGyJ"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function u(e){return e&&e.__esModule?e:{default:e}}a.default.sentry&&i.init({dsn:a.default.sentry.dsn,release:a.default.release,environment:a.default.env,integrations:[new s.Vue({Vue:n.default})]})},cfah:function(e,t,r){"use strict";e.exports=function(e){return new Promise((function(t){setTimeout(t,e)}))}},dJXR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"AssetUpload",data:()=>({acceptFileTypes:".gif,.jpeg,.jpg,.png",files:[],body:{title:"",credit:"",search_text:"",source_caption:"",usage_rights:""},remoteFileUrl:null}),computed:{showMetadata(){return this.$store.state.show_metadata}},watch:{showMetadata(e){e||(this.files=[],this.body={title:"",credit:"",search_text:"",source_caption:"",usage_rights:""},this.remoteFileUrl=null,this.setShowMetadata(!1),document.querySelector("#preview").innerHTML="")}},methods:{previewFiles(e){this.setShowMetadata(!0);const t=document.querySelector("#preview");this.files=Array.from(e.target.files||e.dataTransfer.files),this.files&&[].forEach.call(this.files,(async function(e){if(/\.(jpe?g|png|gif|webp)$/i.test(e.name)){let r=new FileReader,n=document.createElement("div");n.className="m-assets__drawer-image",r.addEventListener("load",(function(){n.style.backgroundImage=`url(${this.result})`,t.appendChild(n)}),!1),r.readAsDataURL(e)}}))},uploadAsset(){this.$store.commit("SET_SIDEBAR",null),this.$store.commit("appLoader/SET_LOADING",!0),this.$store.dispatch("uploadAssets",{files:this.files,body:this.body,remoteFileUrl:this.remoteFileUrl}).then(e=>e.json()).then(e=>{if(this.$store.commit("appLoader/SET_LOADING",!1),e.message){let t=e.message.endsWith(".")?""+e.message:e.message+".";this.displayMsg("negative",t)}else if(Array.isArray(e)){let t=1===e.length?"1 asset has been uploaded.":e.length+" assets have been uploaded.";e=e.map(e=>this.formatData(e)),this.$store.dispatch("addAssets",e),this.displayMsg("positive",t,!0,"check")}else e=this.formatData(e),this.$store.dispatch("addAssets",[e]),this.displayMsg("positive","Asset uploaded from a url.",!0,"check");this.resetData()}).catch(e=>{this.$store.commit("appLoader/SET_LOADING",!1);let t=e.message.endsWith(".")?e.message:e.message+".";this.displayMsg("negative","The upload failed. "+t),this.resetData()})},setShowMetadata(e){this.$store.commit("SET_SHOW_METADATA",e)},resetData(){this.files=[],this.body={title:"",credit:"",search_text:"",source_caption:"",usage_rights:""},this.remoteFileUrl=null},displayMsg(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.$store.commit("messageBanner/PUT_NOTICE",{type:e,message:t,timeout:r,icon:n})},formatData:e=>(e.fileName=e.file_name,e.thumbnailUrl=e.thumbnail_url,e.type=e.content_type_category,e.searchText=e.search_text,e)}};t.default=n,e.exports=t.default},eUKB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utilities=void 0;var n,a=(n=r("f0Wu"))&&n.__esModule?n:{default:n};function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o={computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({assetName(){return this.asset.fileName||this.asset.title||"Untitled asset"},canDeleteAsset(){return"IMAGE"===this.type?this.canDeleteAssets&&this.hasImagePlaceholder:this.canDeleteAssets}},(0,r("L2JU").mapState)({deletePending:e=>e.deletePending,deleteInProgress:e=>e.deleteInProgress,deleteCompleted:e=>e.deleteCompleted,assetToDelete:e=>e.assetToDelete,editingAsset:e=>e.editAsset})),methods:{formatDate:e=>(0,a.default)(e).format("MMM D, YYYY"),formatTime:e=>(0,a.default)(e).format("hh:mm A z"),formatDateAndTime:e=>(0,a.default)(e).format("MMM D, YYYY [at] hh:mm A z"),setBackgroundImage(){return{backgroundImage:`url(${this.asset.thumbnailUrl})`}},copyImageUrl(e,t){this.closeDropdown(e),this.copyToClipboard(t)},async copyToClipboard(e){await navigator.clipboard.writeText(e)},closeDropdown(e){let t=e.target;for(;t&&t.tagName;){if(/res-dropdown/i.test(t.tagName))return t.toggle();t=t.parentNode}},prepDelete(){this.$store.commit("SET_DELETE_PENDING",!0),this.$store.commit("SET_ASSET_TO_DELETE",this.asset)},editAsset(e,t){this.closeDropdown(e),"image"===t.toLowerCase()&&(this.$store.commit("SET_SIDEBAR",null),this.$store.dispatch("handleEditing",this.index).then(()=>{this.$store.commit("SET_SIDEBAR",{to:"asset-edit",title:"Edit asset"})}))}}};t.utilities=o},eoKz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("XhB+")),a=o(r("kh36")),i=o(r("V8PI")),s=o(r("6fkZ"));function o(e){return e&&e.__esModule?e:{default:e}}const l=e=>e.type.includes("image")&&"image/svg+xml"!==e.type,u=e=>!l(e);var d={async confirmDeleteAsset(e){let{state:t,commit:r}=e,o=t.assetToDelete;if(t.deletePending){r("SET_DELETE_PENDING",!1),r("SET_DELETE_IN_PROGRESS",!0);try{if("IMAGE"!==o.type)return void await(0,n.default)("/api/tower/graphql",{query:"\n                  mutation RemoveAsset2($id: Int!) {\n                    removeAsset(id: $id) {\n                      id\n                    }\n                  }\n                ",variables:JSON.stringify({id:o.id})});await(0,a.default)("/api/chorus/images/destroy_multiple",{method:"DELETE",query:{community_id:t.currentCommunity.id},body:{chorus_asset_ids:[o.id],user_id:t.currentUser.id,placeholder:!0}});let{docs:e}=await(0,a.default)("/api/content/docs?chorus_asset_ids="+o.id),r=e.filter(e=>"story"===e.schema_name),s=e.filter(e=>"story"!==e.schema_name);for(let e of s){let t=await(0,a.default)("/api/content/docs?schema_name=story&subdoc_ids="+e.id);for(let e of t.docs)r.find(t=>t.id===e.id)||r.push(e)}for(let e of r)(0,i.default)(e.status)&&await(0,a.default)(`/api/content/docs/${e.id}/publish`,{method:"POST",body:{republishPublished:!0}})}catch(e){throw r("messageBanner/PUT_NOTICE",{type:"negative",message:s.default.UNEXPECTED}),e}r("SET_DELETE_IN_PROGRESS",!1),r("SET_DELETE_COMPLETED",!0)}},cancelDeleteAsset(e){let{state:t,commit:r}=e;t.deletePending&&(r("SET_DELETE_PENDING",!1),r("SET_ASSET_TO_DELETE",{}))},async handleEditing(e,t){let{state:r,commit:n}=e,i=await(0,a.default)("api/assets/images/"+r.assets[t].id);n("SET_EDIT_ASSET",r.assets[t]),n("SET_EDIT_IMAGE",i),n("SET_EDIT_INDEX",t),n("SET_EDITING_LIST",[r.assets[t].id])},async updateAsset(e,t){let{state:r,dispatch:n,commit:i}=e;await(0,a.default)("/api/assets/images/"+r.editAsset.id,{method:"PUT",body:t,opts:{handleError:!1}}).then(e=>{i("UPDATE_ASSETS",e),i("SET_EDITING_LIST",[]),i("messageBanner/PUT_NOTICE",{type:"neutral",message:"This asset has been updated.",timeout:!0})}).catch(e=>{console.error("Updating asset failed: ",e),i("messageBanner/PUT_NOTICE",{type:"negative",message:s.default.UNEXPECTED,timeout:!0})}),i("SET_SIDEBAR",null),setTimeout(()=>{n("handleEditingStyle")},5e3)},handleEditingStyle(e){let{state:t,commit:r}=e;0===t.editingList.length&&(r("SET_EDIT_ASSET",{}),r("SET_EDIT_IMAGE",{}))},async uploadAssets(e,t){let{state:r}=e,{files:n,body:a,remoteFileUrl:i}=t,s=!1;const o=new FormData;if(i)o.append("remote_file_url",i),o.append("source","url");else{if(!n.every(l)&&!n.every(u)){const e=new Error("Only assets of the same file type can be uploaded in each batch.");throw e.name="ArgumentError",e}n.forEach(e=>{l(e)&&(s=!0),o.append("files",e)}),o.append("source","upload")}if(o.append("user_id",r.currentUser.id),o.append("network_id",r.network.id),o.append("community_id",r.currentCommunity.id),a.title.length&&o.append("title",a.title),a.credit.length&&o.append("credit",a.credit),a.search_text.length&&o.append("search_text",a.search_text),a.source_caption.length&&o.append("caption",a.source_caption),a.usage_rights.length&&o.append("usage_rights",a.usage_rights),i)return fetch("/api/assets/images",{method:"post",body:o});return fetch(s?"api/assets/images/batch":"api/assets/files/batch",{method:"post",body:o})},goBack(e){let{commit:t}=e;t("SET_SHOW_METADATA",!1)},addAssets(e,t){let{commit:r}=e;r("SET_HIGHLIGHT",!0),r("ADD_ASSETS",t),setTimeout(()=>{r("SET_HIGHLIGHT",!1)},5e3)}};t.default=d,e.exports=t.default},fsDA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("7HDv"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("x8ox");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},hb94:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentCommunity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"community"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"domain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaDomain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"faviconUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeZone"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"featuresEnabled"},name:{kind:"Name",value:"siteConfigBoolean"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"features_enabled",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"printSlugEnabled"},name:{kind:"Name",value:"siteConfigBoolean"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"print_slug_enabled",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"svgLogo"},name:{kind:"Name",value:"siteConfigString"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"svg_small_mark_full_color",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"hasImagePlaceholder"},name:{kind:"Name",value:"hasSiteConfig"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"replacement_image_url",block:!1}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"string",block:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"network"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaDomain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:557}};r.loc.source={body:'query CurrentCommunity($id: Int!) {\n  community(id: $id) {\n    id\n    name\n    slug\n    url\n    domain\n    schemaDomain\n    faviconUrl\n    timeZone\n    featuresEnabled: siteConfigBoolean(key: "features_enabled")\n    printSlugEnabled: siteConfigBoolean(key: "print_slug_enabled")\n    svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n    hasImagePlaceholder: hasSiteConfig(key: "replacement_image_url", type: "string")\n    network {\n      id\n      name\n      slug\n      schemaDomain\n      organization {\n        id\n        slug\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,r)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,r)})),t.definitions&&t.definitions.forEach((function(t){e(t,r)}))}(e,t),n[e.name.value]=t}})),e.exports=r,e.exports.CurrentCommunity=function(e,t){var r={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var i=n[t]||new Set,s=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(t){var n=a(e,t);n&&r.definitions.push(n)})),r}(r,"CurrentCommunity")},iUff:function(e,t,r){"use strict";const{sortBy:n}=r("LvDl");e.exports=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((e,t)=>{let r=t.community,n=r.network,a=e.findIndex(e=>{let{id:t}=e;return t===n.id});return a>-1?e[a].communities.push(r):e.push({id:n.id,name:n.name,logo:n.svgLogo,communities:[r]}),e},[]);return n(t,"name")}},"k+GJ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("YCks"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("JmtY");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},kh36:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=v(e,t);return p(r.url,r.reqOpts,r.opts)};const{merge:n,omit:a}=r("LvDl"),i=r("Qyje"),s=r("cfah"),o=r("Xbgq"),l=r("lvH+"),{reportError:u}=r("q1SX"),d=r("Fw7v"),c={};function m(e){if(e.ok)return e;var t=new o("Response status not within range: "+e.status,e);return Promise.reject(t)}function f(e,t,r){return r?{data:t,headers:e.headers}:t}function p(e,t,r){let n=function(e,t){let{method:r,body:n}=t,a=e;r&&"GET"!==r&&n&&(a+=d(n));return a}(e,t);return r.cache&&!r.force&&n in c?Promise.resolve(c[n]):fetch(e,t).then(m).then(e=>{return n=e,a=t.headers.Accept,i=r.withHeaders,204===n.status?Promise.resolve():"text/html"===a?n.text().then(e=>f(n,e,i)):n.json().then(e=>f(n,e,i));var n,a,i}).then(e=>(r.cache&&(c[n]=e),e)).catch(n=>function(e,t,r,n){var a=e.response&&e.response.status;if(n.retry&&n.retry.delay<n.retry.maxDelay&&(!a||502===a||503===a)){var{retry:i}=n,o=Math.min(i.delay+1e3,i.maxDelay);return i.delay=o,s(o).then(()=>p(t,r,n))}return n.handleError&&(window.app&&window.app.state?l.showError():(console.warn("An unexpected error occurred while making a request, but the app is not able to display it"),u(e,!1))),Promise.reject(e)}(n,e,t,r))}function v(e,t){var r={credentials:"include",headers:{Accept:"application/json"}},s={handleError:!0,cache:!1,retry:{delay:0,maxDelay:3e3}},o=t.opts||{},l=a(t,"opts");return l.method&&"GET"!==l.method.toUpperCase()&&(r.headers["Content-Type"]="application/json"),l.query&&(e=e+"?"+i.stringify(l.query),delete l.query),l.body&&"string"!=typeof l.body&&(l.body=JSON.stringify(l.body)),!1===l.credentials&&(delete r.credentials,delete l.credentials),o.retry||(s.retry=!1),"boolean"==typeof o.retry&&delete o.retry,{url:e,opts:n(s,o),reqOpts:n(r,l)}}e.exports=t.default},"lvH+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessage=function(e){var t=l(e);app.state.select(["messages"]).splice([t,1])},t.showError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.UNEXPECTED;var t=app.state.get(["messages"]).some(e=>e.isError);t||o({message:e,type:"negative",isError:!0})},t.showMessage=o;var{defaults:n}=r("LvDl"),a=r("Fw7v"),i=r("6fkZ");const s={dismissible:!0,type:"negative"};function o(e){var t=a(e.message);return-1===l(t)&&function(e){if(!e.id)return!0;var t="message-"+e.id;if("shown"===window.localStorage.getItem(t))return!1;return window.localStorage.setItem(t,"shown"),!0}(e)&&(e.id=t,e=n(e,s),app.state.select(["messages"]).push(e)),t}function l(e){return app.state.get(["messages"]).findIndex(t=>t.id===e)}},maTt:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullOrUserName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeZone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"networkRoles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"memberships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"community"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"faviconUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"network"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"svgLogo"},name:{kind:"Name",value:"siteConfigString"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"svg_small_mark_full_color",block:!1}}],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:366}};r.loc.source={body:'query CurrentUser {\n  currentUser {\n    id\n    createdOn\n    fullOrUserName\n    email\n    timeZone\n    networkRoles\n    memberships {\n      roles\n      status\n      community {\n        id\n        name\n        faviconUrl\n        network {\n          id\n          name\n          svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,r)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,r)})),t.definitions&&t.definitions.forEach((function(t){e(t,r)}))}(e,t),n[e.name.value]=t}})),e.exports=r,e.exports.CurrentUser=function(e,t){var r={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var i=n[t]||new Set,s=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(t){var n=a(e,t);n&&r.definitions.push(n)})),r}(r,"CurrentUser")},ozxN:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("Kw5r")),a=s(r("jE9Z")),i=s(r("8NA3"));function s(e){return e&&e.__esModule?e:{default:e}}n.default.use(a.default);var o=new a.default({mode:"history",routes:[{path:"/assets",name:"dashboard",component:i.default}]});t.default=o,e.exports=t.default},poHX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("eUKB"),a=r("L2JU");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={name:"Card",mixins:[n.utilities],props:{asset:{type:Object,required:!0},currentUserId:{type:Number,required:!0},canDeleteAssets:{type:Boolean,required:!0,default:!1},hasImagePlaceholder:{type:Boolean,required:!0,default:!1},index:{type:Number,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapState)(["showHighlight"]))};t.default=o,e.exports=t.default},q1SX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o(e,t),Promise.reject(e)},t.reportError=o,t.reportMessage=function(e,t){"test"!==app.env&&console.warn(e,t);a.captureMessage(e,t)};var{omit:n}=r("LvDl"),a=r("WSEr"),i=r("lvH+"),s=r("Xbgq");function o(e){let t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=app.env}catch(e){t="production"}"test"!==t&&(console.error(e),console.error(e.stack||e.message)),e instanceof s||a.captureException(e,{tags:{error_name:e.name,from:e.from},extra:n(e,"name","message","stack","from")}),r&&i.showError()}},rbvQ:function(e,t,r){"use strict";var n;function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},((n=r("uX1+"))&&n.__esModule?n:{default:n}).default);t.default=s,e.exports=t.default},tTeb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("DM+t"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("H71G");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},tqrT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r("s4NR")),a=r("LvDl"),i=r("L2JU"),s=d(r("Xful")),o=d(r("tTeb")),l=d(r("6fkZ")),u=r("J3nE");function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=/type:(image|file|audio)\s?/;var v={components:{Assets:s.default,Cards:o.default},data:()=>({isMobile:!1,displayGrid:!0,displayResultsInfo:!1,category:"",query:"",page:1,perPage:36,ticks:7,pagination:null,communityId:null,availableCategories:[{value:"",title:"All types"},{value:"image",title:"Images"},{value:"file",title:"Files"}],ownUploads:!1}),computed:m(m({},(0,i.mapState)(["isEditing","editAsset","editImage","assets","currentUser","currentCommunity","entitlements"])),{},{currentUserId(){return this.currentUser.id},canDeleteAssets(){return this.currentUser.networkRoles.includes("NETWORK_ADMIN")||this.currentUser.memberships.some(e=>e.community.id===this.currentCommunity.id&&"ACTIVE"===e.status&&e.roles.includes("EDITOR"))},useNetworkAssets(){return(this.entitlements||[]).includes("use_network_asset_search")},currentComponent(){return this.displayGrid?"assets":"cards"}}),watch:{query(e){let[t,r]=e.match(p)||[];t&&this.category!==r?this.category=r:!t&&this.category&&(this.category="")},"$route.query"(e,t){parseInt(e.community_id,10)!==parseInt(t.community_id,10)?(this.$emit("communityId",Number(e.community_id)),this.page=1,this.query=""):e.q===t.q&&e.category===t.category||(this.page=1)}},beforeMount(){this.setInitialData(),this.isMobile=window.innerWidth<=800,window.addEventListener("resize",()=>this.isMobile=window.innerWidth<=800),localStorage.getItem("displayGrid")&&(this.displayGrid=JSON.parse(localStorage.getItem("displayGrid")))},apollo:{assets:{query(){return this.useNetworkAssets?u.AssetsByNetworkId:u.AssetsByCommunityId},skip(){return!this.currentCommunity||!this.currentCommunity.network},variables(){return{communityId:this.currentCommunity.id,query:this.query,pageNumber:this.page,perPage:this.perPage,deleted:!1,networkId:this.currentCommunity.network.id,sources:this.query.includes("source_id:")?["GETTY"]:["URL","UPLOAD"]}},fetchPolicy:"cache-and-network",manual:!0,result(e){let{data:t,loading:r,error:n}=e;if(!r)if(n)"access denied"===n.gqlError.message?this.$store.commit("messageBanner/PUT_NOTICE",{type:"negative",message:l.default.NETWORK_ASSETS_ACCESS_DENIED}):this.$store.commit("messageBanner/PUT_NOTICE",{type:"negative",message:l.default.UNEXPECTED});else{let e=t.chorusAssetsPage,r=e.results.map(e=>m(m({},e),{},{caption:e.caption?e.caption.html:null,credit:e.credit?e.credit.html:null}));this.$store.commit("SET_ASSETS",r),this.pagination={pageNumber:e.pageNumber,totalCount:e.totalCount},this.displayResultsInfo=this.query.length>0,this.updatePath()}}}},created(){document.title="Assets | "+this.$root.config.appName},methods:{async setInitialData(){let e=this.$route.query;this.page=parseInt(e.page,10)||1,this.query=e.q||""},clearSearchQuery(e){""===e&&this.query!==e&&(this.query="")},paginate(){this.page=document.getElementById("assets-pagination").page},updatePath(){let e={q:this.query,page:this.page.toString(),community_id:this.currentCommunity.id.toString()};if(!(0,a.isEqual)(e,this.$route.query)){let t="/assets?"+n.default.stringify(e);this.$router.push({path:t})}},onCategoryChange(e){let[t,r]=this.query.match(p)||[];if(!e&&t)this.query=this.query.replace(p,"").trim();else if(e&&(!t||r!==e)){let t=this.query.replace(p,"").trim();this.query=`type:${e} ${t}`}},toggleGrid(e){this.displayGrid=e,localStorage.setItem("displayGrid",JSON.stringify(e))},showMyUploads(){this.ownUploads?(this.query=("by:me "+this.query).trim(),this.ownUploads=this.query):(this.query=this.query.replace(/by:me/,"").trim(),this.ownUploads=this.query)},uploadAsset(){this.$store.commit("SET_SIDEBAR",null),this.$store.commit("SET_SHOW_METADATA",!1),this.$store.commit("SET_SIDEBAR",{to:"asset-upload",title:"New asset"})}}};t.default=v,e.exports=t.default},uKLD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("xa5d"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,s=r("RzfP");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var l=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"uX1+":function(e,t,r){"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={[function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(a,s,o):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r("aZOI")).ACTIVE_MEMBERSHIPS](e){const t=e.currentUser.memberships,r=e.policyRoles.app.access,n=e.currentUser.networkRoles;return t.filter(e=>{let{status:t,roles:a}=e;return"ACTIVE"===t&&(n.some(e=>e in r)||a.some(e=>e in r))})}};t.default=a,e.exports=t.default},vR7T:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-add-image"},[r("div",{staticClass:"m-add-image__container"},[r("div",{staticClass:"m-add-image__container-tools"},[r("div",{staticClass:"m-assets__image"},[r("img",{attrs:{src:e.image.url,alt:""}})])])]),e._v(" "),r("div",{staticClass:"m-add-image__metadata"},[r("strong",[e._v(e._s(e.image.width)+"px ✕ "+e._s(e.image.height)+"px")]),e._v("; Uploaded "),e.asset.user?r("span",[e._v("by "+e._s(e.asset.user?e.asset.user.fullOrUserName:""))]):e._e(),e._v(" on "+e._s(e.formatDateAndTime(e.image.created_at))+"\n  ")]),e._v(" "),r("div",{staticClass:"m-add-image__edit"},[r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{count:"500",block:""}},[r("label",[e._v("Alt text\n          "),r("div",{staticClass:"m-tooltip"},[r("res-button",{attrs:{id:"alt-text-button",paddingless:""}},[r("res-icon",{attrs:{name:"tooltip"}}),e._v(" "),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{placement:"bottom-start",for:"alt-text-button",design:"dark"}},[e._v("\n              Describe the important elements in the image for people who use assistive technology.\n              "),r("a",{attrs:{href:"https://chorussupport.zendesk.com/hc/en-us/articles/360026524334",target:"_blank",rel:"noopener noreferrer"}},[e._v("Learn more")])])],1)]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.title,expression:"body.title"}],domProps:{value:e.body.title},on:{input:function(t){t.target.composing||e.$set(e.body,"title",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",[e._v("Credit")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.credit,expression:"body.credit"}],attrs:{rows:"1"},domProps:{value:e.body.credit},on:{input:function(t){t.target.composing||e.$set(e.body,"credit",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",[e._v("Tags")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.search_text,expression:"body.search_text"}],attrs:{rows:"1"},domProps:{value:e.body.search_text},on:{input:function(t){t.target.composing||e.$set(e.body,"search_text",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",[e._v("Background\n          "),r("div",{staticClass:"m-tooltip"},[r("res-button",{attrs:{id:"edit-background-button",paddingless:""}},[r("res-icon",{attrs:{name:"tooltip"}}),e._v(" "),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{placement:"bottom-start",for:"edit-background-button",design:"dark"}},[e._v("\n              Use this for context about the image. This text will not be visible to audiences.\n            ")])],1)]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body.source_caption,expression:"body.source_caption"}],domProps:{value:e.body.source_caption},on:{input:function(t){t.target.composing||e.$set(e.body,"source_caption",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-field is-active"},[r("res-input",{attrs:{block:""}},[r("label",[e._v("Image rights")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.body.usage_rights,expression:"body.usage_rights"}],attrs:{type:"text"},domProps:{value:e.body.usage_rights},on:{input:function(t){t.target.composing||e.$set(e.body,"usage_rights",t.target.value)}}})])],1),e._v(" "),r("res-button",{staticClass:"m-assets__drawer--submit-button",attrs:{design:"primary"},on:{click:function(t){return e.updateAsset()}}},[r("button",[e._v("Update image")])])],1)])},a=[]},vuKY:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],class:"m-app-loader m-app-loader__"+this.animation},[t("res-icon",{attrs:{name:this.iconName,size:"large"}})],1)},a=[]},x8ox:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.notifications,(function(t){return r("res-banner",{key:t.id,attrs:{id:t.id,design:e.designForNotice(t),persistent:t.persistent||!1,timeout:t.timeout||!1,inert:""},on:{close:function(r){return e.deleteNotice(t)}}},[t.icon?r("res-icon",{attrs:{name:t.icon}}):e._e(),r("span",{domProps:{innerHTML:e._s(t.message)}})],1)})),1)},a=[]},xa5d:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("eUKB"),a=r("L2JU");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o={name:"Asset",mixins:[n.utilities],props:{asset:{type:Object,required:!0},isMobile:{type:Boolean,default:!1},currentUserId:{type:Number,required:!0},canDeleteAssets:{type:Boolean,required:!0,default:!1},hasImagePlaceholder:{type:Boolean,required:!0,default:!1},index:{type:Number,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapState)(["showHighlight"]))};t.default=o,e.exports=t.default},xeP5:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-flex--v m-nav--assets"},[r("message"),e._v(" "),r("nav",{staticClass:"m-nav m-nav--dashboard"},[e.community&&e.currentUser?r("community-select",{staticClass:"m-community-select",attrs:{community:e.community,user:e.currentUser,activeMemberships:e.activeMemberships,allowedRoles:e.allowedRoles},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}}):e._e()],1),e._v(" "),r("div",{staticClass:"l-content p-flex is-compose"},[r("app-drawer",{staticClass:"m-assets__drawer-slideIn",class:e.currentSidebar?"m-assets__drawer-open":""}),e._v(" "),r("div",{staticClass:"l-content__inner p-flex--v"},[e.community&&e.entitlements?r("dashboard",{attrs:{community:e.community,user:e.currentUser,entitlements:e.entitlements}}):e._e()],1)],1),e._v(" "),e.community&&e.community.network?r("confirm-delete-asset",{attrs:{networkName:e.community.network.name}}):e._e(),e._v(" "),r("app-loader")],1)},a=[]},zBkF:function(e,t,r){"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;const t=window.crypto||window.msCrypto;let r="";if(t){let n=new Uint8Array(Math.ceil(e/2));t.getRandomValues(n),r=[].map.call(n,e=>("0"+e.toString(16)).slice(-2)).join("")}else for(let t=Math.ceil(e/11);t>0;t-=1)r+=Math.random().toString(36).substr(2);return r.substr(0,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={namespaced:!0,state:{notifications:[]},mutations:{DELETE_NOTICE(e,t){e.notifications=e.notifications.filter(e=>e.id!==t)},PUT_NOTICE(e,t){Array.isArray(t)||(t=[t]),t.forEach(t=>{t&&t.message&&e.notifications.push({id:t.id||n(8),message:t.message.replace(/GraphQL error:\s*/g,""),type:(t.graphQLErrors?"error":t.type)||"neutral",timeout:t.timeout||null,persistent:t.persistent||!1,icon:t.icon||null})})}}};t.default=a,e.exports=t.default}},[[14,"runtime","vendor"]]]);
//# sourceMappingURL=assetmanager.308afe52035cdbfd0e52.0.js.map