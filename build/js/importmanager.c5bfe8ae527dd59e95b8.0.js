(window.webpackJsonp=window.webpackJsonp||[]).push([["importmanager"],{"+Q8c":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Xv6j"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("vuKY");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"+dw7":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{community:{type:Object,required:!0},defaultLogoUrl:{type:String,required:!0},selectionId:{type:Number,default:null}},computed:{href:()=>"#"}};t.default=n,e.exports=t.default},"+w+W":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("+dw7"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("1pgo");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"0OYW":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={methods:{routeTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r={name:e,query:{community_id:this.$store.state.currentCommunity.id}};return t&&(r.params={id:t}),r}}};t.default=n,e.exports=t.default},"0nH3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={SET_DIALOG:!0,SET_TASKS:!0,PUT_NOTICE:!0,DELETE_NOTICE:!0,SET_MODELS:!0,PATCH_MODELS:!0,DELETE_MODELS:!0};t.SET_TASKS=t.SET_MODELS=t.SET_DIALOG=t.PUT_NOTICE=t.PATCH_MODELS=t.DELETE_NOTICE=t.DELETE_MODELS=void 0;var a=r("aZOI");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));t.SET_DIALOG="setDialog";t.SET_TASKS="setTasks";t.PUT_NOTICE="putNotification";t.DELETE_NOTICE="deleteNotification";t.SET_MODELS="setModels";t.PATCH_MODELS="patchModels";t.DELETE_MODELS="deleteModels"},"0xoD":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.crawlable||e.hasRunningCrawler?r("div",{staticClass:"m-import-manager__crawler",class:{"--running":e.hasRunningCrawler}},[r("header",[e.hasRunningCrawler?[r("strong",[e._v("\n        Crawler running in "),r("router-link",{attrs:{to:e.routeTo("sitemap",e.crawlerSitemap.id)}},[e._v(e._s(e.crawlerSitemap.name))]),e._v("...\n        "+e._s(e.crawler.percentComplete)+"% complete\n      ")],1),e._v(" "),r("div",[e.crawlerSitemap.parentId?r("res-checkbox",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.autoAdvance,expression:"autoAdvance"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.autoAdvance)?e._i(e.autoAdvance,null)>-1:e.autoAdvance},on:{change:function(t){var r=e.autoAdvance,n=t.target,a=!!n.checked;if(Array.isArray(r)){var i=e._i(r,null);n.checked?i<0&&(e.autoAdvance=r.concat([null])):i>-1&&(e.autoAdvance=r.slice(0,i).concat(r.slice(i+1)))}else e.autoAdvance=a}}}),e._v(" "),r("label",[e._v("auto-advance")])]):e._e(),e._v(" "),r("res-button",{key:"stop-crawling",staticClass:"m-l-5",attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.cancelCrawler()}}},[r("res-icon",{attrs:{name:"none",size:"medium"}}),e._v(" "),r("button",[e._v("Stop crawling")])],1)],1)]:e.crawlable&&e.hasCrawlerLock?[r("strong",[e._v("Crawling is disabled for this project")])]:e.crawlable&&e.hasIdleCrawler?[r("strong",[e._v("Last crawl of "+e._s(e.sitemap.name)+" "+e._s(String(e.crawler.status).toLowerCase()))]),e._v(" "),r("button",{attrs:{type:"button",title:"Start new crawler",paddingless:""},on:{click:function(t){return t.preventDefault(),e.startCrawler()}}},[r("res-icon",{attrs:{name:"amp",size:"medium"}}),e._v(" "),r("span",[e._v("Start new crawler")])],1)]:e.crawlable&&!e.hasCrawler?[r("strong",[e._v("No crawler history")]),e._v(" "),r("res-button",{key:"start-crawling",attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.startCrawler()}}},[r("res-icon",{attrs:{name:"amp",size:"medium"}}),e._v(" "),r("button",[e._v("Start crawling")])],1)]:e._e()],2),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.crawlable&&e.hasCrawler&&!e.hasCrawlerLock,expression:"crawlable && hasCrawler && !hasCrawlerLock"}],staticClass:"m-import-manager__crawler__stats"},[e.hasRunningCrawler?r("p",[e._v("Running for "+e._s(e.formatHMS(e.crawler.duration))+", now at ~"+e._s(Math.round(100*e.crawler.recordsPerSecond)/100)+" documents per second")]):r("p",[e._v("Finished "+e._s(e.formatDateTime(e.crawler.finishedAt))+", took "+e._s(e.formatHMS(e.crawler.duration)))]),e._v(" "),r("p",[r("res-icon",{attrs:{name:e.statusIcon(e.crawler.sitemapsTotal,e.crawler.sitemapsComplete),size:"small"}}),e._v("\n      found "+e._s(e.crawler.sitemapsTotal)+" sitemaps, fetched "+e._s(e.crawler.sitemapsComplete)+" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.crawler.sitemapsLimit,expression:"crawler.sitemapsLimit"}]},[e._v("(limit "+e._s(e.crawler.sitemapsLimit+1)+")")])],1),e._v(" "),r("p",[r("res-icon",{attrs:{name:e.statusIcon(e.crawler.documentsTotal,e.crawler.documentsComplete),size:"small"}}),e._v("\n      found "+e._s(e.crawler.documentsTotal)+" documents, fetched "+e._s(e.crawler.documentsComplete)+" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.crawler.documentsLimit,expression:"crawler.documentsLimit"}]},[e._v("(limit "+e._s(e.crawler.documentsLimit)+")")])],1)])]):e._e()},a=[]},1:function(e,t){},10:function(e,t){},11:function(e,t){},16:function(e,t,r){r("j36g"),e.exports=r("HMaV")},"1ADp":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU"),i=r("hWEr"),o=r("MO6K"),s=(n=r("9jr9"))&&n.__esModule?n:{default:n};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={active:"",createRedirects:"",createAuthors:"",enableFrontPage:"",documentParserId:"",name:""},p={fields:{name:{label:"Name",type:"text"}},submit:"Create Parser"},m={fields:{name:{label:"Sitemap Name",type:"text"},url:{label:"URL",type:"text"}},submit:"Create Sitemap"};var f={components:{SitemapsTable:s.default},props:{id:{type:Number,required:!0}},data:()=>({saving:!1,mutable:(0,i.formatMutable)(d,{active:!0,createAuthors:!1,createRedirects:!1,enableFrontPage:!1})}),computed:l(l(l({},(0,a.mapState)(["currentCommunity"])),(0,a.mapGetters)(["parserModelsList"])),{},{project(){return this.$store.state.projectModels[this.id]||o.projectDefault},isLoaded(){return!!this.project.id},isChanged(){return this.isLoaded&&(0,i.mutableHasChanged)(this.mutable,this.project)}}),mounted(){for(let e of Object.keys(d))this.$watch("mutable."+e,this.save);this.fetchProject({id:this.id}).then(e=>this.mutable=(0,i.formatMutable)(d,e))},methods:l(l({},(0,a.mapActions)(["createParser","createSitemap","fetchProject","setDialog","updateProject"])),{},{editParser(){this.mutable.documentParserId&&this.$router.push({name:"parser",params:{id:this.mutable.documentParserId}})},newParser(){this.setDialog({tag:"input-form",form:p}).then(e=>{e.name&&this.createParser({name:e.name})})},newSitemap(){this.setDialog({tag:"input-form",form:m}).then(e=>{e.name&&e.url&&this.createSitemap({projectId:this.id,name:e.name,url:e.url})})},save(){this.isChanged&&!this.saving&&(this.saving=!0,this.updateProject({id:this.id,input:this.mutable}).then(e=>{this.mutable=(0,i.formatMutable)(d,e),this.saving=!1}))}})};t.default=f,e.exports=t.default},"1pgo":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{attrs:{href:e.href},on:{click:function(t){return t.preventDefault(),e.$emit("communityId",e.community.id)}}},[r("li",{staticClass:"m-community-select__item",class:{"is-active":e.selectionId===e.community.id}},[r("div",{staticClass:"m-community-select__avatar"},[r("img",{staticClass:"m-community-select__icon",attrs:{src:e.community.faviconUrl||e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(e.community.name))]),e._v(" "),e.selectionId===e.community.id?r("res-icon",{attrs:{name:"check-circle",size:"medium"}}):e._e()],1)])},a=[]},2:function(e,t){},"2KVk":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("O6Gk"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("kxzp");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"2Y5f":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("92OB"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("m2lQ");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"2kCB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("0nH3"),a={setDialog(e,t){if(!t)return this.commit(n.SET_DIALOG,null);"string"==typeof t&&(t={tag:t});const r=new Promise((e,r)=>{t.resolve=e,t.reject=r});return this.commit(n.SET_DIALOG,t),r}};t.default=a,e.exports=t.default},"2tY0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entryStatusIcons=t.crawlerIcons=void 0,t.formatDate=a,t.formatDateTime=function(e){const t=a(e),r=i(e);return`${t} ${r}`},t.formatFinder=function(e){e=e.trim();let t="findByUrl",r=e;const n=/sbn\s*(\d+)/i,a=/^uuid\s*([a-f0-9-]+)$/i;n.test(e)?(t="chorusEntryId",r=Number(e.match(n)[1])):a.test(e)?(t="contentApiUuid",r=e.match(a)[1]):/^[0-9a-f]{8,32}$/i.test(e)&&(t="errorDigest");return{[t]:r}},t.formatHMS=function(e){e=Math.round(e);const t=Math.floor(e/3600),r=Math.floor((e-3600*t)/60);return[t,r,e-3600*t-60*r].map(e=>"00"+e).map(e=>e.substr(e.length-2)).join(":")},t.formatNumber=function(e){return"number"==typeof e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e},t.formatTime=i,t.importManagerUrl=function(){const e=/\.(sb\d+\.k8s\.(?:sbndev|voxops)\.net)/;return/localhost/.test(location.host)?"http://chorus-import-manager.local.sbndev.net:4444":e.test(location.host)?"https://chorus-import-manager."+location.host.match(e)[1]:"https://chorus-import-manager.voxops.net"},t.parseDate=n,t.processingStatusIcons=void 0,t.stripURIHost=function(e){return String(e||"").trim().replace(/^(https?:)?\/\/[^/]+\//,"/")};t.entryStatusIcons={CREATED:"minus-circle",CAPTURING:"amp",CAPTURED:"check-circle",FAILED:"x-circle"};t.processingStatusIcons={UNATTEMPTED:"clock",COMPLETE:"check-circle",DISABLED:"minus-circle",FAILED:"x-circle",IMPORTED:"check-circle",NOT_IMPORTED:"minus-circle"};function n(e){const t=new Date(e||void 0);return t.getTime()?t:null}function a(e){const t=n(e);return t?`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`:""}function i(e){const t=n(e);if(t){return`${("00"+t.getHours()).substr(-2,2)}:${("00"+t.getMinutes()).substr(-2,2)}`}return""}t.crawlerIcons={RUNNING:"amp",CANCELLED:"x-circle",COMPLETED:"check-circle",NOT_CRAWLED:"minus-circle",PENDING:"clock",FAILED:"x-circle"}},"2zmq":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("app-breadcrumbs",{attrs:{project:e.project,sitemap:e.sitemap,document:e.document}}),e._v(" "),r("section",[r("div",{staticClass:"m-import-manager__header"},[r("h1",[e._v("Document: "+e._s(e.id))])]),e._v(" "),r("dl",{staticClass:"m-import-manager__defs"},[r("dt",[e._v("Status")]),e._v(" "),r("dd",[r("res-icon",{attrs:{name:e.statusIcon,size:"medium"}}),e._v(" "+e._s(e.document.status))],1),e._v(" "),r("dt",[e._v("Archival")]),e._v(" "),r("dd",{staticClass:"--split"},[r("span",[r("res-icon",{attrs:{name:e.archivalStatusIcon,size:"medium"}}),e._v(" "+e._s(e.document.archivalStatus))],1),e._v(" "),r("res-button",{attrs:{disabled:e.saving,paddingless:""},on:{click:function(t){return t.preventDefault(),e.toggleArchived()}}},[r("res-icon",{attrs:{name:"replace",size:"medium"}}),e._v(" "),r("button",[e._v(e._s(e.document.archived?"Unarchive":"Archive"))])],1)],1),e._v(" "),r("dt",[e._v("Starred")]),e._v(" "),r("dd",{staticClass:"--split",class:{"is-watched":e.document.watched}},[r("span",[r("res-icon",{attrs:{name:"star",size:"medium"}}),e._v(" "+e._s(e.document.watched?"YES":"NO"))],1),e._v(" "),r("res-button",{attrs:{disabled:e.saving,paddingless:""},on:{click:function(t){return t.preventDefault(),e.toggleWatched(t)}}},[r("res-icon",{attrs:{name:"replace",size:"medium"}}),e._v(" "),r("button",[e._v(e._s(e.document.watched?"Unstar":"Star"))])],1)],1),e._v(" "),r("dt",[e._v("Community")]),e._v(" "),r("dd",{staticClass:"--split"},[r("span",[e._v(e._s(e.communityNameById[e.document.communityId]))]),e._v(" "),r("res-button",{attrs:{disabled:e.saving,paddingless:""},on:{click:function(t){return t.preventDefault(),e.changeCommunity(t)}}},[r("res-icon",{attrs:{name:"replace",size:"medium"}}),e._v(" "),r("button",[e._v("Change")])],1)],1),e._v(" "),r("dt",[e._v("Canonical URL")]),e._v(" "),r("dd",[r("a",{attrs:{href:e.document.canonicalUrl}},[e._v(e._s(e.document.canonicalUrl))])]),e._v(" "),r("dt",[e._v("Chorus URL")]),e._v(" "),r("dd",[e.document.chorusEntryUrl?r("a",{attrs:{href:e.document.chorusEntryUrl}},[e._v(e._s(e.document.chorusEntryUrl))]):r("span",[e._v("N/A")])]),e._v(" "),r("dt",[e._v("SBN entry ID")]),e._v(" "),r("dd",[e._v(e._s(e.document.chorusEntryId||"N/A"))]),e._v(" "),r("dt",[e._v("Content API UUID")]),e._v(" "),r("dd",[e.document.contentApiUuid?r("span",[r("a",{attrs:{href:"/api/content/docs/"+e.document.contentApiUuid}},[e._v(e._s(e.document.contentApiUuid))]),e._v("\n          | "),r("a",{attrs:{href:"/compose/"+e.document.contentApiUuid}},[e._v("Open in story editor")])]):r("span",[e._v("N/A")])]),e._v(" "),r("dt",[e._v("Chorus API")]),e._v(" "),r("dd",[e.document.towerUrl?r("span",[r("a",{attrs:{href:e.document.towerUrl}},[e._v("Open in Chorus API")])]):r("span",[e._v("N/A")])]),e._v(" "),e.document.clickabilityUrl?r("dt",[e._v("Clickability URL")]):e._e(),e._v(" "),e.document.clickabilityUrl?r("dd",[r("span",[r("a",{attrs:{href:e.document.clickabilityUrl}},[e._v(e._s(e.document.clickabilityUrl))])])]):e._e(),e._v(" "),r("dt",[e._v("Last fetched")]),e._v(" "),r("dd",[e._v(e._s(e.document.fetchedAt?e.formatDateTime(e.document.fetchedAt):"N/A"))]),e._v(" "),r("dt",[e._v("Last modified")]),e._v(" "),r("dd",[e._v(e._s(e.formatDateTime(e.document.modifiedAt)))])])]),e._v(" "),e.placeholders.length?r("section",{staticClass:"m-import-manager__table"},[e._m(0),e._v(" "),r("res-table",{staticClass:"m-dashboard__table"},[r("table",[r("thead",[r("tr",[r("th",[e._v("ID")]),e._v(" "),r("th",[e._v("Type")]),e._v(" "),r("th",[e._v("Data")]),e._v(" "),r("th",[e._v("Fulfilled")])])]),e._v(" "),r("tbody",e._l(e.placeholders,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),e._v(" "),r("td",[e._v(e._s(t.contentType))]),e._v(" "),r("td",[t.data.length<=40?r("span",[e._v(e._s(t.data))]):r("a",{staticClass:"m-clip-text",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.setDialog({tag:"text-console",value:t.data})}}},[e._v(e._s(t.data))])]),e._v(" "),r("td",[r("abbr",{attrs:{title:t.fulfilled?"FULFILLED":"UNFULFILLED"}},[r("res-icon",{attrs:{name:t.fulfilled?"check-circle":"minus-circle",size:"medium"}})],1)])])})),0)])])],1):e._e(),e._v(" "),r("section",{staticClass:"m-import-manager__table"},[e._m(1),e._v(" "),r("res-table",{staticClass:"m-dashboard__table"},[r("table",[r("thead",[r("tr",[r("th",[e._v("Time")]),e._v(" "),r("th",[e._v("Fetch")]),e._v(" "),r("th",[e._v("Parse")]),e._v(" "),r("th",[e._v("Imported")]),e._v(" "),r("th",{attrs:{colspan:"2"}},[e._v("Redirects")])])]),e._v(" "),r("tbody",e._l(e.captures,(function(t){return r("tr",{key:t.id},[r("td",[r("router-link",{attrs:{to:e.routeTo("capture",t.id)}},[e._v(e._s(e.formatDateTime(t.createdAt)))])],1),e._v(" "),r("td",[r("a",{attrs:{title:t.fetchStatus}},[r("res-icon",{attrs:{name:e.processingStatusIcon(t.fetchStatus),size:"medium"}})],1),e._v(" "),t.fetchDigest?r("router-link",{staticClass:"m-import-manager__digest",attrs:{to:e.routeTo("capture",t.id)}},[e._v("\n                "+e._s(t.fetchDigest.slice(0,8))+"\n              ")]):e._e()],1),e._v(" "),r("td",[r("a",{attrs:{title:t.parseStatus}},[r("res-icon",{attrs:{name:e.processingStatusIcon(t.parseStatus),size:"medium"}})],1),e._v(" "),t.parseDigest?r("router-link",{staticClass:"m-import-manager__digest",attrs:{to:e.routeTo("capture",t.id)}},[e._v("\n                "+e._s(t.parseDigest.slice(0,8))+"\n              ")]):e._e()],1),e._v(" "),r("td",[r("a",{attrs:{title:t.importStatus}},[r("res-icon",{attrs:{name:e.processingStatusIcon(t.importStatus),size:"medium"}})],1),e._v(" "),t.contentApiOpsDigest?r("router-link",{staticClass:"m-import-manager__digest",attrs:{to:e.routeTo("capture",t.id)}},[e._v("\n                "+e._s(t.contentApiOpsDigest.slice(0,8))+"\n              ")]):e._e()],1),e._v(" "),r("td",[r("a",{attrs:{title:t.redirectsStatus}},[r("res-icon",{attrs:{name:e.processingStatusIcon(t.redirectsStatus),size:"medium"}})],1)]),e._v(" "),r("td",["COMPLETE"===t.fetchStatus?[r("res-button",{attrs:{id:"capture-actions-"+t.id,paddingless:""}},[r("res-icon",{staticClass:"more",attrs:{name:"more",animated:"false"}}),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{for:"capture-actions-"+t.id,placement:"left"}},[r("button",{attrs:{disabled:!!e.processing[t.id],type:"button",title:"Rerun parse",paddingless:""},on:{click:function(r){return r.preventDefault(),e.onReprocessCapture(r,t.id,"PARSE")}}},[r("res-icon",{attrs:{name:"grid",size:"medium"}}),e._v(" "),r("span",[e._v("Rerun parse")])],1),e._v(" "),r("button",{attrs:{disabled:!!e.processing[t.id],type:"button",title:"Rerun import",paddingless:""},on:{click:function(r){return r.preventDefault(),e.onReprocessCapture(r,t.id,"IMPORT")}}},[r("res-icon",{attrs:{name:"storystream",size:"medium"}}),e._v(" "),r("span",[e._v("Rerun import")])],1)])]:e._e()],2)])})),0)])]),e._v(" "),r("footer",[r("span",[e._v("Captured "+e._s(e.captures.length)+" time"+e._s(1!==e.captures.length?"s":""))]),e._v(" "),e.document.allowsCapture?r("res-button",{attrs:{disabled:e.capturing,design:"secondary"},on:{click:function(t){return t.preventDefault(),e.onCapture()}}},[r("res-icon",{attrs:{name:e.capturing?"loading":"refresh",size:"medium"}}),e._v(" "),r("button",[e._v(e._s(e.captures.length?"New capture":"Capture now"))])],1):e._e()],1)],1)],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",[this._v("Placeholders")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",[this._v("History")])])}]},3:function(e,t){},"3CFH":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("5jzg"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("2zmq");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"3JGD":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[e._m(0),e._v(" "),r("p",{staticClass:"--italic"},[e._v("start jobs from the documents search table")]),e._v(" "),r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table"},[r("table",[r("thead",[r("tr",[r("th",[e._v("Job")]),e._v(" "),r("th",[e._v("Task")]),e._v(" "),r("th",[e._v("Documents")]),e._v(" "),r("th",{attrs:{colspan:"2"}},[e._v("Status")])])]),e._v(" "),r("tbody",e._l(e.jobs,(function(t){return r("tr",{directives:[{name:"show",rawName:"v-show",value:e.isVisible(t),expression:"isVisible(job)"}],key:t.id,class:{"--child-row":!t.workers}},[r("td",[t.workers?[r("res-button",{style:{transform:"rotate("+(e.activeJobId===t.id?"0":"-90deg")+")"},attrs:{paddingless:""},on:{click:function(r){return r.preventDefault(),e.toggleJob(t)}}},[r("res-icon",{attrs:{name:"down",size:"medium"}}),r("button")],1),e._v(" "),r("a",{staticClass:"m-import-manager__digest m-r-5",attrs:{href:e.jobLogUrl(t),title:"Logs for job "+t.jobId,target:"_blank"}},[e._v("\n                  job "+e._s(t.jobId.split("-")[0])+"\n                ")]),e._v(" "),r("span",[e._v(e._s(e.formatDateTime(t.createdAt)))])]:[r("res-icon",{staticClass:"m-r-1",attrs:{size:"small",name:"tab"}}),e._v(" "),r("a",{staticClass:"m-import-manager__digest m-r-5",attrs:{href:e.jobLogUrl(t),title:"Logs for worker "+t.id,"data-id":t.id,target:"_blank"}},[e._v("\n                  worker "+e._s(t.id)+"\n                ")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:"RUNNING"===t.status&&t.lastDocumentId,expression:"job.status === 'RUNNING' && job.lastDocumentId"}]},[e._v("@ "+e._s(t.lastDocumentId))])]],2),e._v(" "),r("td",[t.workers?[r("res-button",{staticClass:"m-r-5",attrs:{paddingless:""},on:{click:function(r){return r.preventDefault(),e.setDialog({tag:"text-console",value:t.searchJson})}}},[r("res-icon",{attrs:{name:"publish",size:"medium"}}),r("button")],1),e._v(" "),r("span",[e._v(e._s(t.task.replace(/^perform_/i,"")))])]:[r("span",{staticClass:"--italic"},[e._v(e._s(t.startAt||"<")+".."+e._s(t.finishAt||">"))])]],2),e._v(" "),r("td",[r("span",{class:{"--italic":!t.workers}},[e._v(e._s(t.documentsTotal))])]),e._v(" "),r("td",[r("a",{attrs:{title:t.status}},[r("res-icon",{attrs:{name:e.statusIcon(t.status),size:"medium"}})],1),e._v(" "),r("span",{class:{"--italic":!t.workers}},[e._v(e._s(t.percentComplete)+"%")])]),e._v(" "),r("td",[r("res-button",{directives:[{name:"show",rawName:"v-show",value:e.mayCancel(t),expression:"mayCancel(job)"}],attrs:{paddingless:"",title:"Cancel"},on:{click:function(r){return r.preventDefault(),e.confirmCancelJob(t)}}},[r("res-icon",{attrs:{name:"none",size:"medium"}}),r("button",[e._v("Cancel")])],1),e._v(" "),r("res-button",{directives:[{name:"show",rawName:"v-show",value:e.mayResume(t),expression:"mayResume(job)"}],attrs:{paddingless:"",title:"Resume"},on:{click:function(r){return r.preventDefault(),e.resumeJob(t.id)}}},[r("res-icon",{attrs:{name:"refresh",size:"medium"}}),r("button",[e._v("Resume")])],1),e._v(" "),t.workers?r("res-button",{directives:[{name:"show",rawName:"v-show",value:e.mayTrash(t),expression:"mayTrash(job)"}],attrs:{paddingless:"",title:"Delete"},on:{click:function(r){return r.preventDefault(),e.confirmDeleteJob(t)}}},[r("res-icon",{attrs:{name:"trash",size:"medium"}}),r("button")],1):e._e(),e._v(" "),t.workers?e._e():r("res-button",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"job.errorMessage"}],attrs:{paddingless:"",title:"Errors"},on:{click:function(r){return r.preventDefault(),e.setDialog({tag:"text-console",value:t.errorMessage})}}},[r("res-icon",{attrs:{name:"warning",size:"medium"}}),r("button")],1)],1)])})),0)])]),e._v(" "),r("footer",[e.loaded&&e.jobs.length?r("span",[e._v("\n        Found "+e._s(e.formatNumber(e.jobRollups.length))+" jobs\n      ")]):e.loaded?r("span",[e._v("\n        No results\n      ")]):e._e()])],1)])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header --split"},[t("h1",[this._v("Document jobs")])])}]},4:function(e,t){},"47Xb":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(e){e.preventDefault()}}},[r("fieldset",[r("res-input",[r("label",[e._v("Project Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])],1),e._v(" "),r("fieldset",[e.parserModelsList.length?r("res-select",[r("label",[e._v("Parser")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.documentParserId,expression:"documentParserId"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.documentParserId=t.target.multiple?r:r[0]}}},e._l(e.parserModelsList,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]):r("res-input",[r("label",[e._v("Parser Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.documentParserName,expression:"documentParserName"}],attrs:{type:"text"},domProps:{value:e.documentParserName},on:{input:function(t){t.target.composing||(e.documentParserName=t.target.value)}}})])],1),e._v(" "),r("footer",[r("res-button",{attrs:{design:"primary"},on:{click:function(t){return t.preventDefault(),e.create()}}},[r("button",{attrs:{type:"submit"}},[e._v("Create Project")])]),e._v(" "),r("res-button",{staticClass:"m-l-1",attrs:{design:"secondary"},on:{click:function(t){return t.preventDefault(),e.close()}}},[r("button",{attrs:{type:"button"}},[e._v("Cancel")])])],1)])},a=[]},"4fGC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Cu1w"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("qG7f");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"4khC":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-community-select__menu-wrap",style:e.fullHeight},[e.networks?r("ul",{staticClass:"m-community-select__list"},[e._l(e.networks,(function(t){return[1===t.communities.length?r("community-cell",{key:t.name,attrs:{community:t.communities[0],defaultLogoUrl:e.defaultLogoUrl,selectionId:e.selectionId},on:{communityId:function(t){return e.selectCommunity(t)}}}):r("ul",{key:t.name,staticClass:"m-community-select__list"},[r("li",{staticClass:"m-community-select__network",class:e.expandedNetworks[t.id]?"is-expanded":"is-collapsed"},[r("div",{staticClass:"m-community-select__item",on:{click:function(r){return r.preventDefault(),e.expandNetwork(t.id)}}},[r("div",{staticClass:"m-community-select__avatar"},[t.logo?r("div",{domProps:{innerHTML:e._s(t.logo)}}):r("img",{staticClass:"m-community-select__icon",staticStyle:{height:"20px"},attrs:{src:e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(t.name))]),e._v(" "),r("res-icon",{attrs:{size:"medium",name:"add-circle"}}),e._v(" "),r("res-icon",{attrs:{size:"medium",name:"minus-circle"}})],1),e._v(" "),r("ul",{staticClass:"m-community-select__sub-list"},e._l(t.communities,(function(t){return r("community-cell",{key:t.id,attrs:{community:t,defaultLogoUrl:e.defaultLogoUrl,selectionId:e.selectionId},on:{communityId:function(t){return e.selectCommunity(t)}}})})),1)])])]}))],2):e._e()])},a=[]},5:function(e,t){},"5eCQ":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"m-community-select__menu-trigger",on:{click:function(t){return t.preventDefault(),e.toggleMenu(t)}}},[r("div",{staticClass:"m-community-select__lockup",class:{"is-open":e.menuOpen&&e.hasMenu,"m-community-select__lockup--openable":e.hasMenu}},[r("div",{staticClass:"m-community-select__avatar"},[r("img",{staticClass:"m-community-select__icon",attrs:{src:e.community.faviconUrl||e.defaultLogoUrl}})]),e._v(" "),r("span",{staticClass:"m-community-select__name"},[e._v(e._s(e.community.name))])])]),e._v(" "),e.networks&&e.networks.length?r("community-menu",{ref:"communityMenu",staticClass:"m-community-select__menu",class:{"is-active":e.menuOpen},attrs:{allowedRoles:e.allowedRoles,activeMemberships:e.activeMemberships,defaultLogoUrl:e.defaultLogoUrl,networks:e.networks,menuOpen:e.menuOpen},on:{closeMenu:e.closeMenu}}):e._e()],1)},a=[]},"5jzg":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(r("elgu")),a=c(r("0OYW")),i=c(r("Wdwt")),o=r("L2JU"),s=r("hWEr"),u=r("2tY0"),l=r("MO6K");function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f={prompt:"The document will be deleted from its current community and republish here.",fields:{communityId:{label:"Community",options:{}}},submit:"Change Community"},v={archivalStatus:null,watched:null};var h={components:{AppBreadcrumbs:i.default},mixins:[n.default,a.default],props:{id:{type:Number,required:!0}},data:()=>({capturing:!1,mutable:(0,s.formatMutable)(v),processing:{},saving:!1}),computed:p(p({},(0,o.mapGetters)(["communityNameById"])),{},{document(){return this.$store.state.documentModels[this.id]||l.documentDefault},captures(){return Object.values(this.$store.state.captureModels).filter(e=>e.documentEntryId===this.id).sort((e,t)=>String(t.createdAt).localeCompare(e.createdAt))},placeholders(){return Object.values(this.$store.state.placeholderModels).filter(e=>e.documentEntryId===this.id)},sitemap(){return this.$store.state.sitemapModels[this.document.sitemapEntryId]||l.sitemapDefault},project(){return this.$store.state.projectModels[this.document.projectId]||l.projectDefault},statusIcon(){return u.entryStatusIcons[this.document.status]||u.entryStatusIcons.CREATED},archivalStatusIcon(){return this.document.archived?"none":"check-circle"},isLoaded(){return!!this.document.id}}),mounted(){this.startImmediatePolling(()=>{this.fetchDocument({id:this.id}).then(e=>this.mutable=(0,s.formatMutable)(v,e))},15e3)},destroyed(){this.unloadDocument({id:this.id})},methods:p(p({},(0,o.mapActions)(["captureDocument","changeDocumentCommunity","fetchDocument","processCapture","setDialog","unloadDocument","updateDocument"])),{},{formatDateTime:u.formatDateTime,processingStatusIcon:e=>u.processingStatusIcons[e]||u.processingStatusIcons.UNATTEMPTED,toggleArchived(){this.saving||(this.saving=!0,this.updateDocument({id:this.id,input:{archivalStatus:this.document.archived?"ACTIVE":"ARCHIVED_BY_ADMIN"}}).then(e=>{this.mutable=(0,s.formatMutable)(v,e),this.saving=!1}))},toggleWatched(){this.saving||(this.saving=!0,this.updateDocument({id:this.id,input:{watched:!this.mutable.watched}}).then(e=>{this.mutable=(0,s.formatMutable)(v,e),this.saving=!1}))},changeCommunity(){const e=Object.assign({},this.communityNameById);delete e[this.document.communityId],f.fields.communityId.options=e,this.setDialog({tag:"input-form",form:f}).then(async e=>{this.saving=!0,await this.changeDocumentCommunity({id:this.id,communityId:Number(e.communityId)}),this.saving=!1})},onCapture(){setTimeout(()=>{confirm("This will re-fetch the remote document and attempt a fresh import. Proceed?")&&(this.capturing=!0,this.captureDocument({id:this.id}).then(()=>this.capturing=!1))},0)},onReprocessCapture(e,t,r){this.closeDropdown(e),this.processing[t]||(this.processing=Object.assign({},this.processing,{[t]:r}),this.processCapture({id:t,action:r}).then(()=>this.processing=Object.assign({},this.processing,{[t]:null})))},closeDropdown(e){let t=e.target;for(;t&&t.tagName;){if(/res-dropdown/i.test(t.tagName))return t.toggle();t=t.parentNode}}})};t.default=h,e.exports=t.default},"5l/Q":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx"),s=r("NJDO");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l={async createIdentity(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateIdentity($input: CreateImporterMappedIdentityInput!) {
          identity: createImporterMappedIdentity(input: $input) {
            chorusId
            id
            identity
            type
          }
        }
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve((0,s.newIdentity)(r.identity))},async updateIdentity(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateIdentity($id: Int!, $input: UpdateImporterMappedIdentityInput!) {
          identity: updateImporterMappedIdentity(id: $id, input: $input) {
            chorusId
            id
            identity
            type
          }
        }
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve((0,s.newIdentity)(r.identity))}};t.default=l,e.exports=t.default},"5yIg":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("DGB0"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("UXGB");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},6:function(e,t){},"6OWX":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("AGHT"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("s+SX");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"6fkZ":function(e,t,r){"use strict";t.ALT_TEXT_OVER_LIMIT="Alt text is currently limited to {alt_text_limit} characters. Please try again.",t.APPLE_NEWS_MEMBERS_ONLY_WARNING="This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.",t.COMMUNITY_CHANGED="This {docLabel} has been moved!",t.CSV_TOO_LARGE="This CSV is too large. Please upload a file under 1 MB.",t.DATA_LINKS_ERROR="Suggestions timed out. Try again or add links manually.",t.DRAFT_HERMANO_RECORD="This {record} is a draft; it will be published automatically when this {docLabel} is published.",t.EMBARGOED="This story is embargoed.",t.HIDDEN="This story is hidden.",t.FEEDBACK_SENT="Message sent!",t.FILE_TOO_LARGE="Files must be under 100 MB.",t.GETTY_API_DOWN="Getty image search is unavailable. Please try again later.",t.GIF_IN_IMAGE_CARD="GIFs cannot be published with {type} cards. Choose another?",t.GIF_TOO_LARGE="This GIF is over {size} MB and will block this story from publishing to {platforms}.",t.IMAGE_IN_GALLERY="This image is already included in the gallery. Choose another?",t.IMAGE_TOO_LARGE="Images must be under 10,000 x 10,000 pixels.",t.INVALID_LINK_MESSAGE="Please enter a valid URL.",t.INVALID_SPREADSHEET_URL="Please add a valid public Google Sheet URL and try again.",t.INVALID_STREAM_MEMBERSHIP="This type of story cannot be added.",t.MERLIN_API_DOWN="Merlin image search is unavailable. Please try again later.",t.MISSING_LEGACY_ENTRY='Editing is disabled because a more recent version of this story may exist. &nbsp;<a href="https://www.chorus.help/hc/en-us/requests/new">Contact us for help.</a>',t.NETWORK_ASSETS_ACCESS_DENIED="You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.",t.NEW_USER_MESSAGE='Welcome to Chorus! &nbsp;<a href="{url}">Check out our getting started guide.</a>',t.OEMBED_GENERIC_ERROR="Something went wrong. Make sure this embed is shareable and try again.",t.OEMBED_INSECURE_ERROR="This embed URL is insecure. Only HTTPS embeds are supported.",t.OEMBED_SUPPORT_ERROR="Embeds from this source are not supported at this time.",t.OEMBED_PDF_SUPPORT_ERROR="PDFs must be under 10 MB.",t.OEMBED_YOUTUBE_SUPPORT_ERROR="Embeds are disabled for this video by the YouTube account owner.",t.PLAGSCAN_ERROR="An error occurred. Please try scanning the story again.",t.PLAGSCAN_LOW_WORD_COUNT="You can scan this story once it's over 50 words.",t.PLAGSCAN_OUT_OF_DATE="The latest version of this story has not been scanned.",t.PLAGSCAN_RETRIEVED="A report has been generated for this story.",t.PLAGSCAN_SUBMITTED="A report is being generated.",t.PLAGSCAN_UNSCANNED="Submit the story for approval to generate a report.",t.PUBLISH_PACKAGE_ACTIVE_MESSAGE="Your stories are being {action}...",t.PUBLISH_PACKAGE_WARNING_MESSAGE="{gerund} this landing page will {verb} all drafts in this package.",t.PYM_EMBED_GENERIC_ERROR="Something went wrong. Make sure this Pym.js embed is shareable and try again.",t.PYM_EMBED_INSECURE_ERROR="This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.",t.PYM_EMBED_SUPPORT_ERROR="Pym.js embeds from this source are not supported at this time.",t.REALTIME_ERROR="Autosave failed. Please reload your browser.",t.RECONNECT_ERROR="Something went wrong reconnecting. Please reload your browser.",t.RECONNECTING="Reconnecting...",t.RELOAD_REQUIRED="Please reload to get the latest updates.",t.RELOAD_STALE_TAB="You've been away for a while, please reload.",t.REQUIRED_FIELD="This field is required.",t.RESCUE_SAVED_REASSURE='Your work has been saved in &nbsp;<a href="{url}">this version.</a>',t.SEND_TO_PRINT_SUCCESS="Sent to print!",t.SHEET_PERMISSIONS="Please make the Google Sheet public to continue.",t.STRUCTURED_TAGS_ERROR="Suggestions timed out. Try again or add tags manually.",t.TOO_MANY_EDITORS="More than 10 editors at a time is not recommended.",t.UNEXPECTED="An error occurred. Try again or reload your browser.",t.UNSAVED_WARNING="Your changes are still being saved; leaving now could cause data loss!",t.UNSUPPORTED_ASSET_TYPE='This format is not supported. <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">Learn more about supported file formats.</a>',t.UPLOAD_INVALID_FILE='At least one of the uploaded files is not supported. Please review supported <a href="https://www.chorus.help/hc/en-us/articles/360010240753">image</a> and <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">file</a> formats and try again.',t.UPLOAD_TOO_MANY_FILES="One file at a time, please."},"6m70":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r("Kw5r")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),i=r("NJDO"),o=r("MO6K"),s=l(r("HfYJ"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const m=Object.keys(o.defaultsByModelSet);var f=d(d({},s.default),{},{[a.SET_DIALOG](e,t){e.currentDialog=t},[a.SET_TASKS](e,t){e.documentJobTasks=t.reduce((e,t)=>(e[t]=t.replace(/^perform_/,"").replace("_"," "),e),{})},[a.PUT_NOTICE](e,t){Array.isArray(t)||(t=[t]);const r=e.notifications.slice();for(let e of t)if(e&&e.message){const t=e.message.replace(/GraphQL error:\s*/g,""),n=(e.graphQLErrors?"error":e.type)||"info",a=r.find(e=>e.message===t&&e.type===n);a?(e=Object.assign({},a,{count:a.count+1}),r.splice(r.indexOf(a),1,e)):r.push({id:Math.round(1e8*Math.random()),count:1,message:t,type:n})}e.notifications=r},[a.DELETE_NOTICE](e,t){e.notifications=e.notifications.filter(e=>e.id!==t)},[a.SET_MODELS](e,t){t=(0,i.buildModels)(t);for(let r of m)if(t.hasOwnProperty(r)){const a=Object.assign({},e[r]);let i=t[r];Array.isArray(i)||(i=[i]);for(let e of i)a[e.id]=e;n.default.set(e,r,a)}},[a.PATCH_MODELS](e,t){t=(0,i.buildPatches)(t);for(let r of m)if(t.hasOwnProperty(r)){const a=Object.assign({},e[r]);let i=t[r];Array.isArray(i)||(i=[i]);for(let e of i){const t=a[e.id]||o.defaultsByModelSet[r];a[e.id]=Object.assign({},t,e)}n.default.set(e,r,a)}},[a.DELETE_MODELS](e,t){for(let r of m)if(t.hasOwnProperty(r)){const a=Object.assign({},e[r]);let i=t[r];Array.isArray(i)||(i=[i]);for(let e of i)delete a[e.id];n.default.set(e,r,a)}}});t.default=f,e.exports=t.default},7:function(e,t){},"747J":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("div",{staticClass:"m-import-manager__header --split"},[r("h1",[e._v("Imported "+e._s(e.type)+" identities")]),e._v(" "),r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.newIdentity()}}},[r("res-icon",{attrs:{name:"add",size:"medium"}}),e._v(" "),r("button",[e._v("New identity")])],1)],1),e._v(" "),r("form",{staticClass:"m-import-manager__fieldset",on:{submit:function(e){e.preventDefault()}}},[r("res-input",[r("label",[e._v("Search")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.identity,expression:"identity",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.identity},on:{change:function(t){e.identity=t.target.value}}}),e._v(" "),r("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1)],1),e._v(" "),r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",[e._v("Identity")]),e._v(" "),r("th",[e._v("Chorus ID")]),e._v(" "),r("th",{attrs:{colspan:"2"}},[e._v("Community ID")])])]),e._v(" "),r("tbody",e._l(e.results,(function(e){return r("identities-row",{key:e.id,attrs:{model:e}})})),1)])]),e._v(" "),r("footer",[e.loaded?r("span",[e._v("\n        Found "+e._s(e.formatNumber(e.totalCount))+" results\n      ")]):e._e(),e._v(" "),r("res-pagination",{attrs:{page:e.page,count:e.totalCount,display:e.perPage,indicator:"page",pagination:"text-only",navigation:"text"},on:{change:function(t){e.page=t.target.page}}})],1)],1)])},a=[]},"75gj":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"m-import-manager__breadcrumbs"},[e.hasProject?r("span",[r("router-link",{attrs:{to:e.routeTo("project",e.project.id),title:"Project"}},[e._v(e._s(e.project.name))]),e._v(" /\n  ")],1):r("span",[e._v(" ")]),e._v(" "),e.parentSitemap?r("span",[r("router-link",{attrs:{to:e.routeTo("sitemap",e.parentSitemap.id),title:"Sitemap index"}},[e._v(e._s(e.parentSitemap.name))]),e._v(" /\n  ")],1):e._e(),e._v(" "),e.hasSitemap&&!e.isSitemap?r("span",[r("router-link",{attrs:{to:e.routeTo("sitemap",e.sitemap.id),title:"Sitemap urlset"}},[e._v(e._s(e.sitemap.name))]),e._v(" /\n  ")],1):e.isSitemap?r("strong",[e._v(e._s(e.sitemap.name))]):e._e(),e._v(" "),e.hasDocument&&!e.isDocument?r("span",[r("router-link",{attrs:{to:e.routeTo("document",e.document.id),title:"Document"}},[e._v(e._s(e.document.id))]),e._v(" /\n  ")],1):e.isDocument?r("strong",[e._v(e._s(e.document.id))]):e._e(),e._v(" "),e.hasCapture&&!e.isCapture?r("span",[r("router-link",{attrs:{to:e.routeTo("capture",e.capture.id),title:"Capture"}},[e._v(e._s(e.capture.id))]),e._v(" /\n  ")],1):e.isCapture?r("strong",[e._v(e._s(e.capture.id))]):e._e()])},a=[]},8:function(e,t){},"86iG":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CrawlerBaseAttrs=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const u=a.default`
  fragment CrawlerBaseAttrs on ImporterSitemapCrawler {
    autoAdvance
    documentsComplete
    documentsLimit
    documentsTotal
    duration
    finishedAt
    id
    percentComplete
    recordsPerSecond
    sitemapEntryId
    sitemapsComplete
    sitemapsLimit
    sitemapsTotal
    status
  }
`;t.CrawlerBaseAttrs=u;var l={async createCrawler(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateCrawler($input: CreateImporterSitemapCrawlerInput!) {
          crawler: createImporterSitemapCrawler(input: $input) {
            ...CrawlerBaseAttrs
            sitemapEntry {
              id
              name
              crawler {
                id
              }
              currentCrawler {
                id
              }
            }
          }
        }
        ${u}
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{crawlerModels:n.crawler,sitemapModels:n.crawler.sitemapEntry}),Promise.resolve(r.crawlerModels[n.crawler.id])},async updateCrawler(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateCrawler($input: UpdateImporterSitemapCrawlerInput!, $id: Int!) {
          crawler: updateImporterSitemapCrawler(input: $input, id: $id) {
            ...CrawlerBaseAttrs
          }
        }
        ${u}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{crawlerModels:n.crawler}),Promise.resolve(r.crawlerModels[t.id])},async stopCrawler(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation StopCrawler($id: Int!) {
          crawler: stopImporterSitemapCrawler(id: $id) {
            ...CrawlerBaseAttrs
          }
        }
        ${u}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{crawlerModels:n.crawler}),Promise.resolve(r.crawlerModels[t.id])}};t.default=l},"8Ndn":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("app-breadcrumbs",{attrs:{project:e.project,sitemap:e.sitemap,document:e.document,capture:e.capture}}),e._v(" "),r("section",[r("div",{staticClass:"m-import-manager__header"},[r("h1",[e._v("Document Capture: "+e._s(e.id))])]),e._v(" "),e.isLoaded?r("dl",{staticClass:"m-import-manager__defs"},[r("dt",[e._v("Created")]),e._v(" "),r("dd",[e._v(e._s(e.formatDateTime(e.capture.createdAt)))]),e._v(" "),r("dt",[e._v("Parser")]),e._v(" "),r("dd",[e.parser.id?r("router-link",{attrs:{to:e.routeTo("parser",e.parser.id)}},[e._v(e._s(e.parser.name))]):e._e()],1),e._v(" "),r("dt",[e._v("Redirect URL")]),e._v(" "),r("dd",[e.capture.redirectUrl?r("a",{attrs:{href:e.capture.redirectUrl}},[e._v(e._s(e.capture.redirectUrl))]):r("span",[e._v("N/A")])]),e._v(" "),r("dt",[e._v("Canonical URL")]),e._v(" "),r("dd",[r("a",{attrs:{href:e.document.canonicalUrl}},[e._v(e._s(e.document.canonicalUrl))])]),e._v(" "),e.isCurrentImport?[r("dt",[e._v("Chorus URL")]),e._v(" "),r("dd",[r("a",{attrs:{href:e.document.chorusEntryUrl}},[e._v(e._s(e.document.chorusEntryUrl))])]),e._v(" "),r("dt",[e._v("Content API UUID")]),e._v(" "),r("dd",[e.document.contentApiUuid?r("span",[r("a",{attrs:{href:"/api/content/docs/"+e.document.contentApiUuid}},[e._v(e._s(e.document.contentApiUuid))]),e._v("\n            ["),r("a",{attrs:{href:"/compose/"+e.document.contentApiUuid}},[e._v("editor")]),e._v("]\n          ")]):r("span",[e._v("N/A")])])]:e._e(),e._v(" "),r("dt",[e._v("Fetch")]),e._v(" "),r("dd",{staticClass:"--split"},[r("span",[r("res-icon",{attrs:{name:e.processingStatusIcon(e.capture.fetchStatus),size:"medium"}}),e._v(" "+e._s(e.capture.fetchStatus)+", http status: "+e._s(e.capture.httpStatus))],1),e._v(" "),e.document.allowsCapture?r("res-button",{attrs:{disabled:e.busy,paddingless:""},on:{click:function(t){return t.preventDefault(),e.processAgain("FETCH")}}},[r("res-icon",{attrs:{name:"refresh",size:"medium"}}),e._v(" "),r("button",[e._v("Rerun fetch")])],1):e._e()],1),e._v(" "),r("dt",[e._v("Parse")]),e._v(" "),r("dd",{staticClass:"--split"},[r("span",[r("res-icon",{attrs:{name:e.processingStatusIcon(e.capture.parseStatus),size:"medium"}}),e._v(" "+e._s(e.capture.parseStatus))],1),e._v(" "),r("res-button",{directives:[{name:"show",rawName:"v-show",value:e.isFetched,expression:"isFetched"}],attrs:{disabled:e.busy,paddingless:""},on:{click:function(t){return t.preventDefault(),e.processAgain("PARSE")}}},[r("res-icon",{attrs:{name:"refresh",size:"medium"}}),e._v(" "),r("button",[e._v("Rerun parse")])],1)],1),e._v(" "),r("dt",[e._v("Import")]),e._v(" "),r("dd",{staticClass:"--split"},[r("span",[r("res-icon",{attrs:{name:e.processingStatusIcon(e.capture.importStatus),size:"medium"}}),e._v(" "+e._s(e.capture.importStatus))],1),e._v(" "),r("res-button",{directives:[{name:"show",rawName:"v-show",value:e.isParsed,expression:"isParsed"}],attrs:{disabled:e.busy,paddingless:""},on:{click:function(t){return t.preventDefault(),e.processAgain("IMPORT")}}},[r("res-icon",{attrs:{name:"refresh",size:"medium"}}),e._v(" "),r("button",[e._v("Rerun import")])],1)],1),e._v(" "),r("dt",[e._v("Redirects")]),e._v(" "),r("dd",[r("res-icon",{attrs:{name:e.processingStatusIcon(e.capture.redirectsStatus),size:"medium"}}),e._v(" "+e._s(e.capture.redirectsStatus))],1)],2):e._e()]),e._v(" "),e.capture.error?r("section",[e._m(0),e._v(" "),r("p",[e._v(e._s(e.capture.errorDigest))]),e._v(" "),r("p",[r("res-icon",{attrs:{name:"x-circle",size:"medium"}}),e._v(" "),r("strong",[e._v(e._s(e.capture.error)+":")]),e._v(" "+e._s(e.capture.errorMessage)+"\n    ")],1),e._v(" "),e.errorTrace?r("textarea",{staticClass:"m-import-manager__console",attrs:{readonly:""},domProps:{value:e.errorTrace}}):e._e()]):e._e(),e._v(" "),e.capture.body?r("section",[e._m(1),e._v(" "),r("p",[e._v(e._s(e.capture.fetchDigest))]),e._v(" "),r("textarea",{staticClass:"m-import-manager__console",attrs:{readonly:""},domProps:{value:e.capture.body}})]):e._e(),e._v(" "),e.capture.storyJson?r("section",[e._m(2),e._v(" "),r("p",[e._v(e._s(e.capture.parseDigest))]),e._v(" "),r("textarea",{staticClass:"m-import-manager__console",attrs:{readonly:""},domProps:{value:e.prettyStoryJson}})]):e._e(),e._v(" "),e.capture.contentApiOps?r("section",[r("div",{staticClass:"m-import-manager__header --split"},[r("h2",{attrs:{id:"content-api-ops"}},[e._v("Content API Ops ("+e._s(e.contentApiOpsTotal)+")")]),e._v(" "),r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.processAgain("RESET_DELTA")}}},[r("res-icon",{attrs:{name:"x",size:"medium"}}),e._v(" "),r("button",[e._v("Reset delta")])],1)],1),e._v(" "),r("p",[e._v(e._s(e.capture.contentApiOpsDigest))]),e._v(" "),r("textarea",{staticClass:"m-import-manager__console",attrs:{readonly:""},domProps:{value:e.prettyContentApiOps}})]):e._e()],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",[this._v("Error summary")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",{attrs:{id:"fetch"}},[this._v("Fetched body")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",{attrs:{id:"parse"}},[this._v("Parsed story")])])}]},"8Sfi":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("2tY0"),a={props:{model:{type:Object,required:!0}},data:()=>({recounting:!1}),computed:{isProject(){return"project"===this.model._type},isSitemap(){return"sitemap"===this.model._type},childSitemaps(){return this.isProject?this.$store.getters.sitemapModelsList.filter(e=>e.projectId===this.model.id):[]},routerLink(){return{name:this.model._type,params:{id:this.model.id},query:{community_id:this.$store.state.currentCommunity.id}}}},methods:{aggregate(e){return this.isProject?(0,n.formatNumber)(this.childSitemaps.reduce((t,r)=>null===t||null===r[e]?null:t+r[e],0)):(0,n.formatNumber)(this.model[e])},recount(e){this.recounting=!0,this.$store.dispatch("recountSitemap",{id:e,deep:!0}).then(()=>this.recounting=!1).catch(()=>this.recounting=!1)}}};t.default=a,e.exports=t.default},9:function(e,t){},"92OB":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU"),i=r("2tY0"),o=r("hWEr"),s=r("MO6K"),u=(n=r("0OYW"))&&n.__esModule?n:{default:n};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p={captureType:"",groupTaxonomyType:"",name:"",parserJson:""};var m={mixins:[u.default],props:{id:{type:Number,required:!0}},data:()=>({advanced:!1,saving:!1,mutable:(0,o.formatMutable)(p)}),computed:{parser(){return this.$store.state.parserModels[this.id]||s.parserDefault},revisioner(){return this.$store.state.parserModels[this.parser.revisionerId]||s.parserDefault},revisions(){return this.$store.getters.parserModelsList.filter(e=>e.revisionerId===this.id).sort((e,t)=>t.createdAt.localeCompare(e.createdAt))},isLoaded(){return!!this.parser.id},isChanged(){return this.isLoaded&&(0,o.mutableHasChanged)(this.mutable,this.parser)},isRevision(){return!!this.revisioner.id}},mounted(){this.fetchParser({id:this.id}).then(e=>this.mutable=(0,o.formatMutable)(p,e))},methods:c(c({},(0,a.mapActions)(["fetchParser","setDialog","updateParser"])),{},{formatDateTime:i.formatDateTime,saveParser(e){if(!this.isChanged||this.saving)return;("SAVE"!==e?this.setDialog({tag:"parser-revision",action:e}):Promise.resolve(void 0)).then(t=>{const r=Object.assign({},this.mutable,{revisionNote:t,saveAction:e});r.groupTaxonomyType=r.groupTaxonomyType||null,this.saving=!0,this.updateParser({id:this.id,input:r}).then(e=>{this.mutable=(0,o.formatMutable)(p,e),this.saving=!1}).catch(()=>this.saving=!1)})}})};t.default=m,e.exports=t.default},"9dd1":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={namespaced:!0,state:{loading:!1},mutations:{SET_LOADING(e,t){e.loading=Boolean(t)}}};t.default=n,e.exports=t.default},"9jr9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("YiL/"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("jB/q");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"9pG0":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("jLho"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("47Xb");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},A0D0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("1ADp"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("TTRH");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},AGHT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("hWEr");const a={constituentCommunityId:"",name:"",urlMatcher:""};var i={props:{model:{type:Object,required:!0}},data(){return{editing:!1,mutable:(0,n.formatMutable)(a,this.model)}},computed:{isChanged(){return(0,n.mutableHasChanged)(this.mutable,this.model)},editStyle(){return this.editing?"transform:rotate(45deg)":null}},methods:{save(){this.isChanged&&this.$store.dispatch("updateCommunityDelegation",{id:this.model.id,input:this.mutable}).then(e=>{this.mutable=(0,n.formatMutable)(a,e)})},toggle(){this.editing&&this.save(),this.editing=!this.editing}}};t.default=i,e.exports=t.default},AkpB:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",[e.isSitemap?r("res-icon",{staticClass:"m-r-1",attrs:{size:"small",name:"tab"}}):e._e(),e._v(" "),e.isProject&&!e.model.active?r("svg",{staticClass:"m-r-5",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 401.998 401.998",width:"1em",height:"1em"}},[r("path",{attrs:{d:"M357.45,190.721c-5.331-5.33-11.8-7.993-19.417-7.993h-9.131v-54.821c0-35.022-12.559-65.093-37.685-90.218 C266.093,12.563,236.025,0,200.998,0c-35.026,0-65.1,12.563-90.222,37.688C85.65,62.814,73.091,92.884,73.091,127.907v54.821 h-9.135c-7.611,0-14.084,2.663-19.414,7.993c-5.33,5.326-7.994,11.799-7.994,19.417V374.59c0,7.611,2.665,14.086,7.994,19.417 c5.33,5.325,11.803,7.991,19.414,7.991H338.04c7.617,0,14.085-2.663,19.417-7.991c5.325-5.331,7.994-11.806,7.994-19.417V210.135 C365.455,202.523,362.782,196.051,357.45,190.721z M274.087,182.728H127.909v-54.821c0-20.175,7.139-37.402,21.414-51.675 c14.277-14.275,31.501-21.411,51.678-21.411c20.179,0,37.399,7.135,51.677,21.411c14.271,14.272,21.409,31.5,21.409,51.675V182.728 z"}})]):e._e(),e._v(" "),r("router-link",{attrs:{to:e.routerLink}},[e._v(e._s(e.model.name))])],1),e._v(" "),r("td",[e.isSitemap&&e.model.hasRunningCrawler?r("abbr",{attrs:{title:"RUNNING"}},[r("res-icon",{attrs:{name:"loading",size:"medium"}})],1):e.isSitemap?r("abbr",{attrs:{title:"INACTIVE"}},[r("res-icon",{attrs:{name:"minus-circle",size:"medium"}})],1):e._e()]),e._v(" "),r("td",[e._v(e._s(e.aggregate("activeDocumentsCount")))]),e._v(" "),r("td",[e._v(e._s(e.aggregate("importedDocumentsCount")))]),e._v(" "),r("td",[e._v(e._s(e.aggregate("failedDocumentsCount")))]),e._v(" "),r("td",[e._v(e._s(e.aggregate("newDocumentsCount")))]),e._v(" "),r("td",{staticClass:"--split"},[e._v("\n    "+e._s(e.aggregate("archivedDocumentsCount"))+"\n    "),e.isSitemap?r("res-button",{attrs:{disabled:e.recounting,paddingless:""},on:{click:function(t){return t.preventDefault(),e.recount(e.model.id)}}},[r("res-icon",{attrs:{name:"refresh",size:"medium"}}),r("button")],1):e._e()],1)])},a=[]},BhOQ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU"),i=r("2tY0"),o=r("MO6K"),s=(n=r("0OYW"))&&n.__esModule?n:{default:n};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={prompt:"Are you sure you want to start crawling this sitemap? This may take a while.",fields:{sitemapsLimit:{label:"Sitemaps limit",placeholder:"all",type:"number"},documentsLimit:{label:"Documents per sitemap",placeholder:"all",type:"number"},captureMode:{label:"Capture mode",options:{DEFAULT:"Capture missing/failed (default)",FORCE_RECAPTURE:"Capture all (force recapture)",TAXONOMY_ONLY:"Capture none (taxonomy only)"}}},submit:"Start Crawler"};var p={mixins:[s.default],props:{id:{type:Number,default:null},sitemapId:{type:Number,default:null},crawlable:{type:Boolean,default:!1}},data(){return{autoAdvance:(this.$store.state.crawlerModels[this.id]||o.crawlerDefault).autoAdvance}},computed:{crawler(){return this.$store.state.crawlerModels[this.id]||o.crawlerDefault},crawlerSitemap(){return this.$store.state.sitemapModels[this.crawler.sitemapEntryId]||o.sitemapDefault},sitemap(){return this.$store.state.sitemapModels[this.sitemapId]||o.sitemapDefault},hasCrawler(){return!!this.crawler.id},hasCrawlerLock(){return!this.sitemap.allowsCrawling},hasIdleCrawler(){return this.hasCrawler&&"RUNNING"!==this.crawler.status},hasRunningCrawler(){return this.hasCrawler&&"RUNNING"===this.crawler.status},mayCrawl(){return!this.hasCrawler||!this.hasRunningCrawler}},watch:{autoAdvance(){this.updateCrawler({id:this.id,input:{autoAdvance:this.autoAdvance}}).then(e=>this.autoAdvance=e.autoAdvance)}},methods:l(l({},(0,a.mapActions)(["createCrawler","updateCrawler","setDialog","stopCrawler"])),{},{formatHMS:i.formatHMS,formatDateTime:i.formatDateTime,statusIcon(e,t){return e>0&&e===t?"check-circle":this.hasRunningCrawler?"loading":"minus-circle"},startCrawler(){this.setDialog({tag:"input-form",form:d}).then(e=>{this.createCrawler({captureMode:e.captureMode,documentsLimit:e.documentsLimit,sitemapsLimit:e.sitemapsLimit,sitemapEntryId:this.sitemapId})})},cancelCrawler(){this.hasRunningCrawler&&confirm("Stop crawling?")&&this.stopCrawler({id:this.id})}})};t.default=p,e.exports=t.default},Cu1w:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("lTCR")),a=r("L2JU"),i=r("2tY0"),o=s(r("0OYW"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={All:{},Unfulfilled:{fulfilled:!1},"Fulfilled - all":{fulfilled:!0},"Fulfilled - blank":{fulfilledType:"blank"},"Fulfilled - video":{fulfilledType:"video"},"Fulfilled - embed":{fulfilledType:"embed"},"Fulfilled - text":{fulfilledType:"text"}},p=Object.keys(d)[0],m={prompt:"Run a processing job on documents of the current placeholder search:",params:null,fields:{task:{label:"Task",info:"https://github.com/voxmedia/chorus-import-manager/wiki/Document-Jobs#built-in-jobs",options:{}}},submit:"Start Job"};var f={mixins:[o.default],data(){return{filterOptions:d,loaded:!1,lookup:"",filter:p,page:Number(this.$route.query.page)||1,perPage:25,results:[],totalCount:0}},computed:l(l({},(0,a.mapState)(["currentCommunity"])),{},{lookupInput:{get(){return this.lookup||""},set(e){e=e||null,this.lookup!==e&&(this.lookup=e,this.page=1)}},filterInput:{get(){return this.filter},set(e){this.filter!==e&&(this.filter=d.hasOwnProperty(e)?e:p,this.page=1)}},searchParams(){let e={communityId:this.currentCommunity.id,pageNumber:this.page,perPage:this.perPage};return/^p\s*\d+$/.test(this.lookup)?e.id=[Number(this.lookup.replace(/[^\d]*(\d+)/,"$1"))]:/^\d+$/.test(this.lookup)?(e.documentEntryId=Number(this.lookup),e.order="DOCUMENT_ENTRY"):this.lookup&&(e.contentType=this.lookup,e.order="CONTENT_TYPE"),Object.assign(e,d[this.filter])},downloadUrl(){const e=this.searchParams,t=[(0,i.importManagerUrl)(),"/reports/placeholders?community_id="+e.communityId];return e.id&&t.push("&id="+e.id),e.documentEntryId&&t.push("&document_entry_id="+e.documentEntryId),e.contentType&&t.push("&content_type="+e.contentType),e.order&&t.push("&order="+e.order),t.push("&columns=id,community_id,document_entry_id,content_type,data"),t.join("")}}),watch:{page(){this.$router.replace({query:{community_id:this.currentCommunity.id,page:this.page}})}},methods:l(l({},(0,a.mapActions)(["createJob","fetchJobTasks","setDialog"])),{},{formatNumber:i.formatNumber,jobParams(){const e=Object.assign({},this.searchParams);return delete e.pageNumber,delete e.perPage,delete e.order,e},async runJob(){m.params=JSON.stringify(this.jobParams()),m.fields.task.options=await this.fetchJobTasks(),this.setDialog({tag:"input-form",form:m}).then(async e=>{const t=await this.createJob({search:{communityId:this.currentCommunity.id,placeholders:this.jobParams()},task:e.task});this.$router.replace({name:"jobs",query:{community_id:this.currentCommunity.id,job:t}})})}}),apollo:{results:{client:"importer",query:n.default`
        query SearchPlaceholders($input: SearchImporterStoryPlaceholdersInput!) {
          search: searchImporterStoryPlaceholders(input: $input) {
            pageNumber
            results {
              id
              contentType
              data
              documentEntryId
              fulfilled
              fulfilledType
            }
            totalCount
          }
        }
      `,variables(){return{input:this.searchParams}},update(e){return this.loaded=!0,this.page=e.search.pageNumber,this.totalCount=e.search.totalCount,e.search.results}}}};t.default=f,e.exports=t.default},DGB0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={computed:i({},(0,n.mapState)(["currentDialog"])),methods:i(i({},(0,n.mapActions)(["setDialog"])),{},{close(){this.setDialog(null)}})};t.default=s,e.exports=t.default},DHCs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=o(r("P+zK")),i=o(r("GWJu"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c={components:{DocumentsSearch:a.default,ProjectsRow:i.default},data:()=>({}),computed:u(u(u({},(0,n.mapState)(["currentCommunity"])),(0,n.mapGetters)(["projectModelsList","sitemapModelsList"])),{},{projectsTableItems(){return this.projectModelsList.reduce((e,t)=>(e.push(t),e=e.concat(this.sitemapsForProject(t))),[])},projectSearchOptions(){return this.projectModelsList.reduce((e,t)=>(e[t.id]={id:t.id,name:t.name,sitemaps:this.sitemapsForProject(t)},e),{})}}),mounted(){this.fetchProjects()},methods:u(u({},(0,n.mapActions)(["fetchProjects","setDialog"])),{},{sitemapsForProject(e){return this.sitemapModelsList.filter(t=>t.projectId===e.id)},newProject(){this.setDialog({tag:"create-project"})}})};t.default=c,e.exports=t.default},DraD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Wdcv"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("5eCQ");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"E/bY":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("t9xC"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("lHi2");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},Fw7v:function(e,t,r){"use strict";var n=r("rE/H"),a=r("gjeX");e.exports=function(e){return a(n(e))}},GWJu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("8Sfi"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("AkpB");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},HMaV:function(e,t,r){"use strict";var n=d(r("Kw5r")),a=d(r("L2JU")),i=d(r("jE9Z")),o=d(r("Ui0k")),s=d(r("YWf4")),u=d(r("HjMn")),l=d(r("v3P4")),c=r("YbFx");function d(e){return e&&e.__esModule?e:{default:e}}const p=document.querySelector('script[type="config"]'),m=JSON.parse(p.textContent);n.default.use(a.default),n.default.use(o.default),n.default.use(i.default);const f=new o.default({defaultClient:c.towerClient,clients:{importer:c.importerClient,tower:c.towerClient}});new n.default({router:l.default,apolloProvider:f,store:(0,u.default)(m),el:"#app",ignoredElements:res.manifest.tags.all,data:()=>({config:m}),render:e=>e(s.default)})},HfYJ:function(e,t,r){"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={[function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}a.default=e,r&&r.set(e,a);return a}(r("aZOI")).SET_CONTEXT](e,t){let{community:r,user:n,entitlements:a}=t;r&&r.id&&r.network&&(e.currentCommunity=r,Object.keys(r.network).length&&(e.network=r.network)),n&&(e.currentUser=n),void 0!==a&&(e.entitlements=a)}};t.default=a,e.exports=t.default},HjMn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=y(r("L2JU")),a=y(r("L0rI")),i=y(r("eyzz")),o=y(r("86iG")),s=y(r("OEZ+")),u=y(r("2kCB")),l=y(r("5l/Q")),c=y(r("hN81")),d=y(r("ouhT")),p=y(r("SYtm")),m=y(r("nOLx")),f=y(r("SlbJ")),v=y(r("gIe6")),h=y(r("6m70"));function y(e){return e&&e.__esModule?e:{default:e}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n.default.Store({actions:b(b(b(b(b(b(b(b(b(b(b({},a.default),i.default),o.default),s.default),u.default),l.default),c.default),d.default),p.default),m.default),f.default),getters:v.default,mutations:h.default,state:Object.assign({captureModels:{},communityModels:{},crawlerModels:{},documentModels:{},jobModels:{},parserModels:{},placeholderModels:{},projectModels:{},sitemapModels:{},currentDialog:null,currentCommunity:{id:null,name:null},currentUser:{id:null,networkRoles:[],memberships:[],roles:[]},documentJobTasks:null,entitlements:null,notifications:[]},e)})},e.exports=t.default},IFOU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("BhOQ"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("0xoD");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},J2Uy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("aXGp"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("c/ne");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},J7I0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(r("Wdwt")),a=u(r("0OYW")),i=r("L2JU"),o=r("2tY0"),s=r("MO6K");function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={components:{AppBreadcrumbs:n.default},mixins:[a.default],props:{id:{type:Number,required:!0}},data:()=>({busy:!1}),computed:{capture(){return this.$store.state.captureModels[this.id]||s.captureDefault},document(){return this.$store.state.documentModels[this.capture.documentEntryId]||s.documentDefault},sitemap(){return this.$store.state.sitemapModels[this.document.sitemapEntryId]||s.sitemapDefault},project(){return this.$store.state.projectModels[this.document.projectId]||s.projectDefault},parser(){return this.$store.state.parserModels[this.project.documentParserId]||s.parserDefault},isCurrentImport(){return this.id===this.document.importedDocumentCaptureId},isLoaded(){return!!this.capture.id},isFetched(){return"COMPLETE"===this.capture.fetchStatus},isParsed(){return"COMPLETE"===this.capture.parseStatus},errorTrace(){if(this.capture.errorTrace)try{let e=JSON.parse(this.capture.errorTrace);if(Array.isArray(e))return e.join("\n")}catch(e){}return this.capture.errorTrace||""},prettyStoryJson(){const e=JSON.parse(this.capture.storyJson);return JSON.stringify(e,null,2)},prettyContentApiOps(){const e=JSON.parse(this.capture.contentApiOps);return JSON.stringify(e,null,2)},contentApiOpsTotal(){return JSON.parse(this.capture.contentApiOps).length}},mounted(){this.fetchCapture({id:this.id})},destroyed(){this.unloadCapture({id:this.id})},methods:c(c({},(0,i.mapActions)(["fetchCapture","processCapture","unloadCapture"])),{},{formatDateTime:o.formatDateTime,processingStatusIcon:e=>o.processingStatusIcons[e]||o.processingStatusIcons.UNATTEMPTED,processAgain(e){this.busy=!0,this.processCapture({id:this.id,action:e}).then(()=>this.busy=!1)}})};t.default=p,e.exports=t.default},Jrjy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=r("hWEr");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={chorusId:"",identity:""};var l={props:{model:{type:Object,required:!0}},data(){return{editing:!1,mutable:(0,a.formatMutable)(u,this.model)}},computed:{isChanged(){return(0,a.mutableHasChanged)(this.mutable,this.model)},editStyle(){return this.editing?"transform:rotate(45deg)":null}},methods:o(o({},(0,n.mapActions)(["updateIdentity"])),{},{save(){this.isChanged&&this.updateIdentity({id:this.model.id,input:this.mutable}).then(e=>{this.mutable=(0,a.formatMutable)(u,e)})},toggle(){this.editing&&this.save(),this.editing=!this.editing}})};t.default=l,e.exports=t.default},JvDQ:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-flex--v l-fullheight"},[r("app-notifications"),e._v(" "),r("nav",{staticClass:"m-nav m-nav--dashboard"},[e.community&&e.currentUser?r("community-select",{staticClass:"m-community-select",attrs:{community:e.community,user:e.currentUser,entitlements:e.entitlements,allowedRoles:{}},model:{value:e.communityId,callback:function(t){e.communityId=t},expression:"communityId"}}):e._e(),e._v(" "),e.accessGranted?r("div",{staticClass:"m-nav__right"},[r("res-button",{directives:[{name:"show",rawName:"v-show",value:!e.isDashboard,expression:"!isDashboard"}],staticClass:"m-r-1",on:{click:function(t){return t.preventDefault(),e.goToDashboard()}}},[r("button",[e._v("Dashboard")])]),e._v(" "),r("res-button",{staticClass:"m-r-1",attrs:{id:"dropdown-manage"}},[r("button",[e._v("Manage")]),e._v(" "),r("res-icon",{attrs:{name:"down"}})],1),e._v(" "),r("res-dropdown",{ref:"dropdownManage",attrs:{for:"dropdown-manage"},on:{click:function(t){return e.closeDropdown(t)}}},[r("a",{attrs:{href:e.importManagerUrl()+"/sidekiq",target:"_blank"}},[e._v("Sidekiq queue")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("jobs")}},[e._v("Document jobs")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("communities")}},[e._v("Communities")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("placeholders")}},[e._v("Placeholders")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("asset-identities")}},[e._v("Asset identities")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("gallery-identities")}},[e._v("Gallery identities")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("group-identities")}},[e._v("Group identities")]),e._v(" "),r("router-link",{attrs:{to:e.routeTo("user-identities")}},[e._v("User identities")])],1),e._v(" "),r("res-input",{ref:"quickSearch",staticClass:"m-import-manager__quick-search"},[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.quickSearch,expression:"quickSearch",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"URL or Error Code"},domProps:{value:e.quickSearch},on:{change:function(t){e.quickSearch=t.target.value}}})])],1):e._e()],1),e._v(" "),r("div",{staticClass:"l-content p-flex is-compose"},[r("div",{staticClass:"l-content__inner p-flex--v",attrs:{id:"viewport"}},[e.accessGranted?r("router-view",{key:e.routeKey,staticClass:"m-dashboard__content m-import-manager"}):e._e()],1)]),e._v(" "),r("app-modal"),e._v(" "),r("app-loader",{attrs:{iconName:"more",animation:"static"}})],1)},a=[]},KNZX:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("section",[r("div",{staticClass:"m-import-manager__header --split"},[r("h1",[e._v("Projects")]),e._v(" "),r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.newProject()}}},[r("res-icon",{attrs:{name:"add",size:"medium"}}),e._v(" "),r("button",[e._v("New Project")])],1)],1),e._v(" "),r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",[e._v("Title")]),e._v(" "),r("th",[e._v("Crawler")]),e._v(" "),r("th",[e._v("Documents")]),e._v(" "),r("th",[e._v("Imported")]),e._v(" "),r("th",[e._v("Failed")]),e._v(" "),r("th",[e._v("New")]),e._v(" "),r("th",[e._v("Archived")])])]),e._v(" "),r("tbody",e._l(e.projectsTableItems,(function(e){return r("projects-row",{key:[e._type,e.id].join(":"),attrs:{model:e}})})),1)])])],1),e._v(" "),r("documents-search",{attrs:{projects:e.projectSearchOptions}},[r("h1",[e._v("Document Search")])])],1)},a=[]},L0rI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CaptureBaseAttrs=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const u=a.default`
  fragment CaptureBaseAttrs on ImporterDocumentCapture {
    contentApiOpsDigest
    createdAt
    documentEntryId
    error
    errorDigest
    fetchDigest
    fetchStatus
    id
    importStatus
    parseDigest
    parseStatus
    redirectsStatus
  }
`;t.CaptureBaseAttrs=u;const l=a.default`
  fragment DocumentDisplayAttrs on ImporterDocumentEntry {
    archived
    archivalStatus
    canonicalUrl
    chorusEntryId
    chorusEntryUrl
    contentApiUuid
    fetchedAt
    id
    importedDocumentCaptureId
    status
  }
`;var c={async fetchCapture(e,t){let{state:r}=e;const{data:n}=await o.importerClient.query({query:a.default`
        query FetchDocumentCapture($id: Int!) {
          capture: importerDocumentCapture(id: $id) {
            ...CaptureBaseAttrs
            body
            documentEntry {
              ...DocumentDisplayAttrs
              allowsCapture
              project {
                id
                name
                documentParser {
                  id
                  name
                }
              }
              sitemapEntry {
                id
                name
                parentSitemap {
                  id
                  name
                }
              }
            }
            errorMessage
            errorTrace
            httpStatus
            redirectUrl
            storyJson
            contentApiOps
          }
        }
        ${u}
        ${l}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{data:n,documentModels:"capture.documentEntry",captureModels:"capture",sitemapModels:["capture.documentEntry.sitemapEntry","capture.documentEntry.sitemapEntry.parentSitemap"],parserModels:"capture.documentEntry.project.documentParser",projectModels:"capture.documentEntry.project"}),Promise.resolve(r.captureModels[n.capture.id])},async processCapture(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation ProcessDocumentCapture($id: Int!, $action: ImporterDocumentCaptureAction!) {
          capture: processImporterDocumentCapture(id: $id, action: $action) {
            ...CaptureBaseAttrs
            documentEntry {
              ...DocumentDisplayAttrs
            }
            errorMessage
            errorTrace
            httpStatus
            storyJson
            contentApiOps
          }
        }
        ${u}
        ${l}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{captureModels:n.capture,documentModels:n.capture.documentEntry}),Promise.resolve(r.captureModels[t.id])},unloadCapture(e,t){let{state:r}=e;const n=r.captureModels[t.id];this.commit(i.DELETE_MODELS,{captureModels:n,documentModels:r.documentModels[n.documentEntryId]})}};t.default=c},L4KC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("jema"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("qRTN");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},LQ5i:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("DHCs"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("KNZX");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},LT77:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("9jr9"))&&n.__esModule?n:{default:n};const i={status:null};var o={components:{SitemapsTable:a.default},props:{label:{type:String,default:null},collapsable:{type:Boolean,default:!1},parentId:{type:Number,default:null},projectId:{type:Number,default:null},version:{type:Number,default:null}},data(){return{filterSelection:"All",filterOptions:{All:{},New:{status:"CREATED"},Capturing:{status:"CAPTURING"},Fetched:{status:"CAPTURED"},Failed:{status:"FAILED"}},filters:Object.assign({},i),searchActive:!this.collapsable}},watch:{filterSelection(){const e=this.filterOptions[this.filterSelection];this.filters=Object.assign({},i,e)}}};t.default=o,e.exports=t.default},MDZW:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={data:()=>({revisionNote:""}),computed:i({},(0,n.mapState)(["currentDialog"])),methods:i(i({},(0,n.mapActions)(["setDialog"])),{},{save(){this.currentDialog.resolve(this.revisionNote||void 0),this.setDialog(null)},close(){this.setDialog(null)}})};t.default=s,e.exports=t.default},MMUF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU"),i=r("2tY0");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={mixins:[((n=r("elgu"))&&n.__esModule?n:{default:n}).default],data(){return{loaded:!1,activeJobId:this.$route.query.job}},computed:{jobRollups(){const e=Object.values(this.$store.state.jobModels).reduce((e,t)=>(e[t.jobId]=e[t.jobId]||[],e[t.jobId].push(t),e),{});return Object.keys(e).map(t=>{const r=e[t],n=["PENDING","RUNNING","FAILED","CANCELLED"];let a="COMPLETED";for(let e of n)if(r.some(t=>t.status===e)){a=e;break}return Object.assign({},r[0],{id:r[0].jobId,documentsTotal:r.reduce((e,t)=>e+t.documentsTotal,0),percentComplete:Math.floor(r.reduce((e,t)=>e+t.percentComplete,0)/r.length),status:a,workers:r})})},jobs(){return this.jobRollups.reduce((e,t)=>(e.push(t),e.concat(t.workers)),[])}},watch:{activeJobId(){const e={community_id:this.$store.state.currentCommunity.id};this.activeJobId&&(e.job=this.activeJobId),this.$router.replace({query:e})},"$route.query"(){const e=this.$route.query;e.job&&(this.activeJobId=e.job)}},mounted(){this.startImmediatePolling(()=>{this.fetchJobs().then(()=>this.loaded=!0)},1e4)},methods:s(s({},(0,a.mapActions)(["cancelJob","deleteJob","fetchJobs","resumeJob","setDialog"])),{},{formatDateTime:i.formatDateTime,formatNumber:i.formatNumber,statusIcon:e=>i.crawlerIcons[e],toggleJob(e){this.activeJobId=e.jobId===this.activeJobId?null:e.jobId},isVisible(e){return e.workers||e.jobId===this.activeJobId},mayCancel:e=>"RUNNING"===e.status||e.workers&&e.workers.some(e=>"RUNNING"===e.status),mayResume:e=>!e.workers&&["CANCELLED","FAILED"].includes(e.status),mayTrash:e=>["COMPLETED","CANCELLED","FAILED"].includes(e.status),confirm(e,t){const r=e.workers?" and all of its workers":"";return confirm(`${t} this job${r}?`)},confirmCancelJob(e){this.confirm(e,"Cancel")&&this.cancelJob(e.id)},confirmDeleteJob(e){this.confirm(e,"Delete")&&this.deleteJob(e.id)},jobLogUrl(e){const t=[(0,i.importManagerUrl)()];return t.push(e.workers?"reports/job/"+e.jobId:"reports/job/worker/"+e.id),t.join("/")}})};t.default=l,e.exports=t.default},MO6K:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sitemapDefault=t.projectDefault=t.placeholderDefault=t.parserDefault=t.jobDefault=t.identityDefault=t.documentDefault=t.defaultsByModelSet=t.crawlerDefault=t.communityDefault=t.captureDefault=void 0;const n={_type:"capture",createdAt:null,documentEntryId:null,body:null,contentApiOps:null,contentApiOpsDigest:null,error:null,errorDigest:null,errorMessage:null,errorTrace:null,fetchDigest:null,fetchStatus:null,httpStatus:null,id:null,importStatus:null,parseDigest:null,parseStatus:null,redirectsStatus:null,redirectUrl:null,storyJson:null};t.captureDefault=n;const a={_type:"community",id:null,constituentCommunityId:null,delegateCommunityId:null,name:null,urlMatcher:null};t.communityDefault=a;const i={_type:"crawler",autoAdvance:!0,documentsComplete:null,documentsLimit:null,documentsTotal:null,duration:null,finishedAt:null,id:null,percentComplete:null,recordsPerSecond:null,sitemapEntryId:null,sitemapsComplete:null,sitemapsLimit:null,sitemapsTotal:null,status:null};t.crawlerDefault=i;const o={_type:"document",allowsCapture:null,archived:null,archivalStatus:null,canonicalUrl:null,communityId:null,chorusEntryId:null,chorusEntryUrl:null,clickabilityUrl:null,contentApiUuid:null,fetchedAt:null,id:null,importedDocumentCaptureId:null,modifiedAt:null,projectId:null,sitemapEntryId:null,status:null,towerUrl:null,watched:!1};t.documentDefault=o;t.identityDefault={_type:"identity",chorusId:null,identity:null,type:null};const s={_type:"job",createdAt:null,documentsTotal:null,documentsComplete:null,errorMessage:null,errorTrace:null,finishAt:null,id:null,jobId:null,lastDocumentId:null,percentComplete:null,searchJson:null,status:null,startAt:null,task:null};t.jobDefault=s;const u={_type:"parser",captureType:null,captureTypes:[],createdAt:null,groupTaxonomyType:null,groupTaxonomyTypes:[],id:null,name:null,parserJson:null,revisionerId:null,revisionNote:null,schemaJson:null};t.parserDefault=u;const l={_type:"placeholder",contentType:null,data:null,documentEntryId:null,id:null,fulfilled:null,fulfilledType:null,fulfilledValue:null};t.placeholderDefault=l;const c={_type:"project",active:null,createRedirects:null,createAuthors:null,documentParserId:null,enableFrontPage:null,id:null,name:null};t.projectDefault=c;const d={_type:"sitemap",activeDocumentsCount:null,allowsCrawling:null,archivedDocumentsCount:null,blacklistUrls:null,communityDelegationId:null,communityDelegationMode:null,crawlerId:null,currentCrawlerId:null,error:null,errorMessage:null,failedDocumentsCount:null,fetchedAt:null,hasRunningCrawler:!1,id:null,importedDocumentsCount:null,name:null,newDocumentsCount:null,parentId:null,projectId:null,status:null,type:null,url:null};t.sitemapDefault=d;const p={captureModels:n,crawlerModels:i,documentModels:o,jobModels:s,communityModels:a,parserModels:u,placeholderModels:l,projectModels:c,sitemapModels:d};t.defaultsByModelSet=p},NJDO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildModels=h,t.buildPatches=function(e){return h(e,o)},t.newCapture=s,t.newCrawler=u,t.newDocument=l,t.newIdentity=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.identityDefault,e):(0,n.schemaMerge)(a.identityDefault,e);return Object.freeze(r)},t.newJob=c,t.newParser=d,t.newPlaceholder=p,t.newProject=m,t.newSitemap=f;var n=r("hWEr"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r("MO6K"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}const o={patch:!0};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.captureDefault,e):(0,n.schemaMerge)(a.captureDefault,e);return e.documentEntry&&(r.documentEntryId=e.documentEntry.id),Object.freeze(r)}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.crawlerDefault,e):(0,n.schemaMerge)(a.crawlerDefault,e);return e.sitemapEntry&&(r.sitemapEntryId=e.sitemapEntry.id),Object.freeze(r)}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.documentDefault,e):(0,n.schemaMerge)(a.documentDefault,e);return e.sitemapEntry&&(r.sitemapEntryId=e.sitemapEntry.id),e.project&&(r.projectId=e.project.id),Object.freeze(r)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.jobDefault,e):(0,n.schemaMerge)(a.jobDefault,e);return Object.freeze(r)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.parserDefault,e):(0,n.schemaMerge)(a.parserDefault,e);return e.revisioner&&(r.revisionerId=e.revisioner.id),Object.freeze(r)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.placeholderDefault,e):(0,n.schemaMerge)(a.placeholderDefault,e);return e.documentEntry&&(r.documentEntryId=e.documentEntry.id),Object.freeze(r)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.projectDefault,e):(0,n.schemaMerge)(a.projectDefault,e);return e.documentParser&&(r.documentParserId=e.documentParser.id),Object.freeze(r)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.patch?(0,n.schemaFilter)(a.sitemapDefault,e):(0,n.schemaMerge)(a.sitemapDefault,e);return e.parentSitemap&&(r.parentId=e.parentSitemap.id),e.project&&(r.projectId=e.project.id),e.crawler&&(r.crawlerId=e.crawler.id),e.currentCrawler&&(r.currentCrawlerId=e.currentCrawler.id),Object.freeze(r)}const v={captureModels:s,communityModels:e=>e,crawlerModels:u,documentModels:l,jobModels:c,parserModels:d,placeholderModels:p,projectModels:m,sitemapModels:f};function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};for(let[a,i]of Object.entries(e)){if("data"===a)continue;const o=Array.isArray(i)?i:[i],s=v[a];if(!s)throw"invalid model namespace";for(let i of o){if("string"==typeof i){if(!e.data)throw"string reference requires a data param";i=(0,n.resolveObject)(e.data,i)}if(i){Array.isArray(i)||(i=[i]),r[a]=r[a]||[];for(let e of i)r[a].push(s(e,t))}}}return r}},NNlp:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{staticStyle:{width:"45%"}},[e.editing?r("res-input",[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.mutable.identity,expression:"mutable.identity",modifiers:{lazy:!0}}],attrs:{type:"text"},domProps:{value:e.mutable.identity},on:{change:function(t){return e.$set(e.mutable,"identity",t.target.value)}}})]):r("span",[e._v(e._s(e.mutable.identity))])],1),e._v(" "),r("td",{staticStyle:{width:"25%"}},[e.editing?r("res-input",[r("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.mutable.chorusId,expression:"mutable.chorusId",modifiers:{lazy:!0,number:!0}}],attrs:{type:"text"},domProps:{value:e.mutable.chorusId},on:{change:function(t){e.$set(e.mutable,"chorusId",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]):r("span",[e._v(e._s(e.mutable.chorusId))])],1),e._v(" "),r("td",{staticStyle:{width:"25%"}},[e._v(e._s(e.model.communityId))]),e._v(" "),r("td",{staticStyle:{width:"5%"}},[r("res-button",{style:e.editStyle,attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.toggle(t)}}},[r("res-icon",{attrs:{name:"edit",size:"medium"}}),r("button")],1)],1)])},a=[]},O6Gk:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=u(r("9pG0")),i=u(r("yFyr")),o=u(r("5yIg")),s=u(r("L4KC"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={components:{CreateProject:a.default,InputForm:s.default,ParserRevision:i.default,TextConsole:o.default},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,n.mapState)(["currentDialog"]))};t.default=d,e.exports=t.default},"OEZ+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx"),s=r("L0rI");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}const l=a.default`
  fragment DocumentBaseAttrs on ImporterDocumentEntry {
    archived
    archivalStatus
    canonicalUrl
    chorusEntryId
    chorusEntryUrl
    clickabilityUrl
    fetchedAt
    id
    modifiedAt
    status
    towerUrl
    watched
  }
`;var c={async fetchDocument(e,t){let{state:r}=e;const{data:n}=await o.importerClient.query({query:a.default`
        query FetchDocument($id: Int!) {
          document: importerDocumentEntry(id: $id) {
            ...DocumentBaseAttrs
            allowsCapture
            communityId
            contentApiUuid
            documentCaptures {
              ...CaptureBaseAttrs
            }
            importedDocumentCaptureId
            project {
              id
              name
              communityDelegations {
                constituentCommunityId
                id
                name
              }
            }
            sitemapEntry {
              id
              name
              parentSitemap {
                id
                name
              }
            }
            storyPlaceholders {
              contentType
              data
              documentEntryId
              id
              fulfilled
            }
          }
        }
        ${l}
        ${s.CaptureBaseAttrs}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{data:n,documentModels:"document",captureModels:"document.documentCaptures",placeholderModels:"document.storyPlaceholders",sitemapModels:["document.sitemapEntry","document.sitemapEntry.parentSitemap"],projectModels:"document.project",communityModels:"document.project.communityDelegations"}),Promise.resolve(r.documentModels[t.id])},async findOrCreateDocument(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation FindOrCreateDocument($input: CreateImporterDocumentEntryInput!) {
          document: findOrCreateImporterDocumentEntry(input: $input) {
            id
          }
        }
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{documentModels:n.document}),Promise.resolve(r.documentModels[n.document.id])},async updateDocument(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateDocument($id: Int!, $input: UpdateImporterDocumentEntryInput!) {
          document: updateImporterDocumentEntry(id: $id, input: $input) {
            archived
            archivalStatus
            id
            watched
          }
        }
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{documentModels:n.document}),Promise.resolve(r.documentModels[t.id])},async captureDocument(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CaptureDocument($id: Int!) {
          document: captureImporterDocumentEntry(id: $id) {
            documentCaptures {
              ...CaptureBaseAttrs
            }
            id
            status
          }
        }
        ${s.CaptureBaseAttrs}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{documentModels:n.document}),this.commit(i.SET_MODELS,{captureModels:n.document.documentCaptures}),Promise.resolve(r.documentModels[t.id])},async changeDocumentCommunity(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation ChangeDocumentCommunity($id: Int!, $communityId: Int!) {
          document: changeImporterDocumentEntryCommunity(id: $id, communityId: $communityId) {
            communityId
            contentApiUuid
            chorusEntryId
            chorusEntryUrl
            id
            modifiedAt
          }
        }
      `,variables:{id:t.id,communityId:t.communityId}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{documentModels:n.document}),Promise.resolve(r.documentModels[t.id])},unloadDocument(e,t){let{getters:r}=e;this.commit(i.DELETE_MODELS,{captureModels:r.captureModelsList.filter(e=>e.documentEntryId===t.id),documentModels:r.documentModelsList.filter(e=>e.id===t.id),placeholderModels:r.placeholderModelsList.filter(e=>e.documentEntryId===t.id)})}};t.default=c,e.exports=t.default},OVPs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("gtXd"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("747J");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},Opgh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("LT77"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("ZjI7");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},"P+zK":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("vuKD"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("w6yl");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},PdIs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={components:{CommunityCell:((n=r("+w+W"))&&n.__esModule?n:{default:n}).default},props:{allowedRoles:{type:Object,required:!0},activeMemberships:{type:Array,default:()=>[]},defaultLogoUrl:{type:String,required:!0},networks:{type:Array,default:null},menuOpen:{type:Boolean,required:!0}},data:()=>({selectionId:null,expandedNetworks:{},fullHeight:null}),computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapState)(["currentUser"])),mounted(){this.setHeight(),window.addEventListener("click",this.closeMenu,!0),window.addEventListener("resize",this.setHeight)},beforeDestroy(){window.removeEventListener("click",this.closeMenu,!0),window.removeEventListener("resize",this.setHeight)},methods:{closeMenu(e){if(!e)return;const t=document.querySelector(".m-community-select__list"),r=document.querySelector(".m-community-select__menu-trigger");!this.menuOpen||t.contains(e.target)||r.contains(e.target)||this.$emit("closeMenu")},setHeight(){this.fullHeight=`height: ${window.innerHeight}px`},expandNetwork(e){this.expandedNetworks[e]=!this.expandedNetworks[e],this.expandedNetworks=Object.assign({},this.expandedNetworks)},isAuthorized(e){return this.currentUser.networkRoles.some(e=>e in this.allowedRoles)||this.activeMemberships.some(t=>t.community.id===e)},async selectCommunity(e){e&&(e&&e===this.selectionId||0===this.activeMemberships.length&&0===this.currentUser.networkRoles.length||(this.isAuthorized(e)||(e=this.activeMemberships[0].community.id),this.selectionId=e,localStorage.setItem("dashboardCommunityId",e),this.$router.push({query:{community_id:e}}),this.$emit("closeMenu")))}}};t.default=s,e.exports=t.default},SNZc:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("PdIs"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("4khC");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},SYtm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const u=a.default`
  fragment ProjectBaseAttrs on ImporterProject {
    active
    createRedirects
    createAuthors
    documentParserId
    enableFrontPage
    id
    name
  }
`;var l={async fetchProjects(e){let{state:t}=e;const{data:r}=await o.importerClient.query({query:a.default`
        query FetchProjectsAndParsers($communityId: Int!) {
          communities: importerCommunityDelegations(delegateId: $communityId) {
            constituentCommunityId
            id
            name
          }
          parsers: importerDocumentParsers(communityId: $communityId) {
            id
            name
          }
          projects: importerProjects(communityId: $communityId) {
            ...ProjectBaseAttrs
            sitemapEntries(root: true) {
              activeDocumentsCount
              archivedDocumentsCount
              failedDocumentsCount
              hasRunningCrawler
              id
              importedDocumentsCount
              name
              newDocumentsCount
              projectId
            }
          }
        }
        ${u}
      `,variables:{communityId:t.currentCommunity.id}}).catch(e=>this.commit(i.PUT_NOTICE,e)),n=r.projects.reduce((e,t)=>e.concat(t.sitemapEntries),[]);return this.commit(i.PATCH_MODELS,{parserModels:r.parsers,projectModels:r.projects,sitemapModels:n,communityModels:r.communities}),Promise.resolve()},async fetchProject(e,t){let{state:r}=e;return await this.dispatch("fetchProjects").then(()=>Promise.resolve(r.projectModels[t.id]))},async createProject(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateProject($input: CreateImporterProjectInput!) {
          project: createImporterProject(input: $input) {
            ...ProjectBaseAttrs
          }
        }
        ${u}
      `,variables:{input:Object.assign({communityId:r.currentCommunity.id,networkId:r.network.id},t)}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{projectModels:n.project}),Promise.resolve(r.projectModels[n.project.id])},async updateProject(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateProject($id: Int!, $input: UpdateImporterProjectInput!) {
          project: updateImporterProject(id: $id, input: $input) {
            ...ProjectBaseAttrs
          }
        }
        ${u}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{projectModels:n.project}),Promise.resolve(r.projectModels[t.id])}};t.default=l,e.exports=t.default},SlbJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx"),s=r("86iG");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}const l=a.default`
  fragment SitemapBaseAttrs on ImporterSitemapEntry {
    blacklistUrls
    id
    name
    status
    type
    url
  }
`;var c={async fetchSitemap(e,t){let{state:r}=e;const{data:n}=await o.importerClient.query({query:a.default`
        query FetchSitemap($id: Int!) {
          sitemap: importerSitemapEntry(id: $id) {
            ...SitemapBaseAttrs
            allowsCrawling
            communityDelegationId
            communityDelegationMode
            error
            errorMessage
            fetchedAt
            parentSitemap {
              id
              name
            }
            project {
              id
              name
              communityDelegations {
                constituentCommunityId
                id
                name
              }
            }
            currentCrawler {
              ...CrawlerBaseAttrs
              sitemapEntry {
                id
                name
                parentId
              }
            }
          }
        }
        ${l}
        ${s.CrawlerBaseAttrs}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{sitemapModels:[n.sitemap,n.sitemap.parentSitemap],projectModels:n.sitemap.project,crawlerModels:n.sitemap.currentCrawler,communityModels:n.sitemap.project.communityDelegations}),this.commit(i.PATCH_MODELS,{data:n,sitemapModels:"sitemap.currentCrawler.sitemapEntry"}),Promise.resolve(r.sitemapModels[t.id])},async createSitemap(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateSitemap($input: CreateImporterSitemapEntryInput!) {
          sitemap: createImporterSitemapEntry(input: $input) {
            ...SitemapBaseAttrs
          }
        }
        ${l}
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{sitemapModels:n.sitemap}),Promise.resolve(r.sitemapModels[n.sitemap.id])},async updateSitemap(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateSitemap($id: Int!, $input: UpdateImporterSitemapEntryInput!) {
          sitemap: updateImporterSitemapEntry(id: $id, input: $input) {
            ...SitemapBaseAttrs
            communityDelegationId
            communityDelegationMode
          }
        }
        ${l}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{sitemapModels:n.sitemap}),Promise.resolve(r.sitemapModels[t.id])},async recountSitemap(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation RecountSitemap($id: Int!, $deep: Boolean=false) {
          sitemap: recountImporterSitemapEntry(id: $id, deep: $deep) {
            ...SitemapBaseAttrs
            activeDocumentsCount
            archivedDocumentsCount
            failedDocumentsCount
            importedDocumentsCount
            newDocumentsCount
          }
        }
        ${l}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{sitemapModels:n.sitemap}),Promise.resolve(r.sitemapModels[t.id])},async captureSitemap(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CaptureSitemap($id: Int!) {
          sitemap: captureImporterSitemapEntry(id: $id) {
            ...SitemapBaseAttrs
          }
        }
        ${l}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{sitemapModels:n.sitemap}),Promise.resolve(r.sitemapModels[t.id])},unloadSitemap(e,t){let{state:r}=e;const n=r.sitemapModels[t.id];this.commit(i.SET_MODELS,{sitemapModels:{id:n.id,name:n.name}})}};t.default=c,e.exports=t.default},TTRH:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("section",[r("div",{staticClass:"m-import-manager__header"},[r("h1",[e._v("Project: "+e._s(e.project.name))]),e._v(" "),e.saving?r("res-icon",{staticClass:"m-l-1",attrs:{name:"more",size:"medium"}}):e._e()],1),e._v(" "),r("form",[r("fieldset",[r("div",{staticClass:"m-import-manager__fieldset"},[r("div",{staticClass:"m-import-manager__fieldset__input"},[r("res-input",[r("label",[e._v("Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.mutable.name,expression:"mutable.name",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.mutable.name},on:{change:function(t){return e.$set(e.mutable,"name",t.target.value)}}})])],1),e._v(" "),r("div",{staticClass:"m-import-manager__fieldset__input m-l-1"},[e.isLoaded?r("div",{staticClass:"m-import-manager__actionset"},[r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.newParser()}}},[r("res-icon",{attrs:{name:"add",size:"medium"}}),e._v(" "),r("button",[e._v("New parser")])],1),e._v(" "),r("res-button",{staticClass:"m-l-1",attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.editParser()}}},[r("res-icon",{attrs:{name:"edit",size:"medium"}}),e._v(" "),r("button",[e._v("Edit parser")])],1)],1):e._e(),e._v(" "),r("res-select",[r("label",[e._v("Markup Parser")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.mutable.documentParserId,expression:"mutable.documentParserId"}],attrs:{name:"parser"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.mutable,"documentParserId",t.target.multiple?r:r[0])}}},e._l(e.parserModelsList,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])],1)])]),e._v(" "),r("dl",{staticClass:"m-import-manager__defs"},[r("dt",[r("res-switch",{attrs:{checked:e.mutable.createRedirects},on:{change:function(t){e.mutable.createRedirects=t.target.checked}}},[r("input",{attrs:{type:"checkbox"}}),e._v(" "),r("label",[e._v("Create redirects")])])],1),e._v(" "),r("dd",[e._v("Create redirects for canonical URLs and AMP pages.")]),e._v(" "),r("dt",[r("res-switch",{attrs:{checked:e.mutable.createAuthors},on:{change:function(t){e.mutable.createAuthors=t.target.checked}}},[r("input",{attrs:{type:"checkbox"}}),e._v(" "),r("label",[e._v("Create authors")])])],1),e._v(" "),r("dd",[e._v("Add author permissions and profiles to users with email addresses.")]),e._v(" "),r("dt",[r("res-switch",{attrs:{checked:e.mutable.enableFrontPage},on:{change:function(t){e.mutable.enableFrontPage=t.target.checked}}},[r("input",{attrs:{type:"checkbox"}}),e._v(" "),r("label",[e._v("Add to front page")])])],1),e._v(" "),r("dd",[e._v('Automatically add documents to the "Front Page" group.')]),e._v(" "),r("dt",[r("res-switch",{attrs:{checked:!e.mutable.active},on:{change:function(t){e.mutable.active=!t.target.checked}}},[r("input",{attrs:{type:"checkbox"}}),e._v(" "),r("label",[e._v("Disable capture")])])],1),e._v(" "),r("dd",[e._v("Prevents further captures from the remote site.")])])])]),e._v(" "),r("section",[r("div",{staticClass:"m-import-manager__header --split"},[r("h2",[e._v("Sitemaps")]),e._v(" "),r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.newSitemap()}}},[r("res-icon",{attrs:{name:"add",size:"medium"}}),e._v(" "),r("button",[e._v("New sitemap")])],1)],1),e._v(" "),e.isLoaded?r("sitemaps-table",{attrs:{projectId:e.id,parentId:null}}):e._e()],1)])},a=[]},UXGB:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("textarea",{staticClass:"m-import-manager__console",attrs:{readonly:""},domProps:{value:e.currentDialog.value}}),e._v(" "),r("footer",[r("res-button",{attrs:{design:"secondary"},on:{click:function(t){return t.preventDefault(),e.close()}}},[r("button",{attrs:{type:"button"}},[e._v("Okay")])])],1)])},a=[]},Wdcv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=i(r("iUff"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={components:{CommunityMenu:i(r("SNZc")).default},props:{value:{type:Number},community:{type:Object,required:!0},user:{type:Object,required:!0},allowedRoles:{type:Object,required:!0},activeMemberships:{type:Array,default:()=>[]}},data:()=>({menuOpen:!1}),computed:s(s({},(0,n.mapState)(["defaultLogoUrl"])),{},{networks(){return(0,a.default)(this.activeMemberships)},hasMenu(){return this.networks.length>1||this.networks.some(e=>e.communities.length>1)}}),watch:{value(){this.$refs.communityMenu&&this.$refs.communityMenu.selectCommunity(this.value)}},methods:{closeMenu(){this.menuOpen=!1},toggleMenu(){this.menuOpen=!this.menuOpen}}};t.default=l,e.exports=t.default},Wdwt:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("vB9u"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("75gj");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},XSqK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("MMUF"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("3JGD");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},Xbgq:function(e,t,r){"use strict";function n(e,t){Error.call(this),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,n):this.stack=new Error(e).stack,this.message=e,this.response=t,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n;var a=n;t.default=a,e.exports=t.default},Xv6j:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("9dd1"))&&n.__esModule?n:{default:n},i=r("L2JU");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={name:"AppLoader",props:{iconName:{type:String,default:"loading"},animation:{type:String,default:"spin"}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,i.mapState)("appLoader",["loading"])),created(){this.$store.state.appLoader||this.$store.registerModule("appLoader",a.default)}};t.default=u,e.exports=t.default},YWf4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("rGoM"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("JvDQ");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},YbFx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.towerClient=t.importerClient=t.apolloProvider=void 0,r("Kz25");var n=u(r("Kw5r")),a=u(r("Ui0k")),i=r("dMq0"),o=r("R44f"),s=r("K/JX");function u(e){return e&&e.__esModule?e:{default:e}}let l=new URL(window.location);l.pathname="/api/tower/graphql",l.search="";const c=new o.HttpLink({uri:l.toString(),credentials:"include"}),d=new i.ApolloClient({link:c,cache:new s.InMemoryCache,connectToDevTools:!0,shouldBatch:!0});t.towerClient=d,n.default.use(a.default);const p=new a.default({defaultClient:d});t.apolloProvider=p;let m=new URL(window.location);m.pathname="/api/chorus-import-manager/graphql",m.search="";const f=new i.ApolloClient({link:new o.HttpLink({uri:m.toString(),credentials:"include"}),cache:new s.InMemoryCache,connectToDevTools:!0,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}});t.importerClient=f},"YiL/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("lTCR")),a=r("L2JU"),i=r("2tY0");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={mixins:[o(r("0OYW")).default],props:{version:{type:Number,default:null},parentId:{type:Number,default:null},projectId:{type:Number,default:null},status:{type:String,default:null}},data:()=>({loaded:!1,page:1,perPage:25,results:[],totalCount:0}),computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapGetters)(["sitemapModelsList"])),watch:{version(){this.$apollo.queries.results.refetch()},sitemapModelsList(e,t){e.length!==t.length&&this.$apollo.queries.results.refetch()}},methods:{formatDateTime:i.formatDateTime,formatNumber:i.formatNumber,stripURIHost:i.stripURIHost,statusIconName:e=>i.entryStatusIcons[e]||i.entryStatusIcons.CREATED,crawlerIconName:e=>e.crawler&&i.crawlerIcons[e.crawler.status]||i.crawlerIcons.NOT_CRAWLED},apollo:{results:{client:"importer",query:n.default`
        query SearchSitemaps($input: SearchImporterSitemapEntriesInput!) {
          search: searchImporterSitemapEntries(input: $input) {
            pageNumber
            results {
              activeDocumentsCount
              allowsCrawling
              archivedDocumentsCount
              crawler {
                id
                percentComplete
                status
              }
              failedDocumentsCount
              importedDocumentsCount
              fetchedAt
              id
              name
              newDocumentsCount
              queued
              status
              url
            }
            totalCount
          }
        }
      `,variables(){const e={pageNumber:this.page,parentId:this.parentId,perPage:this.perPage};return null!==this.projectId&&(e.projectId=this.projectId),null!==this.status&&(e.status=this.status),{input:e}},update(e){this.loaded=!0,this.page=e.search.pageNumber,this.totalCount=e.search.totalCount;return e.search.results}}}};t.default=l,e.exports=t.default},ZjI7:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.$slots.default||e.label?r("div",{staticClass:"m-import-manager__header"},[e._t("default",[r("h1",[e._v(e._s(e.label))])]),e._v(" "),e.collapsable?r("res-button",{staticClass:"m-l-1",attrs:{paddingless:""},on:{click:function(t){t.preventDefault(),e.searchActive=!e.searchActive}}},[r("button",[e._v("Search")]),e._v(" "),r("res-icon",{attrs:{name:e.searchActive?"minus":"add",size:"large"}})],1):e._e()],2):e._e(),e._v(" "),e.searchActive?r("form",{staticClass:"m-import-manager__fieldset",on:{submit:function(e){e.preventDefault()}}},[r("res-select",[r("label",[e._v("Filter")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.filterSelection,expression:"filterSelection"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterSelection=t.target.multiple?r:r[0]}}},e._l(e.filterOptions,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])})),0)])],1):e._e(),e._v(" "),r("sitemaps-table",{attrs:{parentId:e.parentId,projectId:e.projectId,status:e.filters.status,version:e.version}})],1)},a=[]},aXGp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("0nH3"),a=r("L2JU");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s={error:"negative",success:"positive"};var u={computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,a.mapState)(["notifications"])),methods:{deleteNotice(e){this.$store.commit(n.DELETE_NOTICE,e.id)},designForNotice:e=>s[e.type]||"neutral"}};t.default=u,e.exports=t.default},aZOI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_CONTEXT=t.ACTIVE_MEMBERSHIPS=void 0;t.SET_CONTEXT="setContext";t.ACTIVE_MEMBERSHIPS="activeMemberships"},"c/ne":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",e._l(e.notifications,(function(t){return r("res-banner",{key:t.id,attrs:{design:e.designForNotice(t),timeout:"success"===t.type,inert:""},on:{close:function(r){return e.deleteNotice(t)}}},["success"===t.type?r("res-icon",{attrs:{name:"check"}}):e._e(),e._v(" "),r("span",[t.count>1?r("strong",[e._v("("+e._s(t.count)+")")]):e._e(),e._v(" "+e._s(t.message))])],1)})),1)},a=[]},cfah:function(e,t,r){"use strict";e.exports=function(e){return new Promise((function(t){setTimeout(t,e)}))}},dMAm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r("elgu")),a=r("L2JU"),i=r("2tY0"),o=r("hWEr"),s=r("MO6K"),u=p(r("Wdwt")),l=p(r("IFOU")),c=p(r("P+zK")),d=p(r("Opgh"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h={blacklistUrls:"",communityDelegationId:null,communityDelegationMode:null,name:""};var y={components:{AppBreadcrumbs:u.default,CrawlerStatus:l.default,DocumentsSearch:c.default,SitemapsSearch:d.default},mixins:[n.default],props:{id:{type:Number,required:!0}},data:()=>({advanced:!1,lastFetch:null,mutable:(0,o.formatMutable)(h),saving:!1}),computed:{sitemap(){return this.$store.state.sitemapModels[this.id]||s.sitemapDefault},parent(){return this.$store.state.sitemapModels[this.sitemap.parentId]||s.sitemapDefault},project(){return this.$store.state.projectModels[this.sitemap.projectId]||s.projectDefault},communityDelegation(){return this.$store.state.communityModels[this.mutable.communityDelegationId]||null},isLoaded(){return!!this.sitemap.id},isRoot(){return this.isLoaded&&!this.parent.id},isIndex(){return this.isRoot&&"SITEMAP_URLSET"!==this.sitemap.type},isUrlset(){return this.isLoaded&&"SITEMAP_URLSET"===this.sitemap.type},isChanged(){return this.isLoaded&&(0,o.mutableHasChanged)(this.mutable,this.sitemap)},statusIcon(){return i.entryStatusIcons[this.sitemap.status]||i.entryStatusIcons.CREATED},communityScopeId(){return this.communityDelegation?this.communityDelegation.constituentCommunityId:"AUTO_DELEGATION"===this.mutable.communityDelegationMode?this.$store.state.currentCommunity.id:null},communityOptions(){const e=this.$store.getters.communityDelegationsList;return e.length?[{value:"URL_DELEGATION",label:"Import into URL-matched community"},{value:"AUTO_DELEGATION",label:"Import into "+this.$store.state.currentCommunity.name}].concat(e.map(e=>({value:"AUTO_DELEGATION:"+e.id,label:"Import into "+e.name}))):null},communityMode:{get(){const e=[this.mutable.communityDelegationMode];return this.mutable.communityDelegationId&&e.push(this.mutable.communityDelegationId),e.join(":")},set(e){const t=e.split(":");this.mutable=Object.assign({},this.mutable,{communityDelegationMode:t[0],communityDelegationId:t[1]?Number(t[1]):null})}}},mounted(){this.startImmediatePolling(()=>{this.lastFetch=Date.now(),this.fetchSitemap({id:this.id,detail:!0}).then(e=>this.mutable=(0,o.formatMutable)(h,e))},15e3);for(let e of Object.keys(h))this.$watch("mutable."+e,this.save)},destroyed(){this.isRoot||this.unloadSitemap({id:this.id})},methods:f(f({},(0,a.mapActions)(["fetchSitemap","unloadSitemap","updateSitemap"])),{},{formatDateTime:i.formatDateTime,save(){this.isChanged&&!this.saving&&(this.saving=!0,this.updateSitemap({id:this.id,input:(0,o.compactMutable)(h,this.mutable)}).then(e=>{this.saving=!1,this.mutable=(0,o.formatMutable)(h,e),this.lastFetch=Date.now()}))}})};t.default=y,e.exports=t.default},elgu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:()=>({_pollId:null}),methods:{startPolling(e,t){this.stopPolling(),this._pollId=setInterval(e,t)},startImmediatePolling(e,t){this.startPolling(e,t),e()},stopPolling(){this._pollId&&(clearInterval(this._pollId),this._pollId=null)}},beforeDestroy(){this.stopPolling()}};t.default=n,e.exports=t.default},eyzz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u={async createCommunityDelegation(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateCommunityDelegation($input: CreateImporterCommunityDelegationInput!) {
          delegation: createImporterCommunityDelegation(input: $input) {
            constituentCommunityId
            delegateCommunityId
            id
            name
            urlMatcher
          }
        }
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve(r.delegation)},async updateCommunityDelegation(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateCommunityDelegation($id: Int!, $input: UpdateImporterCommunityDelegationInput!) {
          delegation: updateImporterCommunityDelegation(id: $id, input: $input) {
            constituentCommunityId
            delegateCommunityId
            id
            name
            urlMatcher
          }
        }
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve(r.delegation)},async lookupCommunityDelegate(e,t){const{data:r}=await o.importerClient.query({query:a.default`
        query LookupCommunityDelegate($id: Int!) {
          delegateId: importerLookupCommunityDelegate(constituentId: $id)
        }
      `,variables:{id:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve(r.delegateId)}};t.default=u,e.exports=t.default},gIe6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={captureModelsList:e=>Object.values(e.captureModels),documentModelsList:e=>Object.values(e.documentModels),communityDelegationsList:e=>Object.values(e.communityModels),communityNameById:e=>Object.values(e.communityModels).reduce((e,t)=>(e[t.constituentCommunityId]=t.name,e),{[e.currentCommunity.id]:e.currentCommunity.name}),parserModelsList:e=>Object.values(e.parserModels).sort((e,t)=>String(e.name).localeCompare(t.name)),placeholderModelsList:e=>Object.values(e.placeholderModels),projectModelsList:e=>Object.values(e.projectModels).sort((e,t)=>String(e.name).localeCompare(t.name)),sitemapModelsList:e=>Object.values(e.sitemapModels).sort((e,t)=>String(e.name).localeCompare(t.name))};t.default=n,e.exports=t.default},gtXd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r("lTCR")),a=r("L2JU"),i=r("2tY0"),o=s(r("qXEC"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={fields:{identity:{label:"Identity",type:"text"},chorusId:{label:"Chorus ID",type:"number"}},submit:"Create Identity"};var p={components:{IdentitiesRow:o.default},props:{type:{type:String,required:!0}},data:()=>({loaded:!1,identity:"",page:1,perPage:25,results:[],totalCount:0}),computed:l(l({},(0,a.mapState)(["currentCommunity"])),{},{apiType(){return this.type.toUpperCase()+"_IDENTITY"}}),methods:l(l({},(0,a.mapActions)(["createIdentity","setDialog"])),{},{formatNumber:i.formatNumber,newIdentity(){this.setDialog({tag:"input-form",form:d}).then(async e=>{e.identity&&e.chorusId&&(await this.createIdentity({communityId:this.currentCommunity.id,identity:e.identity,chorusId:Number(e.chorusId),type:this.apiType}),this.$apollo.queries.results.refresh())})}}),apollo:{results:{client:"importer",query:n.default`
        query SearchIdentities($input: SearchImporterMappedIdentitiesInput!) {
          search: searchImporterMappedIdentities(input: $input) {
            pageNumber
            results {
              id
              identity
              communityId
              chorusId
              type
            }
            totalCount
          }
        }
      `,variables(){return{input:{communityId:this.currentCommunity.id,identity:this.identity||void 0,pageNumber:this.page,perPage:this.perPage,type:this.apiType}}},update(e){return this.loaded=!0,this.page=e.search.pageNumber,this.totalCount=e.search.totalCount,e.search.results}}}};t.default=p,e.exports=t.default},hN81:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const u=a.default`
  fragment JobBaseAttrs on ImporterDocumentJob {
    createdAt
    documentsTotal
    documentsComplete
    finishAt
    id
    jobId
    lastDocumentId
    percentComplete
    searchJson
    status
    startAt
    task
  }
`;var l={async fetchJobTasks(e){let{state:t}=e;if(!t.documentJobTasks){const{data:e}=await o.importerClient.query({query:a.default`
          query FetchJobTasks($communityId: Int!) {
            tasks: importerDocumentJobTasks(communityId: $communityId)
          }
        `,variables:{communityId:t.currentCommunity.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));this.commit(i.SET_TASKS,e.tasks)}return Promise.resolve(t.documentJobTasks)},async fetchJobs(e){let{state:t}=e;const{data:r}=await o.importerClient.query({query:a.default`
        query FetchJobs($communityId: Int!) {
          jobs: importerDocumentJobs(communityId: $communityId) {
            ...JobBaseAttrs
            errorMessage
          }
        }
        ${u}
      `,variables:{communityId:t.currentCommunity.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{jobModels:r.jobs}),Promise.resolve()},async createJob(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateJob($input: CreateImporterDocumentJobInput!) {
          jobs: createImporterDocumentJob(input: $input) {
            ...JobBaseAttrs
          }
        }
        ${u}
      `,variables:{input:t}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.SET_MODELS,{jobModels:r.jobs}),Promise.resolve(r.jobs[0].jobId)},async cancelJob(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation CancelJob($id: ID!) {
          jobs: cancelImporterDocumentJob(id: $id) {
            ...JobBaseAttrs
          }
        }
        ${u}
      `,variables:{id:String(t)}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{jobModels:r.jobs}),Promise.resolve()},async resumeJob(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation ResumeJob($id: ID!) {
          jobs: resumeImporterDocumentJob(id: $id) {
            ...JobBaseAttrs
          }
        }
        ${u}
      `,variables:{id:String(t)}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{jobModels:r.jobs}),Promise.resolve()},async deleteJob(e,t){const{data:r}=await o.importerClient.mutate({mutation:a.default`
        mutation DeleteJob($id: ID!) {
          jobs: deleteImporterDocumentJob(id: $id) {
            id
          }
        }
      `,variables:{id:String(t)}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.DELETE_MODELS,{jobModels:r.jobs}),Promise.resolve()}};t.default=l,e.exports=t.default},hWEr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactMutable=function(e,t){return Object.keys(e).reduce((r,a)=>t.hasOwnProperty(a)?(r[a]=n.includes(t[a])?e[a]:t[a],r):r,{})},t.debounce=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){const a=n.context||this,i=arguments;clearTimeout(t),n.immediate&&!t&&e.apply(a,i),t=setTimeout((function(){e.apply(a,i),t=null}),r)}},t.formatMutable=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((e,r)=>(e[r]=n.includes(t[r])?"":t[r],e),{})},t.mutableHasChanged=function(e,t){return Object.keys(e).some(r=>{const a=t[r]&&n.includes(e[r]),i=e[r]!==t[r]&&!n.includes(e[r]);return a||i})},t.resolveObject=function(e,t){const r=t.split(".");let n=e;for(let e of r)if(n=n[e],!n)break;return n||null},t.schemaFilter=function(e,t){return Object.keys(e).reduce((e,r)=>(t.hasOwnProperty(r)&&(e[r]=t[r]),e),{})},t.schemaMerge=function(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=t.hasOwnProperty(n)?t[n]:e[n],r),{})};const n=[void 0,null,""]},hb94:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentCommunity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"community"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"domain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaDomain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"faviconUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeZone"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"featuresEnabled"},name:{kind:"Name",value:"siteConfigBoolean"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"features_enabled",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"printSlugEnabled"},name:{kind:"Name",value:"siteConfigBoolean"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"print_slug_enabled",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"svgLogo"},name:{kind:"Name",value:"siteConfigString"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"svg_small_mark_full_color",block:!1}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"hasImagePlaceholder"},name:{kind:"Name",value:"hasSiteConfig"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"replacement_image_url",block:!1}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"StringValue",value:"string",block:!1}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"network"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schemaDomain"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organization"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:557}};r.loc.source={body:'query CurrentCommunity($id: Int!) {\n  community(id: $id) {\n    id\n    name\n    slug\n    url\n    domain\n    schemaDomain\n    faviconUrl\n    timeZone\n    featuresEnabled: siteConfigBoolean(key: "features_enabled")\n    printSlugEnabled: siteConfigBoolean(key: "print_slug_enabled")\n    svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n    hasImagePlaceholder: hasSiteConfig(key: "replacement_image_url", type: "string")\n    network {\n      id\n      name\n      slug\n      schemaDomain\n      organization {\n        id\n        slug\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,r)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,r)})),t.definitions&&t.definitions.forEach((function(t){e(t,r)}))}(e,t),n[e.name.value]=t}})),e.exports=r,e.exports.CurrentCommunity=function(e,t){var r={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var i=n[t]||new Set,o=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var u=s;s=new Set,u.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=a(e,t);n&&r.definitions.push(n)})),r}(r,"CurrentCommunity")},iUff:function(e,t,r){"use strict";const{sortBy:n}=r("LvDl");e.exports=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce((e,t)=>{let r=t.community,n=r.network,a=e.findIndex(e=>{let{id:t}=e;return t===n.id});return a>-1?e[a].communities.push(r):e.push({id:n.id,name:n.name,logo:n.svgLogo,communities:[r]}),e},[]);return n(t,"name")}},"jB/q":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",[e._v("Name")]),e._v(" "),r("th",[e._v(e._s((e.results[0]||{}).allowsCrawling?"Crawler":"Status"))]),e._v(" "),r("th",[e._v("Documents")]),e._v(" "),r("th",[e._v("Imported")]),e._v(" "),r("th",[e._v("Failed")]),e._v(" "),r("th",[e._v("New")]),e._v(" "),r("th",[e._v("Archived")]),e._v(" "),r("th",[e._v("Fetched")])])]),e._v(" "),r("tbody",e._l(e.results,(function(t){return r("tr",{key:t.id},[r("td",[r("router-link",{attrs:{to:e.routeTo("sitemap",t.id)}},[e._v(e._s(t.name))])],1),e._v(" "),r("td",[t.queued?r("a",{attrs:{title:"QUEUED"}},[r("res-icon",{attrs:{name:"clock",size:"medium"}})],1):e._e(),e._v(" "),t.allowsCrawling?r("a",{attrs:{title:t.crawler?t.crawler.status:"UNCRAWLED"}},[r("res-icon",{key:e.crawlerIconName(t),attrs:{name:e.crawlerIconName(t),size:"medium"}})],1):r("a",{attrs:{title:t.status}},[r("res-icon",{key:e.statusIconName(t.status),class:t.status.toLowerCase(),attrs:{name:e.statusIconName(t.status),size:"medium"}})],1),e._v(" "),t.allowsCrawling&&t.crawler?r("span",[e._v(e._s(t.crawler.percentComplete)+"%")]):e._e()]),e._v(" "),r("td",[e._v(e._s(e.formatNumber(t.activeDocumentsCount)))]),e._v(" "),r("td",[e._v(e._s(e.formatNumber(t.importedDocumentsCount)))]),e._v(" "),r("td",[e._v(e._s(e.formatNumber(t.failedDocumentsCount)))]),e._v(" "),r("td",[e._v(e._s(e.formatNumber(t.newDocumentsCount)))]),e._v(" "),r("td",[e._v(e._s(e.formatNumber(t.archivedDocumentsCount)))]),e._v(" "),r("td",{attrs:{"data-convert-to-relative":t.fetchedAt}},[e._v(e._s(t.fetchedAt?e.formatDateTime(t.fetchedAt):"N/A"))])])})),0)])]),e._v(" "),r("footer",[e.loaded?r("span",[e._v("Found "+e._s(e.formatNumber(e.totalCount))+" results")]):e._e(),e._v(" "),r("res-pagination",{attrs:{page:e.page,count:e.totalCount,display:e.perPage,indicator:"page",pagination:"text-only",navigation:"text"},on:{change:function(t){e.page=t.target.page}}})],1)],1)},a=[]},jLho:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={data(){const e=this.$store.getters.parserModelsList;return{name:"",documentParserId:e.length?e[0].id:"",documentParserName:""}},computed:i(i({},(0,n.mapState)(["currentCommunity"])),(0,n.mapGetters)(["parserModelsList"])),methods:i(i({},(0,n.mapActions)(["createParser","createProject","setDialog"])),{},{create(){this.prebuildParser().then(e=>this.createProject({name:this.name,documentParserId:e.id})).then(this.close)},prebuildParser(){const e=this.$store.state.parserModels[this.documentParserId];return e?Promise.resolve(e):this.createParser({name:this.documentParserName})},close(){this.setDialog(null)}})};t.default=s,e.exports=t.default},jema:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={computed:i(i({},(0,n.mapState)(["currentDialog"])),{},{form(){return this.currentDialog.form||{}},fields(){return this.form.fields||{}}}),methods:i(i({},(0,n.mapActions)(["setDialog"])),{},{numericInput(e){if(e||0===e)return e=Number(e),Number.isInteger(e)?Math.max(0,e):void 0},submit(){const e=Object.keys(this.fields).reduce((e,t)=>{const r=this.fields[t],n=this.$el.querySelector(`[name="${t}"]`);return n&&("number"===r.type?e[t]=this.numericInput(n.value):e[t]=n.value),e},{});this.currentDialog.resolve(e),this.close()},close(){this.setDialog(null)}})};t.default=s,e.exports=t.default},kh36:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=v(e,t);return f(r.url,r.reqOpts,r.opts)};const{merge:n,omit:a}=r("LvDl"),i=r("Qyje"),o=r("cfah"),s=r("Xbgq"),u=r("lvH+"),{reportError:l}=r("q1SX"),c=r("Fw7v"),d={};function p(e){if(e.ok)return e;var t=new s("Response status not within range: "+e.status,e);return Promise.reject(t)}function m(e,t,r){return r?{data:t,headers:e.headers}:t}function f(e,t,r){let n=function(e,t){let{method:r,body:n}=t,a=e;r&&"GET"!==r&&n&&(a+=c(n));return a}(e,t);return r.cache&&!r.force&&n in d?Promise.resolve(d[n]):fetch(e,t).then(p).then(e=>{return n=e,a=t.headers.Accept,i=r.withHeaders,204===n.status?Promise.resolve():"text/html"===a?n.text().then(e=>m(n,e,i)):n.json().then(e=>m(n,e,i));var n,a,i}).then(e=>(r.cache&&(d[n]=e),e)).catch(n=>function(e,t,r,n){var a=e.response&&e.response.status;if(n.retry&&n.retry.delay<n.retry.maxDelay&&(!a||502===a||503===a)){var{retry:i}=n,s=Math.min(i.delay+1e3,i.maxDelay);return i.delay=s,o(s).then(()=>f(t,r,n))}return n.handleError&&(window.app&&window.app.state?u.showError():(console.warn("An unexpected error occurred while making a request, but the app is not able to display it"),l(e,!1))),Promise.reject(e)}(n,e,t,r))}function v(e,t){var r={credentials:"include",headers:{Accept:"application/json"}},o={handleError:!0,cache:!1,retry:{delay:0,maxDelay:3e3}},s=t.opts||{},u=a(t,"opts");return u.method&&"GET"!==u.method.toUpperCase()&&(r.headers["Content-Type"]="application/json"),u.query&&(e=e+"?"+i.stringify(u.query),delete u.query),u.body&&"string"!=typeof u.body&&(u.body=JSON.stringify(u.body)),!1===u.credentials&&(delete r.credentials,delete u.credentials),s.retry||(o.retry=!1),"boolean"==typeof s.retry&&delete s.retry,{url:e,opts:n(o,s),reqOpts:n(r,u)}}e.exports=t.default},kxzp:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this.$createElement,t=this._self._c||e;return this.currentDialog?t("res-modal",{attrs:{open:!!this.currentDialog,background:"darken"}},[t(this.currentDialog.tag,{tag:"component",staticClass:"m-import-manager__dialog"})],1):this._e()},a=[]},lHi2:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("div",{staticClass:"m-import-manager__header --split"},[r("h1",[e._v("Communities")]),e._v(" "),r("res-button",{attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.add(t)}}},[r("res-icon",{attrs:{name:"add",size:"medium"}}),e._v(" "),r("button",[e._v("New community")])],1)],1),e._v(" "),r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",[e._v("Community name")]),e._v(" "),r("th",[e._v("Community ID")]),e._v(" "),r("th",{attrs:{colspan:"2"}},[e._v("URL matcher")])])]),e._v(" "),r("tbody",e._l(e.results,(function(e){return r("communities-row",{key:e.id,attrs:{model:e}})})),1)])]),e._v(" "),e.loaded?r("footer",[e.results.length?r("span",[e._v("Found "+e._s(e.results.length)+" results")]):r("span",[e._v("No results")])]):e._e()],1)])},a=[]},"lvH+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessage=function(e){var t=u(e);app.state.select(["messages"]).splice([t,1])},t.showError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.UNEXPECTED;var t=app.state.get(["messages"]).some(e=>e.isError);t||s({message:e,type:"negative",isError:!0})},t.showMessage=s;var{defaults:n}=r("LvDl"),a=r("Fw7v"),i=r("6fkZ");const o={dismissible:!0,type:"negative"};function s(e){var t=a(e.message);return-1===u(t)&&function(e){if(!e.id)return!0;var t="message-"+e.id;if("shown"===window.localStorage.getItem(t))return!1;return window.localStorage.setItem(t,"shown"),!0}(e)&&(e.id=t,e=n(e,o),app.state.select(["messages"]).push(e)),t}function u(e){return app.state.get(["messages"]).findIndex(t=>t.id===e)}},"m/PD":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("app-breadcrumbs",{attrs:{project:e.project,sitemap:e.sitemap}}),e._v(" "),r("section",[r("div",{staticClass:"m-import-manager__header"},[r("h1",[e._v("Sitemap "),e.isLoaded?r("span",[e._v(e._s(e.isIndex?"Index":"Urlset")+": "+e._s(e.sitemap.name))]):e._e()]),e._v(" "),e.saving?r("res-icon",{staticClass:"m-l-1",attrs:{name:"more",size:"medium"}}):e._e()],1),e._v(" "),r("div",{staticClass:"m-import-manager__fieldset"},[r("div",{staticClass:"m-import-manager__fieldset__input"},[r("res-input",[r("label",[e._v("Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.mutable.name,expression:"mutable.name",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.mutable.name},on:{change:function(t){return e.$set(e.mutable,"name",t.target.value)}}})])],1),e._v(" "),e.communityOptions?r("div",{staticClass:"m-import-manager__fieldset__input m-l-1"},[r("res-select",[r("label",[e._v("Community Selection")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.communityMode,expression:"communityMode"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.communityMode=t.target.multiple?r:r[0]}}},e._l(e.communityOptions,(function(t,n){return r("option",{key:n,domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)])],1):e._e()]),e._v(" "),r("res-button",{staticClass:"m-b-1 m-t-1",attrs:{paddingless:""},on:{click:function(t){t.preventDefault(),e.advanced=!e.advanced}}},[r("button",[e._v("Advanced")]),e._v(" "),r("res-icon",{attrs:{name:e.advanced?"minus":"add",size:"large"}})],1),e._v(" "),e.advanced?r("div",[r("res-input",[r("label",[e._v("Exclude URLs\n          "),r("res-button",{attrs:{id:"exclude-urls-tooltip",paddingless:""},on:{click:function(e){e.preventDefault()}}},[r("res-icon",{attrs:{size:"small",name:"tooltip"}}),r("button")],1),e._v(" "),r("res-dropdown",{attrs:{for:"exclude-urls-tooltip",placement:"top",design:"dark"}},[e._v("URLs that should be ignored"),r("br"),e._v(" while processing this sitemap.")])],1),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.mutable.blacklistUrls,expression:"mutable.blacklistUrls",modifiers:{lazy:!0}}],attrs:{placeholder:"URLs, one per line..."},domProps:{value:e.mutable.blacklistUrls},on:{change:function(t){return e.$set(e.mutable,"blacklistUrls",t.target.value)}}})])],1):e._e()],1),e._v(" "),r("section",[e._m(0),e._v(" "),r("crawler-status",{attrs:{id:e.sitemap.currentCrawlerId,crawlable:e.sitemap.allowsCrawling,sitemapId:e.id}}),e._v(" "),r("dl",{staticClass:"m-import-manager__defs"},[r("dt",[e._v("Status")]),e._v(" "),r("dd",[r("span",[r("res-icon",{attrs:{name:e.statusIcon,size:"medium"}}),e._v(" "+e._s(e.sitemap.status))],1)]),e._v(" "),r("dt",[e._v("URL")]),e._v(" "),r("dd",[r("a",{attrs:{href:e.sitemap.url,target:"_blank"}},[e._v(e._s(e.sitemap.url))])]),e._v(" "),r("dt",[e._v("Last fetched")]),e._v(" "),r("dd",[e._v(e._s(e.sitemap.fetchedAt?e.formatDateTime(e.sitemap.fetchedAt):"N/A"))]),e._v(" "),e.sitemap.error?r("dt",[e._v("Error")]):e._e(),e._v(" "),e.sitemap.error?r("dd",[e._v(e._s(e.sitemap.error)+": "+e._s(e.sitemap.errorMessage))]):e._e()])],1),e._v(" "),e.isIndex?r("sitemaps-search",{attrs:{parentId:e.id,collapsable:!0,version:e.lastFetch}},[r("h2",[e._v("Urlsets")])]):e._e(),e._v(" "),e.isUrlset?r("documents-search",{attrs:{sitemapEntryId:e.id,communityScopeId:e.communityScopeId,collapsable:!0,version:e.lastFetch}},[r("h2",[e._v("Documents")])]):e._e()],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",[this._v("Details")])])}]},m2lQ:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[r("section",[r("div",{staticClass:"m-import-manager__header --split"},[r("h1",[e._v("Parser: "+e._s(e.parser.name||e.formatDateTime(e.parser.createdAt)))]),e._v(" "),e.isRevision?r("span",[e._v("\n        Revision of "),r("router-link",{attrs:{to:e.routeTo("parser",e.revisioner.id)}},[e._v(e._s(e.revisioner.name))])],1):r("res-split-button",{attrs:{disabled:!e.isChanged}},[r("ul",[r("li",{attrs:{active:"#"}},[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.saveParser("SAVE")}}},[e._v("Save")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.saveParser("SAVE_COPY")}}},[e._v("Save with history")])])])])],1),e._v(" "),r("fieldset",{directives:[{name:"show",rawName:"v-show",value:!e.isRevision,expression:"!isRevision"}]},[r("res-input",[r("label",[e._v("Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.mutable.name,expression:"mutable.name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.mutable.name},on:{input:function(t){t.target.composing||e.$set(e.mutable,"name",t.target.value)}}})])],1),e._v(" "),r("fieldset",[r("res-input",[r("label",[e._v("Parser JSON")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.mutable.parserJson,expression:"mutable.parserJson"}],staticStyle:{height:"70vh","font-family":"'Consolas',monospace"},attrs:{readonly:e.isRevision},domProps:{value:e.mutable.parserJson},on:{input:function(t){t.target.composing||e.$set(e.mutable,"parserJson",t.target.value)}}})])],1),e._v(" "),e.isRevision?r("dl",{staticClass:"m-import-manager__defs"},[r("dt",[e._v("Capture type")]),e._v(" "),r("dd",[e._v(e._s(e.parser.captureType))]),e._v(" "),r("dt",[e._v("Group taxonomy type")]),e._v(" "),r("dd",[e._v(e._s(e.parser.groupTaxonomyType||"none"))])]):[r("res-button",{staticClass:"m-b-1 m-t-1",attrs:{paddingless:""},on:{click:function(t){t.preventDefault(),e.advanced=!e.advanced}}},[r("button",[e._v("Advanced")]),e._v(" "),r("res-icon",{attrs:{name:e.advanced?"minus":"add",size:"large"}})],1),e._v(" "),e.advanced?r("div",{staticClass:"m-import-manager__fieldset"},[r("div",{staticClass:"m-import-manager__fieldset__input"},[r("res-select",[r("label",[e._v("Capture type")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.mutable.captureType,expression:"mutable.captureType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.mutable,"captureType",t.target.multiple?r:r[0])}}},e._l(e.parser.captureTypes,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})),0)])],1),e._v(" "),r("div",{staticClass:"m-import-manager__fieldset__input m-l-1"},[r("res-select",[r("label",[e._v("Group taxonomy type")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.mutable.groupTaxonomyType,expression:"mutable.groupTaxonomyType"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.mutable,"groupTaxonomyType",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[e._v("None")]),e._v(" "),e._l(e.parser.groupTaxonomyTypes,(function(t){return r("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],2)])],1)]):e._e()]],2),e._v(" "),!e.isRevision&&e.revisions.length?r("section",{staticClass:"m-import-manager__table"},[e._m(0),e._v(" "),r("res-table",{staticClass:"m-dashboard__table"},[r("table",[r("thead",[r("tr",[r("th",[e._v("Time")]),e._v(" "),r("th",[e._v("Note")])])]),e._v(" "),r("tbody",e._l(e.revisions,(function(t){return r("tr",{key:t.id},[r("td",[r("router-link",{attrs:{to:e.routeTo("parser",t.id)}},[e._v(e._s(e.formatDateTime(t.createdAt)))])],1),e._v(" "),r("td",[e._v(e._s(t.revisionNote))])])})),0)])])],1):e._e()])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h2",[this._v("History")])])}]},maTt:function(e,t){var r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullOrUserName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeZone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"networkRoles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"memberships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"community"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"faviconUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"network"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"svgLogo"},name:{kind:"Name",value:"siteConfigString"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"svg_small_mark_full_color",block:!1}}],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:366}};r.loc.source={body:'query CurrentUser {\n  currentUser {\n    id\n    createdOn\n    fullOrUserName\n    email\n    timeZone\n    networkRoles\n    memberships {\n      roles\n      status\n      community {\n        id\n        name\n        faviconUrl\n        network {\n          id\n          name\n          svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,t){for(var r=0;r<e.definitions.length;r++){var n=e.definitions[r];if(n.name&&n.name.value==t)return n}}r.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,r){if("FragmentSpread"===t.kind)r.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&r.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,r)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,r)})),t.definitions&&t.definitions.forEach((function(t){e(t,r)}))}(e,t),n[e.name.value]=t}})),e.exports=r,e.exports.CurrentUser=function(e,t){var r={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var i=n[t]||new Set,o=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var u=s;s=new Set,u.forEach((function(e){o.has(e)||(o.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var n=a(e,t);n&&r.definitions.push(n)})),r}(r,"CurrentUser")},"n+F7":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(e){e.preventDefault()}}},[r("fieldset",[r("res-input",{attrs:{count:"75"}},[r("label",[e._v("Note")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.revisionNote,expression:"revisionNote"}],attrs:{type:"text"},domProps:{value:e.revisionNote},on:{input:function(t){t.target.composing||(e.revisionNote=t.target.value)}}})])],1),e._v(" "),r("footer",[r("res-button",{attrs:{design:"primary"},on:{click:function(t){return t.preventDefault(),e.save()}}},[r("button",{attrs:{type:"submit"}},[e._v("Save copy")])]),e._v(" "),r("res-button",{staticClass:"m-l-1",attrs:{design:"secondary"},on:{click:function(t){return t.preventDefault(),e.close()}}},[r("button",{attrs:{type:"button"}},[e._v("Cancel")])])],1)])},a=[]},nOLx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx"),s=r("2tY0");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var l={async searchDocuments(e,t){let{state:r}=e,n=Object.assign({},t);n.communityId=r.currentCommunity.id,n.pageNumber=n.pageNumber||1,n.perPage=n.perPage||5,n.findBy&&(n=Object.assign(n,(0,s.formatFinder)(n.findBy)),delete n.findBy);const{data:u}=await o.importerClient.query({query:a.default`
        query SearchDocuments($input: SearchImporterDocumentEntriesInput!, $errorScope: Int) {
          search: searchImporterDocumentEntries(input: $input) {
            pageNumber
            results {
              archived
              archivalStatus
              canonicalUrl
              chorusEntryUrl
              communityId
              errorDigest
              errorOccurrenceCount(communityId: $errorScope)
              errorSummary
              failedDocumentCaptureId
              fetchedAt
              id
              queued
              status
              updatedAt
              watched
            }
            totalCount
          }
        }
      `,variables:{errorScope:"UNIQUE"===n.view?n.communityId:null,input:n}}).catch(e=>this.commit(i.PUT_NOTICE,e));return Promise.resolve(u.search)}};t.default=l,e.exports=t.default},ouhT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r("lTCR"))&&n.__esModule?n:{default:n},i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),o=r("YbFx");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}const u=a.default`
  fragment ParserBaseAttrs on ImporterDocumentParser {
    createdAt
    id
    name
    revisionerId
  }
`;var l={async fetchParser(e,t){let{state:r}=e;const{data:n}=await o.importerClient.query({query:a.default`
        query FetchParser($id: Int!) {
          parser: importerDocumentParser(id: $id) {
            ...ParserBaseAttrs
            captureType
            captureTypes
            groupTaxonomyType
            groupTaxonomyTypes
            parserJson
            revisioner {
              ...ParserBaseAttrs
            }
            revisions {
              ...ParserBaseAttrs
              revisionNote
            }
            schemaJson
          }
        }
        ${u}
      `,variables:{id:t.id}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{parserModels:[n.parser,n.parser.revisioner].concat(n.parser.revisions)}),Promise.resolve(r.parserModels[n.parser.id])},async createParser(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation CreateParser($input: CreateImporterDocumentParserInput!) {
          parser: createImporterDocumentParser(input: $input) {
            ...ParserBaseAttrs
          }
        }
        ${u}
      `,variables:{input:Object.assign({communityId:r.currentCommunity.id},t)}}).catch(e=>this.commit(i.PUT_NOTICE,e));return this.commit(i.PATCH_MODELS,{parserModels:n.parser}),Promise.resolve(r.parserModels[n.parser.id])},async updateParser(e,t){let{state:r}=e;const{data:n}=await o.importerClient.mutate({mutation:a.default`
        mutation UpdateParser($id: Int!, $input: UpdateImporterDocumentParserInput!) {
          parser: updateImporterDocumentParser(id: $id, input: $input) {
            ...ParserBaseAttrs
            captureType
            groupTaxonomyType
            parserJson
            revisions {
              ...ParserBaseAttrs
              revisionNote
            }
          }
        }
        ${u}
      `,variables:t}).catch(e=>this.commit(i.PUT_NOTICE,e));return n.errors?Promise.reject(n.errors):(this.commit(i.PATCH_MODELS,{parserModels:[n.parser].concat(n.parser.revisions)}),Promise.resolve(r.parserModels[t.id]))}};t.default=l,e.exports=t.default},q1SX:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s(e,t),Promise.reject(e)},t.reportError=s,t.reportMessage=function(e,t){"test"!==app.env&&console.warn(e,t);a.captureMessage(e,t)};var{omit:n}=r("LvDl"),a=r("WSEr"),i=r("lvH+"),o=r("Xbgq");function s(e){let t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=app.env}catch(e){t="production"}"test"!==t&&(console.error(e),console.error(e.stack||e.message)),e instanceof o||a.captureException(e,{tags:{error_name:e.name,from:e.from},extra:n(e,"name","message","stack","from")}),r&&i.showError()}},qG7f:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[e._m(0),e._v(" "),r("form",{staticClass:"m-import-manager__fieldset",on:{submit:function(e){e.preventDefault()}}},[r("res-input",[r("label",[e._v("Lookup")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy.trim",value:e.lookupInput,expression:"lookupInput",modifiers:{lazy:!0,trim:!0}}],attrs:{type:"text",placeholder:"document ID or content type"},domProps:{value:e.lookupInput},on:{change:function(t){e.lookupInput=t.target.value.trim()},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1),e._v(" "),r("res-select",{staticClass:"m-l-1"},[r("label",[e._v("Filter")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.filterInput,expression:"filterInput"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterInput=t.target.multiple?r:r[0]}}},e._l(e.filterOptions,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])})),0)])],1),e._v(" "),r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",[e._v("ID")]),e._v(" "),r("th",[e._v("Document")]),e._v(" "),r("th",[e._v("Type")]),e._v(" "),r("th",[e._v("Data")]),e._v(" "),r("th",[e._v("Fulfilled")])])]),e._v(" "),r("tbody",e._l(e.results,(function(t){return r("tr",{key:t.id},[r("td",[e._v(e._s(t.id))]),e._v(" "),r("td",[r("router-link",{attrs:{to:e.routeTo("document",t.documentEntryId)}},[r("res-icon",{staticClass:"m-r-5",attrs:{name:"versions",size:"medium"}})],1)],1),e._v(" "),r("td",[e._v(e._s(t.contentType))]),e._v(" "),r("td",[e._v(e._s(t.data))]),e._v(" "),r("td",{staticStyle:{"min-width":"125px"}},[r("abbr",{attrs:{title:t.fulfilled?"FULFILLED":"UNFULFILLED"}},[r("res-icon",{attrs:{name:t.fulfilled?"check-circle":"minus-circle",size:"medium"}})],1),e._v(" "),t.fulfilled?r("span",{staticClass:"m-l-5"},[e._v(e._s(t.fulfilledType))]):e._e()])])})),0)])]),e._v(" "),r("footer",[e.loaded?r("span",[e._v("\n        Found "+e._s(e.formatNumber(e.totalCount))+" results\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}]},[e._v("\n          ["),r("a",{attrs:{href:e.downloadUrl}},[e._v("download")]),e._v(" / "),r("a",{attrs:{href:e.downloadUrl},on:{click:function(t){return t.preventDefault(),e.runJob(t)}}},[e._v("job")]),e._v("]\n        ")])]):e._e(),e._v(" "),r("res-pagination",{attrs:{page:e.page,count:e.totalCount,display:e.perPage,indicator:"page",pagination:"text-only",navigation:"text"},on:{change:function(t){e.page=t.target.page}}})],1)],1)])},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-import-manager__header"},[t("h1",[this._v("Placeholders")])])}]},qRTN:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(e){e.preventDefault()}}},[e.form.prompt?r("p",[e._v(e._s(e.form.prompt))]):e._e(),e._v(" "),e.form.params?r("p",[r("input",{staticClass:"m-import-manager__console",attrs:{type:"text",readonly:""},domProps:{value:e.form.params}})]):e._e(),e._v(" "),e._l(e.fields,(function(t,n){return r("fieldset",{key:n},[t.options?r("res-select",[r("label",[e._v(e._s(t.label)+"\n        "),t.info?r("a",{attrs:{href:t.info,target:"_blank"}},[r("res-icon",{attrs:{name:"info",size:"small"}})],1):e._e()]),e._v(" "),r("select",{attrs:{name:n}},e._l(t.options,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(t||n))])})),0)]):"textarea"===t.type?r("res-input",[t.label?r("label",[e._v(e._s(t.label))]):e._e(),e._v(" "),r("textarea",{attrs:{name:n,placeholder:t.placeholder}})]):r("res-input",[t.label?r("label",[e._v(e._s(t.label))]):e._e(),e._v(" "),r("input",{attrs:{type:t.type||"text",name:n,placeholder:t.placeholder}})])],1)})),e._v(" "),r("footer",[r("res-button",{attrs:{design:"primary"},on:{click:function(t){return t.preventDefault(),e.submit()}}},[r("button",{attrs:{type:"submit"}},[e._v(e._s(e.form.submit))])]),e._v(" "),r("res-button",{staticClass:"m-l-1",attrs:{design:"secondary"},on:{click:function(t){return t.preventDefault(),e.close()}}},[r("button",{attrs:{type:"button"}},[e._v("Cancel")])])],1)],2)},a=[]},qXEC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("Jrjy"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("NNlp");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},rGoM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r("L2JU"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("0nH3")),i=f(r("kh36")),o=f(r("DraD")),s=f(r("+Q8c")),u=f(r("J2Uy")),l=f(r("2KVk")),c=f(r("0OYW")),d=r("2tY0"),p=r("maTt"),m=r("hb94");function f(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={components:{AppNotifications:u.default,AppModal:l.default,AppLoader:s.default,CommunitySelect:o.default},mixins:[c.default],data:()=>({entitlements:[],loading:!0,location:null,quickSearch:"",userIsNetworkAdmin:!1}),computed:{communityId(){if(this.$route.query.community_id)return parseInt(this.$route.query.community_id);window.location="/"},hasPermission(){return(this.entitlements||[]).includes("use_importmanager")},accessGranted(){return Boolean(this.userIsNetworkAdmin&&this.communityId&&this.hasPermission)},routeKey(){return this.$route.name+":"+this.$route.params.community_id},isDashboard(){return this.$route.name&&"dashboard"===this.$route.name}},watch:{loading(){this.loading?this.$store.commit("appLoader/SET_LOADING",!0):this.$store.commit("appLoader/SET_LOADING",!1)},accessGranted(){this.accessGranted?this.loading=!1:this.loading=!0},quickSearch(){this.quickSearch&&(this.$refs.quickSearch.classList.remove("--nope"),this.searchDocuments({findBy:this.quickSearch}).then(e=>{e.results.length>1?this.$router.replace({name:"dashboard",query:{community_id:this.community.id,q:this.quickSearch}}):1===e.results.length?this.$router.replace(this.routeTo("document",e.results[0].id)):this.$refs.quickSearch.classList.add("--nope"),this.quickSearch=""}))}},apollo:{currentUser:{query:p.CurrentUser,result(e){let{data:t}=e;t.currentUser.networkRoles.find(e=>"NETWORK_ADMIN"===e)?(this.userIsNetworkAdmin=!0,this.$store.commit(a.SET_CONTEXT,{user:t.currentUser})):window.location="/"}},community:{query:()=>m.CurrentCommunity,result(e){let{data:t}=e;this.$store.commit(a.SET_CONTEXT,{community:t.community}),t.community.id?this.getEntitlements():window.location="/"},variables(){return{id:this.communityId}}}},methods:y(y({},(0,n.mapActions)(["searchDocuments"])),{},{importManagerUrl:d.importManagerUrl,goToDashboard(){this.$router.replace(this.routeTo("dashboard"))},closeDropdown(e){let t=e.target;for(;t&&t.tagName;){if(/res-dropdown/i.test(t.tagName)){t.toggle();break}t=t.parentNode}},async getEntitlements(){this.entitlements=await(0,i.default)("/api/entitlements?communityId="+this.communityId),this.$store.commit(a.SET_CONTEXT,{entitlements:this.entitlements}),this.entitlements.includes("use_importmanager")||(window.location="/")},pushRoute(e){const t=Object.assign({},this.$route);t.query=Object.assign({},this.$route.query,{community_id:this.communityId}),e&&(t.name=e),this.$router.replace(t)}})};t.default=b,e.exports=t.default},"s+SX":function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{staticStyle:{width:"25%"}},[e.editing?r("res-input",[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.mutable.name,expression:"mutable.name",modifiers:{lazy:!0}}],attrs:{type:"text"},domProps:{value:e.mutable.name},on:{change:function(t){return e.$set(e.mutable,"name",t.target.value)}}})]):r("span",[e._v(e._s(e.mutable.name))])],1),e._v(" "),r("td",{staticStyle:{width:"20%"}},[e.editing?r("res-input",[r("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.mutable.constituentCommunityId,expression:"mutable.constituentCommunityId",modifiers:{lazy:!0,number:!0}}],attrs:{type:"text"},domProps:{value:e.mutable.constituentCommunityId},on:{change:function(t){e.$set(e.mutable,"constituentCommunityId",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]):r("span",[e._v(e._s(e.mutable.constituentCommunityId))])],1),e._v(" "),r("td",{staticStyle:{width:"40%"}},[e.editing?r("res-input",[r("input",{directives:[{name:"model",rawName:"v-model.lazy.number",value:e.mutable.urlMatcher,expression:"mutable.urlMatcher",modifiers:{lazy:!0,number:!0}}],attrs:{type:"text"},domProps:{value:e.mutable.urlMatcher},on:{change:function(t){e.$set(e.mutable,"urlMatcher",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]):r("span",[e._v(e._s(e.mutable.urlMatcher))])],1),e._v(" "),r("td",{staticStyle:{width:"5%"}},[r("res-button",{style:e.editStyle,attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.toggle(t)}}},[r("res-icon",{attrs:{name:"edit",size:"medium"}}),r("button")],1)],1)])},a=[]},t9xC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r("lTCR")),a=r("L2JU"),i=o(r("6OWX"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c={fields:{name:{label:"Community name",type:"text"},constituentCommunityId:{label:"Community ID",type:"number"}},submit:"Create Community Delegation"};var d={components:{CommunitiesRow:i.default},data:()=>({loaded:!1,results:[]}),computed:u({},(0,a.mapState)(["currentCommunity","network"])),methods:u(u({},(0,a.mapActions)(["setDialog"])),{},{add(){this.setDialog({tag:"input-form",form:c}).then(async e=>{e.name&&e.constituentCommunityId&&(await this.$store.dispatch("createCommunityDelegation",{constituentCommunityId:e.constituentCommunityId,delegateCommunityId:this.currentCommunity.id,networkId:this.network.id,name:e.name}),this.$apollo.queries.results.refresh())})}}),apollo:{results:{client:"importer",query:n.default`
        query FetchCommunityDelegations($delegateId: Int!) {
          results: importerCommunityDelegations(delegateId: $delegateId) {
            constituentCommunityId
            delegateCommunityId
            id
            name
            urlMatcher
          }
        }
      `,variables(){return{delegateId:this.currentCommunity.id}},update(e){return this.loaded=!0,e.results}}}};t.default=d,e.exports=t.default},tL5b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("dMAm"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("m/PD");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},uTno:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("J7I0"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("8Ndn");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default},v3P4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(r("jE9Z")),a=f(r("LQ5i")),i=f(r("OVPs")),o=f(r("A0D0")),s=f(r("tL5b")),u=f(r("3CFH")),l=f(r("uTno")),c=f(r("2Y5f")),d=f(r("4fGC")),p=f(r("E/bY")),m=f(r("XSqK"));function f(e){return e&&e.__esModule?e:{default:e}}const v=new n.default({base:"/importmanager",mode:"history",routes:[{path:"/",name:"dashboard",component:a.default},{path:"/project/:id",name:"project",component:o.default,props:e=>({id:Number(e.params.id)})},{path:"/sitemap/:id",name:"sitemap",component:s.default,props:e=>({id:Number(e.params.id)})},{path:"/document/:id",name:"document",component:u.default,props:e=>({id:Number(e.params.id)})},{path:"/capture/:id",name:"capture",component:l.default,props:e=>({id:Number(e.params.id)})},{path:"/parser/:id",name:"parser",component:c.default,props:e=>({id:Number(e.params.id)})},{path:"/identities/users",name:"user-identities",component:i.default,props:()=>({type:"user"})},{path:"/identities/groups",name:"group-identities",component:i.default,props:()=>({type:"group"})},{path:"/identities/assets",name:"asset-identities",component:i.default,props:()=>({type:"asset"})},{path:"/identities/galleries",name:"gallery-identities",component:i.default,props:()=>({type:"gallery"})},{path:"/placeholders",name:"placeholders",component:d.default},{path:"/jobs",name:"jobs",component:m.default},{path:"/communities",name:"communities",component:p.default}]});v.beforeEach((e,t,r)=>{if(t.path===e.path)return r();const n=document.getElementsByTagName("title")[0];n&&(n.innerText="Chorus Import Manager : "+e.name);const a=document.getElementById("viewport");a&&a.scrollTo(0,0),r()});var h=v;t.default=h,e.exports=t.default},vB9u:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={mixins:[((n=r("0OYW"))&&n.__esModule?n:{default:n}).default],props:{project:{type:Object},sitemap:{type:Object},document:{type:Object},capture:{type:Object}},computed:{hasProject(){return this.project&&!!this.project.id},hasSitemap(){return this.sitemap&&!!this.sitemap.id},parentSitemap(){return this.hasSitemap?this.$store.state.sitemapModels[this.sitemap.parentId]:null},isSitemap(){return this.hasSitemap&&"sitemap"===this.lastObject},hasDocument(){return this.document&&!!this.document.id},isDocument(){return this.hasDocument&&"document"===this.lastObject},hasCapture(){return this.capture&&!!this.capture.id},isCapture(){return this.hasCapture&&"capture"===this.lastObject},lastObject(){return["capture","document","sitemap","project"].find(e=>this[e]&&!!this[e].id)}}};t.default=a,e.exports=t.default},vuKD:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=r("L2JU"),i=r("hWEr"),o=r("2tY0"),s=(n=r("0OYW"))&&n.__esModule?n:{default:n};function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={All:{},Imported:{status:"CAPTURED"},Failed:{status:"FAILED"},"Failed – unique":{status:"FAILED",view:"UNIQUE"},Archived:{archived:!0},"Archived – admin":{archivalStatus:"ARCHIVED_BY_ADMIN"},"Archived – crawler":{archivalStatus:"ARCHIVED_BY_CRAWLER"},"Archived – editorial":{archivalStatus:"ARCHIVED_BY_EDITORIAL"},"Archived – forcefix":{archivalStatus:"ARCHIVED_BY_MANUAL_UPDATE"},New:{status:"CREATED"},Processing:{status:"CAPTURING"},Starred:{watched:!0}},p=Object.keys(d)[0],m={prompt:"Add a document URL for testing. It will shift to its appropraite sitemap once crawled.",fields:{canonicalUrl:{label:"Canonical URL",type:"text"}},submit:"Add Document"},f={prompt:"Run a processing job on the current document search:",params:null,fields:{task:{label:"Task",info:"https://github.com/voxmedia/chorus-import-manager/wiki/Document-Jobs#built-in-jobs",options:{}},id:{label:"Document IDs (optional)",type:"textarea",placeholder:"Separated by commas or newlines"}},submit:"Start Job"};function v(e){return e.replace(/[(),– ]/g,"").toLowerCase()}var h={mixins:[s.default],props:{label:{type:String,default:null},collapsable:{type:Boolean,default:!1},sitemapEntryId:{type:Number,default:null},communityScopeId:{type:Number,default:null},projects:{type:Object},version:{type:Number,default:null}},data(){return{filterOptions:d,searchActive:!this.collapsable,downloadUrl:null,communityScope:this.communityScopeId?String(this.communityScopeId):"ALL",projectId:null,sitemapId:this.sitemapEntryId||null,filter:p,lookup:null,page:1,perPage:25,totalCount:0,results:[],fetching:!1,loaded:!1}},computed:l(l({},(0,a.mapGetters)(["communityDelegationsList","communityNameById"])),{},{communityId(){return this.$store.state.currentCommunity.id},multiCommunity(){return!!this.communityDelegationsList.length},scopingEnabled(){return this.projects&&!this.sitemapEntryId},sitemapsForProject(){const e=(this.projects||{})[this.projectId];return e?e.sitemaps:[]},searchParams(){let e={communityId:this.communityId,pageNumber:this.page,perPage:this.perPage};return this.multiCommunity&&("ALL"===this.communityScope?e.selectCommunities=this.communityDelegationsList.map(e=>e.constituentCommunityId).concat([this.communityId]):this.communityScope&&Number(this.communityScope)!==this.communityId&&(e.selectCommunities=[Number(this.communityScope)])),null!==this.projectId&&(e.projectId=this.projectId),null!==this.sitemapId&&(e.sitemapEntryId=this.sitemapId),null!==this.lookup&&(e=Object.assign(e,(0,o.formatFinder)(this.lookup))),Object.assign(e,d[this.filter])},lookupInput:{get(){return this.lookup||""},set(e){e=e||null,this.lookup!==e&&(this.lookup=e,this.page=1)}},communityScopeInput:{get(){return this.communityScope},set(e){this.communityScope!==e&&(this.communityScope=e,this.page=1)}},filterInput:{get(){return this.filter},set(e){this.filter!==e&&(this.filter=d.hasOwnProperty(e)?e:p,this.page=1)}},projectInput:{get(){return this.projectId||""},set(e){e=Number(e)||null,this.projectId!==e&&(this.projectId=e,this.sitemapId=null,this.page=1)}},sitemapInput:{get(){return this.sitemapId||""},set(e){e=Number(e)||null,this.sitemapId!==e&&(this.sitemapId=e,this.page=1)}}}),watch:{communityScopeId(e){this.communityScope=e?String(e):"ALL"},searchParams(){this.refresh()},version(){this.refresh()},"$route.query"(){this.pullRoute()}},mounted(){this.pullRoute()},methods:l(l({},(0,a.mapActions)(["findOrCreateDocument","searchDocuments","fetchJobTasks","createJob","setDialog"])),{},{formatDateTime:o.formatDateTime,formatNumber:o.formatNumber,stripURIHost:o.stripURIHost,statusIcon:e=>o.entryStatusIcons[e.status]||o.entryStatusIcons.CREATED,addDocument(){if(!this.sitemapEntryId)throw"a sitemap prop is required";this.setDialog({tag:"input-form",form:m}).then(async e=>{if(!e.canonicalUrl)return;const t=await this.findOrCreateDocument({canonicalUrl:e.canonicalUrl,communityId:this.communityId,sitemapEntryId:this.sitemapEntryId,watched:!0});this.$router.replace(this.routeTo("document",t.id))})},refresh:(0,i.debounce)((function(){this.pushRoute(),this.search()})),pullRoute(){const e=this.$route.query;e.q&&(this.lookup=e.q||null),e.scope&&(this.communityScope=e.scope||"ALL"),e.project_id&&(this.projectId=Number(e.project_id)||null),e.sitemap_id&&(this.sitemapId=Number(e.sitemap_id)||null),e.filter&&(this.filter=Object.keys(d).find(t=>v(t)===e.filter)||p),e.page&&(this.page=Number(e.page)||1)},pushRoute(){const e={community_id:this.communityId};"ALL"!==this.communityScope&&(e.scope=this.communityScope),null!==this.projectId&&(e.project_id=this.projectId),null===this.sitemapId||this.sitemapEntryId||(e.sitemap_id=this.sitemapId),null!==this.lookup&&(e.q=this.lookup),this.filter!==p&&(e.filter=v(this.filter)),this.page>1&&(e.page=this.page),this.$router.replace({query:e})},search(){this.setDownloadUrl(),this.fetching=!0,this.searchDocuments(this.searchParams).then(e=>{this.loaded=!0,this.fetching=!1,this.totalCount=e.totalCount,this.results=e.results})},setDownloadUrl(){const e=this.searchParams,t=[(0,o.importManagerUrl)(),"/reports/documents?community_id="+this.communityId];e.selectCommunities&&t.push("&select_communities="+e.selectCommunities.join(",")),e.contentApiUuid&&t.push("&content_api_uuid="+e.contentApiUuid),e.findByUrl&&t.push("&find_by_url="+e.findByUrl),e.errorDigest&&t.push("&error_digest="+e.errorDigest),e.chorusEntryId&&t.push("&chorus_entry_id="+e.chorusEntryId),e.projectId&&t.push("&project_id="+e.projectId),e.sitemapEntryId&&t.push("&sitemap_entry_id="+e.sitemapEntryId),e.archivalStatus&&t.push("&archival_status="+e.archivalStatus.toLowerCase()),e.archived&&t.push("&archived=true"),e.watched&&t.push("&watched=true"),e.view&&t.push("&view="+e.view.toLowerCase()),e.status&&t.push("&status="+e.status.toLowerCase()),"FAILED"===e.status?t.push("&columns=id,canonical_url,failed_capture_url,error_type,error_message"):t.push("&columns=id,canonical_url,chorus_entry_url,chorus_entry_id,document_entry_url,status,watched,modified_at"),this.downloadUrl=t.join("")},jobParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.split(/\D/).filter(e=>/\d+/.test(e)).map(Number);const t=Object.assign({},this.searchParams);return delete t.pageNumber,delete t.perPage,e.length&&(t.id=e),t},async runJob(){f.params=JSON.stringify(this.jobParams()),f.fields.task.options=await this.fetchJobTasks(),this.setDialog({tag:"input-form",form:f}).then(async e=>{const t=await this.createJob({search:this.jobParams(e.id),task:e.task});this.$router.replace({name:"jobs",query:{community_id:this.communityId,job:t}})})}})};t.default=h,e.exports=t.default},vuKY:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],class:"m-app-loader m-app-loader__"+this.animation},[t("res-icon",{attrs:{name:this.iconName,size:"large"}})],1)},a=[]},w6yl:function(e,t,r){"use strict";r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return a}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e.$slots.default||e.label||e.collapsable?r("div",{staticClass:"m-import-manager__header"},[e._t("default",[r("h1",[e._v(e._s(e.label))])]),e._v(" "),e.collapsable?r("res-button",{staticClass:"m-l-1",attrs:{paddingless:""},on:{click:function(t){t.preventDefault(),e.searchActive=!e.searchActive}}},[r("button",[e._v("Search")]),e._v(" "),r("res-icon",{attrs:{name:e.searchActive?"minus":"add",size:"large"}})],1):e._e(),e._v(" "),e.sitemapEntryId?r("res-button",{staticClass:"m-l-a",attrs:{paddingless:""},on:{click:function(t){return t.preventDefault(),e.addDocument()}}},[r("res-icon",{attrs:{name:"versions",size:"large"}}),e._v(" "),r("button",[e._v("Add document")])],1):e._e()],2):e._e(),e._v(" "),e.searchActive?r("form",{staticClass:"m-import-manager__fieldset",on:{submit:function(e){e.preventDefault()}}},[r("res-input",{staticStyle:{"min-width":"40%"}},[r("label",[e._v("Lookup")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.lookupInput,expression:"lookupInput",modifiers:{lazy:!0}}],attrs:{type:"text",placeholder:"URL or Error Code"},domProps:{value:e.lookupInput},on:{change:function(t){e.lookupInput=t.target.value}}}),e._v(" "),r("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1),e._v(" "),e.multiCommunity&&!e.communityScopeId?r("res-select",{staticClass:"m-l-1"},[r("label",[e._v("Community")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.communityScopeInput,expression:"communityScopeInput"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.communityScopeInput=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"ALL"}},[e._v("All")]),e._v(" "),r("option",{domProps:{value:e.communityId}},[e._v(e._s(e.$store.state.currentCommunity.name))]),e._v(" "),e._l(e.communityDelegationsList,(function(t){return r("option",{key:t.constituentCommunityId,domProps:{value:t.constituentCommunityId}},[e._v(e._s(t.name))])}))],2)]):e._e(),e._v(" "),r("res-select",{staticClass:"m-l-1"},[r("label",[e._v("Filter")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.filterInput,expression:"filterInput"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterInput=t.target.multiple?r:r[0]}}},e._l(e.filterOptions,(function(t,n){return r("option",{key:n,domProps:{value:n}},[e._v(e._s(n))])})),0)]),e._v(" "),e.scopingEnabled?r("res-select",{staticClass:"m-l-1"},[r("label",[e._v("Project")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.projectInput,expression:"projectInput"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.projectInput=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("All")]),e._v(" "),e._l(e.projects,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e(),e._v(" "),e.scopingEnabled?r("res-select",{staticClass:"m-l-1",attrs:{disabled:!e.projectInput}},[r("label",[e._v("Sitemap")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.sitemapInput,expression:"sitemapInput"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.sitemapInput=t.target.multiple?r:r[0]}}},[r("option",{attrs:{value:""}},[e._v("All")]),e._v(" "),e._l(e.sitemapsForProject,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]):e._e()],1):e._e(),e._v(" "),r("div",{staticClass:"m-import-manager__table"},[r("res-table",{staticClass:"m-dashboard__table",attrs:{zebra:"true"}},[r("table",[r("thead",[r("tr",[r("th",{staticClass:"--icon-only"}),e._v(" "),r("th",{staticClass:"--url"},[e._v("URL")]),e._v(" "),e.multiCommunity?r("th",{staticClass:"--community"},[e._v("Community")]):e._e(),e._v(" "),r("th",{staticClass:"--status"},[e._v("Status")]),e._v(" "),r("th",{staticClass:"--modified"},[e._v("Last Update")])])]),e._v(" "),r("tbody",e._l(e.results,(function(t){return r("tr",{key:t.id},[r("td",{staticClass:"--icon-only"},[r("router-link",{attrs:{to:e.routeTo("document",t.id)}},[r("res-icon",{attrs:{name:"versions",size:"medium"}})],1)],1),e._v(" "),r("td",{staticClass:"--url"},[r("a",{attrs:{href:t.canonicalUrl}},[e._v(e._s(e.stripURIHost(t.canonicalUrl)))]),e._v(" "),r("a",{attrs:{href:t.chorusEntryUrl}},[e._v(e._s(e.stripURIHost(t.chorusEntryUrl)))])]),e._v(" "),e.multiCommunity?r("th",{staticClass:"--community"},[e._v("\n              "+e._s(e.communityNameById[t.communityId])+"\n            ")]):e._e(),e._v(" "),r("td",{staticClass:"--status",class:{"is-watched":t.watched}},[r("a",{attrs:{title:t.status}},[r("res-icon",{attrs:{name:e.statusIcon(t),size:"medium"}})],1),e._v(" "),t.queued?r("a",{attrs:{title:"QUEUED"}},[r("res-icon",{attrs:{name:"clock",size:"medium"}})],1):e._e(),e._v(" "),t.archived?r("a",{attrs:{title:t.archivalStatus}},[r("res-icon",{attrs:{name:"none",size:"medium"}})],1):e._e(),e._v(" "),t.watched?r("a",{attrs:{title:"STARRED"}},[r("res-icon",{attrs:{name:"star",size:"medium"}})],1):e._e(),e._v(" "),t.errorDigest?r("router-link",{staticClass:"m-import-manager__digest --error",attrs:{to:e.routeTo("capture",t.failedDocumentCaptureId),title:t.errorSummary}},[e._v("\n                "+e._s(t.errorDigest.slice(0,8))+"\n                "),t.errorOccurrenceCount?[e._v("("+e._s(t.errorOccurrenceCount)+")")]:e._e()],2):e._e()],1),e._v(" "),r("td",{staticClass:"--modified"},[e._v(e._s(e.formatDateTime(t.updatedAt)))])])})),0)])]),e._v(" "),r("footer",[e.loaded?r("span",[r("a",{attrs:{href:"#",title:"Refresh"},on:{click:function(t){return t.preventDefault(),e.refresh()}}},[r("res-icon",{attrs:{animated:String(e.fetching),name:"loading",size:"small"}})],1),e._v("\n        Found "+e._s(e.formatNumber(e.totalCount))+" results\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.totalCount>0,expression:"totalCount > 0"}]},[e._v("\n          ["),r("a",{attrs:{href:e.downloadUrl}},[e._v("download")]),e._v(" / "),r("a",{attrs:{href:e.downloadUrl},on:{click:function(t){return t.preventDefault(),e.runJob(t)}}},[e._v("job")]),e._v("]\n        ")])]):e._e(),e._v(" "),r("res-pagination",{attrs:{page:e.page,count:e.totalCount,display:e.perPage,indicator:"page",pagination:"text-only",navigation:"text"},on:{change:function(t){e.page=t.target.page}}})],1)],1)])},a=[]},yFyr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r("MDZW"));Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var i,o=r("n+F7");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}var u=(0,((i=r("JFUb"))&&i.__esModule?i:{default:i}).default)(a.default,o.render,o.staticRenderFns,!1,null,null,null).exports;t.default=u,e.exports=t.default}},[[16,"runtime","vendor"]]]);
//# sourceMappingURL=importmanager.c5bfe8ae527dd59e95b8.0.js.map