(window.webpackJsonp=window.webpackJsonp||[]).push([["admin"],{"+hbK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){return void await(0,i.default)("/api/tower/graphql",{query:"\n      mutation ImportRedirects($csv: String!) {\n        importRedirects(input: { csv: $csv }) {\n          importQueued\n          recipientEmail\n        }\n      }\n    ",variables:JSON.stringify({csv:e})})};var r,i=(r=n("XhB+"))&&r.__esModule?r:{default:r};e.exports=t.default},"/l1V":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t,n,r,a){return void await(0,i.default)("/api/tower/graphql",{query:"\n      mutation updateRedirect($redirectId: Int!, $path: String!, $destination: String!, $communityId: Int!, $status: Int!) {\n        updateRedirect(where: {id: $redirectId}, input: {path: $path, destination: $destination, community: { id: $communityId }, status: $status}) {\n          redirect {\n            id\n          }\n        }\n      }\n    ",variables:JSON.stringify({redirectId:e,path:t,destination:n,communityId:r,status:a})})};var r,i=(r=n("XhB+"))&&r.__esModule?r:{default:r};e.exports=t.default},1:function(e,t){},10:function(e,t){},11:function(e,t){},15:function(e,t,n){n("j36g"),e.exports=n("IPWg")},"1m/l":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AllRedirects"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"perPage"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"community_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"destination"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchRedirects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"perPage"},value:{kind:"Variable",name:{kind:"Name",value:"perPage"}}},{kind:"ObjectField",name:{kind:"Name",value:"pageNumber"},value:{kind:"Variable",name:{kind:"Name",value:"pageNumber"}}},{kind:"ObjectField",name:{kind:"Name",value:"communityId"},value:{kind:"Variable",name:{kind:"Name",value:"community_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"ObjectField",name:{kind:"Name",value:"destination"},value:{kind:"Variable",name:{kind:"Name",value:"destination"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"results"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"destination"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"host"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:396}};n.loc.source={body:"query AllRedirects($pageNumber: Int!, $perPage: Int!, $community_id: Int!, $path: String, $destination: String) {\n  searchRedirects(query: {\n    perPage: $perPage\n    pageNumber: $pageNumber\n    communityId: $community_id\n    path: $path\n    destination: $destination\n  }) {\n      results {\n        id\n        path\n        destination\n        status\n        host\n      }\n      totalCount\n    }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),r[e.name.value]=t}})),e.exports=n,e.exports.AllRedirects=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,s=new Set,o=new Set;for(a.forEach((function(e){o.add(e)}));o.size>0;){var l=o;o=new Set,l.forEach((function(e){s.has(e)||(s.add(e),(r[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(t){var r=i(e,t);r&&n.definitions.push(r)})),n}(n,"AllRedirects")},"1pot":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"NetworkFilter",props:{networks:Array,networkId:Number,communityId:Number},data(){return{selectedNetworkId:this.networkId,selectedCommunityId:this.communityId||this.networks.find((function(e){return e.id===parseInt(this.networkId)}),this).communities[0].id}},computed:{currentNetwork:function(){return this.networks.find((function(e){return e.id===this.selectedNetworkId}),this)},selectedDomainName:function(){return this.currentNetwork.communities.find((function(e){return e.id===this.selectedCommunityId}),this).domain}},watch:{currentNetwork:function(){this.selectedCommunityId=this.currentNetwork.communities[0].id},selectedCommunityId:function(){this.$emit("community-changed",this.selectedCommunityId,this.selectedNetworkId,this.selectedDomainName)}}};t.default=r,e.exports=t.default},2:function(e,t){},"2aLv":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"m-dashboard__content m-entitlement-networks m-admin"},[n("div",[n("router-link",{staticClass:"m-entitlement-info",attrs:{to:{name:"entitlements-dashboard"}}},[n("res-icon",{staticClass:"m-back-icon",attrs:{name:"back",size:"large"}}),e._v(" "),n("p",{staticClass:"m-back-text"},[e._v("Back to entitlements")])],1)],1),e._v(" "),n("h1",{staticClass:"m-entitlement-name"},[e._v(e._s(e.name))]),e._v(" "),n("div",{staticClass:"m-entitlement-global-description-block"},[n("p",{directives:[{name:"show",rawName:"v-show",value:e.description,expression:"description"}],staticClass:"entitlement-description"},[e._v(e._s(e.description))]),e._v(" "),n("res-switch",{staticClass:"m-global-toggle",attrs:{checked:e.isGlobal,disabled:e.globalLoading},on:{change:e.toggleGlobal}},[n("label",[e._v("Global")]),n("input",{attrs:{type:"checkbox",name:"s1"}})])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.initialLoading&&!e.isGlobal,expression:"initialLoading && !isGlobal"}]},[n("res-icon",{staticClass:"m-loading-icon",attrs:{name:"loading",size:"large"}}),e._v(" "),n("p",{staticClass:"m-loading-text"},[e._v("Loading "+e._s(e.name)+"’s networks")])],1),e._v(" "),e.isGlobal||e.initialLoading?e._e():n("div",{staticClass:"m-entitlement-assignments"},[n("h2",{staticClass:"m-available-header"},[e._v("Networks")]),e._v(" "),n("res-input",{staticClass:"m-assignment-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"search",placeholder:"Search networks"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),n("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1),e._v(" "),n("res-table",{staticClass:"m-admin__table",attrs:{mobile:e.isMobile,zebra:""}},[n("div",{staticClass:"m-dashboard__sub-head"},[n("div",{staticClass:"m-dashboard__sub-head__title"},[n("table",[n("thead",[n("tr",[n("th",[e._v("Network")]),e._v(" "),n("th",{staticClass:"m-dashboard__table__communities-header"},[e._v("Communities")])])]),e._v(" "),n("tbody",e._l(e.filteredNetworks,(function(t){return n("tr",{key:t.id,staticClass:"m-dashboard__table__row"},[n("td",{staticClass:"m-dashboard__table__networks"},[n("div",[t.svgLogo?n("div",{staticClass:"m-dashboard__table__avatar",domProps:{innerHTML:e._s(t.svgLogo)}}):n("img",{staticClass:"m-dashboard__table__icon",attrs:{src:e.$root.config.defaultLogoUrl}}),e._v(" "),n("div",{staticClass:"m-network-name"},[e._v(e._s(t.name))])])]),e._v(" "),n("td",{staticClass:"m-dashboard__table__communities"},[n("router-link",{staticClass:"m-community-info",attrs:{to:{name:"entitlement-communities",params:{key:e.entitlementKey,id:t.id}}}},[e._v("\n                    "+e._s(t.searchCommunities.totalCount)+" (See all)\n                  ")])],1)])})),0)])])])])],1)])},i=[]},"2dKW":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},i=[]},3:function(e,t){},4:function(e,t){},"4vXe":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-redirects__form"},[n("div",{staticClass:"m-redirects__messaging"},[n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.creatingRedirect,expression:"creatingRedirect"}]},[n("span",[e._v("Creating redirect...")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.redirectCreated,expression:"redirectCreated"}],attrs:{design:"positive"}},[n("span",[e._v("Success! Your redirect was "+e._s(e.saveContext)+".")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.createError,expression:"createError"}],attrs:{design:"negative"}},[n("span",[e._v("Error: "+e._s(e.saveErrorMessage))])])],1),e._v(" "),n("div",{staticClass:"l-content"},[n("main",{staticClass:"m-dashboard__content"},[n("div",{staticClass:"m-dashboard__sub-head"},[n("div",{staticClass:"m-dashboard__sub-head__title"},[n("res-button",{attrs:{type:"default",paddingless:""}},[n("res-icon",{attrs:{size:"small",name:"back"}}),e._v(" "),n("router-link",{attrs:{to:{path:"/admin/redirects",query:{community_id:e.newDomain,network_id:e.newNetwork}}}},[e._v("Back to redirects")])],1),e._v(" "),n("h1",[e._v(e._s(e.editContext)+" redirect")])],1)]),e._v(" "),n("div",{staticClass:"m-edit"},[n("networkFilter",{attrs:{networks:e.networks,networkId:e.networkId,communityId:e.newDomain},on:{"community-changed":e.updateCommunityAndNetworkId}}),e._v(" "),n("div",{staticClass:"m-edit-redirect"},[n("res-input",[n("label",[e._v("Redirect from")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPath,expression:"newPath"}],attrs:{type:"text",name:"redirects-from",value:""},domProps:{value:e.newPath},on:{input:function(t){t.target.composing||(e.newPath=t.target.value)}}}),e._v(" "),n("div",{staticClass:"res-input__help-text",attrs:{slot:"help"},slot:"help"},[n("p",[e._v("This URL path should not include a domain and must begin with a slash, eg. "),n("em",[e._v("/about")])]),e._v(" "),n("p",[e._v("The full URL you're redirecting from is "),n("strong",[e._v("http://"+e._s(e.newDomainName)+e._s(e.newPath))])])])])],1),e._v(" "),n("div",{staticClass:"m-edit-redirect"},[n("res-input",[n("label",[e._v("Redirect to")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newDestination,expression:"newDestination"}],attrs:{type:"text",name:"redirects-to",value:""},domProps:{value:e.newDestination},on:{input:function(t){t.target.composing||(e.newDestination=t.target.value)}}}),n("p",{attrs:{slot:"help"},slot:"help"},[e._v("To redirect within the same domain, add a path: "),n("em",[e._v("/this-is-a-path")]),e._v(".")]),e._v(" "),n("p",{attrs:{slot:"help"},slot:"help"},[e._v("To redirect to a different domain, add the full URL: "),n("em",[e._v("otherdomain.com/path")]),e._v(".")])])],1),e._v(" "),n("div",{staticClass:"m-edit-redirect"},[n("res-select",[n("label",[e._v("Status")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.newStatus,expression:"newStatus"}],attrs:{name:"status"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.newStatus=t.target.multiple?n:n[0]}}},[n("option",[e._v("301")]),e._v(" "),n("option",[e._v("302")]),e._v(" "),n("option",[e._v("307")]),e._v(" "),n("option",[e._v("308")])])]),e._v(" "),n("div",{staticClass:"res-input__help-text",attrs:{slot:"help"},slot:"help"},[n("p",[e._v("The HTTP status code to use for the redirect. 301 is most common, but the following statuses are supported:")]),e._v(" "),e._m(0)])],1),e._v(" "),n("SaveButton",{attrs:{enabled:!0},on:{save:e.handleRedirectSave}})],1)])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("strong",[e._v("301 - Permanent")]),e._v(", use with GET or HEAD requests.")]),e._v(" "),n("li",[n("strong",[e._v("302 - Temporary")]),e._v(", use with GET or HEAD requests.")]),e._v(" "),n("li",[n("strong",[e._v("307 - Temporary")]),e._v(", use with POST, PATCH, PUT, or DELETE requests.")]),e._v(" "),n("li",[n("strong",[e._v("308 - Permanent")]),e._v(", use with POST, PATCH, PUT, or DELETE requests.")])])}]},5:function(e,t){},"5TKK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllNetworks=async function(){const{networks:e}=await(0,i.default)("/api/tower/graphql",{query:a.AdminAllNetworks});return e},t.getCommunityData=async function(e){return await(0,i.default)("/api/tower/graphql",{query:a.AdminCommunity,variables:JSON.stringify({communityId:e})})},t.getNetworkCommunities=async function(e){async function t(t){return(await(0,i.default)("/api/tower/graphql",{query:a.AdminNetworkCommunities,variables:{networkId:e,page:t}})).searchCommunities}let n={totalCount:1/0,results:[]},r=[];for(let e=1;r.length<n.totalCount;e++)n=await t(e),r=r.concat(n.results);return r};var r,i=(r=n("XhB+"))&&r.__esModule?r:{default:r},a=n("7vGD")},6:function(e,t){},"6fkZ":function(e,t,n){"use strict";t.ALT_TEXT_OVER_LIMIT="Alt text is currently limited to {alt_text_limit} characters. Please try again.",t.APPLE_NEWS_MEMBERS_ONLY_WARNING="This {docLabel} is exclusive to Apple News+. To unhide it, remove the exclusives group and publish the changes.",t.COMMUNITY_CHANGED="This {docLabel} has been moved!",t.CSV_TOO_LARGE="This CSV is too large. Please upload a file under 1 MB.",t.DATA_LINKS_ERROR="Suggestions timed out. Try again or add links manually.",t.DRAFT_HERMANO_RECORD="This {record} is a draft; it will be published automatically when this {docLabel} is published.",t.EMBARGOED="This story is embargoed.",t.HIDDEN="This story is hidden.",t.FEEDBACK_SENT="Message sent!",t.FILE_TOO_LARGE="Files must be under 100 MB.",t.GETTY_API_DOWN="Getty image search is unavailable. Please try again later.",t.GIF_IN_IMAGE_CARD="GIFs cannot be published with {type} cards. Choose another?",t.GIF_TOO_LARGE="This GIF is over {size} MB and will block this story from publishing to {platforms}.",t.IMAGE_IN_GALLERY="This image is already included in the gallery. Choose another?",t.IMAGE_TOO_LARGE="Images must be under 10,000 x 10,000 pixels.",t.INVALID_LINK_MESSAGE="Please enter a valid URL.",t.INVALID_SPREADSHEET_URL="Please add a valid public Google Sheet URL and try again.",t.INVALID_STREAM_MEMBERSHIP="This type of story cannot be added.",t.MERLIN_API_DOWN="Merlin image search is unavailable. Please try again later.",t.MISSING_LEGACY_ENTRY='Editing is disabled because a more recent version of this story may exist. &nbsp;<a href="https://www.chorus.help/hc/en-us/requests/new">Contact us for help.</a>',t.NETWORK_ASSETS_ACCESS_DENIED="You are not authorized to access assets across this network. Your permissions must be updated before searching across networks.",t.NEW_USER_MESSAGE='Welcome to Chorus! &nbsp;<a href="{url}">Check out our getting started guide.</a>',t.OEMBED_GENERIC_ERROR="Something went wrong. Make sure this embed is shareable and try again.",t.OEMBED_INSECURE_ERROR="This embed URL is insecure. Only HTTPS embeds are supported.",t.OEMBED_SUPPORT_ERROR="Embeds from this source are not supported at this time.",t.OEMBED_PDF_SUPPORT_ERROR="PDFs must be under 10 MB.",t.OEMBED_YOUTUBE_SUPPORT_ERROR="Embeds are disabled for this video by the YouTube account owner.",t.PLAGSCAN_ERROR="An error occurred. Please try scanning the story again.",t.PLAGSCAN_LOW_WORD_COUNT="You can scan this story once it's over 50 words.",t.PLAGSCAN_OUT_OF_DATE="The latest version of this story has not been scanned.",t.PLAGSCAN_RETRIEVED="A report has been generated for this story.",t.PLAGSCAN_SUBMITTED="A report is being generated.",t.PLAGSCAN_UNSCANNED="Submit the story for approval to generate a report.",t.PUBLISH_PACKAGE_ACTIVE_MESSAGE="Your stories are being {action}...",t.PUBLISH_PACKAGE_WARNING_MESSAGE="{gerund} this landing page will {verb} all drafts in this package.",t.PYM_EMBED_GENERIC_ERROR="Something went wrong. Make sure this Pym.js embed is shareable and try again.",t.PYM_EMBED_INSECURE_ERROR="This Pym.js embed URL is insecure. Only HTTPS Pym.js embeds are supported.",t.PYM_EMBED_SUPPORT_ERROR="Pym.js embeds from this source are not supported at this time.",t.REALTIME_ERROR="Autosave failed. Please reload your browser.",t.RECONNECT_ERROR="Something went wrong reconnecting. Please reload your browser.",t.RECONNECTING="Reconnecting...",t.RELOAD_REQUIRED="Please reload to get the latest updates.",t.RELOAD_STALE_TAB="You've been away for a while, please reload.",t.REQUIRED_FIELD="This field is required.",t.RESCUE_SAVED_REASSURE='Your work has been saved in &nbsp;<a href="{url}">this version.</a>',t.SEND_TO_PRINT_SUCCESS="Sent to print!",t.SHEET_PERMISSIONS="Please make the Google Sheet public to continue.",t.STRUCTURED_TAGS_ERROR="Suggestions timed out. Try again or add tags manually.",t.TOO_MANY_EDITORS="More than 10 editors at a time is not recommended.",t.UNEXPECTED="An error occurred. Try again or reload your browser.",t.UNSAVED_WARNING="Your changes are still being saved; leaving now could cause data loss!",t.UNSUPPORTED_ASSET_TYPE='This format is not supported. <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">Learn more about supported file formats.</a>',t.UPLOAD_INVALID_FILE='At least one of the uploaded files is not supported. Please review supported <a href="https://www.chorus.help/hc/en-us/articles/360010240753">image</a> and <a href="https://www.chorus.help/hc/en-us/articles/360009582854-Files">file</a> formats and try again.',t.UPLOAD_TOO_MANY_FILES="One file at a time, please."},7:function(e,t){},"78Iv":function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"m-dashboard__table__row"},[n("td",{staticClass:"m-dashboard__table__title"},[e._v(e._s(e.values.name))]),e._v(" "),n("td",{staticClass:"m-dashboard__table__title m-admin-description"},[e._v(e._s(e.values.description))]),e._v(" "),n("td",{staticClass:"m-dashboard__table__title m-admin-global"},[e._v(e._s(e.isGlobal?"Yes":"No"))]),e._v(" "),n("td",{staticClass:"m-dashboard__table__title m-admin-action"},[n("router-link",{staticClass:"m-entitlement-info",attrs:{to:{name:"entitlement-networks",params:{key:e.entitlementKey}}}},[e._v("\n      Edit\n    ")])],1)])},i=[]},"7vGD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdminNetworkCommunities=t.AdminCommunity=t.AdminAllNetworks=void 0;t.AdminCommunity="\n  query NetworkCommunity($communityId: Int!) {\n    community(id: $communityId) {\n      id\n      name\n      faviconUrl\n      placeholderImageUrl\n    }\n  }\n";t.AdminAllNetworks='\n  query AdminAllNetworks {\n    networks {\n      id\n      name\n      svgLogo: siteConfigString(key: "svg_small_mark_full_color")\n      searchCommunities(query: { perPage: 0 }) {\n        totalCount\n      }\n    }\n  }\n';t.AdminNetworkCommunities='\n  query AllNetworkCommunities($networkId: Any, $page: Int!) {\n    searchCommunities(query: {\n      whereAll: [{ field: "networkId", equal: $networkId }]\n      publicOnly: false\n      perPage: 100\n      pageNumber: $page\n    }) {\n      totalCount\n      results {\n        id\n        name\n        faviconUrl\n      }\n    }\n  }\n'},8:function(e,t){},9:function(e,t){},"99WQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n("Imro"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var a={props:{communityId:{type:Number,required:!0},enabled:{type:Boolean,required:!0,default:!1},communityName:{type:String,required:!0,default:""},entitlementKey:{type:String,required:!0,default:""},faviconUrl:{type:String,default:""}},data:()=>({loading:!1,isEnabled:!1}),created(){this.isEnabled=this.enabled},methods:{async toggleAssignment(){if(this.loading=!0,this.isEnabled)try{await r.unassignEntitlement({key:this.entitlementKey,communityId:this.communityId}),this.isEnabled=!this.isEnabled}catch(e){console.error(e)}else try{await r.assignEntitlement({key:this.entitlementKey,communityId:this.communityId}),this.isEnabled=!this.isEnabled}catch(e){console.error(e)}this.loading=!1}}};t.default=a,e.exports=t.default},Bj7L:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("XTol"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("78Iv");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},Bmas:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"m-dashboard__content m-admin"},[n("h1",{staticClass:"m-entitlement-name"},[e._v("Entitlements")]),e._v(" "),n("h2",{staticClass:"m-available-header"},[e._v("Available entitlements")]),e._v(" "),n("res-input",{staticClass:"m-entitlement-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"search",placeholder:"Search entitlements"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),n("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1),e._v(" "),n("res-table",{staticClass:"m-admin__table",attrs:{mobile:e.isMobile,zebra:""}},[n("div",{staticClass:"m-dashboard__sub-head"},[n("div",{staticClass:"m-dashboard__sub-head__title"},[n("table",[n("thead",[n("tr",[n("th",{staticClass:"m-table-entitlement-name"},[e._v("Name")]),e._v(" "),n("th",{staticClass:"m-table-entitlement-description"},[e._v("Description")]),e._v(" "),n("th",{staticClass:"m-table-entitlement-global"},[e._v("Global")]),e._v(" "),n("th",{staticClass:"m-table-entitlement-action"})])]),e._v(" "),e.query?n("tbody",e._l(e.filteredEntitlements,(function(t){return n("entitlement-cell",e._b({key:t.values.name},"entitlement-cell",t,!1))})),1):n("tbody",e._l(e.paginatedEntitlements,(function(t){return n("entitlement-cell",e._b({key:t.values.name},"entitlement-cell",t,!1))})),1)])])])]),e._v(" "),n("footer",{staticClass:"m-dashboard__footer m-admin__footer"},[e.pagination.total>0&&!e.query?n("div",{staticClass:"m-dashboard__footer__pagination m-admin__footer__pagination"},[n("res-pagination",{attrs:{id:"admin-pagination",count:e.pagination.total,display:e.pagination.perPage,ticks:e.ticks,page:e.pagination.page,indicator:"page",navigation:"text"},on:{click:function(t){return e.paginate()}}})],1):e._e()])],1)},i=[]},CVTe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("1m/l")),i=s(n("pgOB")),a=s(n("OGkh"));function s(e){return e&&e.__esModule?e:{default:e}}var o={name:"Redirects",components:{NetworkFilter:i.default},props:{community:Object},data(){return{searchRedirects:{results:[],totalCount:""},perPage:30,page:1,pageBeforeFiltering:1,query:"",path:"",destination:"",network_id:this.community.network.id,community_id:this.community.id,networks:this.$root.config.organization.networks,deletingRedirect:!1,redirectDeleted:!1,deleteError:!1}},computed:{searchRedirectsResults(){return this.searchRedirects.results}},watch:{$route(){this.$apollo.queries.searchRedirects.refetch()},path(){this.handleFilterPage()},destination(){this.handleFilterPage()}},beforeMount(){this.setInitialData()},methods:{async setInitialData(){let e=this.$route.query;this.page=parseInt(e.page,10)||1,this.path=e.path||"",this.destination=e.destination||"",this.community_id=parseInt(e.community_id)||this.community_id,this.network_id=parseInt(e.network_id)||this.network_id},async handleDelete(e){this.deletingRedirect=!0,this.redirectDeleted=!1;try{await(0,a.default)(e)}catch(e){return this.deleteError=!0,this.deletingRedirect=!1,void console.error(e)}await this.$apollo.queries.searchRedirects.refetch(),this.deletingRedirect=!1,this.redirectDeleted=!0},updatePath(){this.$router.push({query:{page:this.page,community_id:this.community_id,network_id:this.network_id,path:this.path,destination:this.destination}}).catch(()=>{})},updateCommunityAndNetworkId(e,t){this.community_id=e,this.network_id=t},handleFilterPage(){1===this.page?""===this.path&&""===this.destination&&(this.page=this.pageBeforeFiltering):(this.pageBeforeFiltering=this.page,this.page=1)},updatePage(e){"prev"===e.target.dataset.direction&&(this.page=this.page-1),"next"===e.target.dataset.direction&&(this.page=this.page+1),e.target.dataset.page&&(this.page=parseInt(e.target.dataset.page))}},apollo:{searchRedirects:{query:r.default,variables(){return{network_id:this.network_id,pageNumber:this.page,perPage:this.perPage,community_id:this.community_id,path:this.path||null,destination:this.destination||null}},result(e){let{loading:t,error:n}=e;t||(n?console.log("Error: "+n.gqlError.message):this.updatePath())}}}};t.default=o,e.exports=t.default},"CXk+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={name:"SaveButton",props:{enabled:Boolean},data:function(){return{saveState:"READY"}},watch:{enabled:function(e){e&&(this.saveState="READY")}},methods:{clickSave:function(){this.saveState="CONFIRM"},clickConfirm:function(){this.saveState="SAVED",this.$emit("save")},clickCancel:function(){this.saveState="READY"}}};t.default=r,e.exports=t.default},DKRo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={},e.exports=t.default},DahC:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-redirects__save"},[n("res-button",{directives:[{name:"show",rawName:"v-show",value:"READY"===e.saveState||"SAVED"===e.saveState,expression:"saveState === 'READY' || saveState === 'SAVED'"}],attrs:{disabled:!e.enabled,design:"primary"},on:{click:e.clickSave}},[n("button",[e._v("Create redirect")])]),e._v(" "),n("res-button",{directives:[{name:"show",rawName:"v-show",value:"CONFIRM"===e.saveState,expression:"saveState === 'CONFIRM'"}],attrs:{design:"primary"},on:{click:e.clickConfirm}},[n("button",[e._v("Confirm")])]),e._v(" "),n("res-button",{directives:[{name:"show",rawName:"v-show",value:"CONFIRM"===e.saveState,expression:"saveState === 'CONFIRM'"}],attrs:{negative:""},on:{click:e.clickCancel}},[n("res-icon",{attrs:{name:"x"}}),n("button",[e._v("Cancel")])],1)],1)},i=[]},E0P9:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-redirects__edit"},[t("Form",{attrs:{communityId:this.communityId,networkId:this.networkId,fromPath:this.fromPath,destination:this.destination,status:this.status,redirectId:this.redirectId,editContext:"Edit"}})],1)},i=[]},Fw7v:function(e,t,n){"use strict";var r=n("rE/H"),i=n("gjeX");e.exports=function(e){return i(r(e))}},IPWV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("ssCg"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("E0P9");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},IPWg:function(e,t,n){"use strict";var r=l(n("Kw5r")),i=l(n("XVeQ")),a=l(n("ivbY")),s=l(n("ZL/N"));n("bREV");var o=n("YbFx");function l(e){return e&&e.__esModule?e:{default:e}}new r.default({router:a.default,store:s.default,apolloProvider:o.apolloProvider,ignoredElements:res.manifest.tags.all,data(){let e=document.querySelector('script[type="config"]');return{config:JSON.parse(e.textContent)}},render:e=>e(i.default)}).$mount("#app")},Imro:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignEntitlement=async function(e){return await(0,a.default)("/api/entitlements/assign",{method:"PUT",body:e})},t.getCommunityAssignments=async function(e,t){let{assignments:n}=await(0,a.default)("/api/entitlements/assignments/"+e),r=t.map(e=>{let{id:t,name:r}=e,i=n.find(e=>e.communityId===t);return{communityId:t,communityName:r,enabled:null!=i}});return(0,i.sortBy)(r,e=>{let{communityName:t}=e;return t})},t.getEntitlementData=async function(e){return await(0,a.default)("/api/entitlements/data/"+e)},t.getEntitlements=async function(){return(await(0,a.default)("/api/entitlements/keys")).map(e=>{let{key:t,values:n,isGlobal:r}=e;return{entitlementKey:t,values:n,isGlobal:r}})},t.unassignEntitlement=async function(e){return await(0,a.default)("/api/entitlements/unassign",{method:"PUT",body:e})},t.updateAssignmentsCommunityData=async function(e){return await Promise.all(e.map(async e=>{let t=await(0,s.getCommunityData)(e.community_id);return{entitlementAssignment:e.entitlementAssignment,data:t.community,enabled:e.enabled}}))};var r,i=n("LvDl"),a=(r=n("kh36"))&&r.__esModule?r:{default:r},s=n("5TKK")},JOwg:function(e,t,n){"use strict";e.exports=function(e){var{total:t,perPage:n}=e;return e.totalPages=0===t?1:Math.ceil(t/n),e}},JZyT:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"m-dashboard__content m-entitlement-networks m-admin"},[n("div",[n("router-link",{staticClass:"m-entitlement-info",attrs:{to:{name:"entitlement-networks",params:{key:e.entitlementKey}}}},[n("res-icon",{staticClass:"m-back-icon",attrs:{name:"back",size:"large"}}),e._v(" "),n("p",{staticClass:"m-back-text"},[e._v("Back to networks")])],1)],1),e._v(" "),n("h1",{staticClass:"m-entitlement-name"},[e._v(e._s(e.entitlementName))]),e._v(" "),n("div",{staticClass:"m-entitlement-global-description-block"},[n("p",{directives:[{name:"show",rawName:"v-show",value:e.description,expression:"description"}],staticClass:"entitlement-description"},[e._v(e._s(e.description))]),e._v(" "),n("res-switch",{staticClass:"m-global-toggle",attrs:{checked:e.isGlobal,disabled:e.globalLoading},on:{change:e.toggleGlobal}},[n("label",[e._v("Global")]),n("input",{attrs:{type:"checkbox",name:"s1"}})])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.initialLoading&&!e.isGlobal,expression:"initialLoading && !isGlobal"}]},[n("res-icon",{staticClass:"m-loading-icon",attrs:{name:"loading",size:"large"}}),e._v(" "),n("p",{staticClass:"m-loading-text"},[e._v("Loading entitlement’s communities")])],1),e._v(" "),e.isGlobal||e.initialLoading?e._e():n("div",{staticClass:"m-entitlement-assignments"},[n("res-input",{staticClass:"m-assignment-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"search",placeholder:"Search communities"},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),n("res-icon",{attrs:{slot:"inner-right",name:"search"},slot:"inner-right"})],1),e._v(" "),n("h2",{staticClass:"m-available-header"},[e._v(e._s(e.network.name)+"’s communities")]),e._v(" "),n("res-table",{staticClass:"m-admin__table",attrs:{mobile:e.isMobile,zebra:""}},[n("div",{staticClass:"m-dashboard__sub-head"},[n("div",{staticClass:"m-dashboard__sub-head__title"},[n("table",[n("thead",[n("tr",[n("th",{staticClass:"m-table-entitlement-communities"},[e._v("Community")]),e._v(" "),n("th",{staticClass:"m-table-entitlement-communities"},[e._v("Enabled")])])]),e._v(" "),n("tbody",e._l(e.paginatedAssignments,(function(t,r){return n("entitlement-assignment",e._b({key:e.page+"-"+r,attrs:{entitlementKey:e.entitlementKey,faviconUrl:e.communities.find((function(e){return e.id===t.communityId})).faviconUrl}},"entitlement-assignment",t,!1))})),1)])])])]),e._v(" "),n("footer",{staticClass:"m-dashboard__footer m-admin__footer"},[e.pagination.total>0?n("div",{staticClass:"m-dashboard__footer__pagination m-admin__footer__pagination"},[n("res-pagination",{attrs:{id:"admin-pagination",count:e.pagination.total,display:e.pagination.perPage,ticks:e.ticks,page:e.pagination.page,indicator:"page"},on:{click:function(t){return e.paginate()}}})],1):e._e()])],1)])},i=[]},"K+3G":function(e,t,n){"use strict";function r(e){Error.call(this);var t="GraphQL errors returned. "+e.length+" errors occurred";"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=new Error(t).stack,this.message=t,this.data=e,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var i=r;t.default=i,e.exports=t.default},K4AQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:()=>({})};t.default=r,e.exports=t.default},KnmM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("Bj7L")),i=a(n("JOwg"));function a(e){return e&&e.__esModule?e:{default:e}}var s={components:{EntitlementCell:r.default},props:{entitlements:{type:Array,required:!0,default:()=>[]}},data:()=>({isMobile:!1,page:1,perPage:36,ticks:7,query:""}),computed:{pagination(){return(0,i.default)({page:this.page,perPage:this.perPage,total:this.entitlements.length})},paginatedEntitlements(){const e=(this.pagination.page-1)*this.pagination.perPage,t=e+this.pagination.perPage;return this.entitlements.slice(e,t)},filteredEntitlements(){return this.entitlements.filter(e=>e.values.name.toLowerCase().includes(this.query.toLowerCase()))}},beforeMount(){this.isMobile=window.innerWidth<=800,window.addEventListener("resize",()=>this.isMobile=window.innerWidth<=800)},methods:{paginate(){this.page=document.getElementById("admin-pagination").page}}};t.default=s,e.exports=t.default},L91j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("MuG0"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("JZyT");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},LD6i:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("99WQ"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("gpnk");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},MuG0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("LD6i")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("Imro")),a=n("5TKK"),s=l(n("JOwg"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}var u={components:{EntitlementAssignment:r.default},data:()=>({entitlementKey:"entitlement_key",entitlementName:"Entitlement Name",description:"",isGlobal:!1,assignments:[],isMobile:!1,page:1,perPage:36,ticks:7,initialLoading:!0,globalLoading:!1,query:"",network:null,communities:[]}),computed:{filteredAssignments(){return this.query?this.assignments.filter(e=>{if(e.communityName.toLowerCase().includes(this.query.toLowerCase())||e.communityId.toString().startsWith(this.query))return e}):this.assignments},pagination(){return(0,s.default)({page:this.page,perPage:this.perPage,total:this.filteredAssignments.length})},paginatedAssignments(){const e=(this.pagination.page-1)*this.pagination.perPage,t=e+this.pagination.perPage;return this.filteredAssignments.slice(e,t)}},async created(){const e=await(0,a.getAllNetworks)();this.network=e.find(e=>e.id===parseInt(this.$route.params.id,10)),this.communities=await(0,a.getNetworkCommunities)(this.$route.params.id),this.entitlementKey=this.$route.params.key,await this.getEntitlementAssignmentsData()},beforeMount(){this.isMobile=window.innerWidth<=800,window.addEventListener("resize",()=>this.isMobile=window.innerWidth<=800)},methods:{async getEntitlementAssignmentsData(){let e=await i.getEntitlementData(this.entitlementKey);this.entitlementName=e.values.name,this.description=e.values.description,this.isGlobal=e.isGlobal,this.assignments=await i.getCommunityAssignments(this.entitlementKey,this.communities),this.globalLoading=!1,this.initialLoading=!1},async toggleGlobal(){if(this.globalLoading=!0,this.isGlobal)try{await i.unassignEntitlement({key:this.entitlementKey,global:!0}),this.isGlobal=!this.isGlobal,await this.getEntitlementAssignmentsData()}catch(e){console.error(e)}else try{await i.assignEntitlement({key:this.entitlementKey,global:!0}),this.isGlobal=!this.isGlobal}catch(e){console.error(e)}this.globalLoading=!1,this.initialLoading=!1},paginate(){this.page=document.getElementById("admin-pagination").page}}};t.default=u,e.exports=t.default},NU7W:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-redirects__create"},[t("Form",{attrs:{communityId:this.communityId,networkId:this.networkId,editContext:"Create"}})],1)},i=[]},OGkh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e){return void await(0,i.default)("/api/tower/graphql",{query:"\n      mutation DeleteRedirect($id: Int!) {\n        deleteRedirect(where: {id: $id}) {\n          redirect {\n            id\n          }\n        }\n      }\n    ",variables:JSON.stringify({id:e})})};var r,i=(r=n("XhB+"))&&r.__esModule?r:{default:r};e.exports=t.default},SdQN:function(e,t,n){"use strict";const r=document.querySelector('script[type="config"]'),i=JSON.parse(r.textContent);e.exports=i},U9dV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n("uU/u"))&&r.__esModule?r:{default:r},a=n("Imro");var s={name:"Dashboard",components:{EntitlementsTable:i.default},data:()=>({entitlements:[],loading:!0}),async created(){this.entitlements=await(0,a.getEntitlements)(),this.loading=!1}};t.default=s,e.exports=t.default},WLw8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("LvDl"),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("Imro")),a=n("5TKK");function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var o={data:()=>({entitlementKey:"",name:"",description:"",isGlobal:!1,isMobile:!1,initialLoading:!0,globalLoading:!1,query:"",networks:[]}),computed:{filteredNetworks(){return this.query?this.networks.filter(e=>{if(e.name.toLowerCase().includes(this.query.toLowerCase())||e.id===parseInt(this.query))return e}):this.networks}},async created(){this.networks=(0,r.sortBy)(await(0,a.getAllNetworks)(),"name"),this.entitlementKey=this.$route.params.key,await this.getEntitlementData()},beforeMount(){this.isMobile=window.innerWidth<=800,window.addEventListener("resize",()=>this.isMobile=window.innerWidth<=800)},methods:{async getEntitlementData(){let e=await i.getEntitlementData(this.entitlementKey);this.name=e.values.name,this.description=e.values.description,this.isGlobal=e.isGlobal,this.globalLoading=!1,this.initialLoading=!1},async toggleGlobal(){if(this.globalLoading=!0,this.isGlobal)try{await i.unassignEntitlement({key:this.entitlementKey,global:!0}),this.isGlobal=!this.isGlobal,await this.getEntitlementData()}catch(e){console.error(e)}else try{await i.assignEntitlement({key:this.entitlementKey,global:!0}),this.isGlobal=!this.isGlobal}catch(e){console.error(e)}this.globalLoading=!1,this.initialLoading=!1},paginate(){this.page=document.getElementById("admin-pagination").page}}};t.default=o,e.exports=t.default},Wi5O:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-nav--assets"},[t("div",{staticClass:"p-flex--v m-nav--assets"},[this.community?t("redirects",{attrs:{community:this.community}}):this._e()],1)])},i=[]},"X+tP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("fLOe")),i=o(n("pgOB")),a=o(n("Zcf0")),s=o(n("/l1V"));function o(e){return e&&e.__esModule?e:{default:e}}var l={name:"Form",components:{SaveButton:r.default,NetworkFilter:i.default},props:{editContext:{type:String,required:!0},networkId:{type:Number},communityId:{type:Number},status:{type:Number},fromPath:{type:String},destination:{type:String},redirectId:{type:Number}},data(){return{saveContext:"",creatingRedirect:!1,redirectCreated:!1,createError:!1,saveErrorMessage:"",newStatus:this.status||301,newPath:this.fromPath,newDestination:this.destination,newDomain:this.communityId,newNetwork:this.networkId,newDomainName:"",networks:this.$root.config.organization.networks}},created(){this.newDomainName=this.networks.find(e=>e.id===this.networkId).communities.find(e=>e.id===this.communityId).domain},methods:{updateCommunityAndNetworkId(e,t,n){this.newDomain=e,this.newNetwork=t,this.newDomainName=n},handleRedirectSave(){this.saveRedirect(this.newPath,this.newDestination,parseInt(this.newDomain),parseInt(this.newStatus),this.redirectId)},async saveRedirect(e,t,n,r,i){this.creatingRedirect=!0,this.redirectCreated=!1;try{i?(await(0,s.default)(i,e,t,n,r),this.saveContext="edited"):(await(0,a.default)(e,t,n,r),this.saveContext="created")}catch(e){return this.createError=!0,this.creatingRedirect=!1,console.error(e),void(this.saveErrorMessage=e.data[0].message)}this.creatingRedirect=!1,this.redirectCreated=!0,setTimeout((function(){o.$router.push({path:"/admin/redirects",query:{community_id:o.newDomain,network_id:o.newNetwork}})}),1e3);var o=this}}};t.default=l,e.exports=t.default},XTol:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={props:{entitlementKey:{type:String,required:!0,default:""},values:{type:Object,required:!0,default:()=>({name:null,description:null})},isGlobal:{type:Boolean,required:!0,default:!1}}};t.default=r,e.exports=t.default},XVeQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("K4AQ"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("2dKW");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},Xbgq:function(e,t,n){"use strict";function r(e,t){Error.call(this),"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=new Error(e).stack,this.message=e,this.response=t,this.name=this.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r.prototype=Object.create(Error.prototype),r.prototype.constructor=r;var i=r;t.default=i,e.exports=t.default},"XhB+":function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var{data:r,errors:a}=await s(e,{method:"POST",body:t,opts:i({cache:!0},n)});if(!r&&a)throw new o(a);return r};var s=n("kh36"),o=n("K+3G");e.exports=t.default},Y9Xm:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-redirects__import"},[n("div",{staticClass:"m-redirects__messaging"},[n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.importingRedirects,expression:"importingRedirects"}]},[n("span",[e._v("Importing redirects...")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.redirectsCreated,expression:"redirectsCreated"}],attrs:{design:"positive"}},[n("span",[e._v("Success! Your redirects were imported.")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.importError,expression:"importError"}],attrs:{design:"negative"}},[n("span",[e._v("Something went wrong. Try refreshing the page.")])])],1),e._v(" "),n("div",{staticClass:"l-content"},[n("main",{staticClass:"m-dashboard__content"},[n("div",{staticClass:"m-dashboard__sub-head m-redirects__import-head"},[n("div",{staticClass:"m-dashboard__sub-head__title"},[n("res-button",{attrs:{type:"default",paddingless:""}},[n("res-icon",{attrs:{size:"small",name:"back"}}),e._v(" "),n("router-link",{attrs:{to:{path:"/admin/redirects",query:{community_id:e.communityId,network_id:e.networkId}}}},[e._v("Back to redirects")])],1),e._v(" "),n("h1",[e._v("Import redirects from CSV")])],1)]),e._v(" "),n("div",{staticClass:"m-edit"},[e._m(0),e._v(" "),e._m(1),e._v(" "),n("p",[e._v("If an existing redirect is found with the same source, but a different destination or status, it will be updated.")]),e._v(" "),n("div",{staticClass:"m-redirects__import--choose-file"},[n("input",{staticStyle:{display:"none"},attrs:{id:"import-redirects-button",type:"file"},on:{change:e.handleFileName}}),e._v(" "),n("res-button",{on:{click:e.handleFileSelect}},[n("res-icon",{attrs:{name:"upload"}}),n("button",[e._v("Choose File")])],1),e._v(" "),n("span",{attrs:{id:"chosen-file-name"}},[e._v("No file chosen")])],1),e._v(" "),n("div",{staticClass:"m-redirects__import--submit"},[n("div",{staticClass:"m-redirects__import--submit-buttons"},[n("res-button",{attrs:{design:"primary"},on:{click:e.handleRedirectsImport}},[n("button",[e._v("Import")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.noFileChosen,expression:"noFileChosen"}],staticClass:"m-redirects__import--no-file"},[e._m(2)])],1)])])])])])},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("a",{attrs:{href:"https://docs.google.com/spreadsheets/d/1XCSlToWhdq832HLdJsLYzZSx6HYPqRFou8IMnr6rYrg/edit?usp=sharing"}},[this._v("Download this template as a CSV")]),this._v(", or create your own. CSV files should include three columns with the following headers:")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[n("strong",[e._v("source")]),e._v(": The URL or path you want to redirect away from.")]),e._v(" "),n("li",[n("strong",[e._v("destination")]),e._v(": The URL or path you want to redirect to.")]),e._v(" "),n("li",[n("strong",[e._v("status")]),e._v(": The HTTP status code. 301 is most common, and used for permanent redirects. 302 is used for temporary redirects. 307 and 308 can also be used, but are not common.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("em",[this._v("Choose a file!")])])}]},YbFx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.towerClient=t.importerClient=t.apolloProvider=void 0,n("Kz25");var r=l(n("Kw5r")),i=l(n("Ui0k")),a=n("dMq0"),s=n("R44f"),o=n("K/JX");function l(e){return e&&e.__esModule?e:{default:e}}let u=new URL(window.location);u.pathname="/api/tower/graphql",u.search="";const d=new s.HttpLink({uri:u.toString(),credentials:"include"}),c=new a.ApolloClient({link:d,cache:new o.InMemoryCache,connectToDevTools:!0,shouldBatch:!0});t.towerClient=c,r.default.use(i.default);const m=new i.default({defaultClient:c});t.apolloProvider=m;let f=new URL(window.location);f.pathname="/api/chorus-import-manager/graphql",f.search="";const p=new a.ApolloClient({link:new s.HttpLink({uri:f.toString(),credentials:"include"}),cache:new o.InMemoryCache,connectToDevTools:!0,defaultOptions:{watchQuery:{fetchPolicy:"network-only"},query:{fetchPolicy:"network-only"}}});t.importerClient=p},"ZL/N":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("Kw5r")),i=l(n("L2JU")),a=l(n("tkiz")),s=l(n("DKRo")),o=l(n("iihX"));function l(e){return e&&e.__esModule?e:{default:e}}r.default.use(i.default);var u=new i.default.Store({state:{},actions:a.default,mutations:s.default,getters:o.default});t.default=u,e.exports=t.default},Zcf0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(e,t,n,r){return void await(0,i.default)("/api/tower/graphql",{query:"\n      mutation createRedirectInput($path: String!, $destination: String!, $communityId: Int!, $status: Int!) {\n        createRedirect(input: {path: $path, destination: $destination, community: { id: $communityId }, status: $status}) {\n          redirect {\n            id\n          }\n        }\n      }\n    ",variables:JSON.stringify({path:e,destination:t,communityId:n,status:r})})};var r,i=(r=n("XhB+"))&&r.__esModule?r:{default:r};e.exports=t.default},bREV:function(e,t,n){"use strict";var r=u(n("Kw5r")),i=u(n("SdQN")),a=l(n("WSEr")),s=l(n("TGyJ"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}i.default.sentry&&a.init({dsn:i.default.sentry.dsn,release:i.default.release,environment:i.default.env,integrations:[new s.Vue({Vue:r.default})]})},cfah:function(e,t,n){"use strict";e.exports=function(e){return new Promise((function(t){setTimeout(t,e)}))}},dJx4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("WLw8"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("2aLv");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},fLOe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("CXk+"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("DahC");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},"gk1/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("U9dV"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("lms5");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},gpnk:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{directives:[{name:"show",rawName:"v-show",value:e.communityName,expression:"communityName"}],staticClass:"m-dashboard__table__row"},[n("td",{staticClass:"m-dashboard__table__assignments"},[e.faviconUrl?n("img",{staticClass:"m-entitlement-community-icon",attrs:{src:e.faviconUrl}}):n("img",{staticClass:"m-entitlement-community-icon",attrs:{src:this.$root.config.defaultLogoUrl}}),e._v(" "),n("span",{staticClass:"m-community-name"},[e._v(e._s(e.communityName))])]),e._v(" "),n("td",{staticClass:"m-entitlement-checked"},[n("res-switch",{attrs:{checked:e.isEnabled,disabled:e.loading},on:{change:e.toggleAssignment}},[n("label",{staticClass:"m-entitlement-checked-label"}),e._v(" "),n("input",{attrs:{type:"checkbox",name:"s1"}})])],1)])},i=[]},icmF:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-redirects__dashboard"},[n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.deletingRedirect,expression:"deletingRedirect"}]},[n("span",[e._v("Deleting redirect...")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.redirectDeleted,expression:"redirectDeleted"}],attrs:{design:"positive"}},[n("span",[e._v("Success! Your redirect was deleted.")])]),e._v(" "),n("res-banner",{directives:[{name:"show",rawName:"v-show",value:e.deleteError,expression:"deleteError"}],attrs:{design:"negative"}},[n("span",[e._v("Something went wrong. Try refreshing the page.")])]),e._v(" "),n("div",{staticClass:"l-content"},[n("main",{staticClass:"m-dashboard__content"},[n("div",{staticClass:"m-dashboard__sub-head p-flex m-redirects__dashboard-head"},[e._m(0),e._v(" "),n("div",[n("router-link",{attrs:{to:{path:"/admin/redirects/import",query:{community_id:e.community_id,network_id:e.network_id}}}},[n("res-button",[n("res-icon",{attrs:{name:"upload"}}),n("button",[e._v("Import from CSV")])],1)],1),e._v(" "),n("router-link",{attrs:{to:{path:"/admin/redirects/create",query:{community_id:e.community_id,network_id:e.network_id}}}},[n("res-button",{attrs:{design:"primary"}},[n("button",[e._v("Create")])])],1)],1)]),e._v(" "),n("div",{staticClass:"p-flex m-redirects__search"},[n("networkFilter",{attrs:{networks:e.networks,communityId:e.community_id,networkId:e.network_id},on:{"community-changed":e.updateCommunityAndNetworkId}}),e._v(" "),n("res-input",{staticClass:"m-redirects__search--path"},[n("label",[e._v("Filter by path")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.path,expression:"path"}],attrs:{type:"text",name:"search-path"},domProps:{value:e.path},on:{input:function(t){t.target.composing||(e.path=t.target.value)}}})]),e._v(" "),n("res-input",{staticClass:"m-redirects__search--destination"},[n("label",[e._v("Filter by destination")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.destination,expression:"destination"}],attrs:{type:"text",name:"search-destination"},domProps:{value:e.destination},on:{input:function(t){t.target.composing||(e.destination=t.target.value)}}})])],1),e._v(" "),n("res-table",[n("table",{staticClass:"m-edit-links"},[n("thead",[n("tr",[n("th",[e._v("Domain")]),e._v(" "),n("th",[e._v("Path")]),e._v(" "),n("th",[e._v("Destination")]),e._v(" "),n("th",[e._v("Status")]),e._v(" "),n("th")])]),e._v(" "),n("tbody",e._l(e.searchRedirectsResults,(function(t){return n("tr",{key:t.id,attrs:{"data-id":t.id}},[n("td",[e._v(e._s(t.host))]),e._v(" "),n("td",[e._v(e._s(t.path))]),e._v(" "),n("td",[e._v(e._s(t.destination))]),e._v(" "),n("td",[e._v(e._s(t.status))]),e._v(" "),n("td",[n("div",{staticClass:"m-redirects__controls"},[n("router-link",{attrs:{to:{path:"/admin/redirects/edit",query:{community_id:e.community_id,network_id:e.network_id,path:t.path,destination:t.destination,status:t.status,redirectId:t.id}}}},[n("res-button",[n("res-icon",{attrs:{name:"edit"}}),n("button",[e._v("Edit")])],1)],1),e._v(" "),n("res-button",{attrs:{"res-modal-open":t.id,negative:""}},[n("res-icon",{attrs:{name:"trash"}}),n("button",[e._v("Delete")])],1)],1)]),e._v(" "),n("res-modal",{attrs:{id:t.id,"close-on-bg-click":""}},[n("div",[n("p",{staticClass:"m-redirects__modal-warning"},[e._v("Are you sure you want to destroy this redirect?")]),e._v(" "),n("res-button",{attrs:{id:"modal-close","res-modal-close":t.id,design:"secondary"},on:{click:function(n){return e.handleDelete(t.id)}}},[n("button",[e._v("Delete redirect")])]),e._v(" "),n("res-button",{attrs:{id:"modal-close","res-modal-close":t.id}},[n("res-icon",{attrs:{name:"x"}}),n("button",[e._v("Cancel")])],1)],1)])],1)})),0)])]),e._v(" "),n("div",{staticClass:"p-flex m-redirects__pagination"},[n("res-pagination",{attrs:{count:e.searchRedirects.totalCount,display:e.perPage,page:e.page,ticks:"7",indicator:"both"},on:{click:function(t){return e.updatePage(t)}}})],1)],1)])],1)},i=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"m-dashboard__sub-head__title"},[t("h1",[this._v("Redirects")])])}]},iihX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={},e.exports=t.default},ivbY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(n("Kw5r")),i=m(n("jE9Z")),a=m(n("gk1/")),s=m(n("dJx4")),o=m(n("L91j")),l=m(n("vYQQ")),u=m(n("IPWV")),d=m(n("wKsq")),c=m(n("vrIR"));function m(e){return e&&e.__esModule?e:{default:e}}r.default.use(i.default);var f=new i.default({mode:"history",routes:[{path:"/admin",redirect:"/admin/entitlements"},{path:"/admin/entitlements",name:"entitlements-dashboard",component:a.default},{path:"/admin/entitlements/:key",name:"entitlement-networks",component:s.default},{path:"/admin/entitlements/:key/network/:id",name:"entitlement-communities",component:o.default},{path:"/admin/redirects",name:"Redirects",component:l.default,props:e=>({communityId:parseInt(e.query.community_id),networkId:parseInt(e.query.network_id)})},{path:"/admin/redirects/edit",name:"Edit",component:u.default,props:e=>({communityId:parseInt(e.query.community_id),networkId:parseInt(e.query.network_id),fromPath:e.query.path,destination:e.query.destination,status:parseInt(e.query.status),redirectId:parseInt(e.query.redirectId)})},{path:"/admin/redirects/create",name:"Create",component:d.default,props:e=>({communityId:parseInt(e.query.community_id),networkId:parseInt(e.query.network_id)})},{path:"/admin/redirects/import",name:"Import",component:c.default,props:e=>({communityId:parseInt(e.query.community_id),networkId:parseInt(e.query.network_id)})}]});t.default=f,e.exports=t.default},jpRH:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"m-redirects__network-filter"},[n("res-select",[n("label",[e._v("Network")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedNetworkId,expression:"selectedNetworkId"}],attrs:{name:"select-network"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedNetworkId=t.target.multiple?n:n[0]}}},[n("option",{attrs:{placeholder:""}},[e._v("Select network")]),e._v(" "),e._l(e.networks,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2)]),e._v(" "),n("res-select",{staticStyle:{"margin-right":"8px"}},[n("label",[e._v("Domain")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedCommunityId,expression:"selectedCommunityId"}],attrs:{name:"select-community"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedCommunityId=t.target.multiple?n:n[0]}}},[n("option",{attrs:{placeholder:""}},[e._v("Select community")]),e._v(" "),e._l(e.currentNetwork.communities,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.domain))])}))],2)])],1)},i=[]},kh36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n=v(e,t);return p(n.url,n.reqOpts,n.opts)};const{merge:r,omit:i}=n("LvDl"),a=n("Qyje"),s=n("cfah"),o=n("Xbgq"),l=n("lvH+"),{reportError:u}=n("q1SX"),d=n("Fw7v"),c={};function m(e){if(e.ok)return e;var t=new o("Response status not within range: "+e.status,e);return Promise.reject(t)}function f(e,t,n){return n?{data:t,headers:e.headers}:t}function p(e,t,n){let r=function(e,t){let{method:n,body:r}=t,i=e;n&&"GET"!==n&&r&&(i+=d(r));return i}(e,t);return n.cache&&!n.force&&r in c?Promise.resolve(c[r]):fetch(e,t).then(m).then(e=>{return r=e,i=t.headers.Accept,a=n.withHeaders,204===r.status?Promise.resolve():"text/html"===i?r.text().then(e=>f(r,e,a)):r.json().then(e=>f(r,e,a));var r,i,a}).then(e=>(n.cache&&(c[r]=e),e)).catch(r=>function(e,t,n,r){var i=e.response&&e.response.status;if(r.retry&&r.retry.delay<r.retry.maxDelay&&(!i||502===i||503===i)){var{retry:a}=r,o=Math.min(a.delay+1e3,a.maxDelay);return a.delay=o,s(o).then(()=>p(t,n,r))}return r.handleError&&(window.app&&window.app.state?l.showError():(console.warn("An unexpected error occurred while making a request, but the app is not able to display it"),u(e,!1))),Promise.reject(e)}(r,e,t,n))}function v(e,t){var n={credentials:"include",headers:{Accept:"application/json"}},s={handleError:!0,cache:!1,retry:{delay:0,maxDelay:3e3}},o=t.opts||{},l=i(t,"opts");return l.method&&"GET"!==l.method.toUpperCase()&&(n.headers["Content-Type"]="application/json"),l.query&&(e=e+"?"+a.stringify(l.query),delete l.query),l.body&&"string"!=typeof l.body&&(l.body=JSON.stringify(l.body)),!1===l.credentials&&(delete n.credentials,delete l.credentials),o.retry||(s.retry=!1),"boolean"==typeof o.retry&&delete o.retry,{url:e,opts:r(s,o),reqOpts:r(n,l)}}e.exports=t.default},lms5:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return i}));var r=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:this.loading,expression:"loading"}],staticClass:"m-loading-header"},[t("res-icon",{staticClass:"m-loading-icon",attrs:{name:"loading",size:"large"}}),this._v(" "),t("p",{staticClass:"m-loading-text"},[this._v("Loading entitlements")])],1),this._v(" "),t("entitlements-table",{attrs:{entitlements:this.entitlements}})],1)},i=[]},"lvH+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMessage=function(e){var t=l(e);app.state.select(["messages"]).splice([t,1])},t.showError=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.UNEXPECTED;var t=app.state.get(["messages"]).some(e=>e.isError);t||o({message:e,type:"negative",isError:!0})},t.showMessage=o;var{defaults:r}=n("LvDl"),i=n("Fw7v"),a=n("6fkZ");const s={dismissible:!0,type:"negative"};function o(e){var t=i(e.message);return-1===l(t)&&function(e){if(!e.id)return!0;var t="message-"+e.id;if("shown"===window.localStorage.getItem(t))return!1;return window.localStorage.setItem(t,"shown"),!0}(e)&&(e.id=t,e=r(e,s),app.state.select(["messages"]).push(e)),t}function l(e){return app.state.get(["messages"]).findIndex(t=>t.id===e)}},oPjZ:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={components:{Redirects:((r=n("xxyR"))&&r.__esModule?r:{default:r}).default},props:{communityId:Number,networkId:Number},data(){return{community:{id:this.communityId||this.$root.config.organization.primaryNetwork.primaryCommunity.id,network:{id:this.networkId||this.$root.config.organization.primaryNetwork.id}}}},created(){document.title="Redirects | "+this.$root.config.appName}};t.default=i,e.exports=t.default},pgOB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("1pot"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("jpRH");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},q1SX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleError=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o(e,t),Promise.reject(e)},t.reportError=o,t.reportMessage=function(e,t){"test"!==app.env&&console.warn(e,t);i.captureMessage(e,t)};var{omit:r}=n("LvDl"),i=n("WSEr"),a=n("lvH+"),s=n("Xbgq");function o(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=app.env}catch(e){t="production"}"test"!==t&&(console.error(e),console.error(e.stack||e.message)),e instanceof s||i.captureException(e,{tags:{error_name:e.name,from:e.from},extra:r(e,"name","message","stack","from")}),n&&a.showError()}},ssCg:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"Edit",components:{Form:((r=n("w6JP"))&&r.__esModule?r:{default:r}).default},props:{communityId:Number,networkId:Number,fromPath:String,status:Number,destination:String,redirectId:Number}};t.default=i,e.exports=t.default},t2uI:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"Create",components:{Form:((r=n("w6JP"))&&r.__esModule?r:{default:r}).default},props:{communityId:Number,networkId:Number}};t.default=i,e.exports=t.default},tkiz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={},e.exports=t.default},"uU/u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("KnmM"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("Bmas");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},vYQQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("oPjZ"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("Wi5O");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},vrIR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("wBWV"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("Y9Xm");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},w6JP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("X+tP"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("4vXe");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},wBWV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("fLOe")),i=a(n("+hbK"));function a(e){return e&&e.__esModule?e:{default:e}}var s={name:"Import",components:{SaveButton:r.default},props:{communityId:Number,networkId:Number},data:()=>({importingRedirects:!1,redirectsCreated:!1,importError:!1,noFileChosen:!1}),methods:{handleRedirectsImport(){var e=document.getElementById("import-redirects-button");if(e.files[0]){var t=new FileReader,n=this;t.onload=function(e){n.importRedirects(e.target.result)},t.readAsText(e.files[0])}else this.noFileChosen=!0},handleFileSelect(){var e=document.getElementById("import-redirects-button");e&&e.click()},handleFileName(){var e=document.getElementById("chosen-file-name"),t=document.getElementById("import-redirects-button");e.innerHTML=t.files[0].name},async importRedirects(e){this.importingRedirects=!0,this.redirectsCreated=!1;try{await(0,i.default)(e)}catch(e){return this.importError=!0,this.importingRedirects=!1,void console.error(e)}this.importingRedirects=!1,this.redirectsCreated=!0,this.noFileChosen=!1,setTimeout((function(){t.$router.push({path:"/admin/redirects",query:{community_id:t.communityId,network_id:t.networkId}})}),1e3);var t=this}}};t.default=s,e.exports=t.default},wKsq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("t2uI"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("NU7W");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default},xxyR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("CVTe"));Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var a,s=n("icmF");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}var l=(0,((a=n("JFUb"))&&a.__esModule?a:{default:a}).default)(i.default,s.render,s.staticRenderFns,!1,null,null,null).exports;t.default=l,e.exports=t.default}},[[15,"runtime","vendor"]]]);
//# sourceMappingURL=admin.2530a027d3de991a589b.0.js.map