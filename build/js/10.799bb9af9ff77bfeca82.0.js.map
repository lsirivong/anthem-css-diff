{"version":3,"sources":["webpack:///./client/lib/serialize_form.js","webpack:///./client/components/codemirror.html","webpack:///./client/components/sass-editor.html","webpack:///./client/routes/sass_editor.js","webpack:///./client/components/modal/support.html"],"names":["module","exports","form","data","el","elements","disabled","name","type","includes","checked","value","Ractive","require","component","Codemirror","autosave","isEqual","indexFromPos","cm","pos","index","i","line","lineInfo","text","length","ch","twoway","cursors","docId","readOnly","path","autofocus","onrender","this","fromTextArea","find","mode","theme","lineNumbers","lineWrapping","matchBrackets","inputStyle","saving","updating","listenTo","app","packet","get","update","delta","save","observe","setOption","op","p","si","sd","start","posFromIndex","end","replaceRange","oi","setValue","od","changes","reduce","change","from","removed","join","push","inserted","localUpdate","template","v","t","e","a","enabled","x","r","s","f","extend","modal","styles","page","components","navigation","support","codemirror","render","SassEditor","debounce","moment","supportActions","userActions","overlayActions","serializeForm","lastReadAt","entry","q","results","announcements","searching","oninit","set","community_id","config","entry_group_ids","entry_group_id","per_page","draft","hidden","loadAnnouncements","onteardown","getOverlay","closeOverlay","submitFeedback","event","original","preventDefault","deliverFeedback","submitSearch","search","query","Object","assign","then","pagination","catch","paginate","detail","getAnnouncements","lastRead","utc","map","isNew","published_date","isAfter","readAnnouncements","debounceSearch","openEntry","pushOverlay","supportEntry","openFeedback","feedback","design","href","target","rel","n","click","m","size"],"mappings":"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","file":"10.799bb9af9ff77bfeca82.0.js","sourcesContent":["module.exports = function(form) {\n  var data = {};\n  for (var el of [...form.elements]) {\n    if (el.disabled || !el.name || el.type === 'file') {\n      // ignore disabled inputs\n      // ignore inputs without name attributes\n      // ignore file inputs\n      continue;\n    } else if (['checkbox', 'radio'].includes(el.type) && !el.checked) {\n      // ignore unchecked radio/checkbox inputs\n      continue;\n    } else if (el.value) {\n      // set truthy values\n      data[el.name] = el.value;\n    } else if (data[el.name]) {\n      // falsy values delete a previously set value\n      // e.g. a checked checkbox with value=\"\" overrides an earlier hidden input\n      delete data[el.name];\n    }\n  }\n  return data;\n};\n","var Ractive = require('ractive');\nvar component = module;\n\nrequire('codemirror/mode/css/css');\nrequire('codemirror/addon/edit/matchbrackets');\nvar Codemirror = require('codemirror');\nvar autosave = require('../actions/autosave');\nvar { isEqual } = require('lodash');\n\ncomponent.exports = {\n  twoway: false,\n  cursors: {\n    docId: ['doc', 'id'],\n    readOnly: ['readOnly']\n  },\n  data: {\n    path: null,\n    value: null,\n    autofocus: false\n  },\n  onrender: function() {\n    this.cm = Codemirror.fromTextArea(this.find('textarea'), {\n      mode: 'text/x-scss',\n      theme: 'material',\n      lineNumbers: true,\n      lineWrapping: true,\n      matchBrackets: true,\n      inputStyle: 'contenteditable'\n    });\n\n    this.saving = false;\n    this.updating = false;\n\n    this.listenTo(app, 'autosave.remote-update', (docId, packet) => {\n      if (docId === this.get('docId')) {\n        this.update(packet.delta);\n      }\n    });\n    this.listenTo(app, 'autosave.local-update', (docId, delta) => {\n      if (!this.saving && docId === this.get('docId')) {\n        this.update(delta);\n      }\n    });\n    this.listenTo(this.cm, 'changes', this.save);\n    this.observe('readOnly', readOnly => {\n      this.cm.setOption('readOnly', readOnly ? 'nocursor' : false);\n    });\n  },\n  update: function(delta) {\n    this.updating = true;\n    for (let op of delta) {\n      if (isEqual(op.p, this.get('path'))) {\n        if (op.si || op.sd) {\n          var start = this.cm.posFromIndex(op.p[1]);\n          var end = this.cm.posFromIndex(op.p[1] + (op.sd ? op.sd.length : 0));\n          this.cm.replaceRange(op.si || '', start, end);\n        } else if (op.oi) {\n          this.cm.setValue(op.oi);\n        } else if (op.od) {\n          this.cm.setValue('');\n        }\n      }\n    }\n    this.updating = false;\n  },\n  save: function(cm, changes) {\n    if (this.updating) { return; }\n\n    var delta = changes.reduce((delta, change) => {\n      var path = [...this.get('path'), indexFromPos(cm, change.from)];\n\n      var removed = change.removed.join('\\n');\n      if (removed) {\n        delta.push({ p: path, sd: removed });\n      }\n\n      var inserted = change.text.join('\\n');\n      if (inserted) {\n        delta.push({ p: path, si: inserted });\n      }\n\n      return delta;\n    }, []);\n\n    this.saving = true;\n    autosave.localUpdate(this.get('docId'), delta);\n    this.saving = false;\n  }\n};\n\nfunction indexFromPos(cm, pos) {\n  let index = 0;\n  // eslint-disable-next-line no-restricted-syntax\n  for (let i = 0; i < pos.line; i++) {\n    index += cm.lineInfo(i).text.length + 1; // Add 1 for '\\n'\n  }\n\n  index += pos.ch;\n  return index;\n}\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"textarea\",a:{enabled:[{t:2,x:{r:[\"readOnly\"],s:\"!_0\"},p:[1,20,19]}],autofocus:[{t:2,r:\"autofocus\",p:[1,46,45]}]},f:[{t:2,r:\"value\",p:[1,61,60]}]}]};\nmodule.exports = Ractive.extend(component.exports);\n","var Ractive = require('ractive');\nvar component = module;\n\ncomponent.exports = {\n  cursors: {\n    modal: ['modal'],\n    styles: ['doc', 'head', 'contents', 'draft', 'styles']\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[5,1,148],e:\"navigation\",a:{page:\"sass-editor\"}},\" \",{t:7,p:[7,1,194],e:\"div\",a:{\"class\":\"l-content p-flex\"},f:[{t:7,p:[8,3,227],e:\"div\",a:{\"class\":\"m-sass-editor__wrapper p-flex--v\"},f:[{t:7,p:[9,5,278],e:\"div\",a:{\"class\":\"m-sass-editor\"},f:[{t:7,p:[10,7,312],e:\"codemirror\",a:{path:\"['draft', 'styles']\",value:[{t:2,r:\"styles\",p:[10,53,358]}],autofocus:\"true\"}}]}]},\" \",{t:4,r:\"modal\",f:[{t:4,r:\"support\",f:[{t:7,p:[16,7,458],e:\"support\"}],p:[15,5,439]}],p:[14,3,424]}]}]};\ncomponent.exports.components = {navigation: require('./navigation.html'), support: require('./modal/support.html'), codemirror: require('./codemirror.html')};\nmodule.exports = Ractive.extend(component.exports);\n","import SassEditor from '../components/sass-editor.html';\n\nexport default function() {\n  app.render(SassEditor);\n}\n","var Ractive = require('ractive');\nvar component = module;\n\nvar { debounce } = require('lodash');\nvar moment = require('moment-timezone');\nvar supportActions = require('../../actions/support');\nvar userActions = require('../../actions/users');\nvar overlayActions = require('../../actions/overlays');\nvar serializeForm = require('../../lib/serialize_form');\n\ncomponent.exports = {\n  cursors: {\n    lastReadAt: ['user', 'lastAnnouncementReadAt'],\n    entry: ['modal', 'supportEntry']\n  },\n  data: {\n    q: '',\n    results: null,\n    announcements: [],\n    searching: false\n  },\n  oninit: function() {\n    this.set('queryParams', {\n      community_id: app.config.support.community_id,\n      entry_group_ids: app.config.support.entry_group_id,\n      per_page: 5,\n      draft: false,\n      hidden: false\n    });\n\n    // Fetch new announcements\n    this.loadAnnouncements();\n  },\n  onteardown: function() {\n    // close any overlays the support modal may have opened\n    if (overlayActions.getOverlay('supportEntry') || overlayActions.getOverlay('feedback')) {\n      overlayActions.closeOverlay();\n    }\n  },\n  submitFeedback: function() {\n    if (this.event) {\n      this.event.original.preventDefault();\n    }\n    supportActions.deliverFeedback(this.get('value'));\n    this.set({ value: '' });\n    this.set('submitted', true);\n  },\n  submitSearch: function() {\n    if (this.event) {\n      this.event.original.preventDefault();\n    }\n    this.search();\n  },\n  search: function(page = 1) {\n    var query = Object.assign(\n      serializeForm(this.find('form')),\n      this.get('queryParams'),\n      { page }\n    );\n\n    if (!query.q) {\n      this.set({ results: null, searching: false, pagination: null });\n      return;\n    }\n    this.set('searching', true);\n    supportActions.search(query).then(([results, pagination]) => {\n      this.set({ results: results, searching: false, pagination: pagination });\n    }).catch(() => {\n      this.set({ results: null, searching: false, pagination: null });\n    });\n  },\n  paginate: function () {\n    var page = this.event.original.detail.page;\n    this.search(page);\n  },\n  loadAnnouncements: function() {\n    return supportActions.getAnnouncements().then(([announcements]) => {\n      var lastRead = moment(this.get('lastReadAt')).utc();\n\n      this.set('announcements', announcements.map(entry => {\n        entry.isNew = moment(entry.published_date).utc().isAfter(lastRead);\n        return entry;\n      }));\n\n      // Mark announcements as being read only if we successfully show them\n      return userActions.readAnnouncements();\n    });\n  },\n  debounceSearch: debounce(function() {\n    this.submitSearch();\n  }, 1000),\n  openEntry: function(entry) {\n    overlayActions.pushOverlay({ supportEntry: { entry: entry } });\n  },\n  openFeedback: function() {\n    overlayActions.pushOverlay({ feedback: true });\n  }\n};\n\ncomponent.exports.template = {v:1,t:[{t:7,p:[1,1,0],e:\"fieldset\",f:[{t:7,p:[2,3,13],e:\"legend\",f:[\"Chorus help\"]},\" \",{t:7,p:[3,3,44],e:\"res-button\",a:{design:\"secondary\"},f:[{t:7,p:[4,5,80],e:\"res-icon\",a:{name:\"publish\"}},\" \",{t:7,p:[5,5,121],e:\"a\",a:{href:\"https://chorussupport.zendesk.com/hc/en-us\",target:\"_blank\",rel:\"noopener noreferrer\"},f:[\"Open documentation\"]}]},\" \"]},\" \",{t:4,n:50,x:{r:[\"announcements.length\"],s:\"_0>0\"},f:[{t:7,p:[45,3,1596],e:\"fieldset\",a:{\"class\":\"m-support__announcements\"},f:[{t:7,p:[46,5,1644],e:\"legend\",f:[\"Whatâ€™s new\"]},\" \",{t:4,r:\"announcements\",f:[{t:7,p:[48,7,1707],e:\"div\",a:{\"class\":[\"m-support__entry \",{t:4,n:50,x:{r:[\"entry\",\"entry.entry_id\",\"./entry_id\"],s:\"_0&&_1==_2\"},f:[\"is-active\"],p:[48,36,1736]}]},v:{click:{m:\"openEntry\",a:{r:[\".\"],s:\"[_0]\"}}},f:[{t:7,p:[49,9,1838],e:\"a\",f:[{t:4,n:50,r:\"isNew\",f:[{t:7,p:[51,13,1878],e:\"res-badge\",a:{size:\"smallest\",design:\"grass\"},f:[\"New\"]}],p:[50,11,1852]},\" \",{t:3,r:\"title\",p:[53,11,1964]}]},\" \",{t:4,n:50,r:\"blurb\",f:[{t:7,p:[55,22,2010],e:\"p\",f:[{t:3,r:\"blurb\",p:[55,25,2013]}]}],p:[55,9,1997]}]}],p:[47,5,1682]}]}],p:[44,1,1561]},{t:7,p:[61,1,2095],e:\"p\",a:{\"class\":\"m-support__feedback\"},f:[\"You can also \",{t:7,p:[61,45,2139],e:\"a\",a:{type:\"button\"},v:{click:{m:\"openFeedback\",a:{r:[],s:\"[]\"}}},f:[\"contact us\"]},\".\"]}]};\nmodule.exports = Ractive.extend(component.exports);\n"],"sourceRoot":""}